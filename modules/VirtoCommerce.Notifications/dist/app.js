!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){i(1),i(2),i(3),i(4),i(5),i(6),i(7),i(8),i(9),i(10),i(11),i(12),i(13),i(14),i(15),i(16),t.exports=i(17)},function(t,e){void 0!==AppDependencies&&AppDependencies.push("virtoCommerce.notificationsModule"),angular.module("virtoCommerce.notificationsModule",["textAngular"]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("workspace.notificationsModule",{url:"/notifications?objectId&objectTypeId",templateUrl:"$(Platform)/Scripts/common/templates/home.tpl.html",controller:["$scope","platformWebApp.bladeNavigationService",function(t,e){e.showBlade({id:"notifications",title:"platform.menu.notifications",subtitle:"platform.blades.notifications-menu.subtitle",controller:"virtoCommerce.notificationsModule.notificationsMenuController",template:"Modules/$(virtoCommerce.Notifications)/Scripts/blades/notifications-menu.tpl.html",isClosingDisabled:!0})}]})}]).factory("virtoCommerce.notificationsModule.predefinedSearchFilters",["$localStorage",function(t){return t.notificationsJournalSearchFilters=t.notificationsJournalSearchFilters||[],{register:function(e,i,n){_.each(n,(function(n){var o=_.find(t.notificationsJournalSearchFilters,(function(t){return t.id==n.id}));o?o&&(!o.lastUpdateTime||o.lastUpdateTime<e)&&angular.copy(n,o):(!t[i]||t[i]<e)&&t.notificationsJournalSearchFilters.splice(0,0,n)})),t[i]=e}}}]).run(["platformWebApp.mainMenuService","platformWebApp.widgetService","$state","virtoCommerce.notificationsModule.notificationTypesResolverService","virtoCommerce.notificationsModule.notificationTemplatesResolverService","$http","$compile","virtoCommerce.notificationsModule.predefinedSearchFilters",function(t,e,i,n,o,a,r,l){var c={path:"browse/notificationsModule",icon:"fa fa-envelope",title:"Notifications",priority:7,action:function(){i.go("workspace.notificationsModule")},permission:"notifications:access"};t.addMenuItem(c),e.registerWidget({controller:"virtoCommerce.notificationsModule.notificationsTemplatesWidgetController",template:"Modules/$(VirtoCommerce.Notifications)/Scripts/widgets/notificationsTemplatesWidget.tpl.html"},"notificationsDetail"),e.registerWidget({controller:"virtoCommerce.notificationsModule.notificationsLogWidgetController",template:"Modules/$(VirtoCommerce.Notifications)/Scripts/widgets/notificationsLogWidget.tpl.html"},"notificationsDetail"),e.registerWidget({controller:"virtoCommerce.notificationsModule.notificationsAttachmentsWidgetController",template:"Modules/$(VirtoCommerce.Notifications)/Scripts/widgets/notificationsAttachmentsWidget.tpl.html"},"notificationsDetail"),n.registerType({type:"EmailNotification",icon:"fa fa-envelope",detailBlade:{template:"Modules/$(VirtoCommerce.Notifications)/Scripts/blades/notification-details.tpl.html",controller:"virtoCommerce.notificationsModule.notificationsEditController"},knownChildrenTypes:["Email","Sms"]}),n.registerType({type:"SmsNotification",icon:"fa fa-comment",detailBlade:{template:"Modules/$(VirtoCommerce.Notifications)/Scripts/blades/notification-sms-details.tpl.html",controller:"virtoCommerce.notificationsModule.notificationsEditController"},knownChildrenTypes:["Email","Sms"]}),o.registerTemplate({type:"EmailNotification",icon:"fa fa-envelope",detailBlade:{template:"Modules/$(VirtoCommerce.Notifications)/Scripts/blades/notifications-edit-template.tpl.html"},knownChildrenTypes:["Email","Sms"]}),o.registerTemplate({type:"SmsNotification",icon:"fa fa-comment",detailBlade:{template:"Modules/$(VirtoCommerce.Notifications)/Scripts/blades/notifications-edit-template.tpl.html"},knownChildrenTypes:["Email","Sms"]}),l.register(1485892981,"notificationsJournalSearchFiltersDate",[{name:"notifications.blades.notifications-journal.labels.filter-new"},{keyword:"isActive:true, isSuccessSend:false",id:2,name:"notifications.blades.notifications-journal.labels.filter-only-pending"},{keyword:"isActive:false, isSuccessSend:false",id:1,name:"notifications.blades.notifications-journal.labels.filter-with-errors"}]),a.get("Modules/$(VirtoCommerce.Notifications)/Scripts/directives/itemSearch.tpl.html").then((function(t){r(t.data)}))}])},function(t,e){angular.module("virtoCommerce.notificationsModule").controller("virtoCommerce.notificationsModule.filterJournalDetailController",["$scope","$localStorage","$translate",function(t,e,i){var n,o=t.blade;function a(t){o.currentEntity=angular.copy(t),o.origEntity=t,o.isLoading=!1,o.title=o.isNew?"notifications.blades.filter-detail.new-title":t.name,o.subtitle=o.isNew?"notifications.blades.filter-detail.new-subtitle":"notifications.blades.filter-detail.subtitle"}t.setForm=function(t){n=t},t.saveChanges=function(){o.currentEntity.lastUpdateTime=(new Date).getTime(),angular.copy(o.currentEntity,o.origEntity),o.isNew&&(e.notificationsJournalSearchFilters.splice(0,0,o.origEntity),e.notificationsJournalSearchFilterId=o.origEntity.id,o.parentBlade.filter.current=o.origEntity,o.isNew=!1),a(o.origEntity),o.parentBlade.filter.change(!0)},o.headIcon="fa fa-filter",o.toolbarCommands=[{name:"core.commands.apply-filter",icon:"fa fa-filter",executeMethod:function(){t.saveChanges()},canExecuteMethod:function(){return n&&n.$valid}},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(o.origEntity,o.currentEntity)},canExecuteMethod:function(){return!angular.equals(o.currentEntity,o.origEntity)}},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){o.parentBlade.filter.current=null,e.notificationsJournalSearchFilters.splice(e.notificationsJournalSearchFilters.indexOf(o.origEntity),1),delete e.notificationsJournalSearchFilterId,o.parentBlade.filter.change()},canExecuteMethod:function(){return!o.isNew}}],o.isNew?i("notifications.blades.notifications-journal.labels.unnamed-filter").then((function(t){a({id:(new Date).getTime(),name:t})})):a(o.data)}])},function(t,e){angular.module("virtoCommerce.notificationsModule").controller("virtoCommerce.notificationsModule.notificationsEditController",["$scope","$filter","virtoCommerce.notificationsModule.notificationsModuleApi","platformWebApp.bladeNavigationService",function(t,e,i,n){t.setForm=function(e){t.formScope=e};var o=t.blade;function a(t){return _.map(t,(function(t){return{value:t}}))}function r(t){return t?_(t).pluck("value"):t}function l(){return(!angular.equals(o.origEntity,o.currentEntity)||o.isNew)&&o.hasUpdatePermission()}function c(){return l()&&t.isValid}o.updatePermission="notifications:update",o.parametersForTemplate=[],t.isValid=!1,o.initialize=function(){o.isLoading=!0,i.getNotificationByType({type:o.type,tenantId:o.tenantId,tenantType:o.tenantType},(function(i){o.isLoading=!1,function(i){o.currentEntity=angular.copy(i),function(t){return t.tenantIdentity.isEmpty&&o.tenantId&&o.tenantType}(o.currentEntity)&&(o.currentEntity.tenantIdentity={id:o.tenantId,type:o.tenantType});o.currentEntity.cc=a(o.currentEntity.cc),o.currentEntity.bcc=a(o.currentEntity.bcc),_.map(o.currentEntity.templates,(function(t){return t.createdDateAsString=e("date")(t.createdDate,"yyyy-MM-dd"),t.modifiedDateAsString=e("date")(t.modifiedDate,"yyyy-MM-dd"),t})),o.currentEntity.templates||(o.currentEntity.templates=[]);o.origEntity=angular.copy(o.currentEntity),t.isValid=!1}(i)}))},o.updateNotification=function(){o.isLoading=!0,o.currentEntity.cc=r(o.currentEntity.cc),o.currentEntity.bcc=r(o.currentEntity.bcc);var t=angular.copy(o.currentEntity);t.templates=_.filter(o.currentEntity.templates,{isReadonly:!1}),t.templates.forEach(t=>{t.isEdited&&t.isPredefined&&(t.isPredefined=!1)}),i.updateNotification({type:o.type},t,(function(){o.isLoading=!1,o.origEntity=angular.copy(o.currentEntity),o.parentBlade.refresh(),n.closeBlade(o)}))},t.blade.toolbarCommands=[{name:"platform.commands.save",icon:"fas fa-save",executeMethod:o.updateNotification,canExecuteMethod:c,permission:o.updatePermission},{name:"platform.commands.undo",icon:"fa fa-undo",executeMethod:function(){o.currentEntity=angular.copy(o.origEntity)},canExecuteMethod:l,permission:o.updatePermission}],t.editorOptions={lineWrapping:!0,lineNumbers:!0,parserfile:"liquid.js",extraKeys:{"Ctrl-Q":function(t){t.foldCode(t.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],onLoad:function(t){t},mode:"liquid-html"},t.$watch("blade.currentEntity",(function(){t.isValid=t.formScope&&t.formScope.$valid}),!0),o.onClose=function(t){n.showConfirmationIfNeeded(l(),c(),o,o.updateNotification,t,"notifications.dialogs.notification-details-save.title","notifications.dialogs.notification-details-save.message")},o.headIcon="fa fa-envelope",o.initialize()}])},function(t,e){angular.module("virtoCommerce.notificationsModule").controller("virtoCommerce.notificationsModule.notificationJournalDetailsController",["$scope","virtoCommerce.notificationsModule.notificationsModuleApi","platformWebApp.bladeNavigationService",function(t,e,i){var n=t.blade;n.initialize=function(){e.getNotificationJournalDetails({id:n.currentNotificationId},(function(t){n.currentEntity=t,n.isLoading=!1}),(function(e){i.setError("Error "+e.status,t.blade)}))},n.initialize()}])},function(t,e){angular.module("virtoCommerce.notificationsModule").controller("virtoCommerce.notificationsModule.notificationTemplatesListController",["$scope","$translate","virtoCommerce.notificationsModule.notificationTemplatesResolverService","platformWebApp.bladeNavigationService","platformWebApp.dialogService","platformWebApp.settings","platformWebApp.uiGridHelper","platformWebApp.bladeUtils",function(t,e,i,n,o,a,r,l){t.uiGridConstants=r.uiGridConstants;var c=t.blade;function s(t){var e=i.resolve(t);if(e&&e.knownChildrenTypes&&e.knownChildrenTypes.length)return e;o.showNotificationDialog({id:"error",title:"notifications.dialogs.unknown-kind.title",message:"notifications.dialogs.unknown-kind.message",messageValues:{kind:t}})}c.selectedLanguage=null,c.languages||a.getValues({id:"VirtoCommerce.Notifications.General.Languages"},(function(t){c.languages=t})),c.initialize=function(){var t,e,i;c.currentEntities=(t=c.currentEntity.templates,e=_.groupBy(t,(function(t){return t.languageCode||null})),i=_.each(e,(function(t,e,i){_.any(t,(function(t){return t.isPredefined}))&&_.each(t,(function(t){t.isPredefined||(t.isPredefined=!0,t.isEdited=!0)}));var n=_.sortBy(t,(function(t){return!t.isEdited}))[0];i[e]=n})),_.toArray(i)),c.isLoading=!1},c.openTemplate=function(t){var i=s(c.currentEntity.kind);if(i){var o={id:i.detailBlade.id,title:"notifications.blades.notifications-edit-template.title",titleValues:{displayName:e.instant("notificationTypes."+c.currentEntity.type+".displayName")},notification:c.currentEntity,languageCode:t.languageCode,editedTemplate:t,isNew:!1,isFirst:!1,languages:c.languages,tenantId:c.tenantId,tenantType:c.tenantType,controller:i.detailBlade.controller,template:i.detailBlade.template,kind:c.currentEntity.kind};n.showBlade(o,c)}},c.setSelectedNode=function(e){t.selectedNodeId=e.id},t.selectNode=function(t){c.setSelectedNode(t),c.selectedType=t,c.openTemplate(t)},c.toolbarCommands=[{name:"platform.commands.add",icon:"fas fa-plus",executeMethod:function(){var t=s(c.currentEntity.kind);if(t){var i={id:t.detailBlade.id,title:"notifications.blades.notifications-edit-template.title-new",titleValues:{displayName:e.instant("notificationTypes."+c.currentEntity.type+".displayName")},notification:c.currentEntity,tenantId:c.tenantId,tenantType:c.tenantType,isNew:!0,isFirst:!1,languages:c.languages,controller:t.detailBlade.controller,template:t.detailBlade.template};n.showBlade(i,c)}},canExecuteMethod:function(){return!0},permission:"notifications:template:create"},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){!function(t){if(_.any(t,(function(t){return!t.languageCode||t.isPredefined})))o.showNotificationDialog({id:"error",title:"notifications.dialogs.notification-template-delete-notification.title",message:"notifications.dialogs.notification-template-delete-notification.message"});else{var e={id:"confirmDeleteItem",title:"notifications.dialogs.notification-template-delete.title",message:"notifications.dialogs.notification-template-delete.message",callback:function(e){e&&n.closeChildrenBlades(c,(function(){_.each(t,(function(t){var e=c.currentEntity.templates.findIndex((function(e){return e.languageCode===t.languageCode}));e>-1&&c.currentEntity.templates.splice(e,1)})),c.initialize()}))}};o.showConfirmationDialog(e)}}(t.gridApi.selection.getSelectedRows())},canExecuteMethod:function(){return t.gridApi&&_.any(t.gridApi.selection.getSelectedRows())},permission:"notifications:template:delete"}],t.setGridOptions=function(e){r.initialize(t,e,(function(e){t.gridApi=e,r.bindRefreshOnSortChanged(t)})),l.initializePagination(t)},c.initialize()}])},function(t,e){angular.module("virtoCommerce.notificationsModule").controller("virtoCommerce.notificationsModule.editTemplateController",["$rootScope","$scope","$timeout","$localStorage","virtoCommerce.notificationsModule.notificationsModuleApi","FileUploader","platformWebApp.bladeNavigationService","platformWebApp.dialogService",function(t,e,i,n,o,a,r,l){var c,s,d=e.blade;function u(t){var i={id:"confirmResetTemplates",template:t,callback:function(i){i&&function(t){var i=d.notification.templates.findIndex((function(e){return e.languageCode==t.languageCode&&e.isPredefined==t.isPredefined&&e.isEdited==t.isEdited}));i>-1&&d.notification.templates.splice(i,1);d.parentBlade.initialize(),e.bladeClose()}(t)}};l.showDialog(i,"Modules/$(VirtoCommerce.Notifications)/Scripts/blades/notification-templates-list-reset-dialog.tpl.html","platformWebApp.confirmDialogController")}e.isValid=!1,e.setForm=function(t){c=t},d.dynamicProperties="",e.saveChanges=function(){!function(){var t=new Date,e=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2);d.isNew?(d.currentEntity.createdDateAsString=e,d.currentEntity.isReadonly=!1,d.currentEntity.id=d.currentEntity.languageCode?null:d.currentEntity.id,d.origEntity=angular.copy(d.currentEntity)):(d.currentEntity.modifiedDateAsString=e,d.origEntity=angular.copy(d.currentEntity));var i=_.filter(d.notification.templates,(function(t){return t.languageCode==d.currentEntity.languageCode}));_.any(i,(function(t){return t.isPredefined}))?(d.currentEntity.isPredefined=!0,d.currentEntity.isEdited=!0):d.currentEntity.isPredefined=!1;var n=d.notification.templates.findIndex((function(t){return t.languageCode==d.currentEntity.languageCode&&t.isPredefined==d.currentEntity.isPredefined&&t.isEdited==d.currentEntity.isEdited}));n>=0?d.notification.templates[n]=d.currentEntity:d.notification.templates.push(d.currentEntity)}(),d.parentBlade.initialize(),e.bladeClose()};function f(){return(!angular.equals(d.origEntity,d.currentEntity)||d.isNew)&&d.hasUpdatePermission()}e.fileUploader=new a({url:"api/assets?folderUrl=cms-content/image/assets",headers:{Accept:"application/json"},autoUpload:!0,removeAfterUpload:!0,onBeforeUploadItem:function(t){d.isLoading=!0},onSuccessItem:function(t,i,n,o){e.$broadcast("filesUploaded",{items:i})},onErrorItem:function(t,e,i,n){r.setError(t._file.name+" failed: "+(e.message?e.message:i),d)},onCompleteAll:function(){d.isLoading=!1}}),d.initialize=function(){d.isLoading=!0;var t=d.editedTemplate||_.find(d.notification.templates,(function(t){return t.languageCode===d.languageCode}));t&&(d.currentEntity=angular.copy(t),d.origEntity=angular.copy(d.currentEntity),d.orightml=d.currentEntity.body),d.currentEntity||(d.currentEntity={kind:d.notification.kind}),d.isLoading=!1,d.currentEntity&&void 0===d.currentEntity.languageCode&&(d.currentEntity.languageCode=null),i((function(){s&&(s.refresh(),s.focus()),d.origEntity=angular.copy(d.currentEntity)}),1),e.isValid=!1},d.renderTemplate=function(){var t={id:"renderTemplate",title:"notifications.blades.notifications-template-render.title",subtitle:"notifications.blades.notifications-template-render.subtitle",subtitleValues:{type:d.notificationType},notification:d.notification,tenantId:d.tenantId,tenantType:d.tenantType,currentEntity:d.currentEntity,languageCode:d.currentEntity.languageCode,controller:"virtoCommerce.notificationsModule.templateRenderController",template:"Modules/$(VirtoCommerce.Notifications)/Scripts/blades/notifications-template-render.tpl.html"};r.showBlade(t,d)},e.blade.toolbarCommands=[{name:"platform.commands.preview",icon:"fa fa-eye",executeMethod:function(){d.renderTemplate()},canExecuteMethod:function(){return!f()},permission:"notifications:templates:read"},{name:"notifications.commands.restore",icon:"fa fa-history",executeMethod:function(){u(d.currentEntity)},canExecuteMethod:function(){return d.currentEntity.isPredefined&&d.currentEntity.isEdited},permission:"notifications:template:delete"}],e.$watch("blade.currentEntity",(function(){e.isValid=f()&&c&&c.$valid&&!d.origEntity.isReadonly}),!0),d.headIcon="fa fa-envelope",d.initialize()}])},function(t,e){angular.module("virtoCommerce.notificationsModule").controller("virtoCommerce.notificationsModule.notificationsJournalController",["$scope","$translate","platformWebApp.bladeNavigationService","virtoCommerce.notificationsModule.notificationsModuleApi","platformWebApp.bladeUtils","platformWebApp.dialogService","uiGridConstants","platformWebApp.uiGridHelper",function(t,e,i,n,o,a,r,l){var c=t.blade;t.uiGridConstants=r;var s=c.filter={keyword:c.filterKeyword};s.criteriaChanged=function(){s.keyword&&c.refresh()},c.refresh=function(){var e={objectIds:c.objectId?[c.objectId]:void 0,objectType:c.objectType,keyword:s.keyword?s.keyword:void 0,sort:l.getSortExpression(t),skip:(t.pageSettings.currentPage-1)*t.pageSettings.itemsPerPageCount,take:t.pageSettings.itemsPerPageCount,notificationType:c.notificationType};n.getNotificationJournalList(e,(function(e){c.currentEntities=e.results,t.pageSettings.totalItems=e.totalCount,c.isLoading=!1}))},t.selectNode=function(n){t.selectedNodeId=n.id;var o={id:"notificationDetails",title:n.subject,subtitle:"notifications.blades.notification-journal-details.subtitle",subtitleValues:{displayName:e.instant(n.displayName)},currentNotificationId:n.id,currentEntity:n,controller:"virtoCommerce.notificationsModule.notificationJournalDetailsController",template:"Modules/$(VirtoCommerce.Notifications)/Scripts/blades/notification-journal-details.tpl.html"};i.showBlade(o,c)},t.stopNotifications=function(t){c.isLoading=!0,n.stopSendingNotifications(_.pluck(t,"id"),c.refresh)},c.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:c.refresh,canExecuteMethod:function(){return!0}},{name:"notifications.blades.notifications-journal.labels.resend-messages",icon:"fa fa-repeat",executeMethod:function(){var t=c.$scope.gridApi.grid.rows.filter(t=>t.isSelected).map(t=>t.entity.id);n.resendNotifications(t,(function(){c.refresh()}))},canExecuteMethod:function(){return void 0!==c.$scope.gridApi&&c.$scope.gridApi.grid.rows.filter(t=>t.isSelected).length>0},permission:"notifications:update"}],t.setGridOptions=function(e){l.initialize(t,e,(function(e){t.gridApi=e,l.bindRefreshOnSortChanged(t)})),o.initializePagination(t)}}])},function(t,e){angular.module("virtoCommerce.notificationsModule").controller("virtoCommerce.notificationsModule.notificationsListController",["$scope","$translate","virtoCommerce.notificationsModule.notificationsModuleApi","virtoCommerce.notificationsModule.notificationTypesResolverService","platformWebApp.dialogService","platformWebApp.bladeUtils","platformWebApp.uiGridHelper","platformWebApp.ui-grid.extension","platformWebApp.settings","platformWebApp.i18n","platformWebApp.authService",function(t,e,i,n,o,a,r,l,c,s,d){t.uiGridConstants=r.uiGridConstants;var u=t.blade;u.title="Notifications",u.selectedType=null,u.currentLanguage=s.getLanguage();var f=a.bladeNavigationService,p=t.filter={};p.criteriaChanged=function(){null===p.keyword&&(u.name=void 0),t.pageSettings.currentPage>1?t.pageSettings.currentPage=1:u.refresh()},u.refresh=function(){var e={keyword:p.keyword?p.keyword:void 0,sort:r.getSortExpression(t),skip:(t.pageSettings.currentPage-1)*t.pageSettings.itemsPerPageCount,take:t.pageSettings.itemsPerPageCount,responseGroup:"Default"};i.getNotificationList(e,(function(e){u.isLoading=!1,t.pageSettings.totalItems=e.totalCount,t.listEntries=e.results?e.results:[],_.map(t.listEntries,(function(t){var e=n.resolve(t.kind);return e&&(t.icon=e.icon),t}))}))},d.checkPermission("notifications:access")&&(u.editNotification=function(t){var i=function(t){var e=n.resolve(t);if(e&&e.knownChildrenTypes&&e.knownChildrenTypes.length)return e;o.showNotificationDialog({id:"error",title:"notifications.dialogs.unknown-kind.title",message:"notifications.dialogs.unknown-kind.message",messageValues:{kind:t}})}(t.kind),a={id:"editNotification",title:"notifications.blades.notification-details.title",titleValues:{displayName:e.instant("notificationTypes."+t.type+".displayName")},type:t.type,tenantId:u.tenantId,tenantType:u.tenantType,controller:i.detailBlade.controller,template:i.detailBlade.template};f.showBlade(a,u)}),u.setSelectedNode=function(e){t.selectedNodeId=e.type},t.selectNode=function(t){u.setSelectedNode(t),u.selectedType=t,u.editNotification(t)},t.setGridOptions=function(e,i){t.gridOptions=i,l.tryExtendGridOptions(e,i),i.onRegisterApi=function(e){t.gridApi=e},a.initializePagination(t)},u.headIcon="fa fa-list"}])},function(t,e){angular.module("virtoCommerce.notificationsModule").controller("virtoCommerce.notificationsModule.notificationsMenuController",["$scope","$stateParams","platformWebApp.bladeNavigationService",function(t,e,i){var n=t.blade;n.updatePermission="notifications:read",n.openBlade=function(o){if(n.hasUpdatePermission()){t.selectedNodeId=o.id;var a=e.objectId,r=e.objectTypeId,l={id:"notificationsList",title:o.name,tenantId:a,tenantType:r,subtitle:o.subtitle,controller:"virtoCommerce.notificationsModule."+o.controllerName,template:"Modules/$(VirtoCommerce.Notifications)/Scripts/blades/"+o.templateName+".tpl.html"};i.showBlade(l,n)}},n.headIcon="fa fa-envelope",n.currentEntities=[{id:"1",name:"notifications.blades.notifications-list.title",templateName:"notifications-list",controllerName:"notificationsListController",icon:"fa fa-list",subtitle:"notifications.blades.notifications-list.subtitle"},{id:"2",name:"notifications.blades.notifications-journal.title",templateName:"notifications-journal",controllerName:"notificationsJournalController",icon:"fa fa-book",subtitle:"notifications.blades.notifications-journal.subtitle"}],n.isLoading=!1}])},function(t,e){angular.module("virtoCommerce.notificationsModule").controller("virtoCommerce.notificationsModule.templateRenderController",["$rootScope","$scope","$localStorage","platformWebApp.bladeNavigationService","platformWebApp.dialogService","virtoCommerce.notificationsModule.notificationsModuleApi",function(t,e,i,n,o,a){var r,l=e.blade;function c(t){return t?_(t).pluck("value"):t}l.dynamicProperties="",l.originHtml="",e.setForm=function(t){e.formScope=t},l.initialize=function(){l.isLoading=!0,l.isRender=!1;var t=l.languageCode?l.languageCode:"default",e=angular.copy(l.notification);e.cc=c(e.cc),e.bcc=c(e.bcc),r=l.tenantType+"."+l.notification.type+"."+t;var n=i[r];n&&(l.notification.context=n),a.renderTemplate({type:l.notification.type,language:t},{text:l.currentEntity.body,data:e},(function(t){l.originHtml=t.html})),l.isLoading=!1},l.headIcon="fa fa-eye",l.initialize()}])},function(t,e){angular.module("virtoCommerce.notificationsModule").directive("vcJournalSearch",["$localStorage","platformWebApp.bladeNavigationService","virtoCommerce.notificationsModule.predefinedSearchFilters",function(t,e,i){return{restrict:"E",templateUrl:function(t,e){return e.templateUrl||"notificationsJournal-itemSearch-default.html"},scope:{blade:"="},link:function(i){var n=i.blade;i.$localStorage=t;var o=i.filter=n.filter;function a(t){var i={id:"filterDetail",controller:"virtoCommerce.notificationsModule.filterJournalDetailController",template:"Modules/$(VirtoCommerce.Notifications)/Scripts/blades/filter-detail.tpl.html"};angular.extend(i,t),e.showBlade(i,n)}t.notificationsJournalSearchFilterId&&!o.keyword&&null!==o.keyword&&(o.current=_.findWhere(t.notificationsJournalSearchFilters,{id:t.notificationsJournalSearchFilterId}),o.keyword=o.current?o.current.keyword:""),o.change=function(i){t.notificationsJournalSearchFilterId=o.current?o.current.id:null,o.current&&!o.current.id?(o.current=null,a({isNew:!0})):(i||e.closeBlade({id:"filterJournalDetail"}),o.keyword=o.current?o.current.keyword:"",o.criteriaChanged())},o.edit=function(t,e){o.current=e,a({data:e})}}}}])},function(t,e){angular.module("virtoCommerce.notificationsModule").factory("virtoCommerce.notificationsModule.notificationsModuleApi",["$resource",function(t){return t("api/notifications/:id",{id:"@Id"},{getNotificationList:{method:"POST",url:"api/notifications"},getNotificationByType:{method:"GET",url:"api/notifications/:type"},updateNotification:{method:"PUT",url:"api/notifications/:type"},getTemplates:{method:"GET",url:"api/notifications/:type/templates",isArray:!0},getTemplateById:{method:"GET",url:"api/notifications/:type/templates/:id"},getTemplate:{method:"GET",url:"api/notifications/:type/:language/templates"},createTemplate:{method:"POST",url:"api/notifications/:type/templates"},updateTemplate:{method:"PUT",url:"api/notifications/:type/templates/:id"},renderTemplate:{method:"POST",url:"api/notifications/:type/templates/:language/rendercontent"},getNotificationJournalList:{method:"POST",url:"api/notifications/journal"},getNotificationJournalDetails:{method:"GET",url:"api/notifications/journal/:id"},resendNotifications:{method:"POST",url:"api/notifications/scheduleresend"}})}])},function(t,e){angular.module("virtoCommerce.notificationsModule").factory("virtoCommerce.notificationsModule.notificationTypesResolverService",(function(){return{objects:[],registerType:function(t){t.detailBlade=angular.extend({id:"editNotification",metaFields:[],controller:t.detailBlade.controller,notificationTypeDefinition:t},t.detailBlade),t.knownChildrenTypes=t.knownChildrenTypes||[],this.objects.push(t)},resolve:function(t){return _.findWhere(this.objects,{type:t})}}})).factory("virtoCommerce.notificationsModule.notificationTemplatesResolverService",(function(){return{objects:[],registerTemplate:function(t){t.detailBlade=angular.extend({id:"editTemplate",metaFields:[],controller:"virtoCommerce.notificationsModule.editTemplateController",notificationTypeDefinition:t},t.detailBlade),t.knownChildrenTypes=t.knownChildrenTypes||[],this.objects.push(t)},resolve:function(t){return _.findWhere(this.objects,{type:t})}}}))},function(t,e){angular.module("virtoCommerce.notificationsModule").controller("virtoCommerce.notificationsModule.notificationsAttachmentsWidgetController",["$scope","platformWebApp.bladeNavigationService",function(t,e){t.widget.blade.showAttachments=function(){}}])},function(t,e){angular.module("virtoCommerce.notificationsModule").controller("virtoCommerce.notificationsModule.notificationsLogWidgetController",["$scope","platformWebApp.bladeNavigationService",function(t,e){var i=t.widget.blade;i.showLog=function(){var t={id:"notificationAttachmentsWidgetChild",title:"notifications.widgets.notificationsLogWidget.blade-title",titleValues:{id:i.currentEntity.id},notificationType:i.currentEntity.type,languages:i.currentEntity.languages,subtitle:"notifications.widgets.notificationsLogWidget.blade-subtitle",controller:"virtoCommerce.notificationsModule.notificationsJournalController",template:"Modules/$(VirtoCommerce.Notifications)/Scripts/blades/notifications-journal.tpl.html"};e.showBlade(t,i)}}])},function(t,e){angular.module("virtoCommerce.notificationsModule").controller("virtoCommerce.notificationsModule.notificationsTemplatesWidgetController",["$scope","$translate","platformWebApp.bladeNavigationService",function(t,e,i){var n=t.widget.blade;t.templatesCount="...",t.$watchCollection("blade.currentEntity.templates",(function(e){e&&(t.templatesCount=_.uniq(e,(function(t){return t.languageCode||null})).length)})),n.showTemplates=function(){var t={id:"notificationTemplatesWidgetChild",title:"notifications.widgets.notificationsTemplatesWidget.blade-title",titleValues:{displayName:e.instant("notificationTypes."+n.currentEntity.type+".displayName")},tenantId:n.currentEntity.tenantId,tenantType:n.currentEntity.tenantType,currentEntity:n.currentEntity,subtitle:"notifications.widgets.notificationsTemplatesWidget.blade-subtitle",controller:"virtoCommerce.notificationsModule.notificationTemplatesListController",template:"Modules/$(VirtoCommerce.Notifications)/Scripts/blades/notification-templates-list.tpl.html"};i.showBlade(t,n)}}])},function(t,e,i){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLk5vdGlmaWNhdGlvbnMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Ob3RpZmljYXRpb25zLy4vU2NyaXB0cy9ub3RpZmljYXRpb25zLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucy8uL1NjcmlwdHMvYmxhZGVzL2ZpbHRlci1kZXRhaWwuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Ob3RpZmljYXRpb25zLy4vU2NyaXB0cy9ibGFkZXMvbm90aWZpY2F0aW9uLWRldGFpbHMuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Ob3RpZmljYXRpb25zLy4vU2NyaXB0cy9ibGFkZXMvbm90aWZpY2F0aW9uLWpvdXJuYWwtZGV0YWlscy5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLk5vdGlmaWNhdGlvbnMvLi9TY3JpcHRzL2JsYWRlcy9ub3RpZmljYXRpb24tdGVtcGxhdGVzLWxpc3QuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Ob3RpZmljYXRpb25zLy4vU2NyaXB0cy9ibGFkZXMvbm90aWZpY2F0aW9ucy1lZGl0LXRlbXBsYXRlLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucy8uL1NjcmlwdHMvYmxhZGVzL25vdGlmaWNhdGlvbnMtam91cm5hbC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLk5vdGlmaWNhdGlvbnMvLi9TY3JpcHRzL2JsYWRlcy9ub3RpZmljYXRpb25zLWxpc3QuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Ob3RpZmljYXRpb25zLy4vU2NyaXB0cy9ibGFkZXMvbm90aWZpY2F0aW9ucy1tZW51LmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucy8uL1NjcmlwdHMvYmxhZGVzL25vdGlmaWNhdGlvbnMtdGVtcGxhdGUtcmVuZGVyLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucy8uL1NjcmlwdHMvZGlyZWN0aXZlcy9pdGVtU2VhcmNoLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucy8uL1NjcmlwdHMvcmVzb3VyY2VzL25vdGlmaWNhdGlvbnNNb2R1bGVBcGkuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Ob3RpZmljYXRpb25zLy4vU2NyaXB0cy9zZXJ2aWNlcy9ub3RpZmljYXRpb25UeXBlc1Jlc29sdmVyLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucy8uL1NjcmlwdHMvd2lkZ2V0cy9ub3RpZmljYXRpb25zQXR0YWNobWVudHNXaWRnZXQuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Ob3RpZmljYXRpb25zLy4vU2NyaXB0cy93aWRnZXRzL25vdGlmaWNhdGlvbnNMb2dXaWRnZXQuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Ob3RpZmljYXRpb25zLy4vU2NyaXB0cy93aWRnZXRzL25vdGlmaWNhdGlvbnNUZW1wbGF0ZXNXaWRnZXQuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ1bmRlZmluZWQiLCJBcHBEZXBlbmRlbmNpZXMiLCJwdXNoIiwiYW5ndWxhciIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJibGFkZU5hdmlnYXRpb25TZXJ2aWNlIiwic2hvd0JsYWRlIiwiaWQiLCJ0aXRsZSIsInN1YnRpdGxlIiwidGVtcGxhdGUiLCJpc0Nsb3NpbmdEaXNhYmxlZCIsImZhY3RvcnkiLCIkbG9jYWxTdG9yYWdlIiwibm90aWZpY2F0aW9uc0pvdXJuYWxTZWFyY2hGaWx0ZXJzIiwicmVnaXN0ZXIiLCJjdXJyZW50RmlsdGVyc1VwZGF0ZVRpbWUiLCJjdXJyZW50RmlsdGVyc1N0b3JhZ2VLZXkiLCJuZXdGaWx0ZXJzIiwiXyIsImVhY2giLCJuZXdGaWx0ZXIiLCJmb3VuZCIsImZpbmQiLCJ4IiwibGFzdFVwZGF0ZVRpbWUiLCJjb3B5Iiwic3BsaWNlIiwicnVuIiwibWFpbk1lbnVTZXJ2aWNlIiwid2lkZ2V0U2VydmljZSIsIiRzdGF0ZSIsIm5vdGlmaWNhdGlvblR5cGVzUmVzb2x2ZXJTZXJ2aWNlIiwibm90aWZpY2F0aW9uVGVtcGxhdGVzUmVzb2x2ZXJTZXJ2aWNlIiwiJGh0dHAiLCIkY29tcGlsZSIsInByZWRlZmluZWRTZWFyY2hGaWx0ZXJzIiwibWVudUl0ZW0iLCJwYXRoIiwiaWNvbiIsInByaW9yaXR5IiwiYWN0aW9uIiwiZ28iLCJwZXJtaXNzaW9uIiwiYWRkTWVudUl0ZW0iLCJyZWdpc3RlcldpZGdldCIsInJlZ2lzdGVyVHlwZSIsInR5cGUiLCJkZXRhaWxCbGFkZSIsImtub3duQ2hpbGRyZW5UeXBlcyIsInJlZ2lzdGVyVGVtcGxhdGUiLCJrZXl3b3JkIiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsIiR0cmFuc2xhdGUiLCJmb3JtU2NvcGUiLCJibGFkZSIsImluaXRpYWxpemVCbGFkZSIsImN1cnJlbnRFbnRpdHkiLCJvcmlnRW50aXR5IiwiaXNMb2FkaW5nIiwiaXNOZXciLCJzZXRGb3JtIiwiZm9ybSIsInNhdmVDaGFuZ2VzIiwiRGF0ZSIsImdldFRpbWUiLCJub3RpZmljYXRpb25zSm91cm5hbFNlYXJjaEZpbHRlcklkIiwicGFyZW50QmxhZGUiLCJmaWx0ZXIiLCJjdXJyZW50IiwiY2hhbmdlIiwiaGVhZEljb24iLCJ0b29sYmFyQ29tbWFuZHMiLCJleGVjdXRlTWV0aG9kIiwiY2FuRXhlY3V0ZU1ldGhvZCIsIiR2YWxpZCIsImVxdWFscyIsImluZGV4T2YiLCJyZXN1bHQiLCIkZmlsdGVyIiwibm90aWZpY2F0aW9ucyIsIm1vZGlmeUVtYWlsQWRkcmVzcyIsImFkZHJlc3NlcyIsIm1hcCIsImFkZHJlc3MiLCJwbHVja0FkZHJlc3MiLCJwbHVjayIsImlzRGlydHkiLCJoYXNVcGRhdGVQZXJtaXNzaW9uIiwiY2FuU2F2ZSIsImlzVmFsaWQiLCJ1cGRhdGVQZXJtaXNzaW9uIiwicGFyYW1ldGVyc0ZvclRlbXBsYXRlIiwiaW5pdGlhbGl6ZSIsImdldE5vdGlmaWNhdGlvbkJ5VHlwZSIsInRlbmFudElkIiwidGVuYW50VHlwZSIsInRlbmFudElkZW50aXR5IiwiaXNFbXB0eSIsImlzVHJhbnNpZW50IiwiY2MiLCJiY2MiLCJ0ZW1wbGF0ZXMiLCJjcmVhdGVkRGF0ZUFzU3RyaW5nIiwiY3JlYXRlZERhdGUiLCJtb2RpZmllZERhdGVBc1N0cmluZyIsIm1vZGlmaWVkRGF0ZSIsInNldE5vdGlmaWNhdGlvbiIsInVwZGF0ZU5vdGlmaWNhdGlvbiIsImVudGl0eVRvU2F2ZSIsImlzUmVhZG9ubHkiLCJmb3JFYWNoIiwiZWxlbWVudCIsImlzRWRpdGVkIiwiaXNQcmVkZWZpbmVkIiwicmVmcmVzaCIsImNsb3NlQmxhZGUiLCJlZGl0b3JPcHRpb25zIiwibGluZVdyYXBwaW5nIiwibGluZU51bWJlcnMiLCJwYXJzZXJmaWxlIiwiZXh0cmFLZXlzIiwiY20iLCJmb2xkQ29kZSIsImdldEN1cnNvciIsImZvbGRHdXR0ZXIiLCJndXR0ZXJzIiwib25Mb2FkIiwiX2VkaXRvciIsIiR3YXRjaCIsIm9uQ2xvc2UiLCJjbG9zZUNhbGxiYWNrIiwic2hvd0NvbmZpcm1hdGlvbklmTmVlZGVkIiwiZ2V0Tm90aWZpY2F0aW9uSm91cm5hbERldGFpbHMiLCJjdXJyZW50Tm90aWZpY2F0aW9uSWQiLCJlcnJvciIsInNldEVycm9yIiwic3RhdHVzIiwiZGlhbG9nU2VydmljZSIsInNldHRpbmdzIiwidWlHcmlkSGVscGVyIiwiYmxhZGVVdGlscyIsInVpR3JpZENvbnN0YW50cyIsInJlc29sdmVUeXBlIiwia2luZCIsImZvdW5kVGVtcGxhdGUiLCJyZXNvbHZlIiwibGVuZ3RoIiwic2hvd05vdGlmaWNhdGlvbkRpYWxvZyIsIm1lc3NhZ2UiLCJtZXNzYWdlVmFsdWVzIiwic2VsZWN0ZWRMYW5ndWFnZSIsImxhbmd1YWdlcyIsImdldFZhbHVlcyIsImdyb3VwcyIsInRlbXBsYXRlc1RvRGlzcGxheSIsImN1cnJlbnRFbnRpdGllcyIsImdyb3VwQnkiLCJsYW5ndWFnZUNvZGUiLCJsYW5ndWFnZUNvZGVUZW1wbGF0ZXMiLCJvcmlnaW5hbE9iamVjdCIsImFueSIsImVmZmVjdGl2ZVRlbXBsYXRlIiwic29ydEJ5IiwidG9BcnJheSIsIm9wZW5UZW1wbGF0ZSIsIm5ld0JsYWRlIiwidGl0bGVWYWx1ZXMiLCJkaXNwbGF5TmFtZSIsImluc3RhbnQiLCJub3RpZmljYXRpb24iLCJlZGl0ZWRUZW1wbGF0ZSIsImlzRmlyc3QiLCJzZXRTZWxlY3RlZE5vZGUiLCJsaXN0SXRlbSIsInNlbGVjdGVkTm9kZUlkIiwic2VsZWN0Tm9kZSIsInNlbGVjdGVkVHlwZSIsInNlbGVjdGlvbnMiLCJpdGVtIiwiZGlhbG9nIiwiY2FsbGJhY2siLCJyZW1vdmUiLCJjbG9zZUNoaWxkcmVuQmxhZGVzIiwic2VsZWN0aW9uIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJzaG93Q29uZmlybWF0aW9uRGlhbG9nIiwiZGVsZXRlTGlzdCIsImdyaWRBcGkiLCJnZXRTZWxlY3RlZFJvd3MiLCJzZXRHcmlkT3B0aW9ucyIsImdyaWRPcHRpb25zIiwiYmluZFJlZnJlc2hPblNvcnRDaGFuZ2VkIiwiaW5pdGlhbGl6ZVBhZ2luYXRpb24iLCIkcm9vdFNjb3BlIiwiJHRpbWVvdXQiLCJGaWxlVXBsb2FkZXIiLCJjb2RlbWlycm9yRWRpdG9yIiwicmVzdG9yZVRlbXBsYXRlIiwiY29uZmlybWVkIiwiYmxhZGVDbG9zZSIsImRlbGV0ZVRlbXBsYXRlIiwic2hvd0RpYWxvZyIsImR5bmFtaWNQcm9wZXJ0aWVzIiwiZGF0ZSIsIm5vdyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJzbGljZSIsImdldERhdGUiLCJzYW1lTGFuZ3VhZ2VUZW1wbGF0ZSIsImluZCIsInNhdmVUZW1wbGF0ZSIsImZpbGVVcGxvYWRlciIsImhlYWRlcnMiLCJBY2NlcHQiLCJhdXRvVXBsb2FkIiwicmVtb3ZlQWZ0ZXJVcGxvYWQiLCJvbkJlZm9yZVVwbG9hZEl0ZW0iLCJmaWxlSXRlbSIsIm9uU3VjY2Vzc0l0ZW0iLCIkYnJvYWRjYXN0IiwiaXRlbXMiLCJvbkVycm9ySXRlbSIsIl9maWxlIiwib25Db21wbGV0ZUFsbCIsInRlbXBsIiwib3JpZ2h0bWwiLCJib2R5IiwiZm9jdXMiLCJyZW5kZXJUZW1wbGF0ZSIsInN1YnRpdGxlVmFsdWVzIiwibm90aWZpY2F0aW9uVHlwZSIsImZpbHRlcktleXdvcmQiLCJjcml0ZXJpYUNoYW5nZWQiLCJzZWFyY2hDcml0ZXJpYSIsIm9iamVjdElkcyIsIm9iamVjdElkIiwib2JqZWN0VHlwZSIsInNvcnQiLCJnZXRTb3J0RXhwcmVzc2lvbiIsInNraXAiLCJwYWdlU2V0dGluZ3MiLCJjdXJyZW50UGFnZSIsIml0ZW1zUGVyUGFnZUNvdW50IiwidGFrZSIsImdldE5vdGlmaWNhdGlvbkpvdXJuYWxMaXN0IiwicmVzdWx0cyIsInRvdGFsSXRlbXMiLCJ0b3RhbENvdW50Iiwic3ViamVjdCIsInN0b3BOb3RpZmljYXRpb25zIiwibGlzdCIsInN0b3BTZW5kaW5nTm90aWZpY2F0aW9ucyIsIm1lc3NhZ2VJZHMiLCJncmlkIiwicm93cyIsImlzU2VsZWN0ZWQiLCJlbnRpdHkiLCJyZXNlbmROb3RpZmljYXRpb25zIiwiZ3JpZE9wdGlvbkV4dGVuc2lvbiIsImkxOG4iLCJhdXRoU2VydmljZSIsImN1cnJlbnRMYW5ndWFnZSIsImdldExhbmd1YWdlIiwicmVzcG9uc2VHcm91cCIsImdldE5vdGlmaWNhdGlvbkxpc3QiLCJsaXN0RW50cmllcyIsImZvdW5kTm90aWZpY2F0aW9uIiwiY2hlY2tQZXJtaXNzaW9uIiwiZWRpdE5vdGlmaWNhdGlvbiIsImdyaWRJZCIsInRyeUV4dGVuZEdyaWRPcHRpb25zIiwib25SZWdpc3RlckFwaSIsIiRzdGF0ZVBhcmFtcyIsIm9wZW5CbGFkZSIsIm9iamVjdFR5cGVJZCIsImNvbnRyb2xsZXJOYW1lIiwidGVtcGxhdGVOYW1lIiwia2V5VGVtcGxhdGVMb2NhbFN0b3JhZ2UiLCJvcmlnaW5IdG1sIiwiaXNSZW5kZXIiLCJsYW5ndWFnZSIsIml0ZW1Gcm9tTG9jYWxTdG9yYWdlIiwiY29udGV4dCIsInRleHQiLCJodG1sIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJlbGVtIiwiYXR0cnMiLCJzY29wZSIsImxpbmsiLCJzaG93RmlsdGVyRGV0YWlsQmxhZGUiLCJibGFkZURhdGEiLCJleHRlbmQiLCJmaW5kV2hlcmUiLCJpc0RldGFpbEJsYWRlT3BlbiIsImVkaXQiLCIkZXZlbnQiLCJlbnRyeSIsIiRyZXNvdXJjZSIsIm1ldGhvZCIsImdldFRlbXBsYXRlcyIsImlzQXJyYXkiLCJnZXRUZW1wbGF0ZUJ5SWQiLCJnZXRUZW1wbGF0ZSIsImNyZWF0ZVRlbXBsYXRlIiwidXBkYXRlVGVtcGxhdGUiLCJvYmplY3RzIiwibm90aWZpY2F0aW9uVHlwZURlZmluaXRpb24iLCJtZXRhRmllbGRzIiwidGhpcyIsIndpZGdldCIsInNob3dBdHRhY2htZW50cyIsInNob3dMb2ciLCJ0ZW1wbGF0ZXNDb3VudCIsIiR3YXRjaENvbGxlY3Rpb24iLCJ1bmlxIiwic2hvd1RlbXBsYXRlcyJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVC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QUFJMUosRUFBVyxDQUNYakssR0FBSSxtQ0FDSkMsTUFBTyxpRUFDUGlLLFlBQWEsQ0FBRUMsWUFBYW5ILEVBQVdvSCxRQUFRLHFCQUF1QmxILEVBQU1FLGNBQWNaLEtBQU8saUJBQ2pHa0QsU0FBVXhDLEVBQU1FLGNBQWNzQyxTQUM5QkMsV0FBWXpDLEVBQU1FLGNBQWN1QyxXQUNoQ3ZDLGNBQWVGLEVBQU1FLGNBQ3JCbEQsU0FBVSxvRUFDVk4sV0FBWSx3RUFDWk8sU0FBVSw4RkFFZEwsRUFBdUJDLFVBQVVrSyxFQUFVL0csUSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvL0NhbGwgdGhpcyB0byByZWdpc3RlciBvdXIgbW9kdWxlIHRvIG1haW4gYXBwbGljYXRpb25cclxudmFyIG1vZHVsZVRlbXBsYXRlTmFtZSA9IFwidmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlXCI7XHJcblxyXG5pZiAoQXBwRGVwZW5kZW5jaWVzICE9PSB1bmRlZmluZWQpIHtcclxuICAgIEFwcERlcGVuZGVuY2llcy5wdXNoKG1vZHVsZVRlbXBsYXRlTmFtZSk7XHJcbn1cclxuXHJcbmFuZ3VsYXIubW9kdWxlKG1vZHVsZVRlbXBsYXRlTmFtZSwgWyd0ZXh0QW5ndWxhciddKVxyXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnd29ya3NwYWNlLm5vdGlmaWNhdGlvbnNNb2R1bGUnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL25vdGlmaWNhdGlvbnM/b2JqZWN0SWQmb2JqZWN0VHlwZUlkJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJyQoUGxhdGZvcm0pL1NjcmlwdHMvY29tbW9uL3RlbXBsYXRlcy9ob21lLnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsYWRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnbm90aWZpY2F0aW9ucycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdwbGF0Zm9ybS5tZW51Lm5vdGlmaWNhdGlvbnMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAncGxhdGZvcm0uYmxhZGVzLm5vdGlmaWNhdGlvbnMtbWVudS5zdWJ0aXRsZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25zTWVudUNvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKHZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucykvU2NyaXB0cy9ibGFkZXMvbm90aWZpY2F0aW9ucy1tZW51LnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Nsb3NpbmdEaXNhYmxlZDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKGJsYWRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIF0pXHJcbiAgICAvLyBkZWZpbmUgc2VhcmNoIGZpbHRlcnMgdG8gYmUgYWNjZXNzaWJsZSBwbGF0Zm9ybS13aWRlXHJcbiAgICAuZmFjdG9yeSgndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlLnByZWRlZmluZWRTZWFyY2hGaWx0ZXJzJywgWyckbG9jYWxTdG9yYWdlJywgZnVuY3Rpb24gKCRsb2NhbFN0b3JhZ2UpIHtcclxuICAgICAgICAkbG9jYWxTdG9yYWdlLm5vdGlmaWNhdGlvbnNKb3VybmFsU2VhcmNoRmlsdGVycyA9ICRsb2NhbFN0b3JhZ2Uubm90aWZpY2F0aW9uc0pvdXJuYWxTZWFyY2hGaWx0ZXJzIHx8IFtdO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZWdpc3RlcjogZnVuY3Rpb24gKGN1cnJlbnRGaWx0ZXJzVXBkYXRlVGltZSwgY3VycmVudEZpbHRlcnNTdG9yYWdlS2V5LCBuZXdGaWx0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBfLmVhY2gobmV3RmlsdGVycywgZnVuY3Rpb24gKG5ld0ZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IF8uZmluZCgkbG9jYWxTdG9yYWdlLm5vdGlmaWNhdGlvbnNKb3VybmFsU2VhcmNoRmlsdGVycywgZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHguaWQgPT0gbmV3RmlsdGVyLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmQgJiYgKCFmb3VuZC5sYXN0VXBkYXRlVGltZSB8fCBmb3VuZC5sYXN0VXBkYXRlVGltZSA8IGN1cnJlbnRGaWx0ZXJzVXBkYXRlVGltZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShuZXdGaWx0ZXIsIGZvdW5kKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoISRsb2NhbFN0b3JhZ2VbY3VycmVudEZpbHRlcnNTdG9yYWdlS2V5XSB8fCAkbG9jYWxTdG9yYWdlW2N1cnJlbnRGaWx0ZXJzU3RvcmFnZUtleV0gPCBjdXJyZW50RmlsdGVyc1VwZGF0ZVRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5ub3RpZmljYXRpb25zSm91cm5hbFNlYXJjaEZpbHRlcnMuc3BsaWNlKDAsIDAsIG5ld0ZpbHRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZVtjdXJyZW50RmlsdGVyc1N0b3JhZ2VLZXldID0gY3VycmVudEZpbHRlcnNVcGRhdGVUaW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKVxyXG4gICAgLnJ1bihbJ3BsYXRmb3JtV2ViQXBwLm1haW5NZW51U2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC53aWRnZXRTZXJ2aWNlJywgJyRzdGF0ZScsICd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUubm90aWZpY2F0aW9uVHlwZXNSZXNvbHZlclNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlLm5vdGlmaWNhdGlvblRlbXBsYXRlc1Jlc29sdmVyU2VydmljZScsICckaHR0cCcsICckY29tcGlsZScsICd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUucHJlZGVmaW5lZFNlYXJjaEZpbHRlcnMnLFxyXG4gICAgICAgIGZ1bmN0aW9uIChtYWluTWVudVNlcnZpY2UsIHdpZGdldFNlcnZpY2UsICRzdGF0ZSwgbm90aWZpY2F0aW9uVHlwZXNSZXNvbHZlclNlcnZpY2UsIG5vdGlmaWNhdGlvblRlbXBsYXRlc1Jlc29sdmVyU2VydmljZSwgJGh0dHAsICRjb21waWxlLCBwcmVkZWZpbmVkU2VhcmNoRmlsdGVycykge1xyXG4gICAgICAgICAgICAvL1JlZ2lzdGVyIG1vZHVsZSBpbiBtYWluIG1lbnVcclxuICAgICAgICAgICAgdmFyIG1lbnVJdGVtID0ge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogJ2Jyb3dzZS9ub3RpZmljYXRpb25zTW9kdWxlJyxcclxuICAgICAgICAgICAgICAgIGljb246ICdmYSBmYS1lbnZlbG9wZScsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJ05vdGlmaWNhdGlvbnMnLFxyXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IDcsXHJcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHsgJHN0YXRlLmdvKCd3b3Jrc3BhY2Uubm90aWZpY2F0aW9uc01vZHVsZScpOyB9LFxyXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ25vdGlmaWNhdGlvbnM6YWNjZXNzJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBtYWluTWVudVNlcnZpY2UuYWRkTWVudUl0ZW0obWVudUl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgd2lkZ2V0U2VydmljZS5yZWdpc3RlcldpZGdldCh7XHJcbiAgICAgIFx0ICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlLm5vdGlmaWNhdGlvbnNUZW1wbGF0ZXNXaWRnZXRDb250cm9sbGVyJyxcclxuICAgICAgXHQgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucykvU2NyaXB0cy93aWRnZXRzL25vdGlmaWNhdGlvbnNUZW1wbGF0ZXNXaWRnZXQudHBsLmh0bWwnXHJcbiAgICAgIFx0ICAgIH0sICdub3RpZmljYXRpb25zRGV0YWlsJyk7XHJcbiAgICAgICAgICAgIHdpZGdldFNlcnZpY2UucmVnaXN0ZXJXaWRnZXQoe1xyXG4gICAgICBcdCAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25zTG9nV2lkZ2V0Q29udHJvbGxlcicsXHJcbiAgICAgIFx0ICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk5vdGlmaWNhdGlvbnMpL1NjcmlwdHMvd2lkZ2V0cy9ub3RpZmljYXRpb25zTG9nV2lkZ2V0LnRwbC5odG1sJ1xyXG4gICAgICBcdCAgICB9LCAnbm90aWZpY2F0aW9uc0RldGFpbCcpO1xyXG4gICAgICAgICAgICB3aWRnZXRTZXJ2aWNlLnJlZ2lzdGVyV2lkZ2V0KHtcclxuICAgICAgXHQgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUubm90aWZpY2F0aW9uc0F0dGFjaG1lbnRzV2lkZ2V0Q29udHJvbGxlcicsXHJcbiAgICAgIFx0ICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk5vdGlmaWNhdGlvbnMpL1NjcmlwdHMvd2lkZ2V0cy9ub3RpZmljYXRpb25zQXR0YWNobWVudHNXaWRnZXQudHBsLmh0bWwnXHJcbiAgICAgIFx0ICAgIH0sICdub3RpZmljYXRpb25zRGV0YWlsJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyByZWdpc3RlciB0eXBlc1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25UeXBlc1Jlc29sdmVyU2VydmljZS5yZWdpc3RlclR5cGUoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ0VtYWlsTm90aWZpY2F0aW9uJyxcclxuICAgICAgICAgICAgICAgIGljb246ICdmYSBmYS1lbnZlbG9wZScsXHJcbiAgICAgICAgICAgICAgICBkZXRhaWxCbGFkZToge1xyXG4gICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk5vdGlmaWNhdGlvbnMpL1NjcmlwdHMvYmxhZGVzL25vdGlmaWNhdGlvbi1kZXRhaWxzLnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25zRWRpdENvbnRyb2xsZXInXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAga25vd25DaGlsZHJlblR5cGVzOiBbJ0VtYWlsJywgJ1NtcyddXHJcbiAgICAgICAgICAgIH0pOyBcclxuXHJcbiAgICAgICAgICAgIC8vIHJlZ2lzdGVyIHR5cGVzXHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblR5cGVzUmVzb2x2ZXJTZXJ2aWNlLnJlZ2lzdGVyVHlwZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnU21zTm90aWZpY2F0aW9uJyxcclxuICAgICAgICAgICAgICAgIGljb246ICdmYSBmYS1jb21tZW50JyxcclxuICAgICAgICAgICAgICAgIGRldGFpbEJsYWRlOiB7XHJcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucykvU2NyaXB0cy9ibGFkZXMvbm90aWZpY2F0aW9uLXNtcy1kZXRhaWxzLnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25zRWRpdENvbnRyb2xsZXInXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAga25vd25DaGlsZHJlblR5cGVzOiBbJ0VtYWlsJywgJ1NtcyddXHJcbiAgICAgICAgICAgIH0pOyBcclxuXHJcbiAgICAgICAgICAgIC8vIHJlZ2lzdGVyIHRlbXBsYXRlc1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25UZW1wbGF0ZXNSZXNvbHZlclNlcnZpY2UucmVnaXN0ZXJUZW1wbGF0ZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnRW1haWxOb3RpZmljYXRpb24nLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLWVudmVsb3BlJyxcclxuICAgICAgICAgICAgICAgIGRldGFpbEJsYWRlOiB7XHJcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucykvU2NyaXB0cy9ibGFkZXMvbm90aWZpY2F0aW9ucy1lZGl0LXRlbXBsYXRlLnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBrbm93bkNoaWxkcmVuVHlwZXM6IFsnRW1haWwnLCAnU21zJ11cclxuICAgICAgICAgICAgfSk7IFxyXG5cclxuICAgICAgICAgICAgLy8gcmVnaXN0ZXIgdGVtcGxhdGVzXHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblRlbXBsYXRlc1Jlc29sdmVyU2VydmljZS5yZWdpc3RlclRlbXBsYXRlKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdTbXNOb3RpZmljYXRpb24nLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLWNvbW1lbnQnLFxyXG4gICAgICAgICAgICAgICAgZGV0YWlsQmxhZGU6IHtcclxuICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5Ob3RpZmljYXRpb25zKS9TY3JpcHRzL2JsYWRlcy9ub3RpZmljYXRpb25zLWVkaXQtdGVtcGxhdGUudHBsLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGtub3duQ2hpbGRyZW5UeXBlczogWydFbWFpbCcsICdTbXMnXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIHByZWRlZmluZSBzZWFyY2ggZmlsdGVycyBmb3Igc2VhcmNoXHJcbiAgICAgICAgICAgIHByZWRlZmluZWRTZWFyY2hGaWx0ZXJzLnJlZ2lzdGVyKDE0ODU4OTI5ODEsICdub3RpZmljYXRpb25zSm91cm5hbFNlYXJjaEZpbHRlcnNEYXRlJywgW1xyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnbm90aWZpY2F0aW9ucy5ibGFkZXMubm90aWZpY2F0aW9ucy1qb3VybmFsLmxhYmVscy5maWx0ZXItbmV3JyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXl3b3JkOiAnaXNBY3RpdmU6dHJ1ZSwgaXNTdWNjZXNzU2VuZDpmYWxzZScsIGlkOiAyLCBuYW1lOiAnbm90aWZpY2F0aW9ucy5ibGFkZXMubm90aWZpY2F0aW9ucy1qb3VybmFsLmxhYmVscy5maWx0ZXItb25seS1wZW5kaW5nJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXl3b3JkOiAnaXNBY3RpdmU6ZmFsc2UsIGlzU3VjY2Vzc1NlbmQ6ZmFsc2UnLCBpZDogMSwgbmFtZTogJ25vdGlmaWNhdGlvbnMuYmxhZGVzLm5vdGlmaWNhdGlvbnMtam91cm5hbC5sYWJlbHMuZmlsdGVyLXdpdGgtZXJyb3JzJyB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk5vdGlmaWNhdGlvbnMpL1NjcmlwdHMvZGlyZWN0aXZlcy9pdGVtU2VhcmNoLnRwbC5odG1sJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbXBpbGUgdGhlIHJlc3BvbnNlLCB3aGljaCB3aWxsIHB1dCBzdHVmZiBpbnRvIHRoZSBjYWNoZVxyXG4gICAgICAgICAgICAgICAgJGNvbXBpbGUocmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pOyAgXHJcbiAgICB9XSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5maWx0ZXJKb3VybmFsRGV0YWlsQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhbFN0b3JhZ2UnLCAnJHRyYW5zbGF0ZScsXG4gICAgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2FsU3RvcmFnZSwgJHRyYW5zbGF0ZSkge1xuICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgICAgIHZhciBmb3JtU2NvcGU7XG4gICAgICAgICRzY29wZS5zZXRGb3JtID0gZnVuY3Rpb24gKGZvcm0pIHsgZm9ybVNjb3BlID0gZm9ybTsgfTtcbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVCbGFkZShkYXRhKSB7XG4gICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5ID0gYW5ndWxhci5jb3B5KGRhdGEpO1xuICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGRhdGE7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgYmxhZGUudGl0bGUgPSBibGFkZS5pc05ldyA/ICdub3RpZmljYXRpb25zLmJsYWRlcy5maWx0ZXItZGV0YWlsLm5ldy10aXRsZScgOiBkYXRhLm5hbWU7XG4gICAgICAgICAgICBibGFkZS5zdWJ0aXRsZSA9IGJsYWRlLmlzTmV3ID8gJ25vdGlmaWNhdGlvbnMuYmxhZGVzLmZpbHRlci1kZXRhaWwubmV3LXN1YnRpdGxlJyA6ICdub3RpZmljYXRpb25zLmJsYWRlcy5maWx0ZXItZGV0YWlsLnN1YnRpdGxlJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgJHNjb3BlLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5sYXN0VXBkYXRlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgYW5ndWxhci5jb3B5KGJsYWRlLmN1cnJlbnRFbnRpdHksIGJsYWRlLm9yaWdFbnRpdHkpO1xuICAgICAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5ub3RpZmljYXRpb25zSm91cm5hbFNlYXJjaEZpbHRlcnMuc3BsaWNlKDAsIDAsIGJsYWRlLm9yaWdFbnRpdHkpO1xuICAgICAgICAgICAgICAgICRsb2NhbFN0b3JhZ2Uubm90aWZpY2F0aW9uc0pvdXJuYWxTZWFyY2hGaWx0ZXJJZCA9IGJsYWRlLm9yaWdFbnRpdHkuaWQ7XG4gICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUuZmlsdGVyLmN1cnJlbnQgPSBibGFkZS5vcmlnRW50aXR5O1xuICAgICAgICAgICAgICAgIGJsYWRlLmlzTmV3ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGluaXRpYWxpemVCbGFkZShibGFkZS5vcmlnRW50aXR5KTtcbiAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmZpbHRlci5jaGFuZ2UodHJ1ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gaXNEaXJ0eSgpIHtcbiAgICAgICAgICAgIHJldHVybiAhYW5ndWxhci5lcXVhbHMoYmxhZGUuY3VycmVudEVudGl0eSwgYmxhZGUub3JpZ0VudGl0eSk7XG4gICAgICAgIH1cblxuICAgICAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1maWx0ZXInO1xuXG4gICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiY29yZS5jb21tYW5kcy5hcHBseS1maWx0ZXJcIiwgaWNvbjogJ2ZhIGZhLWZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zYXZlQ2hhbmdlcygpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybVNjb3BlICYmIGZvcm1TY29wZS4kdmFsaWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZXNldFwiLCBpY29uOiAnZmEgZmEtdW5kbycsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogaXNEaXJ0eVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmRlbGV0ZVwiLCBpY29uOiAnZmFzIGZhLXRyYXNoLWFsdCcsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGRlbGV0ZUVudHJ5LFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWJsYWRlLmlzTmV3O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfV07XG5cblxuICAgICAgICBmdW5jdGlvbiBkZWxldGVFbnRyeSgpIHtcbiAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmZpbHRlci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICRsb2NhbFN0b3JhZ2Uubm90aWZpY2F0aW9uc0pvdXJuYWxTZWFyY2hGaWx0ZXJzLnNwbGljZSgkbG9jYWxTdG9yYWdlLm5vdGlmaWNhdGlvbnNKb3VybmFsU2VhcmNoRmlsdGVycy5pbmRleE9mKGJsYWRlLm9yaWdFbnRpdHkpLCAxKTtcbiAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlLm5vdGlmaWNhdGlvbnNKb3VybmFsU2VhcmNoRmlsdGVySWQ7XG4gICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5maWx0ZXIuY2hhbmdlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhY3Rpb25zIG9uIGxvYWQgICAgICAgIFxuICAgICAgICBpZiAoYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgICAgICR0cmFuc2xhdGUoJ25vdGlmaWNhdGlvbnMuYmxhZGVzLm5vdGlmaWNhdGlvbnMtam91cm5hbC5sYWJlbHMudW5uYW1lZC1maWx0ZXInKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplQmxhZGUoeyBpZDogbmV3IERhdGUoKS5nZXRUaW1lKCksIG5hbWU6IHJlc3VsdCB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5pdGlhbGl6ZUJsYWRlKGJsYWRlLmRhdGEpO1xuICAgICAgICB9XG4gICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZScpXG4gICAgLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25zRWRpdENvbnRyb2xsZXInLCBbJyRzY29wZScsICckZmlsdGVyJywgJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25zTW9kdWxlQXBpJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLFxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkZmlsdGVyLCBub3RpZmljYXRpb25zLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2V0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZvcm1TY29wZSA9IGZvcm07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICAgICAgICAgIGJsYWRlLnVwZGF0ZVBlcm1pc3Npb24gPSAnbm90aWZpY2F0aW9uczp1cGRhdGUnO1xuICAgICAgICAgICAgdmFyIGNvZGVtaXJyb3JFZGl0b3I7XG4gICAgICAgICAgICBibGFkZS5wYXJhbWV0ZXJzRm9yVGVtcGxhdGUgPSBbXTtcbiAgICAgICAgICAgICRzY29wZS5pc1ZhbGlkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGJsYWRlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zLmdldE5vdGlmaWNhdGlvbkJ5VHlwZSh7IHR5cGU6IGJsYWRlLnR5cGUsIHRlbmFudElkOiBibGFkZS50ZW5hbnRJZCwgdGVuYW50VHlwZTogYmxhZGUudGVuYW50VHlwZSB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgc2V0Tm90aWZpY2F0aW9uKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBtb2RpZnlFbWFpbEFkZHJlc3MoYWRkcmVzc2VzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8ubWFwKGFkZHJlc3NlcywgZnVuY3Rpb24gKGFkZHJlc3MpIHsgcmV0dXJuIHsgdmFsdWU6IGFkZHJlc3MgfTsgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldE5vdGlmaWNhdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGFuZ3VsYXIuY29weShkYXRhKTtcblxuICAgICAgICAgICAgICAgIGlmIChpc1RyYW5zaWVudChibGFkZS5jdXJyZW50RW50aXR5KSkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5LnRlbmFudElkZW50aXR5ID0geyBpZDogYmxhZGUudGVuYW50SWQsIHR5cGU6IGJsYWRlLnRlbmFudFR5cGUgfTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5LmNjID0gbW9kaWZ5RW1haWxBZGRyZXNzKGJsYWRlLmN1cnJlbnRFbnRpdHkuY2MpO1xuICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkuYmNjID0gbW9kaWZ5RW1haWxBZGRyZXNzKGJsYWRlLmN1cnJlbnRFbnRpdHkuYmNjKTtcbiAgICAgICAgICAgICAgICBfLm1hcChibGFkZS5jdXJyZW50RW50aXR5LnRlbXBsYXRlcywgZnVuY3Rpb24gKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlLmNyZWF0ZWREYXRlQXNTdHJpbmcgPSAkZmlsdGVyKCdkYXRlJykodGVtcGxhdGUuY3JlYXRlZERhdGUsIFwieXl5eS1NTS1kZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUubW9kaWZpZWREYXRlQXNTdHJpbmcgPSAkZmlsdGVyKCdkYXRlJykodGVtcGxhdGUubW9kaWZpZWREYXRlLCBcInl5eXktTU0tZGRcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWJsYWRlLmN1cnJlbnRFbnRpdHkudGVtcGxhdGVzKSBibGFkZS5jdXJyZW50RW50aXR5LnRlbXBsYXRlcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gaXNUcmFuc2llbnQoZGF0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLnRlbmFudElkZW50aXR5LmlzRW1wdHkgJiYgYmxhZGUudGVuYW50SWQgJiYgYmxhZGUudGVuYW50VHlwZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcGx1Y2tBZGRyZXNzKGFkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWRkcmVzcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXyhhZGRyZXNzKS5wbHVjaygndmFsdWUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkZHJlc3M7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJsYWRlLnVwZGF0ZU5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkuY2MgPSBwbHVja0FkZHJlc3MoYmxhZGUuY3VycmVudEVudGl0eS5jYyk7XG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5iY2MgPSBwbHVja0FkZHJlc3MoYmxhZGUuY3VycmVudEVudGl0eS5iY2MpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGVudGl0eVRvU2F2ZSA9IGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICBlbnRpdHlUb1NhdmUudGVtcGxhdGVzID0gXy5maWx0ZXIoYmxhZGUuY3VycmVudEVudGl0eS50ZW1wbGF0ZXMsIHsgaXNSZWFkb25seTogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgZW50aXR5VG9TYXZlLnRlbXBsYXRlcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIHNldCBJc1ByZWRlZmluZWQgdG8gZmFsc2UgaW4gb3JkZXIgdG8gc2F2ZSB0aGUgdGVtcGxhdGUgdG8gdGhlIGRhdGFiYXNlXG4gICAgICAgICAgICAgICAgICAgIGlmICghIWVsZW1lbnQuaXNFZGl0ZWQgJiYgISFlbGVtZW50LmlzUHJlZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1ByZWRlZmluZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9ucy51cGRhdGVOb3RpZmljYXRpb24oeyB0eXBlOiBibGFkZS50eXBlIH0sIGVudGl0eVRvU2F2ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUoYmxhZGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLmJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuc2F2ZVwiLCBpY29uOiAnZmFzIGZhLXNhdmUnLFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBibGFkZS51cGRhdGVOb3RpZmljYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGNhblNhdmUsXG4gICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy51bmRvXCIsIGljb246ICdmYSBmYS11bmRvJyxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogaXNEaXJ0eSxcbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgICRzY29wZS5lZGl0b3JPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIGxpbmVXcmFwcGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsaW5lTnVtYmVyczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwYXJzZXJmaWxlOiBcImxpcXVpZC5qc1wiLFxuICAgICAgICAgICAgICAgIGV4dHJhS2V5czogeyBcIkN0cmwtUVwiOiBmdW5jdGlvbiAoY20pIHsgY20uZm9sZENvZGUoY20uZ2V0Q3Vyc29yKCkpOyB9IH0sXG4gICAgICAgICAgICAgICAgZm9sZEd1dHRlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBndXR0ZXJzOiBbXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCIsIFwiQ29kZU1pcnJvci1mb2xkZ3V0dGVyXCJdLFxuICAgICAgICAgICAgICAgIG9uTG9hZDogZnVuY3Rpb24gKF9lZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZW1pcnJvckVkaXRvciA9IF9lZGl0b3I7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RlOiBcImxpcXVpZC1odG1sXCJcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS4kd2F0Y2goXCJibGFkZS5jdXJyZW50RW50aXR5XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNWYWxpZCA9ICRzY29wZS5mb3JtU2NvcGUgJiYgJHNjb3BlLmZvcm1TY29wZS4kdmFsaWQ7XG4gICAgICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gaXNEaXJ0eSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKCFhbmd1bGFyLmVxdWFscyhibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KSB8fCBibGFkZS5pc05ldykgJiYgYmxhZGUuaGFzVXBkYXRlUGVybWlzc2lvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjYW5TYXZlKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc0RpcnR5KCkgJiYgJHNjb3BlLmlzVmFsaWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJsYWRlLm9uQ2xvc2UgPSBmdW5jdGlvbiAoY2xvc2VDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbklmTmVlZGVkKGlzRGlydHkoKSwgY2FuU2F2ZSgpLCBibGFkZSwgYmxhZGUudXBkYXRlTm90aWZpY2F0aW9uLCBjbG9zZUNhbGxiYWNrLCBcIm5vdGlmaWNhdGlvbnMuZGlhbG9ncy5ub3RpZmljYXRpb24tZGV0YWlscy1zYXZlLnRpdGxlXCIsIFwibm90aWZpY2F0aW9ucy5kaWFsb2dzLm5vdGlmaWNhdGlvbi1kZXRhaWxzLXNhdmUubWVzc2FnZVwiKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLWVudmVsb3BlJztcblxuICAgICAgICAgICAgYmxhZGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlJylcbiAgICAuY29udHJvbGxlcigndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlLm5vdGlmaWNhdGlvbkpvdXJuYWxEZXRhaWxzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25zTW9kdWxlQXBpJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBub3RpZmljYXRpb25zLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG5cdHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcblxuXHRibGFkZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuXHRcdG5vdGlmaWNhdGlvbnMuZ2V0Tm90aWZpY2F0aW9uSm91cm5hbERldGFpbHMoeyBpZDogYmxhZGUuY3VycmVudE5vdGlmaWNhdGlvbklkIH0sIGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRibGFkZS5jdXJyZW50RW50aXR5ID0gZGF0YTtcblx0XHRcdGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuXHRcdH0sIGZ1bmN0aW9uIChlcnJvcikge1xuXHRcdFx0YmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgJHNjb3BlLmJsYWRlKTtcblx0XHR9KTtcblx0fVxuXG5cdGJsYWRlLmluaXRpYWxpemUoKTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUnKVxuICAgIC5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUubm90aWZpY2F0aW9uVGVtcGxhdGVzTGlzdENvbnRyb2xsZXInLCBbJyRzY29wZScsICckdHJhbnNsYXRlJywgJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25UZW1wbGF0ZXNSZXNvbHZlclNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLnNldHRpbmdzJywgJ3BsYXRmb3JtV2ViQXBwLnVpR3JpZEhlbHBlcicsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZVV0aWxzJyxcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJHRyYW5zbGF0ZSwgbm90aWZpY2F0aW9uVGVtcGxhdGVzUmVzb2x2ZXJTZXJ2aWNlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBkaWFsb2dTZXJ2aWNlLCBzZXR0aW5ncywgdWlHcmlkSGVscGVyLCBibGFkZVV0aWxzKSB7XG4gICAgICAgICAgICAkc2NvcGUudWlHcmlkQ29uc3RhbnRzID0gdWlHcmlkSGVscGVyLnVpR3JpZENvbnN0YW50cztcbiAgICAgICAgICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICAgICAgICAgIGJsYWRlLnNlbGVjdGVkTGFuZ3VhZ2UgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAoIWJsYWRlLmxhbmd1YWdlcykge1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLmdldFZhbHVlcyh7IGlkOiAnVmlydG9Db21tZXJjZS5Ob3RpZmljYXRpb25zLkdlbmVyYWwuTGFuZ3VhZ2VzJyB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5sYW5ndWFnZXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBibGFkZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdGllcyA9IGdldEVmZmVjdGl2ZVRlbXBsYXRlTGlzdEJ5TGFuZ3VhZ2UoYmxhZGUuY3VycmVudEVudGl0eS50ZW1wbGF0ZXMpO1xuICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRFZmZlY3RpdmVUZW1wbGF0ZUxpc3RCeUxhbmd1YWdlKHRlbXBsYXRlcykge1xuICAgICAgICAgICAgICAgIHZhciBncm91cHMgPSBfLmdyb3VwQnkodGVtcGxhdGVzLCBmdW5jdGlvbiAodGVtcGxhdGUpIHsgcmV0dXJuIHRlbXBsYXRlLmxhbmd1YWdlQ29kZSB8fCBudWxsOyB9KVxuICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZXNUb0Rpc3BsYXkgPSBfLmVhY2goZ3JvdXBzLCBmdW5jdGlvbiAobGFuZ3VhZ2VDb2RlVGVtcGxhdGVzLCBsYW5ndWFnZUNvZGUsIG9yaWdpbmFsT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoYXNQcmVkZWZpbmVkVGVtcGxhdGVzID0gXy5hbnkobGFuZ3VhZ2VDb2RlVGVtcGxhdGVzLCBmdW5jdGlvbiAodGVtcGxhdGUpIHsgcmV0dXJuIHRlbXBsYXRlLmlzUHJlZGVmaW5lZCB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGF0IGxlYXN0IG9uZSBwcmVkZWZpbmVkIHRlbXBsYXRlIGluIGdyb3VwIC0gbWFya2luZyBhbGwgbm9uIHByZWRlZmluZWQgYXMgZWRpdGVkIHByZWRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1ByZWRlZmluZWRUZW1wbGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZWFjaChsYW5ndWFnZUNvZGVUZW1wbGF0ZXMsIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50LmlzUHJlZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzUHJlZGVmaW5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNFZGl0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHdhbnQgdG8gdXNlIGVkaXRlZCB0ZW1wbGF0ZXMgZmlyc3RcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVmZmVjdGl2ZVRlbXBsYXRlID0gXy5zb3J0QnkobGFuZ3VhZ2VDb2RlVGVtcGxhdGVzLCBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFlbGVtZW50LmlzRWRpdGVkO1xuICAgICAgICAgICAgICAgICAgICB9KVswXTtcblxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE9iamVjdFtsYW5ndWFnZUNvZGVdID0gZWZmZWN0aXZlVGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8udG9BcnJheSh0ZW1wbGF0ZXNUb0Rpc3BsYXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNvbHZlVHlwZShraW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kVGVtcGxhdGUgPSBub3RpZmljYXRpb25UZW1wbGF0ZXNSZXNvbHZlclNlcnZpY2UucmVzb2x2ZShraW5kKTtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmRUZW1wbGF0ZSAmJiBmb3VuZFRlbXBsYXRlLmtub3duQ2hpbGRyZW5UeXBlcyAmJiBmb3VuZFRlbXBsYXRlLmtub3duQ2hpbGRyZW5UeXBlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kVGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Tm90aWZpY2F0aW9uRGlhbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJub3RpZmljYXRpb25zLmRpYWxvZ3MudW5rbm93bi1raW5kLnRpdGxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIm5vdGlmaWNhdGlvbnMuZGlhbG9ncy51bmtub3duLWtpbmQubWVzc2FnZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVZhbHVlczogeyBraW5kOiBraW5kIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYmxhZGUub3BlblRlbXBsYXRlID0gZnVuY3Rpb24gKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kVGVtcGxhdGUgPSByZXNvbHZlVHlwZShibGFkZS5jdXJyZW50RW50aXR5LmtpbmQpO1xuICAgICAgICAgICAgICAgIGlmIChmb3VuZFRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBmb3VuZFRlbXBsYXRlLmRldGFpbEJsYWRlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdub3RpZmljYXRpb25zLmJsYWRlcy5ub3RpZmljYXRpb25zLWVkaXQtdGVtcGxhdGUudGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVWYWx1ZXM6IHsgZGlzcGxheU5hbWU6ICR0cmFuc2xhdGUuaW5zdGFudCgnbm90aWZpY2F0aW9uVHlwZXMuJyArIGJsYWRlLmN1cnJlbnRFbnRpdHkudHlwZSArICcuZGlzcGxheU5hbWUnKSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uOiBibGFkZS5jdXJyZW50RW50aXR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiB0ZW1wbGF0ZS5sYW5ndWFnZUNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0ZWRUZW1wbGF0ZTogdGVtcGxhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05ldzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0ZpcnN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlczogYmxhZGUubGFuZ3VhZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVuYW50SWQ6IGJsYWRlLnRlbmFudElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVuYW50VHlwZTogYmxhZGUudGVuYW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZvdW5kVGVtcGxhdGUuZGV0YWlsQmxhZGUuY29udHJvbGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBmb3VuZFRlbXBsYXRlLmRldGFpbEJsYWRlLnRlbXBsYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAga2luZDogYmxhZGUuY3VycmVudEVudGl0eS5raW5kXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJsYWRlLnNldFNlbGVjdGVkTm9kZSA9IGZ1bmN0aW9uIChsaXN0SXRlbSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IGxpc3RJdGVtLmlkO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgICAgIGJsYWRlLnNldFNlbGVjdGVkTm9kZSh0eXBlKTtcbiAgICAgICAgICAgICAgICBibGFkZS5zZWxlY3RlZFR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgICAgIGJsYWRlLm9wZW5UZW1wbGF0ZSh0eXBlKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRlbXBsYXRlKCkge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZFRlbXBsYXRlID0gcmVzb2x2ZVR5cGUoYmxhZGUuY3VycmVudEVudGl0eS5raW5kKTtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmRUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZm91bmRUZW1wbGF0ZS5kZXRhaWxCbGFkZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnbm90aWZpY2F0aW9ucy5ibGFkZXMubm90aWZpY2F0aW9ucy1lZGl0LXRlbXBsYXRlLnRpdGxlLW5ldycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZVZhbHVlczogeyBkaXNwbGF5TmFtZTogJHRyYW5zbGF0ZS5pbnN0YW50KCdub3RpZmljYXRpb25UeXBlcy4nICsgYmxhZGUuY3VycmVudEVudGl0eS50eXBlICsgJy5kaXNwbGF5TmFtZScpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb246IGJsYWRlLmN1cnJlbnRFbnRpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW5hbnRJZDogYmxhZGUudGVuYW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW5hbnRUeXBlOiBibGFkZS50ZW5hbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0ZpcnN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlczogYmxhZGUubGFuZ3VhZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogZm91bmRUZW1wbGF0ZS5kZXRhaWxCbGFkZS5jb250cm9sbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGZvdW5kVGVtcGxhdGUuZGV0YWlsQmxhZGUudGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZGVsZXRlTGlzdChzZWxlY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5zRGVmYXVsdE5vdGlmaWNhdGlvbnMgPSBfLmFueShzZWxlY3Rpb25zLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWl0ZW0ubGFuZ3VhZ2VDb2RlIHx8IGl0ZW0uaXNQcmVkZWZpbmVkO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5zRGVmYXVsdE5vdGlmaWNhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Tm90aWZpY2F0aW9uRGlhbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJub3RpZmljYXRpb25zLmRpYWxvZ3Mubm90aWZpY2F0aW9uLXRlbXBsYXRlLWRlbGV0ZS1ub3RpZmljYXRpb24udGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwibm90aWZpY2F0aW9ucy5kaWFsb2dzLm5vdGlmaWNhdGlvbi10ZW1wbGF0ZS1kZWxldGUtbm90aWZpY2F0aW9uLm1lc3NhZ2VcIlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJjb25maXJtRGVsZXRlSXRlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwibm90aWZpY2F0aW9ucy5kaWFsb2dzLm5vdGlmaWNhdGlvbi10ZW1wbGF0ZS1kZWxldGUudGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwibm90aWZpY2F0aW9ucy5kaWFsb2dzLm5vdGlmaWNhdGlvbi10ZW1wbGF0ZS1kZWxldGUubWVzc2FnZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VDaGlsZHJlbkJsYWRlcyhibGFkZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHNlbGVjdGlvbnMsIGZ1bmN0aW9uIChzZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBibGFkZS5jdXJyZW50RW50aXR5LnRlbXBsYXRlcy5maW5kSW5kZXgoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlbGVtZW50Lmxhbmd1YWdlQ29kZSA9PT0gc2VsZWN0aW9uLmxhbmd1YWdlQ29kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5LnRlbXBsYXRlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Q29uZmlybWF0aW9uRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmFkZFwiLCBpY29uOiAnZmFzIGZhLXBsdXMnLFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBjcmVhdGVUZW1wbGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ25vdGlmaWNhdGlvbnM6dGVtcGxhdGU6Y3JlYXRlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmRlbGV0ZVwiLCBpY29uOiAnZmFzIGZhLXRyYXNoLWFsdCcsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgZGVsZXRlTGlzdCgkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpOyB9LFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmdyaWRBcGkgJiYgXy5hbnkoJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ25vdGlmaWNhdGlvbnM6dGVtcGxhdGU6ZGVsZXRlJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIC8vIHVpLWdyaWRcbiAgICAgICAgICAgICRzY29wZS5zZXRHcmlkT3B0aW9ucyA9IGZ1bmN0aW9uIChncmlkT3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHVpR3JpZEhlbHBlci5pbml0aWFsaXplKCRzY29wZSwgZ3JpZE9wdGlvbnMsIGZ1bmN0aW9uIChncmlkQXBpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIGdyaWRBcGkgZm9yIGN1cnJlbnQgZ3JpZFxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ3JpZEFwaSA9IGdyaWRBcGk7XG4gICAgICAgICAgICAgICAgICAgIHVpR3JpZEhlbHBlci5iaW5kUmVmcmVzaE9uU29ydENoYW5nZWQoJHNjb3BlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBibGFkZVV0aWxzLmluaXRpYWxpemVQYWdpbmF0aW9uKCRzY29wZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBibGFkZS5pbml0aWFsaXplKCk7XG4gICAgICAgIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUnKVxuICAgIC5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUuZWRpdFRlbXBsYXRlQ29udHJvbGxlcicsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHRpbWVvdXQnLCAnJGxvY2FsU3RvcmFnZScsICd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUubm90aWZpY2F0aW9uc01vZHVsZUFwaScsICdGaWxlVXBsb2FkZXInLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJyxcbiAgICAgICAgZnVuY3Rpb24gKCRyb290U2NvcGUsICRzY29wZSwgJHRpbWVvdXQsICRsb2NhbFN0b3JhZ2UsIG5vdGlmaWNhdGlvbnMsIEZpbGVVcGxvYWRlciwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgZGlhbG9nU2VydmljZSkge1xuICAgICAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgICAgICAgICAgJHNjb3BlLmlzVmFsaWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgdmFyIGZvcm1TY29wZTtcbiAgICAgICAgICAgICRzY29wZS5zZXRGb3JtID0gZnVuY3Rpb24gKGZvcm0pIHtcbiAgICAgICAgICAgICAgICBmb3JtU2NvcGUgPSBmb3JtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY29kZW1pcnJvckVkaXRvcjtcbiAgICAgICAgICAgIGJsYWRlLmR5bmFtaWNQcm9wZXJ0aWVzID0gJyc7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNhdmVUZW1wbGF0ZSgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgdmFyIG5vdyA9IGRhdGUuZ2V0RnVsbFllYXIoKSArICctJyArICgnMCcgKyAoZGF0ZS5nZXRNb250aCgpICsgMSkpLnNsaWNlKC0yKSArICctJyArICgnMCcgKyBkYXRlLmdldERhdGUoKSkuc2xpY2UoLTIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkuY3JlYXRlZERhdGVBc1N0cmluZyA9IG5vdztcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5pc1JlYWRvbmx5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkuaWQgPSBibGFkZS5jdXJyZW50RW50aXR5Lmxhbmd1YWdlQ29kZSA/IG51bGwgOiBibGFkZS5jdXJyZW50RW50aXR5LmlkO1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5vcmlnRW50aXR5ID0gYW5ndWxhci5jb3B5KGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5tb2RpZmllZERhdGVBc1N0cmluZyA9IG5vdztcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgc2FtZUxhbmd1YWdlVGVtcGxhdGUgPSBfLmZpbHRlcihibGFkZS5ub3RpZmljYXRpb24udGVtcGxhdGVzLCBmdW5jdGlvbiAodGVtcGxhdGUpIHsgcmV0dXJuIHRlbXBsYXRlLmxhbmd1YWdlQ29kZSA9PSBibGFkZS5jdXJyZW50RW50aXR5Lmxhbmd1YWdlQ29kZTsgfSlcbiAgICAgICAgICAgICAgICB2YXIgaGFzUHJlZGVmaW5lZFRlbXBsYXRlcyA9IF8uYW55KHNhbWVMYW5ndWFnZVRlbXBsYXRlLCBmdW5jdGlvbiAodGVtcGxhdGUpIHsgcmV0dXJuIHRlbXBsYXRlLmlzUHJlZGVmaW5lZCB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChoYXNQcmVkZWZpbmVkVGVtcGxhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkuaXNQcmVkZWZpbmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5pc0VkaXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5pc1ByZWRlZmluZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgaW5kID0gYmxhZGUubm90aWZpY2F0aW9uLnRlbXBsYXRlcy5maW5kSW5kZXgoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlbGVtZW50Lmxhbmd1YWdlQ29kZSA9PSBibGFkZS5jdXJyZW50RW50aXR5Lmxhbmd1YWdlQ29kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIChlbGVtZW50LmlzUHJlZGVmaW5lZCA9PSBibGFkZS5jdXJyZW50RW50aXR5LmlzUHJlZGVmaW5lZCAmJiBlbGVtZW50LmlzRWRpdGVkID09IGJsYWRlLmN1cnJlbnRFbnRpdHkuaXNFZGl0ZWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGluZCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLm5vdGlmaWNhdGlvbi50ZW1wbGF0ZXNbaW5kXSA9IGJsYWRlLmN1cnJlbnRFbnRpdHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5ub3RpZmljYXRpb24udGVtcGxhdGVzLnB1c2goYmxhZGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZXN0b3JlVGVtcGxhdGUodGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogXCJjb25maXJtUmVzZXRUZW1wbGF0ZXNcIixcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGNvbmZpcm1lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZVRlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3dEaWFsb2coZGlhbG9nLCAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucykvU2NyaXB0cy9ibGFkZXMvbm90aWZpY2F0aW9uLXRlbXBsYXRlcy1saXN0LXJlc2V0LWRpYWxvZy50cGwuaHRtbCcsICdwbGF0Zm9ybVdlYkFwcC5jb25maXJtRGlhbG9nQ29udHJvbGxlcicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGJsYWRlLm5vdGlmaWNhdGlvbi50ZW1wbGF0ZXMuZmluZEluZGV4KGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoZWxlbWVudC5sYW5ndWFnZUNvZGUgPT0gdGVtcGxhdGUubGFuZ3VhZ2VDb2RlICYmIGVsZW1lbnQuaXNQcmVkZWZpbmVkID09IHRlbXBsYXRlLmlzUHJlZGVmaW5lZCAmJiBlbGVtZW50LmlzRWRpdGVkID09IHRlbXBsYXRlLmlzRWRpdGVkKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLm5vdGlmaWNhdGlvbi50ZW1wbGF0ZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJsYWRlQ2xvc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNhdmVUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYmxhZGVDbG9zZSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy90b2RvXG4gICAgICAgICAgICB2YXIgY29udGVudFR5cGUgPSAnaW1hZ2UnOy8vYmxhZGUuY29udGVudFR5cGUuc3Vic3RyKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBibGFkZS5jb250ZW50VHlwZS5zdWJzdHIoMSwgYmxhZGUuY29udGVudFR5cGUubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAkc2NvcGUuZmlsZVVwbG9hZGVyID0gbmV3IEZpbGVVcGxvYWRlcih7XG4gICAgICAgICAgICAgICAgdXJsOiAnYXBpL2Fzc2V0cz9mb2xkZXJVcmw9Y21zLWNvbnRlbnQvJyArIGNvbnRlbnRUeXBlICsgJy9hc3NldHMnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgICBhdXRvVXBsb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlbW92ZUFmdGVyVXBsb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG9uQmVmb3JlVXBsb2FkSXRlbTogZnVuY3Rpb24gKGZpbGVJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvblN1Y2Nlc3NJdGVtOiBmdW5jdGlvbiAoZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2ZpbGVzVXBsb2FkZWQnLCB7IGl0ZW1zOiByZXNwb25zZSB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uRXJyb3JJdGVtOiBmdW5jdGlvbiAoZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcihmaWxlSXRlbS5fZmlsZS5uYW1lICsgJyBmYWlsZWQ6ICcgKyAocmVzcG9uc2UubWVzc2FnZSA/IHJlc3BvbnNlLm1lc3NhZ2UgOiBzdGF0dXMpLCBibGFkZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlQWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJsYWRlLmN1cnJlbnRFbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IHsga2luZDogYmxhZGUubm90aWZpY2F0aW9uLmtpbmQgfTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoYmxhZGUuY3VycmVudEVudGl0eSAmJiBibGFkZS5jdXJyZW50RW50aXR5Lmxhbmd1YWdlQ29kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkubGFuZ3VhZ2VDb2RlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2RlbWlycm9yRWRpdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlbWlycm9yRWRpdG9yLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVtaXJyb3JFZGl0b3IuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBibGFkZS5vcmlnRW50aXR5ID0gYW5ndWxhci5jb3B5KGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgIH0sIDEpO1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGJsYWRlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBibGFkZS5lZGl0ZWRUZW1wbGF0ZSB8fCBfLmZpbmQoYmxhZGUubm90aWZpY2F0aW9uLnRlbXBsYXRlcywgZnVuY3Rpb24gKHRlbXBsKSB7IHJldHVybiB0ZW1wbC5sYW5ndWFnZUNvZGUgPT09IGJsYWRlLmxhbmd1YWdlQ29kZSB9KTtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGFuZ3VsYXIuY29weShmb3VuZCk7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLm9yaWdFbnRpdHkgPSBhbmd1bGFyLmNvcHkoYmxhZGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLm9yaWdodG1sID0gYmxhZGUuY3VycmVudEVudGl0eS5ib2R5O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNldFRlbXBsYXRlKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBibGFkZS5yZW5kZXJUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAncmVuZGVyVGVtcGxhdGUnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ25vdGlmaWNhdGlvbnMuYmxhZGVzLm5vdGlmaWNhdGlvbnMtdGVtcGxhdGUtcmVuZGVyLnRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdub3RpZmljYXRpb25zLmJsYWRlcy5ub3RpZmljYXRpb25zLXRlbXBsYXRlLXJlbmRlci5zdWJ0aXRsZScsXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlVmFsdWVzOiB7IHR5cGU6IGJsYWRlLm5vdGlmaWNhdGlvblR5cGUgfSxcbiAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uOiBibGFkZS5ub3RpZmljYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHRlbmFudElkOiBibGFkZS50ZW5hbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgdGVuYW50VHlwZTogYmxhZGUudGVuYW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEVudGl0eTogYmxhZGUuY3VycmVudEVudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiBibGFkZS5jdXJyZW50RW50aXR5Lmxhbmd1YWdlQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS50ZW1wbGF0ZVJlbmRlckNvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk5vdGlmaWNhdGlvbnMpL1NjcmlwdHMvYmxhZGVzL25vdGlmaWNhdGlvbnMtdGVtcGxhdGUtcmVuZGVyLnRwbC5odG1sJ1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW3tcbiAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnByZXZpZXdcIixcbiAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtZXllJyxcbiAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlbmRlclRlbXBsYXRlKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBjYW5SZW5kZXIsXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ25vdGlmaWNhdGlvbnM6dGVtcGxhdGVzOnJlYWQnXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJub3RpZmljYXRpb25zLmNvbW1hbmRzLnJlc3RvcmVcIixcbiAgICAgICAgICAgICAgICBpY29uOiBcImZhIGZhLWhpc3RvcnlcIixcbiAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3RvcmVUZW1wbGF0ZShibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJsYWRlLmN1cnJlbnRFbnRpdHkuaXNQcmVkZWZpbmVkICYmIGJsYWRlLmN1cnJlbnRFbnRpdHkuaXNFZGl0ZWQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnbm90aWZpY2F0aW9uczp0ZW1wbGF0ZTpkZWxldGUnXG4gICAgICAgICAgICB9XTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gaXNEaXJ0eSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKCFhbmd1bGFyLmVxdWFscyhibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KSB8fCBibGFkZS5pc05ldykgJiYgYmxhZGUuaGFzVXBkYXRlUGVybWlzc2lvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjYW5SZW5kZXIoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFpc0RpcnR5KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS4kd2F0Y2goXCJibGFkZS5jdXJyZW50RW50aXR5XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNWYWxpZCA9IGlzRGlydHkoKSAmJiBmb3JtU2NvcGUgJiYgZm9ybVNjb3BlLiR2YWxpZCAmJiAhYmxhZGUub3JpZ0VudGl0eS5pc1JlYWRvbmx5O1xuICAgICAgICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLWVudmVsb3BlJztcblxuICAgICAgICAgICAgYmxhZGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlJylcclxuICAgIC5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUubm90aWZpY2F0aW9uc0pvdXJuYWxDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHRyYW5zbGF0ZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25zTW9kdWxlQXBpJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlVXRpbHMnLCAncGxhdGZvcm1XZWJBcHAuZGlhbG9nU2VydmljZScsICd1aUdyaWRDb25zdGFudHMnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkdHJhbnNsYXRlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBub3RpZmljYXRpb25zLCBibGFkZVV0aWxzLCBkaWFsb2dTZXJ2aWNlLCB1aUdyaWRDb25zdGFudHMsIHVpR3JpZEhlbHBlcikge1xyXG4gICAgICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XHJcbiAgICAgICAgICAgICRzY29wZS51aUdyaWRDb25zdGFudHMgPSB1aUdyaWRDb25zdGFudHM7XHJcbiAgICAgICAgICAgIC8vIHNpbXBsZSBhbmQgYWR2YW5jZWQgZmlsdGVyaW5nXHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBibGFkZS5maWx0ZXIgPSB7IGtleXdvcmQ6IGJsYWRlLmZpbHRlcktleXdvcmQgfTtcclxuICAgICAgICAgICAgZmlsdGVyLmNyaXRlcmlhQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIua2V5d29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNlYXJjaCBDcml0ZXJpYVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRTZWFyY2hDcml0ZXJpYSgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWFyY2hDcml0ZXJpYSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3RJZHM6IGJsYWRlLm9iamVjdElkID8gW2JsYWRlLm9iamVjdElkXSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3RUeXBlOiBibGFkZS5vYmplY3RUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IGZpbHRlci5rZXl3b3JkID8gZmlsdGVyLmtleXdvcmQgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgc29ydDogdWlHcmlkSGVscGVyLmdldFNvcnRFeHByZXNzaW9uKCRzY29wZSksXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpcDogKCRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgLSAxKSAqICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZTogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25UeXBlOiBibGFkZS5ub3RpZmljYXRpb25UeXBlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWFyY2hDcml0ZXJpYTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWFyY2hDcml0ZXJpYSA9IGdldFNlYXJjaENyaXRlcmlhKCk7XHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zLmdldE5vdGlmaWNhdGlvbkpvdXJuYWxMaXN0KHNlYXJjaENyaXRlcmlhLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdGllcyA9IGRhdGEucmVzdWx0cztcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSBkYXRhLnRvdGFsQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3ROb2RlID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IGRhdGEuaWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAnbm90aWZpY2F0aW9uRGV0YWlscycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGRhdGEuc3ViamVjdCxcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ25vdGlmaWNhdGlvbnMuYmxhZGVzLm5vdGlmaWNhdGlvbi1qb3VybmFsLWRldGFpbHMuc3VidGl0bGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlVmFsdWVzOiB7IGRpc3BsYXlOYW1lOiAkdHJhbnNsYXRlLmluc3RhbnQoZGF0YS5kaXNwbGF5TmFtZSkgfSxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm90aWZpY2F0aW9uSWQ6IGRhdGEuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEVudGl0eTogZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlLm5vdGlmaWNhdGlvbkpvdXJuYWxEZXRhaWxzQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5Ob3RpZmljYXRpb25zKS9TY3JpcHRzL2JsYWRlcy9ub3RpZmljYXRpb24tam91cm5hbC1kZXRhaWxzLnRwbC5odG1sJ1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuc3RvcE5vdGlmaWNhdGlvbnMgPSBmdW5jdGlvbiAobGlzdCkge1xyXG4gICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnMuc3RvcFNlbmRpbmdOb3RpZmljYXRpb25zKF8ucGx1Y2sobGlzdCwgJ2lkJyksIGJsYWRlLnJlZnJlc2gpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucmVmcmVzaFwiLCBpY29uOiAnZmEgZmEtcmVmcmVzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogYmxhZGUucmVmcmVzaCxcclxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdub3RpZmljYXRpb25zLmJsYWRlcy5ub3RpZmljYXRpb25zLWpvdXJuYWwubGFiZWxzLnJlc2VuZC1tZXNzYWdlcycsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLXJlcGVhdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZUlkcyA9IGJsYWRlLiRzY29wZS5ncmlkQXBpLmdyaWQucm93c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih4ID0+IHguaXNTZWxlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoeCA9PiB4LmVudGl0eS5pZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zLnJlc2VuZE5vdGlmaWNhdGlvbnMobWVzc2FnZUlkcywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJsYWRlLiRzY29wZS5ncmlkQXBpICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLiRzY29wZS5ncmlkQXBpLmdyaWQucm93cy5maWx0ZXIoeCA9PiB4LmlzU2VsZWN0ZWQpLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnbm90aWZpY2F0aW9uczp1cGRhdGUnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF07XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIC8vIHVpLWdyaWRcclxuICAgICAgICAgICAgJHNjb3BlLnNldEdyaWRPcHRpb25zID0gZnVuY3Rpb24gKGdyaWRPcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB1aUdyaWRIZWxwZXIuaW5pdGlhbGl6ZSgkc2NvcGUsIGdyaWRPcHRpb25zLCBmdW5jdGlvbiAoZ3JpZEFwaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIGdyaWRBcGkgZm9yIGN1cnJlbnQgZ3JpZFxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5ncmlkQXBpID0gZ3JpZEFwaTtcclxuICAgICAgICAgICAgICAgICAgICB1aUdyaWRIZWxwZXIuYmluZFJlZnJlc2hPblNvcnRDaGFuZ2VkKCRzY29wZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJsYWRlVXRpbHMuaW5pdGlhbGl6ZVBhZ2luYXRpb24oJHNjb3BlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25zTGlzdENvbnRyb2xsZXInLCBbJyRzY29wZScsICckdHJhbnNsYXRlJywgJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25zTW9kdWxlQXBpJywgJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25UeXBlc1Jlc29sdmVyU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlVXRpbHMnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJywgJ3BsYXRmb3JtV2ViQXBwLnVpLWdyaWQuZXh0ZW5zaW9uJywgJ3BsYXRmb3JtV2ViQXBwLnNldHRpbmdzJywgJ3BsYXRmb3JtV2ViQXBwLmkxOG4nLCAncGxhdGZvcm1XZWJBcHAuYXV0aFNlcnZpY2UnLFxuICAgIGZ1bmN0aW9uICgkc2NvcGUsICR0cmFuc2xhdGUsIG5vdGlmaWNhdGlvbnMsIG5vdGlmaWNhdGlvblR5cGVzUmVzb2x2ZXJTZXJ2aWNlLCBkaWFsb2dTZXJ2aWNlLCBibGFkZVV0aWxzLCB1aUdyaWRIZWxwZXIsIGdyaWRPcHRpb25FeHRlbnNpb24sIHNldHRpbmdzLCBpMThuLCBhdXRoU2VydmljZSkge1xuICAgICAgICAkc2NvcGUudWlHcmlkQ29uc3RhbnRzID0gdWlHcmlkSGVscGVyLnVpR3JpZENvbnN0YW50cztcbiAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgICAgICBibGFkZS50aXRsZSA9ICdOb3RpZmljYXRpb25zJztcbiAgICAgICAgYmxhZGUuc2VsZWN0ZWRUeXBlID0gbnVsbDtcbiAgICAgICAgYmxhZGUuY3VycmVudExhbmd1YWdlID0gaTE4bi5nZXRMYW5ndWFnZSgpO1xuICAgICAgICB2YXIgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSA9IGJsYWRlVXRpbHMuYmxhZGVOYXZpZ2F0aW9uU2VydmljZTtcbiAgICAgICAgXG4gICAgICAgIC8vIGZpbHRlcmluZ1xuICAgICAgICB2YXIgZmlsdGVyID0gJHNjb3BlLmZpbHRlciA9IHt9O1xuXG4gICAgICAgIGZpbHRlci5jcml0ZXJpYUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZmlsdGVyLmtleXdvcmQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5uYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPiAxKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA9IDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGdldFNlYXJjaENyaXRlcmlhKCkge1xuICAgICAgICAgICAgdmFyIHNlYXJjaENyaXRlcmlhID0ge1xuICAgICAgICAgICAgICAgIGtleXdvcmQ6IGZpbHRlci5rZXl3b3JkID8gZmlsdGVyLmtleXdvcmQgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgc29ydDogdWlHcmlkSGVscGVyLmdldFNvcnRFeHByZXNzaW9uKCRzY29wZSksXG4gICAgICAgICAgICAgICAgc2tpcDogKCRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgLSAxKSAqICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnQsXG4gICAgICAgICAgICAgICAgdGFrZTogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdyb3VwOiAnRGVmYXVsdCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gc2VhcmNoQ3JpdGVyaWE7XG4gICAgICAgIH1cblxuICAgICAgICBibGFkZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlYXJjaENyaXRlcmlhID0gZ2V0U2VhcmNoQ3JpdGVyaWEoKTtcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbnMuZ2V0Tm90aWZpY2F0aW9uTGlzdChzZWFyY2hDcml0ZXJpYSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSBkYXRhLnRvdGFsQ291bnQ7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpc3RFbnRyaWVzID0gZGF0YS5yZXN1bHRzID8gZGF0YS5yZXN1bHRzIDogW107XG4gICAgICAgICAgICAgICAgXy5tYXAoJHNjb3BlLmxpc3RFbnRyaWVzLCBmdW5jdGlvbihlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvdW5kTm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uVHlwZXNSZXNvbHZlclNlcnZpY2UucmVzb2x2ZShlbnRpdHkua2luZCk7IFxuICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmROb3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS5pY29uID0gZm91bmROb3RpZmljYXRpb24uaWNvbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5OyBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZVR5cGUoa2luZCkge1xuICAgICAgICAgICAgdmFyIGZvdW5kTm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uVHlwZXNSZXNvbHZlclNlcnZpY2UucmVzb2x2ZShraW5kKTtcbiAgICAgICAgICAgIGlmIChmb3VuZE5vdGlmaWNhdGlvbiAmJiBmb3VuZE5vdGlmaWNhdGlvbi5rbm93bkNoaWxkcmVuVHlwZXMgJiYgZm91bmROb3RpZmljYXRpb24ua25vd25DaGlsZHJlblR5cGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm91bmROb3RpZmljYXRpb247XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Tm90aWZpY2F0aW9uRGlhbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJub3RpZmljYXRpb25zLmRpYWxvZ3MudW5rbm93bi1raW5kLnRpdGxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIm5vdGlmaWNhdGlvbnMuZGlhbG9ncy51bmtub3duLWtpbmQubWVzc2FnZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVZhbHVlczogeyBraW5kOiBraW5kIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXV0aFNlcnZpY2UuY2hlY2tQZXJtaXNzaW9uKCdub3RpZmljYXRpb25zOmFjY2VzcycpKSB7XG4gICAgICAgICAgICBibGFkZS5lZGl0Tm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmROb3RpZmljYXRpb24gPSByZXNvbHZlVHlwZShpdGVtLmtpbmQpO1xuICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdlZGl0Tm90aWZpY2F0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdub3RpZmljYXRpb25zLmJsYWRlcy5ub3RpZmljYXRpb24tZGV0YWlscy50aXRsZScsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlVmFsdWVzOiB7IGRpc3BsYXlOYW1lOiAkdHJhbnNsYXRlLmluc3RhbnQoJ25vdGlmaWNhdGlvblR5cGVzLicgKyBpdGVtLnR5cGUgKyAnLmRpc3BsYXlOYW1lJykgfSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICB0ZW5hbnRJZDogYmxhZGUudGVuYW50SWQsXG4gICAgICAgICAgICAgICAgICAgIHRlbmFudFR5cGU6IGJsYWRlLnRlbmFudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZvdW5kTm90aWZpY2F0aW9uLmRldGFpbEJsYWRlLmNvbnRyb2xsZXIsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBmb3VuZE5vdGlmaWNhdGlvbi5kZXRhaWxCbGFkZS50ZW1wbGF0ZVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcblxuICAgICAgICBibGFkZS5zZXRTZWxlY3RlZE5vZGUgPSBmdW5jdGlvbiAobGlzdEl0ZW0pIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IGxpc3RJdGVtLnR5cGU7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICBibGFkZS5zZXRTZWxlY3RlZE5vZGUodHlwZSk7XG4gICAgICAgICAgIGJsYWRlLnNlbGVjdGVkVHlwZSA9IHR5cGU7XG4gICAgICAgICAgIGJsYWRlLmVkaXROb3RpZmljYXRpb24odHlwZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gdWktZ3JpZFxuICAgICAgICAkc2NvcGUuc2V0R3JpZE9wdGlvbnMgPSBmdW5jdGlvbiAoZ3JpZElkLCBncmlkT3B0aW9ucykge1xuICAgICAgICAgICAgJHNjb3BlLmdyaWRPcHRpb25zID0gZ3JpZE9wdGlvbnM7XG4gICAgICAgICAgICBncmlkT3B0aW9uRXh0ZW5zaW9uLnRyeUV4dGVuZEdyaWRPcHRpb25zKGdyaWRJZCwgZ3JpZE9wdGlvbnMpO1xuXG4gICAgICAgICAgICBncmlkT3B0aW9ucy5vblJlZ2lzdGVyQXBpID0gZnVuY3Rpb24gKGdyaWRBcGkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ3JpZEFwaSA9IGdyaWRBcGk7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYmxhZGVVdGlscy5pbml0aWFsaXplUGFnaW5hdGlvbigkc2NvcGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLWxpc3QnO1xuICAgICAgICAvL2JsYWRlLnJlZnJlc2goKTtcbiAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUubm90aWZpY2F0aW9uc01lbnVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGVQYXJhbXMsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UpIHtcbiAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgYmxhZGUudXBkYXRlUGVybWlzc2lvbiA9ICdub3RpZmljYXRpb25zOnJlYWQnO1xuXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUJsYWRlKCkge1xuICAgICAgICB2YXIgZW50aXRpZXMgPSBbXG4gICAgICAgICAgICB7IGlkOiAnMScsIG5hbWU6ICdub3RpZmljYXRpb25zLmJsYWRlcy5ub3RpZmljYXRpb25zLWxpc3QudGl0bGUnLCB0ZW1wbGF0ZU5hbWU6ICdub3RpZmljYXRpb25zLWxpc3QnLCBjb250cm9sbGVyTmFtZTogJ25vdGlmaWNhdGlvbnNMaXN0Q29udHJvbGxlcicsIGljb246ICdmYSBmYS1saXN0Jywgc3VidGl0bGU6ICdub3RpZmljYXRpb25zLmJsYWRlcy5ub3RpZmljYXRpb25zLWxpc3Quc3VidGl0bGUnIH0sXG4gICAgICAgICAgICB7IGlkOiAnMicsIG5hbWU6ICdub3RpZmljYXRpb25zLmJsYWRlcy5ub3RpZmljYXRpb25zLWpvdXJuYWwudGl0bGUnLCB0ZW1wbGF0ZU5hbWU6ICdub3RpZmljYXRpb25zLWpvdXJuYWwnLCBjb250cm9sbGVyTmFtZTogJ25vdGlmaWNhdGlvbnNKb3VybmFsQ29udHJvbGxlcicsIGljb246ICdmYSBmYS1ib29rJywgc3VidGl0bGU6ICdub3RpZmljYXRpb25zLmJsYWRlcy5ub3RpZmljYXRpb25zLWpvdXJuYWwuc3VidGl0bGUnIH1dO1xuICAgICAgICBibGFkZS5jdXJyZW50RW50aXRpZXMgPSBlbnRpdGllcztcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgfTtcblxuICAgIGJsYWRlLm9wZW5CbGFkZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmICghYmxhZGUuaGFzVXBkYXRlUGVybWlzc2lvbigpKSByZXR1cm47XG5cbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkTm9kZUlkID0gZGF0YS5pZDtcblxuICAgICAgICB2YXIgdGVuYW50SWQgPSAkc3RhdGVQYXJhbXMub2JqZWN0SWQ7XG4gICAgICAgIHZhciB0ZW5hbnRUeXBlID0gJHN0YXRlUGFyYW1zLm9iamVjdFR5cGVJZDtcbiAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgaWQ6ICdub3RpZmljYXRpb25zTGlzdCcsXG4gICAgICAgICAgICB0aXRsZTogZGF0YS5uYW1lLFxuICAgICAgICAgICAgdGVuYW50SWQ6IHRlbmFudElkLFxuICAgICAgICAgICAgdGVuYW50VHlwZTogdGVuYW50VHlwZSxcbiAgICAgICAgICAgIHN1YnRpdGxlOiBkYXRhLnN1YnRpdGxlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS4nICsgZGF0YS5jb250cm9sbGVyTmFtZSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucykvU2NyaXB0cy9ibGFkZXMvJyArIGRhdGEudGVtcGxhdGVOYW1lICsgJy50cGwuaHRtbCdcbiAgICAgICAgfTtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICB9XG5cbiAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1lbnZlbG9wZSc7XG5cbiAgICBpbml0aWFsaXplQmxhZGUoKTtcblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZScpXG4gICAgLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS50ZW1wbGF0ZVJlbmRlckNvbnRyb2xsZXInLCBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRsb2NhbFN0b3JhZ2UnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25zTW9kdWxlQXBpJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRzY29wZSwgJGxvY2FsU3RvcmFnZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgZGlhbG9nU2VydmljZSwgbm90aWZpY2F0aW9ucykge1xuICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgICAgIHZhciBrZXlUZW1wbGF0ZUxvY2FsU3RvcmFnZTtcblxuICAgICAgICBibGFkZS5keW5hbWljUHJvcGVydGllcyA9ICcnO1xuICAgICAgICBibGFkZS5vcmlnaW5IdG1sID0gJyc7XG5cbiAgICAgICAgJHNjb3BlLnNldEZvcm0gPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAgICAgJHNjb3BlLmZvcm1TY29wZSA9IGZvcm07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwbHVja0FkZHJlc3MoYWRkcmVzcykge1xuICAgICAgICAgICAgcmV0dXJuIGFkZHJlc3MgPyBfKGFkZHJlc3MpLnBsdWNrKCd2YWx1ZScpIDogYWRkcmVzcztcbiAgICAgICAgfVxuXG4gICAgICAgIGJsYWRlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgYmxhZGUuaXNSZW5kZXIgPSBmYWxzZTtcblxuICAgICAgICAgICAgdmFyIGxhbmd1YWdlID0gYmxhZGUubGFuZ3VhZ2VDb2RlID8gYmxhZGUubGFuZ3VhZ2VDb2RlIDogJ2RlZmF1bHQnO1xuXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGFuZ3VsYXIuY29weShibGFkZS5ub3RpZmljYXRpb24pO1xuICAgICAgICAgICAgZGF0YS5jYyA9IHBsdWNrQWRkcmVzcyhkYXRhLmNjKTtcbiAgICAgICAgICAgIGRhdGEuYmNjID0gcGx1Y2tBZGRyZXNzKGRhdGEuYmNjKTtcblxuICAgICAgICAgICAga2V5VGVtcGxhdGVMb2NhbFN0b3JhZ2UgPSBibGFkZS50ZW5hbnRUeXBlICsgJy4nICsgYmxhZGUubm90aWZpY2F0aW9uLnR5cGUgKyAnLicgKyBsYW5ndWFnZTtcbiAgICAgICAgICAgIHZhciBpdGVtRnJvbUxvY2FsU3RvcmFnZSA9ICRsb2NhbFN0b3JhZ2Vba2V5VGVtcGxhdGVMb2NhbFN0b3JhZ2VdO1xuICAgICAgICAgICAgaWYgKGl0ZW1Gcm9tTG9jYWxTdG9yYWdlKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUubm90aWZpY2F0aW9uLmNvbnRleHQgPSBpdGVtRnJvbUxvY2FsU3RvcmFnZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbm90aWZpY2F0aW9ucy5yZW5kZXJUZW1wbGF0ZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogYmxhZGUubm90aWZpY2F0aW9uLnR5cGUsXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IGxhbmd1YWdlXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdGV4dDogYmxhZGUuY3VycmVudEVudGl0eS5ib2R5LFxuICAgICAgICAgICAgICAgIGRhdGFcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGJsYWRlLm9yaWdpbkh0bWwgPSByZXNwb25zZS5odG1sO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLWV5ZSc7XG5cbiAgICAgICAgYmxhZGUuaW5pdGlhbGl6ZSgpO1xuICAgIH1dKTtcbiIsIu+7v2FuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUnKVxuLmRpcmVjdGl2ZSgndmNKb3VybmFsU2VhcmNoJywgWyckbG9jYWxTdG9yYWdlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlLnByZWRlZmluZWRTZWFyY2hGaWx0ZXJzJywgZnVuY3Rpb24gKCRsb2NhbFN0b3JhZ2UsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIHByZWRlZmluZWRTZWFyY2hGaWx0ZXJzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uIChlbGVtLCBhdHRycykge1xuICAgICAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsIHx8ICdub3RpZmljYXRpb25zSm91cm5hbC1pdGVtU2VhcmNoLWRlZmF1bHQuaHRtbCdcbiAgICAgICAgfSxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGJsYWRlOiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKCRzY29wZSkge1xuICAgICAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgICAgICAgICAgJHNjb3BlLiRsb2NhbFN0b3JhZ2UgPSAkbG9jYWxTdG9yYWdlO1xuICAgICAgICAgICAgdmFyIGZpbHRlciA9ICRzY29wZS5maWx0ZXIgPSBibGFkZS5maWx0ZXI7XG5cbiAgICAgICAgICAgIGlmICgkbG9jYWxTdG9yYWdlLm5vdGlmaWNhdGlvbnNKb3VybmFsU2VhcmNoRmlsdGVySWQgJiYgIWZpbHRlci5rZXl3b3JkICYmIGZpbHRlci5rZXl3b3JkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyLmN1cnJlbnQgPSBfLmZpbmRXaGVyZSgkbG9jYWxTdG9yYWdlLm5vdGlmaWNhdGlvbnNKb3VybmFsU2VhcmNoRmlsdGVycywgeyBpZDogJGxvY2FsU3RvcmFnZS5ub3RpZmljYXRpb25zSm91cm5hbFNlYXJjaEZpbHRlcklkIH0pO1xuICAgICAgICAgICAgICAgIGZpbHRlci5rZXl3b3JkID0gZmlsdGVyLmN1cnJlbnQgPyBmaWx0ZXIuY3VycmVudC5rZXl3b3JkIDogJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dGaWx0ZXJEZXRhaWxCbGFkZShibGFkZURhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAnZmlsdGVyRGV0YWlsJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5maWx0ZXJKb3VybmFsRGV0YWlsQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucykvU2NyaXB0cy9ibGFkZXMvZmlsdGVyLWRldGFpbC50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChuZXdCbGFkZSwgYmxhZGVEYXRhKTtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZmlsdGVyLmNoYW5nZSA9IGZ1bmN0aW9uIChpc0RldGFpbEJsYWRlT3Blbikge1xuICAgICAgICAgICAgICAgICRsb2NhbFN0b3JhZ2Uubm90aWZpY2F0aW9uc0pvdXJuYWxTZWFyY2hGaWx0ZXJJZCA9IGZpbHRlci5jdXJyZW50ID8gZmlsdGVyLmN1cnJlbnQuaWQgOiBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIuY3VycmVudCAmJiAhZmlsdGVyLmN1cnJlbnQuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBzaG93RmlsdGVyRGV0YWlsQmxhZGUoeyBpc05ldzogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRGV0YWlsQmxhZGVPcGVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKHsgaWQ6ICdmaWx0ZXJKb3VybmFsRGV0YWlsJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyLmtleXdvcmQgPSBmaWx0ZXIuY3VycmVudCA/IGZpbHRlci5jdXJyZW50LmtleXdvcmQgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyLmNyaXRlcmlhQ2hhbmdlZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZpbHRlci5lZGl0ID0gZnVuY3Rpb24gKCRldmVudCwgZW50cnkpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXIuY3VycmVudCA9IGVudHJ5O1xuICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJEZXRhaWxCbGFkZSh7IGRhdGE6IGVudHJ5IH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlJylcbiAgICAuZmFjdG9yeSgndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlLm5vdGlmaWNhdGlvbnNNb2R1bGVBcGknLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgnYXBpL25vdGlmaWNhdGlvbnMvOmlkJywgeyBpZDogJ0BJZCcgfSwge1xuICAgICAgICAgICAgZ2V0Tm90aWZpY2F0aW9uTGlzdDogeyBtZXRob2Q6ICdQT1NUJywgdXJsOiAnYXBpL25vdGlmaWNhdGlvbnMnIH0sXG4gICAgICAgICAgICBnZXROb3RpZmljYXRpb25CeVR5cGU6IHsgbWV0aG9kOiAnR0VUJywgdXJsOiAnYXBpL25vdGlmaWNhdGlvbnMvOnR5cGUnLCB9LFxuICAgICAgICAgICAgdXBkYXRlTm90aWZpY2F0aW9uOiB7IG1ldGhvZDogJ1BVVCcsIHVybDogJ2FwaS9ub3RpZmljYXRpb25zLzp0eXBlJyB9LFxuICAgICAgICAgICAgZ2V0VGVtcGxhdGVzOiB7IG1ldGhvZDogJ0dFVCcsIHVybDogJ2FwaS9ub3RpZmljYXRpb25zLzp0eXBlL3RlbXBsYXRlcycsIGlzQXJyYXk6IHRydWUgfSxcbiAgICAgICAgICAgIGdldFRlbXBsYXRlQnlJZDogeyBtZXRob2Q6ICdHRVQnLCB1cmw6ICdhcGkvbm90aWZpY2F0aW9ucy86dHlwZS90ZW1wbGF0ZXMvOmlkJyB9LFxuICAgICAgICAgICAgZ2V0VGVtcGxhdGU6IHsgbWV0aG9kOiAnR0VUJywgdXJsOiAnYXBpL25vdGlmaWNhdGlvbnMvOnR5cGUvOmxhbmd1YWdlL3RlbXBsYXRlcycgfSxcbiAgICAgICAgICAgIGNyZWF0ZVRlbXBsYXRlOiB7IG1ldGhvZDogJ1BPU1QnLCB1cmw6ICdhcGkvbm90aWZpY2F0aW9ucy86dHlwZS90ZW1wbGF0ZXMnIH0sXG4gICAgICAgICAgICB1cGRhdGVUZW1wbGF0ZTogeyBtZXRob2Q6ICdQVVQnLCB1cmw6ICdhcGkvbm90aWZpY2F0aW9ucy86dHlwZS90ZW1wbGF0ZXMvOmlkJyB9LFxuICAgICAgICAgICAgcmVuZGVyVGVtcGxhdGU6IHsgbWV0aG9kOiAnUE9TVCcsIHVybDogJ2FwaS9ub3RpZmljYXRpb25zLzp0eXBlL3RlbXBsYXRlcy86bGFuZ3VhZ2UvcmVuZGVyY29udGVudCcgfSxcbiAgICAgICAgICAgIGdldE5vdGlmaWNhdGlvbkpvdXJuYWxMaXN0OiB7IG1ldGhvZDogJ1BPU1QnLCB1cmw6ICdhcGkvbm90aWZpY2F0aW9ucy9qb3VybmFsJyB9LFxuICAgICAgICAgICAgZ2V0Tm90aWZpY2F0aW9uSm91cm5hbERldGFpbHM6IHsgbWV0aG9kOiAnR0VUJywgdXJsOiAnYXBpL25vdGlmaWNhdGlvbnMvam91cm5hbC86aWQnIH0sXG4gICAgICAgICAgICByZXNlbmROb3RpZmljYXRpb25zOiB7IG1ldGhvZDogJ1BPU1QnLCB1cmw6ICdhcGkvbm90aWZpY2F0aW9ucy9zY2hlZHVsZXJlc2VuZCcgfVxuICAgICAgICB9KVxuICAgIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUnKVxuLmZhY3RvcnkoJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25UeXBlc1Jlc29sdmVyU2VydmljZScsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBvYmplY3RzOiBbXSxcbiAgICAgICAgcmVnaXN0ZXJUeXBlOiBmdW5jdGlvbiAobm90aWZpY2F0aW9uVHlwZURlZmluaXRpb24pIHtcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblR5cGVEZWZpbml0aW9uLmRldGFpbEJsYWRlID0gYW5ndWxhci5leHRlbmQoe1xuICAgICAgICAgICAgICAgIGlkOiBcImVkaXROb3RpZmljYXRpb25cIixcbiAgICAgICAgICAgICAgICBtZXRhRmllbGRzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBub3RpZmljYXRpb25UeXBlRGVmaW5pdGlvbi5kZXRhaWxCbGFkZS5jb250cm9sbGVyLFxuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblR5cGVEZWZpbml0aW9uOiBub3RpZmljYXRpb25UeXBlRGVmaW5pdGlvblxuICAgICAgICAgICAgfSwgbm90aWZpY2F0aW9uVHlwZURlZmluaXRpb24uZGV0YWlsQmxhZGUpO1xuXG4gICAgICAgICAgICBub3RpZmljYXRpb25UeXBlRGVmaW5pdGlvbi5rbm93bkNoaWxkcmVuVHlwZXMgPSBub3RpZmljYXRpb25UeXBlRGVmaW5pdGlvbi5rbm93bkNoaWxkcmVuVHlwZXMgfHwgW107XG5cbiAgICAgICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKG5vdGlmaWNhdGlvblR5cGVEZWZpbml0aW9uKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBfLmZpbmRXaGVyZSh0aGlzLm9iamVjdHMsIHsgdHlwZTogdHlwZSB9KTtcbiAgICAgICAgfVxuICAgIH07XG59KVxuLmZhY3RvcnkoJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25UZW1wbGF0ZXNSZXNvbHZlclNlcnZpY2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb2JqZWN0czogW10sXG4gICAgICAgIHJlZ2lzdGVyVGVtcGxhdGU6IGZ1bmN0aW9uIChub3RpZmljYXRpb25UeXBlRGVmaW5pdGlvbikge1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uVHlwZURlZmluaXRpb24uZGV0YWlsQmxhZGUgPSBhbmd1bGFyLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgaWQ6IFwiZWRpdFRlbXBsYXRlXCIsXG4gICAgICAgICAgICAgICAgbWV0YUZpZWxkczogW10sXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5lZGl0VGVtcGxhdGVDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25UeXBlRGVmaW5pdGlvbjogbm90aWZpY2F0aW9uVHlwZURlZmluaXRpb25cbiAgICAgICAgICAgIH0sIG5vdGlmaWNhdGlvblR5cGVEZWZpbml0aW9uLmRldGFpbEJsYWRlKTtcblxuICAgICAgICAgICAgbm90aWZpY2F0aW9uVHlwZURlZmluaXRpb24ua25vd25DaGlsZHJlblR5cGVzID0gbm90aWZpY2F0aW9uVHlwZURlZmluaXRpb24ua25vd25DaGlsZHJlblR5cGVzIHx8IFtdO1xuXG4gICAgICAgICAgICB0aGlzLm9iamVjdHMucHVzaChub3RpZmljYXRpb25UeXBlRGVmaW5pdGlvbik7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUodGhpcy5vYmplY3RzLCB7IHR5cGU6IHR5cGUgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlJylcbiAgICAuY29udHJvbGxlcigndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlLm5vdGlmaWNhdGlvbnNBdHRhY2htZW50c1dpZGdldENvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xuXHR2YXIgYmxhZGUgPSAkc2NvcGUud2lkZ2V0LmJsYWRlO1xuXG5cdGJsYWRlLnNob3dBdHRhY2htZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBOb24gaW1wbGVtZW50ZWQgY29ycmVjdGx5IHlldC4gRGlzYWJsZSB0byBhdm9pZCB1c2VyIGNvbmZ1c2luZy5cbiAgICAgICAgICAgICAgICAvKlxuXHRcdHZhciBvYmplY3RJZCA9IGJsYWRlLmN1cnJlbnRFbnRpdHkuaWQ7XG4gICAgdmFyIG9iamVjdFR5cGVJZCA9ICdOb3RpZmljYXRpb25zJztcblx0XHR2YXIgbmV3QmxhZGUgPSB7XG5cdFx0XHRpZDogJ25vdGlmaWNhdGlvbkxvZ1dpZGdldENoaWxkJyxcbiAgICAgICAgICAgIHRpdGxlOiAnbm90aWZpY2F0aW9ucy53aWRnZXRzLm5vdGlmaWNhdGlvbnNBdHRhY2htZW50c1dpZGdldC5ibGFkZS10aXRsZScsXG5cdFx0XHR0aXRsZVZhbHVlczogeyBpZDogYmxhZGUuY3VycmVudEVudGl0eS5pZCB9LFxuXHRcdFx0b2JqZWN0SWQ6IG9iamVjdElkLFxuXHRcdFx0b2JqZWN0VHlwZUlkOiBvYmplY3RUeXBlSWQsXG5cdFx0XHRsYW5ndWFnZXM6IGJsYWRlLmN1cnJlbnRFbnRpdHkubGFuZ3VhZ2VzLFxuICAgICAgICAgICAgc3VidGl0bGU6ICdub3RpZmljYXRpb25zLndpZGdldHMubm90aWZpY2F0aW9uc0F0dGFjaG1lbnRzV2lkZ2V0LmJsYWRlLXN1YnRpdGxlJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUubm90aWZpY2F0aW9uc0F0dGFjaG1lbnRzQ29udHJvbGxlcicsXG5cdFx0XHR0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk5vdGlmaWNhdGlvbnMpL1NjcmlwdHMvYmxhZGVzL25vdGlmaWNhdGlvbnMtYXR0YWNobWVudHMudHBsLmh0bWwnXG5cdFx0fTtcblx0XHRibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgICAgICovXG5cdH07XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUubm90aWZpY2F0aW9uc0xvZ1dpZGdldENvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xuXHR2YXIgYmxhZGUgPSAkc2NvcGUud2lkZ2V0LmJsYWRlO1xuXG5cdGJsYWRlLnNob3dMb2cgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgaWQ6ICdub3RpZmljYXRpb25BdHRhY2htZW50c1dpZGdldENoaWxkJyxcbiAgICAgICAgICAgIHRpdGxlOiAnbm90aWZpY2F0aW9ucy53aWRnZXRzLm5vdGlmaWNhdGlvbnNMb2dXaWRnZXQuYmxhZGUtdGl0bGUnLFxuXHRcdFx0dGl0bGVWYWx1ZXM6IHsgaWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHkuaWQgfSxcblx0XHRcdG5vdGlmaWNhdGlvblR5cGU6IGJsYWRlLmN1cnJlbnRFbnRpdHkudHlwZSxcblx0XHRcdGxhbmd1YWdlczogYmxhZGUuY3VycmVudEVudGl0eS5sYW5ndWFnZXMsXG4gICAgICAgICAgICBzdWJ0aXRsZTogJ25vdGlmaWNhdGlvbnMud2lkZ2V0cy5ub3RpZmljYXRpb25zTG9nV2lkZ2V0LmJsYWRlLXN1YnRpdGxlJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUubm90aWZpY2F0aW9uc0pvdXJuYWxDb250cm9sbGVyJyxcblx0XHRcdHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTm90aWZpY2F0aW9ucykvU2NyaXB0cy9ibGFkZXMvbm90aWZpY2F0aW9ucy1qb3VybmFsLnRwbC5odG1sJ1xuXHRcdH07XG5cdFx0YmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcblx0fTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUnKVxuICAgIC5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm5vdGlmaWNhdGlvbnNNb2R1bGUubm90aWZpY2F0aW9uc1RlbXBsYXRlc1dpZGdldENvbnRyb2xsZXInLCBbJyRzY29wZScsICckdHJhbnNsYXRlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkdHJhbnNsYXRlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG4gICAgICAgIHZhciBibGFkZSA9ICRzY29wZS53aWRnZXQuYmxhZGU7XG4gICAgICAgICRzY29wZS50ZW1wbGF0ZXNDb3VudCA9ICcuLi4nO1xuXG4gICAgICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKCdibGFkZS5jdXJyZW50RW50aXR5LnRlbXBsYXRlcycsIGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgaWYgKGl0ZW1zKVxuICAgICAgICAgICAgICAgICRzY29wZS50ZW1wbGF0ZXNDb3VudCA9IF8udW5pcShpdGVtcywgZnVuY3Rpb24gKHRlbXBsYXRlKSB7IHJldHVybiB0ZW1wbGF0ZS5sYW5ndWFnZUNvZGUgfHwgbnVsbDsgfSkubGVuZ3RoO1xuICAgICAgICB9KTtcblxuICAgICAgICBibGFkZS5zaG93VGVtcGxhdGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgIGlkOiAnbm90aWZpY2F0aW9uVGVtcGxhdGVzV2lkZ2V0Q2hpbGQnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnbm90aWZpY2F0aW9ucy53aWRnZXRzLm5vdGlmaWNhdGlvbnNUZW1wbGF0ZXNXaWRnZXQuYmxhZGUtdGl0bGUnLFxuICAgICAgICAgICAgICAgIHRpdGxlVmFsdWVzOiB7IGRpc3BsYXlOYW1lOiAkdHJhbnNsYXRlLmluc3RhbnQoJ25vdGlmaWNhdGlvblR5cGVzLicgKyBibGFkZS5jdXJyZW50RW50aXR5LnR5cGUgKyAnLmRpc3BsYXlOYW1lJykgfSxcbiAgICAgICAgICAgICAgICB0ZW5hbnRJZDogYmxhZGUuY3VycmVudEVudGl0eS50ZW5hbnRJZCxcbiAgICAgICAgICAgICAgICB0ZW5hbnRUeXBlOiBibGFkZS5jdXJyZW50RW50aXR5LnRlbmFudFR5cGUsXG4gICAgICAgICAgICAgICAgY3VycmVudEVudGl0eTogYmxhZGUuY3VycmVudEVudGl0eSxcbiAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ25vdGlmaWNhdGlvbnMud2lkZ2V0cy5ub3RpZmljYXRpb25zVGVtcGxhdGVzV2lkZ2V0LmJsYWRlLXN1YnRpdGxlJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlLm5vdGlmaWNhdGlvblRlbXBsYXRlc0xpc3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk5vdGlmaWNhdGlvbnMpL1NjcmlwdHMvYmxhZGVzL25vdGlmaWNhdGlvbi10ZW1wbGF0ZXMtbGlzdC50cGwuaHRtbCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICB9O1xuICAgIH1dKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=