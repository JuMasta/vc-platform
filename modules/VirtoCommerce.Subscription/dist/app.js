!function(e){var t={};function i(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(r,o,function(t){return e[t]}.bind(null,o));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){i(1),i(2),i(3),i(4),i(5),i(6),i(7),i(8),i(9),i(10),i(11),e.exports=i(12)},function(e,t){var i="virtoCommerce.subscriptionModule";void 0!==AppDependencies&&AppDependencies.push(i),angular.module(i,["virtoCommerce.orderModule"]).config(["$stateProvider",function(e){e.state("workspace.subscriptionModule",{url:"/subscriptions",templateUrl:"$(Platform)/Scripts/common/templates/home.tpl.html",controller:["$scope","platformWebApp.bladeNavigationService",function(e,t){t.showBlade({id:"subscription-list",title:"subscription.blades.subscription-list.title",controller:"virtoCommerce.subscriptionModule.subscriptionListController",template:"Modules/$(VirtoCommerce.Subscription)/Scripts/blades/subscription-list.tpl.html",isClosingDisabled:!0}),e.moduleName="vc-order vc-subscription"}]})}]).run(["$http","$compile","platformWebApp.mainMenuService","platformWebApp.widgetService","$state","virtoCommerce.orderModule.knownOperations","platformWebApp.authService",function(e,t,i,r,o,n,s){var a={path:"browse/subscriptions",icon:"fa fa-retweet",title:"subscription.main-menu-title",priority:100,action:function(){o.go("workspace.subscriptionModule")},permission:"subscription:access"};i.addMenuItem(a);var l=n.getOperation("CustomerOrder"),c=angular.copy(l.detailBlade.knownChildrenOperations),u=["isApproved","number","status","discountAmount"],d=_.filter(l.detailBlade.metaFields,(function(e){return!_.contains(u,e.name)})),p=[{name:"number",isRequired:!0,title:"subscription.blades.subscription-detail.labels.number",valueType:"ShortText"},{name:"currentPeriodEnd",title:"subscription.blades.subscription-detail.labels.billing-date",valueType:"DateTime"},{name:"endDate",title:"subscription.blades.subscription-detail.labels.expiration",valueType:"DateTime"},{name:"trialEnd",title:"subscription.blades.subscription-detail.labels.trial-expiration",valueType:"DateTime"}];_.each(d,(function(e){p.push(e)})),n.registerOperation({type:"Subscription",detailBlade:{id:"subscriptionDetail",controller:"virtoCommerce.subscriptionModule.subscriptionDetailController",template:"Modules/$(VirtoCommerce.Subscription)/Scripts/blades/subscription-detail.tpl.html",knownChildrenOperations:c,metaFields:p}}),e.get("Modules/$(VirtoCommerce.Orders)/Scripts/blades/customerOrder-detail.tpl.html").then((function(e){t(e.data)})),r.registerWidget({controller:"virtoCommerce.subscriptionModule.subscriptionOrdersWidgetController",template:"Modules/$(VirtoCommerce.Subscription)/Scripts/widgets/subscription-orders-widget.tpl.html"},"subscriptionDetail"),r.registerWidget({controller:"virtoCommerce.subscriptionModule.orderDynamicPropertyWidgetController",template:"Modules/$(VirtoCommerce.Subscription)/Scripts/widgets/orderDynamicPropertyWidget.tpl.html"},"subscriptionDetail"),r.registerWidget({controller:"platformWebApp.changeLog.operationsWidgetController",template:"$(Platform)/Scripts/app/changeLog/widgets/operations-widget.tpl.html"},"subscriptionDetail"),r.registerWidget({controller:"virtoCommerce.subscriptionModule.notificationsLogWidgetController",template:"Modules/$(VirtoCommerce.Subscription)/Scripts/widgets/notificationsLogWidget.tpl.html"},"subscriptionDetail");var m={controller:"virtoCommerce.subscriptionModule.scheduleWidgetController",template:"Modules/$(VirtoCommerce.Subscription)/Scripts/widgets/integrations/schedule-widget.tpl.html"};r.registerWidget(m,"subscriptionDetail"),r.registerWidget(m,"itemDetail"),_.each(r.widgetsMap.customerOrderDetailWidgets,(function(e){"platformWebApp.dynamicPropertyWidgetController"!==e.controller&&"virtoCommerce.orderModule.notificationsLogWidgetController"!==e.controller&&r.registerWidget(e,"subscriptionDetail")})),r.registerWidget({controller:"virtoCommerce.subscriptionModule.orderSubscriptionWidgetController",isVisible:function(e){return"orderDetail"===e.id&&s.checkPermission("subscription:read")},template:"Modules/$(VirtoCommerce.Subscription)/Scripts/widgets/integrations/order-subscription-widget.tpl.html"},"customerOrderDetailWidgets")}])},function(e,t){angular.module("virtoCommerce.subscriptionModule").controller("virtoCommerce.subscriptionModule.filterDetailController",["$scope","$localStorage","virtoCommerce.storeModule.stores","platformWebApp.settings","virtoCommerce.customerModule.members","$translate",function(e,t,i,r,o,n){var s,a=e.blade;function l(e){a.currentEntity=angular.copy(e),a.origEntity=e,a.isLoading=!1,a.title=a.isNew?"subscription.blades.filter-detail.new-title":e.name,a.subtitle=a.isNew?"subscription.blades.filter-detail.new-subtitle":"subscription.blades.filter-detail.subtitle"}a.metaFields=[{name:"statuses",title:"subscription.blades.subscription-detail.labels.status",templateUrl:"statusesSelector.html"},{name:"storeId",title:"orders.blades.customerOrder-detail.labels.store",templateUrl:"storeSelector.html"},{name:"startDate",title:"subscription.blades.filter-detail.labels.from",valueType:"DateTime"},{name:"endDate",title:"subscription.blades.filter-detail.labels.to",valueType:"DateTime"},{name:"outerId",title:"subscription.blades.filter-detail.labels.outer-id",valueType:"ShortText"}],a.statuses=r.getValues({id:"Subscription.Status"}),a.stores=i.query(),e.saveChanges=function(){angular.copy(a.currentEntity,a.origEntity),a.isNew&&(t.subscriptionSearchFilters.push(a.origEntity),t.subscriptionSearchFilterId=a.origEntity.id,a.parentBlade.filter.current=a.origEntity,a.isNew=!1),l(a.origEntity),a.parentBlade.filter.criteriaChanged()},e.setForm=function(e){s=e},a.headIcon="fa fa-filter",a.toolbarCommands=[{name:"core.commands.apply-filter",icon:"fa fa-filter",executeMethod:function(){e.saveChanges()},canExecuteMethod:function(){return s&&s.$valid}},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(a.origEntity,a.currentEntity)},canExecuteMethod:function(){return!angular.equals(a.currentEntity,a.origEntity)}},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){a.parentBlade.filter.current=null,t.subscriptionSearchFilters.splice(t.subscriptionSearchFilters.indexOf(a.origEntity),1),delete t.subscriptionSearchFilterId,a.parentBlade.refresh(),e.bladeClose()},canExecuteMethod:function(){return!a.isNew}}],a.isNew?n("subscription.blades.subscription-list.labels.unnamed-filter").then((function(e){l({id:(new Date).getTime(),name:e})})):l(a.data)}])},function(e,t){angular.module("virtoCommerce.subscriptionModule").controller("virtoCommerce.subscriptionModule.scheduleDetailController",["$scope","platformWebApp.bladeNavigationService","platformWebApp.dialogService","virtoCommerce.subscriptionModule.scheduleAPI",function(e,t,i,r){var o=e.blade;function n(){return!angular.equals(o.currentEntity,o.origEntity)&&o.hasUpdatePermission()}function s(){return n()&&e.formScope.$valid}o.updatePermission="subscription:update",o.isNew=!o.data.id,o.initialize=function(t){o.isNew&&angular.extend(t,{intervalCount:1,interval:e.intervals[2]}),o.origEntity=t,o.currentEntity=angular.copy(t),o.isLoading=!1},e.intervals=["days","weeks","months","years"],e.setForm=function(t){e.formScope=t},o.onClose=function(i){t.showConfirmationIfNeeded(n()&&!o.isNew,s(),o,e.saveChanges,i,"subscription.dialogs.schedule-save.title","subscription.dialogs.schedule-save.message")},e.cancelChanges=function(){o.currentEntity=o.origEntity,e.bladeClose()},e.saveChanges=function(){o.isApiSave?(o.isLoading=!0,o.isNew&&(o.currentEntity.id=o.itemId),r.save(o.currentEntity,(function(){angular.copy(o.currentEntity,o.origEntity),e.bladeClose()}))):(angular.copy(o.currentEntity,o.origEntity),e.bladeClose())},o.toolbarCommands=[{name:"platform.commands.save",icon:"fas fa-save",executeMethod:e.saveChanges,canExecuteMethod:s,permission:o.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(o.origEntity,o.currentEntity)},canExecuteMethod:n,permission:o.updatePermission},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){i.showConfirmationDialog({id:"confirmDeleteItem",title:"subscription.dialogs.schedule-delete.title",message:"subscription.dialogs.schedule-delete.message",callback:function(t){t&&r.delete({ids:[o.origEntity.id]},(function(){o.currentEntity={},angular.copy(o.currentEntity,o.origEntity),e.bladeClose()}))}})},canExecuteMethod:function(){return!0},permission:"subscription:delete"}],!o.isNew&&o.isApiSave||(e.blade.toolbarCommands.splice(0,1),e.blade.toolbarCommands.splice(1,1)),o.isNew?angular.extend(o,{title:"subscription.blades.schedule-detail.title-new",subtitle:"subscription.blades.schedule-detail.subtitle-new"}):angular.extend(o,{title:"subscription.blades.schedule-detail.title"}),o.initialize(o.data)}])},function(e,t){angular.module("virtoCommerce.subscriptionModule").controller("virtoCommerce.subscriptionModule.subscriptionDetailController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.subscriptionModule.subscriptionAPI","platformWebApp.dialogService","virtoCommerce.orderModule.order_res_customerOrders","$timeout","focus","moment",function(e,t,i,r,o,n,s,a){var l=e.blade;function c(){return l.origEntity&&!angular.equals(l.origEntity,l.currentEntity)&&!l.isNew&&l.hasUpdatePermission()}function u(){return c()&&(!e.formScope||e.formScope.$valid)}l.updatePermission="subscription:update",l.customerOrder={},l.toolbarCommands=[],l.refresh=function(){"operationDetail"===l.id||(l.isLoading=!0,i.get({id:l.entityNode.id},(function(e){e.items=e.customerOrderPrototype.items,l.initialize(e),l.customerOrder=l.currentEntity.customerOrderPrototype,l.securityScopes=e.scopes})))},l.initialize=function(o){l.origEntity=o,l.currentEntity=angular.copy(o),angular.extend(l,{title:"subscription.blades.subscription-detail.title",titleValues:{number:l.origEntity.number},subtitle:"subscription.blades.subscription-detail.subtitle"}),l.toolbarCommands=[{name:"orders.commands.new-document",icon:"fas fa-plus",executeMethod:function(){var e={id:"newOperationWizard",customerOrder:l.customerOrder,currentEntity:l.currentEntity,stores:l.stores,availableTypes:l.knownChildrenOperations,title:"orders.blades.newOperation-wizard.title",subtitle:"orders.blades.newOperation-wizard.subtitle",controller:"virtoCommerce.orderModule.newOperationWizardController",template:"Modules/$(VirtoCommerce.Orders)/Scripts/wizards/newOperation/newOperation-wizard.tpl.html"};t.showBlade(e,l)},canExecuteMethod:function(){return!l.isLocked&&_.any(l.knownChildrenOperations)},permission:l.updatePermission},{name:"platform.commands.save",icon:"fas fa-save",executeMethod:e.saveChanges,canExecuteMethod:u,permission:l.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(l.origEntity,l.currentEntity)},canExecuteMethod:c,permission:l.updatePermission},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){var e={id:"confirmDeleteItem",title:"orders.dialogs.operation-delete.title",message:"orders.dialogs.operation-delete.message",callback:function(e){e&&("operationDetail"===l.id||i.delete({ids:l.origEntity.id},(function(){l.parentBlade.refresh(),t.closeBlade(l)})))}};r.showConfirmationDialog(e)},canExecuteMethod:function(){return!0},permission:"order:delete"},{name:"orders.commands.cancel-document",icon:"fa fa-remove",executeMethod:function(){var t={id:"confirmCancelOperation",callback:function(t){l.currentEntity.cancelReason=null==t||t.replace(/\s/g,"").length<1?null:t,l.currentEntity.cancelledDate=a().utc(),l.currentEntity.isCancelled=!0,l.setEntityStatus("Cancelled"),e.saveChanges()}};r.showDialog(t,"Modules/$(VirtoCommerce.Orders)/Scripts/dialogs/cancelOperation-dialog.tpl.html","virtoCommerce.orderModule.confirmCancelDialogController")},canExecuteMethod:function(){return l.currentEntity&&!l.currentEntity.isCancelled},permission:l.updatePermission},{name:"subscription.commands.new-order",icon:"fa fa-file-text",executeMethod:function(){r.showConfirmationDialog({id:"confirmDialog",title:"subscription.dialogs.new-order.title",message:"subscription.dialogs.new-order.message",callback:function(e){e&&t.closeChildrenBlades(l,(function(){i.createOrder(l.currentEntity,(function(e){l.refresh(),l.parentBlade.refresh()}))}))}})},canExecuteMethod:function(){return!l.isLocked&&!c()},permission:"order:create"}],l.isLocked=l.currentEntity.isCancelled,l.isLoading=!1},l.setEntityStatus=function(e){l.currentEntity.subscriptionStatus=e},l.recalculate=function(){l.isLoading=!0,o.recalculate(l.customerOrder,(function(e){angular.copy(e,l.customerOrder);var t=document.activeElement.id;t&&n((function(){s(t),document.getElementById(t).select()})),l.isLoading=!1}))},e.saveChanges=function(){"operationDetail"===l.id?(angular.copy(l.currentEntity,l.origEntity),e.bladeClose(),l.isTotalsRecalculationNeeded&&l.recalculate()):(l.isLoading=!0,i.update(l.currentEntity,(function(){l.refresh(),l.parentBlade.refresh()})))},e.cancelChanges=function(){l.currentEntity=l.origEntity,e.bladeClose()},e.setForm=function(t){e.formScope=t},l.onClose=function(i){t.showConfirmationIfNeeded(c(),u(),l,e.saveChanges,i,"orders.dialogs.operation-save.title","orders.dialogs.operation-save.message")},e.cancelOperationResolution=function(e){$modalInstance.close(e)},l.refresh()}])},function(e,t){angular.module("virtoCommerce.subscriptionModule").controller("virtoCommerce.subscriptionModule.subscriptionListController",["$scope","$localStorage","virtoCommerce.subscriptionModule.subscriptionAPI","virtoCommerce.orderModule.knownOperations","platformWebApp.bladeNavigationService","platformWebApp.dialogService","platformWebApp.uiGridHelper","platformWebApp.bladeUtils","dateFilter",function(e,t,i,r,o,n,s,a,l){e.uiGridConstants=s.uiGridConstants;var c=e.blade;c.refresh=function(){c.isLoading=!0;var t={keyword:u.keyword,sort:s.getSortExpression(e),skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount,responseGroup:"Default"};u.current&&angular.extend(t,u.current),i.search(t,(function(t){e.pageSettings.totalItems=t.totalCount,c.currentEntities=t.results,c.isLoading=!1}))},e.openDetailsBlade=function(t){e.selectedNodeId=t.id;var i=r.getOperation("Subscription"),n=angular.copy(i.detailBlade);n.entityNode=t,o.showBlade(n,c)},e.deleteList=function(t){var r={id:"confirmDelete",callback:function(r){r&&o.closeChildrenBlades(c,(function(){e.selectedNodeId=void 0,c.isLoading=!0;var r=_.pluck(t,"id");i.remove({ids:r},c.refresh)}))}};n.showDialog(r,"Modules/$(VirtoCommerce.Subscription)/Scripts/dialogs/deleteSubscription-dialog.tpl.html","platformWebApp.confirmDialogController")},c.headIcon="fa fa-retweet",c.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:c.refresh,canExecuteMethod:function(){return!0}},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){e.deleteList(e.gridApi.selection.getSelectedRows())},canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())},permission:"subscription:delete"}];var u=c.filter=e.filter={};function d(e){var t={id:"filterDetail",controller:"virtoCommerce.subscriptionModule.filterDetailController",template:"Modules/$(VirtoCommerce.Subscription)/Scripts/blades/filter-detail.tpl.html"};angular.extend(t,e),o.showBlade(t,c)}e.$localStorage=t,t.subscriptionSearchFilters||(t.subscriptionSearchFilters=[{name:"subscription.blades.subscription-list.labels.new-filter"}]),t.subscriptionSearchFilterId&&(u.current=_.findWhere(t.subscriptionSearchFilters,{id:t.subscriptionSearchFilterId})),u.change=function(){t.subscriptionSearchFilterId=u.current?u.current.id:null,u.current&&!u.current.id?(u.current=null,d({isNew:!0})):(o.closeBlade({id:"filterDetail"}),u.criteriaChanged())},u.edit=function(){u.current&&d({data:u.current})},u.criteriaChanged=function(){e.pageSettings.currentPage>1?e.pageSettings.currentPage=1:c.refresh()},e.setGridOptions=function(t){var i=_.findWhere(t.columnDefs,{name:"createdDate"});i&&(i.cellTooltip=function(e,t){return l(e.entity.createdDate,"medium")}),s.initialize(e,t,(function(t){s.bindRefreshOnSortChanged(e)})),a.initializePagination(e)}}])},function(e,t){angular.module("virtoCommerce.subscriptionModule").factory("virtoCommerce.subscriptionModule.subscriptionAPI",["$resource",function(e){return e("api/subscriptions/:id",null,{search:{method:"POST",url:"api/subscriptions/search"},update:{method:"PUT"},createOrder:{method:"POST",url:"api/subscriptions/order"}})}]).factory("virtoCommerce.subscriptionModule.scheduleAPI",["$resource",function(e){return e("api/subscriptions/plans/:id")}])},function(e,t){angular.module("virtoCommerce.subscriptionModule").controller("virtoCommerce.subscriptionModule.notificationsLogWidgetController",["$scope","platformWebApp.bladeNavigationService",function(e,t){var i=e.widget.blade;i.showSubscriptionNotificationsLog=function(){var e={id:"notificationLogWidgetChild",objectId:i.currentEntity.id,objectType:"Subscription",title:"subscription.widgets.notificationsLogWidget.blade-title",subtitle:"subscription.widgets.notificationsLogWidget.blade-subtitle",controller:"virtoCommerce.notificationsModule.notificationsJournalController",template:"Modules/$(VirtoCommerce.Notifications)/Scripts/blades/notifications-journal.tpl.html"};t.showBlade(e,i)}}])},function(e,t){angular.module("virtoCommerce.subscriptionModule").controller("virtoCommerce.subscriptionModule.notificationsWidgetController",["$scope","platformWebApp.bladeNavigationService",function(e,t){var i=e.widget.blade;i.showNotifications=function(){var e={id:"notificationWidgetChild",objectId:i.currentEntity.id,objectType:"Subscription",title:"subscription.widgets.notificationsWidget.blade-title",subtitle:"subscription.widgets.notificationsWidget.blade-subtitle",controller:"virtoCommerce.notificationsModule.notificationsListController",template:"Modules/$(VirtoCommerce.Notifications)/Scripts/app/notifications/blades/notifications-list.tpl.html"};t.showBlade(e,i)}}])},function(e,t){angular.module("virtoCommerce.subscriptionModule").controller("virtoCommerce.subscriptionModule.orderDynamicPropertyWidgetController",["$scope","platformWebApp.bladeNavigationService",function(e,t){var i=e.widget.blade;e.openBlade=function(){var e={id:"dynamicPropertiesList",currentEntity:i.customerOrder,controller:"platformWebApp.propertyValueListController",template:"$(Platform)/Scripts/app/dynamicProperties/blades/propertyValue-list.tpl.html"};t.showBlade(e,i)},e.$watch("widget.blade.customerOrder",(function(t){if(angular.isDefined(t)){var i=_.groupBy(t.dynamicProperties,(function(e){return e.id}));e.dynamicPropertyCount=_.keys(i).length}}))}])},function(e,t){angular.module("virtoCommerce.subscriptionModule").controller("virtoCommerce.subscriptionModule.subscriptionOrdersWidgetController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.orderModule.order_res_customerOrders",function(e,t,i){var r=e.blade;e.openBlade=function(){if(!r.isLoading){var e={id:"subscriptionOrders",title:"subscription.blades.subscriptionOrder-list.title",controller:"virtoCommerce.orderModule.customerOrderListController",template:"Modules/$(VirtoCommerce.Orders)/Scripts/blades/customerOrder-list.tpl.html",hideDelete:!0};r.currentEntity.id&&(e.refreshCallback=function(){var e={subscriptionIds:[r.currentEntity.id]};return i.search(e)}),t.showBlade(e,r)}}}])},function(e,t){angular.module("virtoCommerce.subscriptionModule").controller("virtoCommerce.subscriptionModule.orderSubscriptionWidgetController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.orderModule.knownOperations",function(e,t,i){var r=e.blade;e.subscription={id:r.customerOrder.subscriptionId,number:r.customerOrder.subscriptionNumber},e.openBlade=function(){if(e.subscription.id)if(t.findBlade("subscriptionDetail"))t.closeBlade(r.parentBlade);else{var o=i.getOperation("Subscription"),n=angular.copy(o.detailBlade);n.entityNode=e.subscription,t.showBlade(n,r)}}}])},function(e,t){angular.module("virtoCommerce.subscriptionModule").controller("virtoCommerce.subscriptionModule.scheduleWidgetController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.subscriptionModule.scheduleAPI",function(e,t,i){var r=e.blade;e.loading=!0;var o="subscriptionDetail"!==r.id;o?i.get({id:r.itemId},(function(t){e.schedule=t,e.loading=!1})):e.$watch("blade.currentEntity",(function(t){t&&(e.schedule=t,e.loading=!1)})),e.openBlade=function(){var i={id:"orderOperationChild",isApiSave:o,itemId:r.itemId,data:e.schedule,controller:"virtoCommerce.subscriptionModule.scheduleDetailController",template:"Modules/$(VirtoCommerce.Subscription)/Scripts/blades/schedule-detail.tpl.html"};t.showBlade(i,r)}}])}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLlN1YnNjcmlwdGlvbi93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLlN1YnNjcmlwdGlvbi8uL1NjcmlwdHMvc3Vic2NyaXB0aW9uLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuU3Vic2NyaXB0aW9uLy4vU2NyaXB0cy9ibGFkZXMvZmlsdGVyLWRldGFpbC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLlN1YnNjcmlwdGlvbi8uL1NjcmlwdHMvYmxhZGVzL3NjaGVkdWxlLWRldGFpbC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLlN1YnNjcmlwdGlvbi8uL1NjcmlwdHMvYmxhZGVzL3N1YnNjcmlwdGlvbi1kZXRhaWwuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5TdWJzY3JpcHRpb24vLi9TY3JpcHRzL2JsYWRlcy9zdWJzY3JpcHRpb24tbGlzdC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLlN1YnNjcmlwdGlvbi8uL1NjcmlwdHMvcmVzb3VyY2VzL3N1YnNjcmlwdGlvbkFQSS5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLlN1YnNjcmlwdGlvbi8uL1NjcmlwdHMvd2lkZ2V0cy9ub3RpZmljYXRpb25zTG9nV2lkZ2V0LmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuU3Vic2NyaXB0aW9uLy4vU2NyaXB0cy93aWRnZXRzL25vdGlmaWNhdGlvbnNXaWRnZXQuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5TdWJzY3JpcHRpb24vLi9TY3JpcHRzL3dpZGdldHMvb3JkZXJEeW5hbWljUHJvcGVydHlXaWRnZXQuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5TdWJzY3JpcHRpb24vLi9TY3JpcHRzL3dpZGdldHMvc3Vic2NyaXB0aW9uLW9yZGVycy13aWRnZXQuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5TdWJzY3JpcHRpb24vLi9TY3JpcHRzL3dpZGdldHMvaW50ZWdyYXRpb25zL29yZGVyLXN1YnNjcmlwdGlvbi13aWRnZXQuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5TdWJzY3JpcHRpb24vLi9TY3JpcHRzL3dpZGdldHMvaW50ZWdyYXRpb25zL3NjaGVkdWxlLXdpZGdldC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIm1vZHVsZU5hbWUiLCJ1bmRlZmluZWQiLCJBcHBEZXBlbmRlbmNpZXMiLCJwdXNoIiwiYW5ndWxhciIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJibGFkZU5hdmlnYXRpb25TZXJ2aWNlIiwic2hvd0JsYWRlIiwiaWQiLCJ0aXRsZSIsInRlbXBsYXRlIiwiaXNDbG9zaW5nRGlzYWJsZWQiLCJydW4iLCIkaHR0cCIsIiRjb21waWxlIiwibWFpbk1lbnVTZXJ2aWNlIiwid2lkZ2V0U2VydmljZSIsIiRzdGF0ZSIsImtub3duT3BlcmF0aW9ucyIsImF1dGhTZXJ2aWNlIiwibWVudUl0ZW0iLCJwYXRoIiwiaWNvbiIsInByaW9yaXR5IiwiYWN0aW9uIiwiZ28iLCJwZXJtaXNzaW9uIiwiYWRkTWVudUl0ZW0iLCJvcmRlck9wZXJhdGlvbiIsImdldE9wZXJhdGlvbiIsInN1YnNjcmlwdGlvbktub3duQ2hpbGRyZW5PcGVyYXRpb25zIiwiY29weSIsImRldGFpbEJsYWRlIiwia25vd25DaGlsZHJlbk9wZXJhdGlvbnMiLCJvcmRlckZpZWxkc1RvRXhjbHVkZSIsImZpbHRlcmVkT3JkZXJGaWVsZHMiLCJfIiwiZmlsdGVyIiwibWV0YUZpZWxkcyIsIngiLCJjb250YWlucyIsInN1YnNjcmlwdGlvbk1ldGFGaWVsZHMiLCJpc1JlcXVpcmVkIiwidmFsdWVUeXBlIiwiZWFjaCIsInJlZ2lzdGVyT3BlcmF0aW9uIiwidHlwZSIsInRoZW4iLCJyZXNwb25zZSIsImRhdGEiLCJyZWdpc3RlcldpZGdldCIsInNjaGVkdWxlV2lkZ2V0Iiwid2lkZ2V0c01hcCIsImlzVmlzaWJsZSIsImJsYWRlIiwiY2hlY2tQZXJtaXNzaW9uIiwiJGxvY2FsU3RvcmFnZSIsInN0b3Jlc0FQSSIsInNldHRpbmdzIiwibWVtYmVycyIsIiR0cmFuc2xhdGUiLCJmb3JtU2NvcGUiLCJpbml0aWFsaXplQmxhZGUiLCJjdXJyZW50RW50aXR5Iiwib3JpZ0VudGl0eSIsImlzTG9hZGluZyIsImlzTmV3Iiwic3VidGl0bGUiLCJzdGF0dXNlcyIsImdldFZhbHVlcyIsInN0b3JlcyIsInF1ZXJ5Iiwic2F2ZUNoYW5nZXMiLCJzdWJzY3JpcHRpb25TZWFyY2hGaWx0ZXJzIiwic3Vic2NyaXB0aW9uU2VhcmNoRmlsdGVySWQiLCJwYXJlbnRCbGFkZSIsImN1cnJlbnQiLCJjcml0ZXJpYUNoYW5nZWQiLCJzZXRGb3JtIiwiZm9ybSIsImhlYWRJY29uIiwidG9vbGJhckNvbW1hbmRzIiwiZXhlY3V0ZU1ldGhvZCIsImNhbkV4ZWN1dGVNZXRob2QiLCIkdmFsaWQiLCJlcXVhbHMiLCJzcGxpY2UiLCJpbmRleE9mIiwicmVmcmVzaCIsImJsYWRlQ2xvc2UiLCJyZXN1bHQiLCJEYXRlIiwiZ2V0VGltZSIsImRpYWxvZ1NlcnZpY2UiLCJzY2hlZHVsZUFQSSIsImlzRGlydHkiLCJoYXNVcGRhdGVQZXJtaXNzaW9uIiwiY2FuU2F2ZSIsInVwZGF0ZVBlcm1pc3Npb24iLCJpbml0aWFsaXplIiwiZXh0ZW5kIiwiaW50ZXJ2YWxDb3VudCIsImludGVydmFsIiwiaW50ZXJ2YWxzIiwib25DbG9zZSIsImNsb3NlQ2FsbGJhY2siLCJzaG93Q29uZmlybWF0aW9uSWZOZWVkZWQiLCJjYW5jZWxDaGFuZ2VzIiwiaXNBcGlTYXZlIiwiaXRlbUlkIiwic2F2ZSIsInNob3dDb25maXJtYXRpb25EaWFsb2ciLCJtZXNzYWdlIiwiY2FsbGJhY2siLCJyZW1vdmUiLCJkZWxldGUiLCJpZHMiLCJzdWJzY3JpcHRpb25BUEkiLCJjdXN0b21lck9yZGVycyIsIiR0aW1lb3V0IiwiZm9jdXMiLCJtb21lbnQiLCJjdXN0b21lck9yZGVyIiwiZW50aXR5Tm9kZSIsIml0ZW1zIiwiY3VzdG9tZXJPcmRlclByb3RvdHlwZSIsInNlY3VyaXR5U2NvcGVzIiwic2NvcGVzIiwib3BlcmF0aW9uIiwidGl0bGVWYWx1ZXMiLCJudW1iZXIiLCJuZXdCbGFkZSIsImF2YWlsYWJsZVR5cGVzIiwiaXNMb2NrZWQiLCJhbnkiLCJkaWFsb2ciLCJjbG9zZUJsYWRlIiwicmVhc29uIiwiY2FuY2VsUmVhc29uIiwicmVwbGFjZSIsImxlbmd0aCIsImNhbmNlbGxlZERhdGUiLCJ1dGMiLCJpc0NhbmNlbGxlZCIsInNldEVudGl0eVN0YXR1cyIsInNob3dEaWFsb2ciLCJjb25maXJtZWQiLCJjbG9zZUNoaWxkcmVuQmxhZGVzIiwiY3JlYXRlT3JkZXIiLCJzdGF0dXMiLCJzdWJzY3JpcHRpb25TdGF0dXMiLCJyZWNhbGN1bGF0ZSIsImlkVG9Gb2N1cyIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwic2VsZWN0IiwiaXNUb3RhbHNSZWNhbGN1bGF0aW9uTmVlZGVkIiwidXBkYXRlIiwiY2FuY2VsT3BlcmF0aW9uUmVzb2x1dGlvbiIsInJlc29sdXRpb24iLCIkbW9kYWxJbnN0YW5jZSIsImNsb3NlIiwidWlHcmlkSGVscGVyIiwiYmxhZGVVdGlscyIsImRhdGVGaWx0ZXIiLCJ1aUdyaWRDb25zdGFudHMiLCJjcml0ZXJpYSIsImtleXdvcmQiLCJzb3J0IiwiZ2V0U29ydEV4cHJlc3Npb24iLCJza2lwIiwicGFnZVNldHRpbmdzIiwiY3VycmVudFBhZ2UiLCJpdGVtc1BlclBhZ2VDb3VudCIsInRha2UiLCJyZXNwb25zZUdyb3VwIiwic2VhcmNoIiwidG90YWxJdGVtcyIsInRvdGFsQ291bnQiLCJjdXJyZW50RW50aXRpZXMiLCJyZXN1bHRzIiwib3BlbkRldGFpbHNCbGFkZSIsIm5vZGUiLCJzZWxlY3RlZE5vZGVJZCIsImZvdW5kVGVtcGxhdGUiLCJkZWxldGVMaXN0IiwibGlzdCIsInBsdWNrIiwiZ3JpZEFwaSIsInNlbGVjdGlvbiIsImdldFNlbGVjdGVkUm93cyIsInNob3dGaWx0ZXJEZXRhaWxCbGFkZSIsImJsYWRlRGF0YSIsImZpbmRXaGVyZSIsImNoYW5nZSIsImVkaXQiLCJzZXRHcmlkT3B0aW9ucyIsImdyaWRPcHRpb25zIiwiY3JlYXRlZERhdGVDb2x1bW4iLCJjb2x1bW5EZWZzIiwiY2VsbFRvb2x0aXAiLCJyb3ciLCJjb2wiLCJlbnRpdHkiLCJjcmVhdGVkRGF0ZSIsImJpbmRSZWZyZXNoT25Tb3J0Q2hhbmdlZCIsImluaXRpYWxpemVQYWdpbmF0aW9uIiwiZmFjdG9yeSIsIiRyZXNvdXJjZSIsIm1ldGhvZCIsIndpZGdldCIsInNob3dTdWJzY3JpcHRpb25Ob3RpZmljYXRpb25zTG9nIiwib2JqZWN0SWQiLCJvYmplY3RUeXBlIiwic2hvd05vdGlmaWNhdGlvbnMiLCJvcGVuQmxhZGUiLCIkd2F0Y2giLCJpc0RlZmluZWQiLCJncm91cGVkQnlQcm9wZXJ0eSIsImdyb3VwQnkiLCJkeW5hbWljUHJvcGVydGllcyIsImR5bmFtaWNQcm9wZXJ0eUNvdW50Iiwia2V5cyIsIm9yZGVycyIsImhpZGVEZWxldGUiLCJyZWZyZXNoQ2FsbGJhY2siLCJzdWJzY3JpcHRpb25JZHMiLCJzdWJzY3JpcHRpb24iLCJzdWJzY3JpcHRpb25JZCIsInN1YnNjcmlwdGlvbk51bWJlciIsImZpbmRCbGFkZSIsImxvYWRpbmciLCJzY2hlZHVsZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVBQUVPLEdBQ3RCWCxPQUFPQyxlQUFlVSxFQUFJLFVBQVcsQ0FBRVQsWUFBWSxFQUFNSyxNQUFPQSxJQUN0RCxFQUFQRSxHQUE0QixpQkFBVEYs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NEcsb0JBR2hDak8sRUFBT21OLFVBQVksV0FDZixHQUFJbk4sRUFBTytOLGFBQWE1TixHQUVwQixHQUQ4QkYsRUFBdUJpTyxVQUFVLHNCQUUzRGpPLEVBQXVCa0ksV0FBV2xGLEVBQU1xQixpQkFDckMsQ0FDSCxJQUFJOEcsRUFBZ0J2SyxFQUFnQlcsYUFBYSxnQkFDN0NzRyxFQUFXckksUUFBUWlDLEtBQUswSixFQUFjekosYUFDMUNtRyxFQUFTUixXQUFhdEgsRUFBTytOLGFBQzdCOU4sRUFBdUJDLFVBQVU0SCxFQUFVN0UsUyxjQ2xCMUR4RCxRQUFRckMsT0FBTyxvQ0FDZjJDLFdBQVcsNERBQTZELENBQUMsU0FBVSx3Q0FBeUMsK0NBQWdELFNBQVVDLEVBQVFDLEVBQXdCd0YsR0FDbk4sSUFBSXhDLEVBQVFqRCxFQUFPaUQsTUFDbkJqRCxFQUFPbU8sU0FBVSxFQUVqQixJQUFJNUgsRUFBeUIsdUJBQWJ0RCxFQUFNOUMsR0FFbEJvRyxFQUNBZCxFQUFZdkgsSUFBSSxDQUFFaUMsR0FBSThDLEVBQU11RCxTQUFVLFNBQVU1RCxHQUM1QzVDLEVBQU9vTyxTQUFXeEwsRUFDbEI1QyxFQUFPbU8sU0FBVSxLQUdyQm5PLEVBQU9vTixPQUFPLHVCQUF1QixTQUFVZ0IsR0FDdkNBLElBQ0FwTyxFQUFPb08sU0FBV0EsRUFDbEJwTyxFQUFPbU8sU0FBVSxNQUs3Qm5PLEVBQU9tTixVQUFZLFdBQ2YsSUFBSXJGLEVBQVcsQ0FDWDNILEdBQUksc0JBQ0pvRyxVQUFXQSxFQUNYQyxPQUFRdkQsRUFBTXVELE9BQ2Q1RCxLQUFNNUMsRUFBT29PLFNBQ2JyTyxXQUFZLDREQUNaTSxTQUFVLGlGQUVkSixFQUF1QkMsVUFBVTRILEVBQVU3RSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvL0NhbGwgdGhpcyB0byByZWdpc3RlciBvdXIgbW9kdWxlIHRvIG1haW4gYXBwbGljYXRpb25cbnZhciBtb2R1bGVOYW1lID0gXCJ2aXJ0b0NvbW1lcmNlLnN1YnNjcmlwdGlvbk1vZHVsZVwiO1xuXG5pZiAoQXBwRGVwZW5kZW5jaWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICBBcHBEZXBlbmRlbmNpZXMucHVzaChtb2R1bGVOYW1lKTtcbn1cblxuYW5ndWxhci5tb2R1bGUobW9kdWxlTmFtZSwgWyd2aXJ0b0NvbW1lcmNlLm9yZGVyTW9kdWxlJ10pXG4gICAgLmNvbmZpZyhcbiAgICBbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ3dvcmtzcGFjZS5zdWJzY3JpcHRpb25Nb2R1bGUnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3N1YnNjcmlwdGlvbnMnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnJChQbGF0Zm9ybSkvU2NyaXB0cy9jb21tb24vdGVtcGxhdGVzL2hvbWUudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFtcbiAgICAgICAgICAgICAgICAgICAgJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnc3Vic2NyaXB0aW9uLWxpc3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnc3Vic2NyaXB0aW9uLmJsYWRlcy5zdWJzY3JpcHRpb24tbGlzdC50aXRsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uuc3Vic2NyaXB0aW9uTW9kdWxlLnN1YnNjcmlwdGlvbkxpc3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLlN1YnNjcmlwdGlvbikvU2NyaXB0cy9ibGFkZXMvc3Vic2NyaXB0aW9uLWxpc3QudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ2xvc2luZ0Rpc2FibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUoYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9OZWVkIHRvIGlzb2xhdGUgYW5kIHByZXZlbnQgQ1NTIGNvbmZsaWN0aW5nIHRvIG90aGVyIG1vZHVsZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmNsdWRpbmcgJ3ZjLW9yZGVyJyBlbmFibGVzIHVzaW5nIENTUyBmcm9tIG9yZGVycyBtb2R1bGVcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tb2R1bGVOYW1lID0gJ3ZjLW9yZGVyIHZjLXN1YnNjcmlwdGlvbic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KTtcbiAgICB9XVxuICAgIClcbiAgICAucnVuKFxuICAgICAgICBbJyRodHRwJywgJyRjb21waWxlJywgJ3BsYXRmb3JtV2ViQXBwLm1haW5NZW51U2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC53aWRnZXRTZXJ2aWNlJywgJyRzdGF0ZScsICAndmlydG9Db21tZXJjZS5vcmRlck1vZHVsZS5rbm93bk9wZXJhdGlvbnMnLCAncGxhdGZvcm1XZWJBcHAuYXV0aFNlcnZpY2UnLFxuICAgICAgICBmdW5jdGlvbiAoJGh0dHAsICRjb21waWxlLCBtYWluTWVudVNlcnZpY2UsIHdpZGdldFNlcnZpY2UsICRzdGF0ZSwga25vd25PcGVyYXRpb25zLCBhdXRoU2VydmljZSkge1xuXG4gICAgICAgICAgICAvL1JlZ2lzdGVyIG1vZHVsZSBpbiBtYWluIG1lbnVcbiAgICAgICAgICAgIHZhciBtZW51SXRlbSA9IHtcbiAgICAgICAgICAgICAgICBwYXRoOiAnYnJvd3NlL3N1YnNjcmlwdGlvbnMnLFxuICAgICAgICAgICAgICAgIGljb246ICdmYSBmYS1yZXR3ZWV0JyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ3N1YnNjcmlwdGlvbi5tYWluLW1lbnUtdGl0bGUnLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiAxMDAsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7ICRzdGF0ZS5nbygnd29ya3NwYWNlLnN1YnNjcmlwdGlvbk1vZHVsZScpOyB9LFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdzdWJzY3JpcHRpb246YWNjZXNzJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG1haW5NZW51U2VydmljZS5hZGRNZW51SXRlbShtZW51SXRlbSk7XG5cbiAgICAgICAgICAgIC8vIHJlZ2lzdGVyIFN1YnNjcmlwdGlvbiB0eXBlIGFzIGtub3duIG9wZXJhdGlvblxuICAgICAgICAgICAgdmFyIG9yZGVyT3BlcmF0aW9uID0ga25vd25PcGVyYXRpb25zLmdldE9wZXJhdGlvbignQ3VzdG9tZXJPcmRlcicpO1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbktub3duQ2hpbGRyZW5PcGVyYXRpb25zID0gYW5ndWxhci5jb3B5KG9yZGVyT3BlcmF0aW9uLmRldGFpbEJsYWRlLmtub3duQ2hpbGRyZW5PcGVyYXRpb25zKTtcblxuICAgICAgICAgICAgdmFyIG9yZGVyRmllbGRzVG9FeGNsdWRlID0gWydpc0FwcHJvdmVkJywgJ251bWJlcicsICdzdGF0dXMnLCAnZGlzY291bnRBbW91bnQnXTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJlZE9yZGVyRmllbGRzID0gXy5maWx0ZXIob3JkZXJPcGVyYXRpb24uZGV0YWlsQmxhZGUubWV0YUZpZWxkcywgZnVuY3Rpb24gKHgpIHsgcmV0dXJuICFfLmNvbnRhaW5zKG9yZGVyRmllbGRzVG9FeGNsdWRlLCB4Lm5hbWUpOyB9KTtcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb25NZXRhRmllbGRzID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ251bWJlcicsXG4gICAgICAgICAgICAgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcInN1YnNjcmlwdGlvbi5ibGFkZXMuc3Vic2NyaXB0aW9uLWRldGFpbC5sYWJlbHMubnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogXCJTaG9ydFRleHRcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY3VycmVudFBlcmlvZEVuZCcsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcInN1YnNjcmlwdGlvbi5ibGFkZXMuc3Vic2NyaXB0aW9uLWRldGFpbC5sYWJlbHMuYmlsbGluZy1kYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogXCJEYXRlVGltZVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdlbmREYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwic3Vic2NyaXB0aW9uLmJsYWRlcy5zdWJzY3JpcHRpb24tZGV0YWlsLmxhYmVscy5leHBpcmF0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogXCJEYXRlVGltZVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0cmlhbEVuZCcsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcInN1YnNjcmlwdGlvbi5ibGFkZXMuc3Vic2NyaXB0aW9uLWRldGFpbC5sYWJlbHMudHJpYWwtZXhwaXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZVR5cGU6IFwiRGF0ZVRpbWVcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIF8uZWFjaChmaWx0ZXJlZE9yZGVyRmllbGRzLCBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbk1ldGFGaWVsZHMucHVzaCh4KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL3N1YnNjcmlwdGlvbk1ldGFGaWVsZHMucHVzaCh7XG4gICAgICAgICAgICAvL1x0bmFtZTogJ2NvdXBvbkNvZGUnLFxuICAgICAgICAgICAgLy9cdHRpdGxlOiBcInN1YnNjcmlwdGlvbi5ibGFkZXMuc3Vic2NyaXB0aW9uLWRldGFpbC5sYWJlbHMuY291cG9uLWNvZGVcIixcbiAgICAgICAgICAgIC8vXHR2YWx1ZVR5cGU6IFwiU2hvcnRUZXh0XCJcbiAgICAgICAgICAgIC8vfSk7XG4gICAgICAgICAgICAvL3N1YnNjcmlwdGlvbk1ldGFGaWVsZHMucHVzaCh7XG4gICAgICAgICAgICAvL1x0bmFtZTogJ2lzUHJvcmF0ZScsXG4gICAgICAgICAgICAvL1x0dGl0bGU6IFwic3Vic2NyaXB0aW9uLmJsYWRlcy5zdWJzY3JpcHRpb24tZGV0YWlsLmxhYmVscy5wcm9yYXRlXCIsXG4gICAgICAgICAgICAvL1x0dmFsdWVUeXBlOiBcIkJvb2xlYW5cIlxuICAgICAgICAgICAgLy99KTtcblxuICAgICAgICAgICAga25vd25PcGVyYXRpb25zLnJlZ2lzdGVyT3BlcmF0aW9uKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnU3Vic2NyaXB0aW9uJyxcbiAgICAgICAgICAgICAgICBkZXRhaWxCbGFkZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ3N1YnNjcmlwdGlvbkRldGFpbCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnN1YnNjcmlwdGlvbk1vZHVsZS5zdWJzY3JpcHRpb25EZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5TdWJzY3JpcHRpb24pL1NjcmlwdHMvYmxhZGVzL3N1YnNjcmlwdGlvbi1kZXRhaWwudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICBrbm93bkNoaWxkcmVuT3BlcmF0aW9uczogc3Vic2NyaXB0aW9uS25vd25DaGlsZHJlbk9wZXJhdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFGaWVsZHM6IHN1YnNjcmlwdGlvbk1ldGFGaWVsZHNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJGh0dHAuZ2V0KCdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5PcmRlcnMpL1NjcmlwdHMvYmxhZGVzL2N1c3RvbWVyT3JkZXItZGV0YWlsLnRwbC5odG1sJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAvLyBjb21waWxlIHRoZSByZXNwb25zZSwgd2hpY2ggd2lsbCBwdXQgc3R1ZmYgaW50byB0aGUgY2FjaGVcbiAgICAgICAgICAgICAgICAkY29tcGlsZShyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyByZWdpc3RlciBXSURHRVRTXG4gICAgICAgICAgICB3aWRnZXRTZXJ2aWNlLnJlZ2lzdGVyV2lkZ2V0KHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5zdWJzY3JpcHRpb25Nb2R1bGUuc3Vic2NyaXB0aW9uT3JkZXJzV2lkZ2V0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5TdWJzY3JpcHRpb24pL1NjcmlwdHMvd2lkZ2V0cy9zdWJzY3JpcHRpb24tb3JkZXJzLXdpZGdldC50cGwuaHRtbCdcbiAgICAgICAgICAgIH0sICdzdWJzY3JpcHRpb25EZXRhaWwnKTtcblxuICAgICAgICAgICAgd2lkZ2V0U2VydmljZS5yZWdpc3RlcldpZGdldCh7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uuc3Vic2NyaXB0aW9uTW9kdWxlLm9yZGVyRHluYW1pY1Byb3BlcnR5V2lkZ2V0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5TdWJzY3JpcHRpb24pL1NjcmlwdHMvd2lkZ2V0cy9vcmRlckR5bmFtaWNQcm9wZXJ0eVdpZGdldC50cGwuaHRtbCdcbiAgICAgICAgICAgIH0sICdzdWJzY3JpcHRpb25EZXRhaWwnKTtcblxuICAgICAgICAgICAgd2lkZ2V0U2VydmljZS5yZWdpc3RlcldpZGdldCh7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3BsYXRmb3JtV2ViQXBwLmNoYW5nZUxvZy5vcGVyYXRpb25zV2lkZ2V0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICckKFBsYXRmb3JtKS9TY3JpcHRzL2FwcC9jaGFuZ2VMb2cvd2lkZ2V0cy9vcGVyYXRpb25zLXdpZGdldC50cGwuaHRtbCdcbiAgICAgICAgICAgIH0sICdzdWJzY3JpcHRpb25EZXRhaWwnKTtcblxuICAgICAgICAgICAgLy93aWRnZXRTZXJ2aWNlLnJlZ2lzdGVyV2lkZ2V0KHtcbiAgICAgICAgICAgIC8vXHRjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5zdWJzY3JpcHRpb25Nb2R1bGUubm90aWZpY2F0aW9uc1dpZGdldENvbnRyb2xsZXInLFxuICAgICAgICAgICAgLy9cdHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuU3Vic2NyaXB0aW9uKS9TY3JpcHRzL3dpZGdldHMvbm90aWZpY2F0aW9uc1dpZGdldC50cGwuaHRtbCdcbiAgICAgICAgICAgIC8vfSwgJ3N1YnNjcmlwdGlvbkRldGFpbCcpO1xuICAgICAgICAgICAgd2lkZ2V0U2VydmljZS5yZWdpc3RlcldpZGdldCh7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uuc3Vic2NyaXB0aW9uTW9kdWxlLm5vdGlmaWNhdGlvbnNMb2dXaWRnZXRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLlN1YnNjcmlwdGlvbikvU2NyaXB0cy93aWRnZXRzL25vdGlmaWNhdGlvbnNMb2dXaWRnZXQudHBsLmh0bWwnXG4gICAgICAgICAgICB9LCAnc3Vic2NyaXB0aW9uRGV0YWlsJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBzY2hlZHVsZVdpZGdldCA9IHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5zdWJzY3JpcHRpb25Nb2R1bGUuc2NoZWR1bGVXaWRnZXRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAvLyBpc1Zpc2libGU6IGZ1bmN0aW9uIChibGFkZSkgeyByZXR1cm4gYmxhZGUuaXNTdWJzY3JpcHRpb25zRW5hYmxlZDsgfSxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLlN1YnNjcmlwdGlvbikvU2NyaXB0cy93aWRnZXRzL2ludGVncmF0aW9ucy9zY2hlZHVsZS13aWRnZXQudHBsLmh0bWwnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd2lkZ2V0U2VydmljZS5yZWdpc3RlcldpZGdldChzY2hlZHVsZVdpZGdldCwgJ3N1YnNjcmlwdGlvbkRldGFpbCcpO1xuICAgICAgICAgICAgLy8gaW50ZWdyYXRpb246IHNjaGVkdWxlIGluIHByb2R1Y3QgZGV0YWlsc1xuICAgICAgICAgICAgd2lkZ2V0U2VydmljZS5yZWdpc3RlcldpZGdldChzY2hlZHVsZVdpZGdldCwgJ2l0ZW1EZXRhaWwnKTtcbiAgICAgICAgICAgIC8vUmVnaXN0ZXIgYWxsIGN1c3RvbWVyIG9yZGVyIHdpZGdldHMgKGV4Y2VwdCBkeW5hbWljIHByb3BlcnRpZXMgYW5kIG5vdGlmaWNhdGlvbnMpIFxuICAgICAgICAgICAgXy5lYWNoKHdpZGdldFNlcnZpY2Uud2lkZ2V0c01hcFsnY3VzdG9tZXJPcmRlckRldGFpbFdpZGdldHMnXSwgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICBpZiAoeC5jb250cm9sbGVyICE9PSAncGxhdGZvcm1XZWJBcHAuZHluYW1pY1Byb3BlcnR5V2lkZ2V0Q29udHJvbGxlcicgJiYgeC5jb250cm9sbGVyICE9PSAndmlydG9Db21tZXJjZS5vcmRlck1vZHVsZS5ub3RpZmljYXRpb25zTG9nV2lkZ2V0Q29udHJvbGxlcicpXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldFNlcnZpY2UucmVnaXN0ZXJXaWRnZXQoeCwgJ3N1YnNjcmlwdGlvbkRldGFpbCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGludGVncmF0aW9uOiBzdWJzY3JpcHRpb24gaW4gb3JkZXIgZGV0YWlsc1xuICAgICAgICAgICAgd2lkZ2V0U2VydmljZS5yZWdpc3RlcldpZGdldCh7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uuc3Vic2NyaXB0aW9uTW9kdWxlLm9yZGVyU3Vic2NyaXB0aW9uV2lkZ2V0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgLy8gdmlzaWJsZSBvbmx5IGlmIHRoZSBvcmRlciB3YXMgbG9hZGVkIGZyb20gb3JkZXJBUEkgYW5kIG5vdCBmcm9tIHN1YnNjcmlwdGlvbkFQSVxuICAgICAgICAgICAgICAgIGlzVmlzaWJsZTogZnVuY3Rpb24gKGJsYWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBibGFkZS5pZCA9PT0gXCJvcmRlckRldGFpbFwiICYmIGF1dGhTZXJ2aWNlLmNoZWNrUGVybWlzc2lvbignc3Vic2NyaXB0aW9uOnJlYWQnKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuU3Vic2NyaXB0aW9uKS9TY3JpcHRzL3dpZGdldHMvaW50ZWdyYXRpb25zL29yZGVyLXN1YnNjcmlwdGlvbi13aWRnZXQudHBsLmh0bWwnXG4gICAgICAgICAgICB9LCAnY3VzdG9tZXJPcmRlckRldGFpbFdpZGdldHMnKTtcbiAgICAgICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2Uuc3Vic2NyaXB0aW9uTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnN1YnNjcmlwdGlvbk1vZHVsZS5maWx0ZXJEZXRhaWxDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2FsU3RvcmFnZScsICd2aXJ0b0NvbW1lcmNlLnN0b3JlTW9kdWxlLnN0b3JlcycsICdwbGF0Zm9ybVdlYkFwcC5zZXR0aW5ncycsICd2aXJ0b0NvbW1lcmNlLmN1c3RvbWVyTW9kdWxlLm1lbWJlcnMnLCAnJHRyYW5zbGF0ZScsXG4gICAgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2FsU3RvcmFnZSwgc3RvcmVzQVBJLCBzZXR0aW5ncywgbWVtYmVycywgJHRyYW5zbGF0ZSkge1xuICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG5cbiAgICAgICAgYmxhZGUubWV0YUZpZWxkcyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnc3RhdHVzZXMnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcInN1YnNjcmlwdGlvbi5ibGFkZXMuc3Vic2NyaXB0aW9uLWRldGFpbC5sYWJlbHMuc3RhdHVzXCIsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0dXNlc1NlbGVjdG9yLmh0bWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdzdG9yZUlkJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJvcmRlcnMuYmxhZGVzLmN1c3RvbWVyT3JkZXItZGV0YWlsLmxhYmVscy5zdG9yZVwiLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RvcmVTZWxlY3Rvci5odG1sJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnc3RhcnREYXRlJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJzdWJzY3JpcHRpb24uYmxhZGVzLmZpbHRlci1kZXRhaWwubGFiZWxzLmZyb21cIixcbiAgICAgICAgICAgICAgICB2YWx1ZVR5cGU6IFwiRGF0ZVRpbWVcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnZW5kRGF0ZScsXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwic3Vic2NyaXB0aW9uLmJsYWRlcy5maWx0ZXItZGV0YWlsLmxhYmVscy50b1wiLFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogXCJEYXRlVGltZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdvdXRlcklkJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJzdWJzY3JpcHRpb24uYmxhZGVzLmZpbHRlci1kZXRhaWwubGFiZWxzLm91dGVyLWlkXCIsXG4gICAgICAgICAgICAgICAgdmFsdWVUeXBlOiBcIlNob3J0VGV4dFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG5cbiAgICAgICAgYmxhZGUuc3RhdHVzZXMgPSBzZXR0aW5ncy5nZXRWYWx1ZXMoeyBpZDogJ1N1YnNjcmlwdGlvbi5TdGF0dXMnIH0pO1xuICAgICAgICBibGFkZS5zdG9yZXMgPSBzdG9yZXNBUEkucXVlcnkoKTtcbiAgICAgICAgXG4gICAgICAgICRzY29wZS5zYXZlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5LCBibGFkZS5vcmlnRW50aXR5KTtcbiAgICAgICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgICAgICRsb2NhbFN0b3JhZ2Uuc3Vic2NyaXB0aW9uU2VhcmNoRmlsdGVycy5wdXNoKGJsYWRlLm9yaWdFbnRpdHkpO1xuICAgICAgICAgICAgICAgICRsb2NhbFN0b3JhZ2Uuc3Vic2NyaXB0aW9uU2VhcmNoRmlsdGVySWQgPSBibGFkZS5vcmlnRW50aXR5LmlkO1xuICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmZpbHRlci5jdXJyZW50ID0gYmxhZGUub3JpZ0VudGl0eTtcbiAgICAgICAgICAgICAgICBibGFkZS5pc05ldyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbml0aWFsaXplQmxhZGUoYmxhZGUub3JpZ0VudGl0eSk7XG4gICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5maWx0ZXIuY3JpdGVyaWFDaGFuZ2VkKCk7XG4gICAgICAgICAgICAvLyAkc2NvcGUuYmxhZGVDbG9zZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVCbGFkZShkYXRhKSB7XG4gICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5ID0gYW5ndWxhci5jb3B5KGRhdGEpO1xuICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGRhdGE7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgYmxhZGUudGl0bGUgPSBibGFkZS5pc05ldyA/ICdzdWJzY3JpcHRpb24uYmxhZGVzLmZpbHRlci1kZXRhaWwubmV3LXRpdGxlJyA6IGRhdGEubmFtZTtcbiAgICAgICAgICAgIGJsYWRlLnN1YnRpdGxlID0gYmxhZGUuaXNOZXcgPyAnc3Vic2NyaXB0aW9uLmJsYWRlcy5maWx0ZXItZGV0YWlsLm5ldy1zdWJ0aXRsZScgOiAnc3Vic2NyaXB0aW9uLmJsYWRlcy5maWx0ZXItZGV0YWlsLnN1YnRpdGxlJztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZm9ybVNjb3BlO1xuICAgICAgICAkc2NvcGUuc2V0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7IGZvcm1TY29wZSA9IGZvcm07IH1cblxuICAgICAgICBmdW5jdGlvbiBpc0RpcnR5KCkge1xuICAgICAgICAgICAgcmV0dXJuICFhbmd1bGFyLmVxdWFscyhibGFkZS5jdXJyZW50RW50aXR5LCBibGFkZS5vcmlnRW50aXR5KTtcbiAgICAgICAgfTtcblxuICAgICAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1maWx0ZXInO1xuXG4gICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiY29yZS5jb21tYW5kcy5hcHBseS1maWx0ZXJcIiwgaWNvbjogJ2ZhIGZhLWZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zYXZlQ2hhbmdlcygpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybVNjb3BlICYmIGZvcm1TY29wZS4kdmFsaWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZXNldFwiLCBpY29uOiAnZmEgZmEtdW5kbycsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogaXNEaXJ0eVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmRlbGV0ZVwiLCBpY29uOiAnZmFzIGZhLXRyYXNoLWFsdCcsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGRlbGV0ZUVudHJ5LFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWJsYWRlLmlzTmV3O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfV07XG5cblxuICAgICAgICBmdW5jdGlvbiBkZWxldGVFbnRyeSgpIHtcbiAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmZpbHRlci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICRsb2NhbFN0b3JhZ2Uuc3Vic2NyaXB0aW9uU2VhcmNoRmlsdGVycy5zcGxpY2UoJGxvY2FsU3RvcmFnZS5zdWJzY3JpcHRpb25TZWFyY2hGaWx0ZXJzLmluZGV4T2YoYmxhZGUub3JpZ0VudGl0eSksIDEpO1xuICAgICAgICAgICAgZGVsZXRlICRsb2NhbFN0b3JhZ2Uuc3Vic2NyaXB0aW9uU2VhcmNoRmlsdGVySWQ7XG4gICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAkc2NvcGUuYmxhZGVDbG9zZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWN0aW9ucyBvbiBsb2FkXG4gICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgJHRyYW5zbGF0ZSgnc3Vic2NyaXB0aW9uLmJsYWRlcy5zdWJzY3JpcHRpb24tbGlzdC5sYWJlbHMudW5uYW1lZC1maWx0ZXInKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplQmxhZGUoeyBpZDogbmV3IERhdGUoKS5nZXRUaW1lKCksIG5hbWU6IHJlc3VsdCB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5pdGlhbGl6ZUJsYWRlKGJsYWRlLmRhdGEpO1xuICAgICAgICB9XG4gICAgfV0pO1xuIiwi77u/YW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2Uuc3Vic2NyaXB0aW9uTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnN1YnNjcmlwdGlvbk1vZHVsZS5zY2hlZHVsZURldGFpbENvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLmRpYWxvZ1NlcnZpY2UnLCAndmlydG9Db21tZXJjZS5zdWJzY3JpcHRpb25Nb2R1bGUuc2NoZWR1bGVBUEknLCBmdW5jdGlvbiAoJHNjb3BlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBkaWFsb2dTZXJ2aWNlLCBzY2hlZHVsZUFQSSkge1xuICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICBibGFkZS51cGRhdGVQZXJtaXNzaW9uID0gJ3N1YnNjcmlwdGlvbjp1cGRhdGUnO1xuICAgIGJsYWRlLmlzTmV3ID0gIWJsYWRlLmRhdGEuaWQ7XG5cbiAgICBibGFkZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChkYXRhLCB7XG4gICAgICAgICAgICAgICAgaW50ZXJ2YWxDb3VudDogMSxcbiAgICAgICAgICAgICAgICBpbnRlcnZhbDogJHNjb3BlLmludGVydmFsc1syXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBibGFkZS5vcmlnRW50aXR5ID0gZGF0YTtcbiAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGFuZ3VsYXIuY29weShkYXRhKTtcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgfTtcblxuICAgICRzY29wZS5pbnRlcnZhbHMgPSBbJ2RheXMnLCAnd2Vla3MnLCAnbW9udGhzJywgJ3llYXJzJ107XG5cbiAgICBmdW5jdGlvbiBpc0RpcnR5KCkge1xuICAgICAgICByZXR1cm4gIWFuZ3VsYXIuZXF1YWxzKGJsYWRlLmN1cnJlbnRFbnRpdHksIGJsYWRlLm9yaWdFbnRpdHkpICYmIGJsYWRlLmhhc1VwZGF0ZVBlcm1pc3Npb24oKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5TYXZlKCkge1xuICAgICAgICByZXR1cm4gaXNEaXJ0eSgpICYmICRzY29wZS5mb3JtU2NvcGUuJHZhbGlkO1xuICAgIH1cblxuICAgICRzY29wZS5zZXRGb3JtID0gZnVuY3Rpb24gKGZvcm0pIHsgJHNjb3BlLmZvcm1TY29wZSA9IGZvcm07IH07XG5cbiAgICBibGFkZS5vbkNsb3NlID0gZnVuY3Rpb24gKGNsb3NlQ2FsbGJhY2spIHtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93Q29uZmlybWF0aW9uSWZOZWVkZWQoaXNEaXJ0eSgpICYmICFibGFkZS5pc05ldywgY2FuU2F2ZSgpLCBibGFkZSwgJHNjb3BlLnNhdmVDaGFuZ2VzLCBjbG9zZUNhbGxiYWNrLCBcInN1YnNjcmlwdGlvbi5kaWFsb2dzLnNjaGVkdWxlLXNhdmUudGl0bGVcIiwgXCJzdWJzY3JpcHRpb24uZGlhbG9ncy5zY2hlZHVsZS1zYXZlLm1lc3NhZ2VcIik7XG4gICAgfTtcblxuICAgICRzY29wZS5jYW5jZWxDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5ID0gYmxhZGUub3JpZ0VudGl0eTtcbiAgICAgICAgJHNjb3BlLmJsYWRlQ2xvc2UoKTtcbiAgICB9O1xuICAgICRzY29wZS5zYXZlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGJsYWRlLmlzQXBpU2F2ZSkge1xuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5pZCA9IGJsYWRlLml0ZW1JZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2NoZWR1bGVBUEkuc2F2ZShibGFkZS5jdXJyZW50RW50aXR5LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KGJsYWRlLmN1cnJlbnRFbnRpdHksIGJsYWRlLm9yaWdFbnRpdHkpO1xuICAgICAgICAgICAgICAgICRzY29wZS5ibGFkZUNsb3NlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5LCBibGFkZS5vcmlnRW50aXR5KTtcbiAgICAgICAgICAgICRzY29wZS5ibGFkZUNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnNhdmVcIiwgaWNvbjogJ2ZhcyBmYS1zYXZlJyxcbiAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6ICRzY29wZS5zYXZlQ2hhbmdlcyxcbiAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGNhblNhdmUsXG4gICAgICAgICAgICBwZXJtaXNzaW9uOiBibGFkZS51cGRhdGVQZXJtaXNzaW9uXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucmVzZXRcIiwgaWNvbjogJ2ZhIGZhLXVuZG8nLFxuICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBpc0RpcnR5LFxuICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmRlbGV0ZVwiLCBpY29uOiAnZmFzIGZhLXRyYXNoLWFsdCcsXG4gICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Q29uZmlybWF0aW9uRGlhbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IFwiY29uZmlybURlbGV0ZUl0ZW1cIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwic3Vic2NyaXB0aW9uLmRpYWxvZ3Muc2NoZWR1bGUtZGVsZXRlLnRpdGxlXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwic3Vic2NyaXB0aW9uLmRpYWxvZ3Muc2NoZWR1bGUtZGVsZXRlLm1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZUFQSS5kZWxldGUoeyBpZHM6IFtibGFkZS5vcmlnRW50aXR5LmlkXSB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KGJsYWRlLmN1cnJlbnRFbnRpdHksIGJsYWRlLm9yaWdFbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYmxhZGVDbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgICAgIHBlcm1pc3Npb246ICdzdWJzY3JpcHRpb246ZGVsZXRlJ1xuICAgICAgICB9XG4gICAgXTtcblxuICAgIGlmIChibGFkZS5pc05ldyB8fCAhYmxhZGUuaXNBcGlTYXZlKSB7XG4gICAgICAgICRzY29wZS5ibGFkZS50b29sYmFyQ29tbWFuZHMuc3BsaWNlKDAsIDEpOyAvLyByZW1vdmUgc2F2ZSBidXR0b25cbiAgICAgICAgJHNjb3BlLmJsYWRlLnRvb2xiYXJDb21tYW5kcy5zcGxpY2UoMSwgMSk7IC8vIHJlbW92ZSBkZWxldGVcbiAgICB9XG5cbiAgICBpZiAoYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgYW5ndWxhci5leHRlbmQoYmxhZGUsIHtcbiAgICAgICAgICAgIHRpdGxlOiAnc3Vic2NyaXB0aW9uLmJsYWRlcy5zY2hlZHVsZS1kZXRhaWwudGl0bGUtbmV3JyxcbiAgICAgICAgICAgIHN1YnRpdGxlOiAnc3Vic2NyaXB0aW9uLmJsYWRlcy5zY2hlZHVsZS1kZXRhaWwuc3VidGl0bGUtbmV3J1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhbmd1bGFyLmV4dGVuZChibGFkZSwge1xuICAgICAgICAgICAgdGl0bGU6ICdzdWJzY3JpcHRpb24uYmxhZGVzLnNjaGVkdWxlLWRldGFpbC50aXRsZSdcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYmxhZGUuaW5pdGlhbGl6ZShibGFkZS5kYXRhKTtcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5zdWJzY3JpcHRpb25Nb2R1bGUnKVxuICAgIC5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnN1YnNjcmlwdGlvbk1vZHVsZS5zdWJzY3JpcHRpb25EZXRhaWxDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLnN1YnNjcmlwdGlvbk1vZHVsZS5zdWJzY3JpcHRpb25BUEknLCAncGxhdGZvcm1XZWJBcHAuZGlhbG9nU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLm9yZGVyTW9kdWxlLm9yZGVyX3Jlc19jdXN0b21lck9yZGVycycsICckdGltZW91dCcsICdmb2N1cycsICdtb21lbnQnLFxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBzdWJzY3JpcHRpb25BUEksIGRpYWxvZ1NlcnZpY2UsIGN1c3RvbWVyT3JkZXJzLCAkdGltZW91dCwgZm9jdXMsIG1vbWVudCkge1xuICAgICAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgICAgICAgICAgYmxhZGUudXBkYXRlUGVybWlzc2lvbiA9ICdzdWJzY3JpcHRpb246dXBkYXRlJztcbiAgICAgICAgICAgIGJsYWRlLmN1c3RvbWVyT3JkZXIgPSB7fTtcbiAgICAgICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtdO1xuXG4gICAgICAgICAgICBibGFkZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChibGFkZS5pZCA9PT0gJ29wZXJhdGlvbkRldGFpbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9pZiAoIWJsYWRlLmlzTmV3KVxuICAgICAgICAgICAgICAgICAgICAvLyAgICBibGFkZS5pbml0aWFsaXplKGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uQVBJLmdldCh7IGlkOiBibGFkZS5lbnRpdHlOb2RlLmlkIH0sIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pdGVtcyA9IHJlc3VsdC5jdXN0b21lck9yZGVyUHJvdG90eXBlLml0ZW1zOyAvLyByZXN0cnVjdHVyZSBmb3IgdGhlIGJsYWRlcyBmcm9tIG9yZGVyIG1vZHVsZSB0byB3b3JrIHByb3Blcmx5XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pbml0aWFsaXplKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXN0b21lck9yZGVyID0gYmxhZGUuY3VycmVudEVudGl0eS5jdXN0b21lck9yZGVyUHJvdG90eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9uZWNlc3NhcnkgZm9yIHNjb3BlIGJvdW5kZWQgQUNMIGNoZWNrc1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuc2VjdXJpdHlTY29wZXMgPSByZXN1bHQuc2NvcGVzO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBibGFkZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKG9wZXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJsYWRlLm9yaWdFbnRpdHkgPSBvcGVyYXRpb247XG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGFuZ3VsYXIuY29weShvcGVyYXRpb24pO1xuICAgICAgICAgICAgICAgIC8vJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vICAgIGJsYWRlLmN1c3RvbUluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICAvL30pO1xuXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoYmxhZGUsIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdzdWJzY3JpcHRpb24uYmxhZGVzLnN1YnNjcmlwdGlvbi1kZXRhaWwudGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZVZhbHVlczogeyBudW1iZXI6IGJsYWRlLm9yaWdFbnRpdHkubnVtYmVyIH0sXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnc3Vic2NyaXB0aW9uLmJsYWRlcy5zdWJzY3JpcHRpb24tZGV0YWlsLnN1YnRpdGxlJ1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaW5pdFRvb2xiYXJDb21tYW5kcygpO1xuXG4gICAgICAgICAgICAgICAgYmxhZGUuaXNMb2NrZWQgPSBibGFkZS5jdXJyZW50RW50aXR5LmlzQ2FuY2VsbGVkO1xuICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gYmFzZSBmdW5jdGlvbnMgdG8gb3ZlcnJpZGUgYXMgbmVlZGVkXG4gICAgICAgICAgICAvL2JsYWRlLmN1c3RvbUluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgICAgICBibGFkZS5zZXRFbnRpdHlTdGF0dXMgPSBmdW5jdGlvbiAoc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5zdWJzY3JpcHRpb25TdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBibGFkZS5yZWNhbGN1bGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGN1c3RvbWVyT3JkZXJzLnJlY2FsY3VsYXRlKGJsYWRlLmN1c3RvbWVyT3JkZXIsIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KHJlc3VsdCwgYmxhZGUuY3VzdG9tZXJPcmRlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkVG9Gb2N1cyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuaWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpZFRvRm9jdXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXMoaWRUb0ZvY3VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZFRvRm9jdXMpLnNlbGVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJsYWRlLmlkID09PSAnb3BlcmF0aW9uRGV0YWlsJykge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkoYmxhZGUuY3VycmVudEVudGl0eSwgYmxhZGUub3JpZ0VudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIC8vaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGJsYWRlLnJlYWxPcGVyYXRpb25zQ29sbGVjdGlvbi5wdXNoKGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICBibGFkZS5jdXN0b21lck9yZGVyLmNoaWxkcmVuT3BlcmF0aW9ucy5wdXNoKGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5KSk7XG4gICAgICAgICAgICAgICAgICAgIC8vfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgdmFyIGZvdW5kT3AgPSBfLmZpbmRXaGVyZShibGFkZS5yZWFsT3BlcmF0aW9uc0NvbGxlY3Rpb24sIHsgaWQ6IGJsYWRlLm9yaWdFbnRpdHkuaWQgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5LCBmb3VuZE9wKTtcbiAgICAgICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5ibGFkZUNsb3NlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsYWRlLmlzVG90YWxzUmVjYWxjdWxhdGlvbk5lZWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucmVjYWxjdWxhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbkFQSS51cGRhdGUoYmxhZGUuY3VycmVudEVudGl0eSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgJHNjb3BlLmNhbmNlbENoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGJsYWRlLm9yaWdFbnRpdHk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJsYWRlQ2xvc2UoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzRGlydHkoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJsYWRlLm9yaWdFbnRpdHkgJiYgIWFuZ3VsYXIuZXF1YWxzKGJsYWRlLm9yaWdFbnRpdHksIGJsYWRlLmN1cnJlbnRFbnRpdHkpICYmICFibGFkZS5pc05ldyAmJiBibGFkZS5oYXNVcGRhdGVQZXJtaXNzaW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhblNhdmUoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzRGlydHkoKSAmJiAoISRzY29wZS5mb3JtU2NvcGUgfHwgJHNjb3BlLmZvcm1TY29wZS4kdmFsaWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuc2V0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7ICRzY29wZS5mb3JtU2NvcGUgPSBmb3JtOyB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBpbml0VG9vbGJhckNvbW1hbmRzKCkge1xuICAgICAgICAgICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJvcmRlcnMuY29tbWFuZHMubmV3LWRvY3VtZW50XCIsIGljb246ICdmYXMgZmEtcGx1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJuZXdPcGVyYXRpb25XaXphcmRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJPcmRlcjogYmxhZGUuY3VzdG9tZXJPcmRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVudGl0eTogYmxhZGUuY3VycmVudEVudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVzOiBibGFkZS5zdG9yZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZVR5cGVzOiBibGFkZS5rbm93bkNoaWxkcmVuT3BlcmF0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwib3JkZXJzLmJsYWRlcy5uZXdPcGVyYXRpb24td2l6YXJkLnRpdGxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnb3JkZXJzLmJsYWRlcy5uZXdPcGVyYXRpb24td2l6YXJkLnN1YnRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uub3JkZXJNb2R1bGUubmV3T3BlcmF0aW9uV2l6YXJkQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuT3JkZXJzKS9TY3JpcHRzL3dpemFyZHMvbmV3T3BlcmF0aW9uL25ld09wZXJhdGlvbi13aXphcmQudHBsLmh0bWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWJsYWRlLmlzTG9ja2VkICYmIF8uYW55KGJsYWRlLmtub3duQ2hpbGRyZW5PcGVyYXRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiBibGFkZS51cGRhdGVQZXJtaXNzaW9uXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuc2F2ZVwiLCBpY29uOiAnZmFzIGZhLXNhdmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogJHNjb3BlLnNhdmVDaGFuZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogY2FuU2F2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZXNldFwiLCBpY29uOiAnZmEgZmEtdW5kbycsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KGJsYWRlLm9yaWdFbnRpdHksIGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGlzRGlydHksXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiBibGFkZS51cGRhdGVQZXJtaXNzaW9uXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuZGVsZXRlXCIsIGljb246ICdmYXMgZmEtdHJhc2gtYWx0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJjb25maXJtRGVsZXRlSXRlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJvcmRlcnMuZGlhbG9ncy5vcGVyYXRpb24tZGVsZXRlLnRpdGxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwib3JkZXJzLmRpYWxvZ3Mub3BlcmF0aW9uLWRlbGV0ZS5tZXNzYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsYWRlLmlkID09PSAnb3BlcmF0aW9uRGV0YWlsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBpZHggPSBfLmZpbmRJbmRleChibGFkZS5jdXN0b21lck9yZGVyLmNoaWxkcmVuT3BlcmF0aW9ucywgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQgPT09IGJsYWRlLm9yaWdFbnRpdHkuaWQ7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2JsYWRlLmN1c3RvbWVyT3JkZXIuY2hpbGRyZW5PcGVyYXRpb25zLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBpZHggPSBfLmZpbmRJbmRleChibGFkZS5yZWFsT3BlcmF0aW9uc0NvbGxlY3Rpb24sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkID09PSBibGFkZS5vcmlnRW50aXR5LmlkOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9ibGFkZS5yZWFsT3BlcmF0aW9uc0NvbGxlY3Rpb24uc3BsaWNlKGlkeCwgMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9ibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUoYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uQVBJLmRlbGV0ZSh7IGlkczogYmxhZGUub3JpZ0VudGl0eS5pZCB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUoYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbkRpYWxvZyhkaWFsb2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnb3JkZXI6ZGVsZXRlJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIm9yZGVycy5jb21tYW5kcy5jYW5jZWwtZG9jdW1lbnRcIiwgaWNvbjogJ2ZhIGZhLXJlbW92ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpYWxvZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiY29uZmlybUNhbmNlbE9wZXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5jYW5jZWxSZWFzb24gPSByZWFzb24gPT0gbnVsbCB8fCByZWFzb24ucmVwbGFjZSgvXFxzL2csICcnKS5sZW5ndGggPCAxID8gbnVsbCA6IHJlYXNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkuY2FuY2VsbGVkRGF0ZSA9IG1vbWVudCgpLnV0YygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5pc0NhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5zZXRFbnRpdHlTdGF0dXMoJ0NhbmNlbGxlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmVDaGFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvd0RpYWxvZyhkaWFsb2csICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5PcmRlcnMpL1NjcmlwdHMvZGlhbG9ncy9jYW5jZWxPcGVyYXRpb24tZGlhbG9nLnRwbC5odG1sJywgJ3ZpcnRvQ29tbWVyY2Uub3JkZXJNb2R1bGUuY29uZmlybUNhbmNlbERpYWxvZ0NvbnRyb2xsZXInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJsYWRlLmN1cnJlbnRFbnRpdHkgJiYgIWJsYWRlLmN1cnJlbnRFbnRpdHkuaXNDYW5jZWxsZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN1YnNjcmlwdGlvbi5jb21tYW5kcy5uZXctb3JkZXJcIiwgaWNvbjogJ2ZhIGZhLWZpbGUtdGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Q29uZmlybWF0aW9uRGlhbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiY29uZmlybURpYWxvZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJzdWJzY3JpcHRpb24uZGlhbG9ncy5uZXctb3JkZXIudGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJzdWJzY3JpcHRpb24uZGlhbG9ncy5uZXctb3JkZXIubWVzc2FnZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGNvbmZpcm1lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VDaGlsZHJlbkJsYWRlcyhibGFkZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25BUEkuY3JlYXRlT3JkZXIoYmxhZGUuY3VycmVudEVudGl0eSwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWJsYWRlLmlzTG9ja2VkICYmICFpc0RpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ29yZGVyOmNyZWF0ZSdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBibGFkZS5vbkNsb3NlID0gZnVuY3Rpb24gKGNsb3NlQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dDb25maXJtYXRpb25JZk5lZWRlZChpc0RpcnR5KCksIGNhblNhdmUoKSwgYmxhZGUsICRzY29wZS5zYXZlQ2hhbmdlcywgY2xvc2VDYWxsYmFjaywgXCJvcmRlcnMuZGlhbG9ncy5vcGVyYXRpb24tc2F2ZS50aXRsZVwiLCBcIm9yZGVycy5kaWFsb2dzLm9wZXJhdGlvbi1zYXZlLm1lc3NhZ2VcIik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuY2FuY2VsT3BlcmF0aW9uUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UocmVzb2x1dGlvbik7XG4gICAgICAgICAgICB9O1xuXG5cbiAgICAgICAgICAgIC8vIGFjdGlvbnMgb24gbG9hZFxuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5zdWJzY3JpcHRpb25Nb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2Uuc3Vic2NyaXB0aW9uTW9kdWxlLnN1YnNjcmlwdGlvbkxpc3RDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2FsU3RvcmFnZScsICd2aXJ0b0NvbW1lcmNlLnN1YnNjcmlwdGlvbk1vZHVsZS5zdWJzY3JpcHRpb25BUEknLCAndmlydG9Db21tZXJjZS5vcmRlck1vZHVsZS5rbm93bk9wZXJhdGlvbnMnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLnVpR3JpZEhlbHBlcicsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZVV0aWxzJywgJ2RhdGVGaWx0ZXInLFxuZnVuY3Rpb24gKCRzY29wZSwgJGxvY2FsU3RvcmFnZSwgc3Vic2NyaXB0aW9uQVBJLCBrbm93bk9wZXJhdGlvbnMsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIGRpYWxvZ1NlcnZpY2UsIHVpR3JpZEhlbHBlciwgYmxhZGVVdGlscywgZGF0ZUZpbHRlcikge1xuICAgICRzY29wZS51aUdyaWRDb25zdGFudHMgPSB1aUdyaWRIZWxwZXIudWlHcmlkQ29uc3RhbnRzO1xuICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcblxuICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgIHZhciBjcml0ZXJpYSA9IHtcbiAgICAgICAgICAgIGtleXdvcmQ6IGZpbHRlci5rZXl3b3JkLFxuICAgICAgICAgICAgc29ydDogdWlHcmlkSGVscGVyLmdldFNvcnRFeHByZXNzaW9uKCRzY29wZSksXG4gICAgICAgICAgICBza2lwOiAoJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAtIDEpICogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCxcbiAgICAgICAgICAgIHRha2U6ICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnQsXG4gICAgICAgICAgICByZXNwb25zZUdyb3VwOiAnRGVmYXVsdCdcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZpbHRlci5jdXJyZW50KSB7XG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChjcml0ZXJpYSwgZmlsdGVyLmN1cnJlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3Vic2NyaXB0aW9uQVBJLnNlYXJjaChjcml0ZXJpYSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MudG90YWxJdGVtcyA9IGRhdGEudG90YWxDb3VudDtcbiAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdGllcyA9IGRhdGEucmVzdWx0cztcblxuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUub3BlbkRldGFpbHNCbGFkZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IG5vZGUuaWQ7XG5cbiAgICAgICAgdmFyIGZvdW5kVGVtcGxhdGUgPSBrbm93bk9wZXJhdGlvbnMuZ2V0T3BlcmF0aW9uKCdTdWJzY3JpcHRpb24nKTtcbiAgICAgICAgdmFyIG5ld0JsYWRlID0gYW5ndWxhci5jb3B5KGZvdW5kVGVtcGxhdGUuZGV0YWlsQmxhZGUpO1xuICAgICAgICBuZXdCbGFkZS5lbnRpdHlOb2RlID0gbm9kZTtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRlbGV0ZUxpc3QgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgaWQ6IFwiY29uZmlybURlbGV0ZVwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VDaGlsZHJlbkJsYWRlcyhibGFkZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkTm9kZUlkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkcyA9IF8ucGx1Y2sobGlzdCwgJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25BUEkucmVtb3ZlKHsgaWRzOiBpZHMgfSwgYmxhZGUucmVmcmVzaCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3dEaWFsb2coZGlhbG9nLCAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuU3Vic2NyaXB0aW9uKS9TY3JpcHRzL2RpYWxvZ3MvZGVsZXRlU3Vic2NyaXB0aW9uLWRpYWxvZy50cGwuaHRtbCcsICdwbGF0Zm9ybVdlYkFwcC5jb25maXJtRGlhbG9nQ29udHJvbGxlcicpO1xuICAgIH07XG5cbiAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1yZXR3ZWV0JztcblxuICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZWZyZXNoXCIsIGljb246ICdmYSBmYS1yZWZyZXNoJyxcbiAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGJsYWRlLnJlZnJlc2gsXG4gICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuZGVsZXRlXCIsIGljb246ICdmYXMgZmEtdHJhc2gtYWx0JyxcbiAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlTGlzdCgkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmdyaWRBcGkgJiYgXy5hbnkoJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwZXJtaXNzaW9uOiAnc3Vic2NyaXB0aW9uOmRlbGV0ZSdcbiAgICAgICAgfVxuICAgIF07XG5cbiAgICAvLyBzaW1wbGUgYW5kIGFkdmFuY2VkIGZpbHRlcmluZ1xuICAgIHZhciBmaWx0ZXIgPSBibGFkZS5maWx0ZXIgPSAkc2NvcGUuZmlsdGVyID0ge307XG4gICAgJHNjb3BlLiRsb2NhbFN0b3JhZ2UgPSAkbG9jYWxTdG9yYWdlO1xuICAgIGlmICghJGxvY2FsU3RvcmFnZS5zdWJzY3JpcHRpb25TZWFyY2hGaWx0ZXJzKSB7XG4gICAgICAgICRsb2NhbFN0b3JhZ2Uuc3Vic2NyaXB0aW9uU2VhcmNoRmlsdGVycyA9IFt7IG5hbWU6ICdzdWJzY3JpcHRpb24uYmxhZGVzLnN1YnNjcmlwdGlvbi1saXN0LmxhYmVscy5uZXctZmlsdGVyJyB9XVxuICAgIH1cbiAgICBpZiAoJGxvY2FsU3RvcmFnZS5zdWJzY3JpcHRpb25TZWFyY2hGaWx0ZXJJZCkge1xuICAgICAgICBmaWx0ZXIuY3VycmVudCA9IF8uZmluZFdoZXJlKCRsb2NhbFN0b3JhZ2Uuc3Vic2NyaXB0aW9uU2VhcmNoRmlsdGVycywgeyBpZDogJGxvY2FsU3RvcmFnZS5zdWJzY3JpcHRpb25TZWFyY2hGaWx0ZXJJZCB9KTtcbiAgICB9XG5cbiAgICBmaWx0ZXIuY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkbG9jYWxTdG9yYWdlLnN1YnNjcmlwdGlvblNlYXJjaEZpbHRlcklkID0gZmlsdGVyLmN1cnJlbnQgPyBmaWx0ZXIuY3VycmVudC5pZCA6IG51bGw7XG4gICAgICAgIGlmIChmaWx0ZXIuY3VycmVudCAmJiAhZmlsdGVyLmN1cnJlbnQuaWQpIHtcbiAgICAgICAgICAgIGZpbHRlci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHNob3dGaWx0ZXJEZXRhaWxCbGFkZSh7IGlzTmV3OiB0cnVlIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKHsgaWQ6ICdmaWx0ZXJEZXRhaWwnIH0pO1xuICAgICAgICAgICAgZmlsdGVyLmNyaXRlcmlhQ2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZpbHRlci5lZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZmlsdGVyLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHNob3dGaWx0ZXJEZXRhaWxCbGFkZSh7IGRhdGE6IGZpbHRlci5jdXJyZW50IH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNob3dGaWx0ZXJEZXRhaWxCbGFkZShibGFkZURhdGEpIHtcbiAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgaWQ6ICdmaWx0ZXJEZXRhaWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uuc3Vic2NyaXB0aW9uTW9kdWxlLmZpbHRlckRldGFpbENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5TdWJzY3JpcHRpb24pL1NjcmlwdHMvYmxhZGVzL2ZpbHRlci1kZXRhaWwudHBsLmh0bWwnLFxuICAgICAgICB9O1xuICAgICAgICBhbmd1bGFyLmV4dGVuZChuZXdCbGFkZSwgYmxhZGVEYXRhKTtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICB9XG5cbiAgICBmaWx0ZXIuY3JpdGVyaWFDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA+IDEpIHtcbiAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIHVpLWdyaWRcbiAgICAkc2NvcGUuc2V0R3JpZE9wdGlvbnMgPSBmdW5jdGlvbiAoZ3JpZE9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGNyZWF0ZWREYXRlQ29sdW1uID0gXy5maW5kV2hlcmUoZ3JpZE9wdGlvbnMuY29sdW1uRGVmcywgeyBuYW1lOiAnY3JlYXRlZERhdGUnIH0pO1xuICAgICAgICBpZiAoY3JlYXRlZERhdGVDb2x1bW4pIHsgLy8gY3VzdG9tIHRvb2x0aXBcbiAgICAgICAgICAgIGNyZWF0ZWREYXRlQ29sdW1uLmNlbGxUb29sdGlwID0gZnVuY3Rpb24gKHJvdywgY29sKSB7IHJldHVybiBkYXRlRmlsdGVyKHJvdy5lbnRpdHkuY3JlYXRlZERhdGUsICdtZWRpdW0nKTsgfVxuICAgICAgICB9XG4gICAgICAgIHVpR3JpZEhlbHBlci5pbml0aWFsaXplKCRzY29wZSwgZ3JpZE9wdGlvbnMsIGZ1bmN0aW9uIChncmlkQXBpKSB7XG4gICAgICAgICAgICB1aUdyaWRIZWxwZXIuYmluZFJlZnJlc2hPblNvcnRDaGFuZ2VkKCRzY29wZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJsYWRlVXRpbHMuaW5pdGlhbGl6ZVBhZ2luYXRpb24oJHNjb3BlKTtcbiAgICB9O1xuXG4gICAgLy8gYWN0aW9ucyBvbiBsb2FkXG4gICAgLy8gYmxhZGUucmVmcmVzaCgpO1xufV0pO1xuIiwi77u/YW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2Uuc3Vic2NyaXB0aW9uTW9kdWxlJylcbi5mYWN0b3J5KCd2aXJ0b0NvbW1lcmNlLnN1YnNjcmlwdGlvbk1vZHVsZS5zdWJzY3JpcHRpb25BUEknLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICByZXR1cm4gJHJlc291cmNlKCdhcGkvc3Vic2NyaXB0aW9ucy86aWQnLCBudWxsLCB7XG4gICAgICAgIHNlYXJjaDogeyBtZXRob2Q6ICdQT1NUJywgdXJsOiAnYXBpL3N1YnNjcmlwdGlvbnMvc2VhcmNoJyB9LFxuICAgICAgICB1cGRhdGU6IHsgbWV0aG9kOiAnUFVUJyB9LFxuICAgICAgICBjcmVhdGVPcmRlcjogeyBtZXRob2Q6ICdQT1NUJywgdXJsOiAnYXBpL3N1YnNjcmlwdGlvbnMvb3JkZXInIH1cbiAgICB9KTtcbn1dKVxuLmZhY3RvcnkoJ3ZpcnRvQ29tbWVyY2Uuc3Vic2NyaXB0aW9uTW9kdWxlLnNjaGVkdWxlQVBJJywgWyckcmVzb3VyY2UnLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XG4gICAgcmV0dXJuICRyZXNvdXJjZSgnYXBpL3N1YnNjcmlwdGlvbnMvcGxhbnMvOmlkJyk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5zdWJzY3JpcHRpb25Nb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2Uuc3Vic2NyaXB0aW9uTW9kdWxlLm5vdGlmaWNhdGlvbnNMb2dXaWRnZXRDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UpIHtcblx0dmFyIGJsYWRlID0gJHNjb3BlLndpZGdldC5ibGFkZTtcblxuICAgIGJsYWRlLnNob3dTdWJzY3JpcHRpb25Ob3RpZmljYXRpb25zTG9nID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBvYmplY3RJZCA9IGJsYWRlLmN1cnJlbnRFbnRpdHkuaWQ7XG5cdFx0dmFyIG9iamVjdFR5cGVJZCA9ICdTdWJzY3JpcHRpb24nO1xuXHRcdHZhciBuZXdCbGFkZSA9IHtcblx0XHRcdGlkOiAnbm90aWZpY2F0aW9uTG9nV2lkZ2V0Q2hpbGQnLFxuXHRcdFx0b2JqZWN0SWQ6IG9iamVjdElkLFxuXHRcdFx0b2JqZWN0VHlwZTogb2JqZWN0VHlwZUlkLFxuXHRcdFx0dGl0bGU6ICdzdWJzY3JpcHRpb24ud2lkZ2V0cy5ub3RpZmljYXRpb25zTG9nV2lkZ2V0LmJsYWRlLXRpdGxlJyxcblx0XHRcdHN1YnRpdGxlOiAnc3Vic2NyaXB0aW9uLndpZGdldHMubm90aWZpY2F0aW9uc0xvZ1dpZGdldC5ibGFkZS1zdWJ0aXRsZScsXG5cdFx0XHRjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5ub3RpZmljYXRpb25zTW9kdWxlLm5vdGlmaWNhdGlvbnNKb3VybmFsQ29udHJvbGxlcicsXG5cdFx0XHR0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk5vdGlmaWNhdGlvbnMpL1NjcmlwdHMvYmxhZGVzL25vdGlmaWNhdGlvbnMtam91cm5hbC50cGwuaHRtbCdcblx0XHR9O1xuXHRcdGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG5cdH07XG59XSk7XG4iLCLvu79hbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5zdWJzY3JpcHRpb25Nb2R1bGUnKVxuXHQuY29udHJvbGxlcigndmlydG9Db21tZXJjZS5zdWJzY3JpcHRpb25Nb2R1bGUubm90aWZpY2F0aW9uc1dpZGdldENvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xuXHRcdHZhciBibGFkZSA9ICRzY29wZS53aWRnZXQuYmxhZGU7XG5cblx0XHRibGFkZS5zaG93Tm90aWZpY2F0aW9ucyA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBvYmplY3RJZCA9IGJsYWRlLmN1cnJlbnRFbnRpdHkuaWQ7XG5cdFx0XHR2YXIgb2JqZWN0VHlwZUlkID0gJ1N1YnNjcmlwdGlvbic7XG5cdFx0XHR2YXIgbmV3QmxhZGUgPSB7XG5cdFx0XHRcdGlkOiAnbm90aWZpY2F0aW9uV2lkZ2V0Q2hpbGQnLFxuXHRcdFx0XHRvYmplY3RJZDogb2JqZWN0SWQsXG5cdFx0XHRcdG9iamVjdFR5cGU6IG9iamVjdFR5cGVJZCxcblx0XHRcdFx0Ly8gbGFuZ3VhZ2VzOiBibGFkZS5jdXJyZW50RW50aXR5Lmxhbmd1YWdlcyxcblx0XHRcdFx0dGl0bGU6ICdzdWJzY3JpcHRpb24ud2lkZ2V0cy5ub3RpZmljYXRpb25zV2lkZ2V0LmJsYWRlLXRpdGxlJyxcblx0XHRcdFx0c3VidGl0bGU6ICdzdWJzY3JpcHRpb24ud2lkZ2V0cy5ub3RpZmljYXRpb25zV2lkZ2V0LmJsYWRlLXN1YnRpdGxlJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uubm90aWZpY2F0aW9uc01vZHVsZS5ub3RpZmljYXRpb25zTGlzdENvbnRyb2xsZXInLFxuXHRcdFx0XHR0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk5vdGlmaWNhdGlvbnMpL1NjcmlwdHMvYXBwL25vdGlmaWNhdGlvbnMvYmxhZGVzL25vdGlmaWNhdGlvbnMtbGlzdC50cGwuaHRtbCdcblx0XHRcdH07XG5cdFx0XHRibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuXHRcdH07XG5cdH1dKTsiLCLvu79hbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5zdWJzY3JpcHRpb25Nb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2Uuc3Vic2NyaXB0aW9uTW9kdWxlLm9yZGVyRHluYW1pY1Byb3BlcnR5V2lkZ2V0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLndpZGdldC5ibGFkZTtcblxuICAgICRzY29wZS5vcGVuQmxhZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgIGlkOiBcImR5bmFtaWNQcm9wZXJ0aWVzTGlzdFwiLFxuICAgICAgICAgICAgY3VycmVudEVudGl0eTogYmxhZGUuY3VzdG9tZXJPcmRlcixcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdwbGF0Zm9ybVdlYkFwcC5wcm9wZXJ0eVZhbHVlTGlzdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICckKFBsYXRmb3JtKS9TY3JpcHRzL2FwcC9keW5hbWljUHJvcGVydGllcy9ibGFkZXMvcHJvcGVydHlWYWx1ZS1saXN0LnRwbC5odG1sJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgfTtcbiAgICBcbiAgICAkc2NvcGUuJHdhdGNoKCd3aWRnZXQuYmxhZGUuY3VzdG9tZXJPcmRlcicsIGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGVudGl0eSkpIHtcbiAgICAgICAgICAgIHZhciBncm91cGVkQnlQcm9wZXJ0eSA9IF8uZ3JvdXBCeShlbnRpdHkuZHluYW1pY1Byb3BlcnRpZXMsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkOyB9KTtcbiAgICAgICAgICAgICRzY29wZS5keW5hbWljUHJvcGVydHlDb3VudCA9IF8ua2V5cyhncm91cGVkQnlQcm9wZXJ0eSkubGVuZ3RoO1xuICAgICAgICB9XG4gICAgfSk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5zdWJzY3JpcHRpb25Nb2R1bGUnKVxuICAgIC5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnN1YnNjcmlwdGlvbk1vZHVsZS5zdWJzY3JpcHRpb25PcmRlcnNXaWRnZXRDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLm9yZGVyTW9kdWxlLm9yZGVyX3Jlc19jdXN0b21lck9yZGVycycsXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIG9yZGVycykge1xuICAgICAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuXG4gICAgICAgICAgICAkc2NvcGUub3BlbkJsYWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICghYmxhZGUuaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnc3Vic2NyaXB0aW9uT3JkZXJzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnc3Vic2NyaXB0aW9uLmJsYWRlcy5zdWJzY3JpcHRpb25PcmRlci1saXN0LnRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLm9yZGVyTW9kdWxlLmN1c3RvbWVyT3JkZXJMaXN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk9yZGVycykvU2NyaXB0cy9ibGFkZXMvY3VzdG9tZXJPcmRlci1saXN0LnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVEZWxldGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYmxhZGUuY3VycmVudEVudGl0eS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3QmxhZGUucmVmcmVzaENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjcml0ZXJpYSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uSWRzOiBbYmxhZGUuY3VycmVudEVudGl0eS5pZF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yZGVycy5zZWFyY2goY3JpdGVyaWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1dKTtcbiIsIu+7v2FuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLnN1YnNjcmlwdGlvbk1vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5zdWJzY3JpcHRpb25Nb2R1bGUub3JkZXJTdWJzY3JpcHRpb25XaWRnZXRDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLm9yZGVyTW9kdWxlLmtub3duT3BlcmF0aW9ucycsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIGtub3duT3BlcmF0aW9ucykge1xuICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcblxuICAgICRzY29wZS5zdWJzY3JpcHRpb24gPSB7XG4gICAgICAgIGlkOiBibGFkZS5jdXN0b21lck9yZGVyLnN1YnNjcmlwdGlvbklkLFxuICAgICAgICBudW1iZXI6IGJsYWRlLmN1c3RvbWVyT3JkZXIuc3Vic2NyaXB0aW9uTnVtYmVyXG4gICAgfTtcblxuICAgICRzY29wZS5vcGVuQmxhZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkc2NvcGUuc3Vic2NyaXB0aW9uLmlkKSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uRGV0YWlsQmxhZGUgPSBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmZpbmRCbGFkZSgnc3Vic2NyaXB0aW9uRGV0YWlsJyk7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uRGV0YWlsQmxhZGUpIHtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUoYmxhZGUucGFyZW50QmxhZGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmRUZW1wbGF0ZSA9IGtub3duT3BlcmF0aW9ucy5nZXRPcGVyYXRpb24oJ1N1YnNjcmlwdGlvbicpO1xuICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IGFuZ3VsYXIuY29weShmb3VuZFRlbXBsYXRlLmRldGFpbEJsYWRlKTtcbiAgICAgICAgICAgICAgICBuZXdCbGFkZS5lbnRpdHlOb2RlID0gJHNjb3BlLnN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIu+7v2FuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLnN1YnNjcmlwdGlvbk1vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5zdWJzY3JpcHRpb25Nb2R1bGUuc2NoZWR1bGVXaWRnZXRDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLnN1YnNjcmlwdGlvbk1vZHVsZS5zY2hlZHVsZUFQSScsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIHNjaGVkdWxlQVBJKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcblxuICAgIHZhciBpc0FwaVNhdmUgPSBibGFkZS5pZCAhPT0gJ3N1YnNjcmlwdGlvbkRldGFpbCc7XG5cbiAgICBpZiAoaXNBcGlTYXZlKSB7XG4gICAgICAgIHNjaGVkdWxlQVBJLmdldCh7IGlkOiBibGFkZS5pdGVtSWQgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5zY2hlZHVsZSA9IGRhdGE7XG4gICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAkc2NvcGUuJHdhdGNoKCdibGFkZS5jdXJyZW50RW50aXR5JywgZnVuY3Rpb24gKHNjaGVkdWxlKSB7XG4gICAgICAgICAgICBpZiAoc2NoZWR1bGUpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2NoZWR1bGUgPSBzY2hlZHVsZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUub3BlbkJsYWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICBpZDogJ29yZGVyT3BlcmF0aW9uQ2hpbGQnLFxuICAgICAgICAgICAgaXNBcGlTYXZlOiBpc0FwaVNhdmUsXG4gICAgICAgICAgICBpdGVtSWQ6IGJsYWRlLml0ZW1JZCxcbiAgICAgICAgICAgIGRhdGE6ICRzY29wZS5zY2hlZHVsZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnN1YnNjcmlwdGlvbk1vZHVsZS5zY2hlZHVsZURldGFpbENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5TdWJzY3JpcHRpb24pL1NjcmlwdHMvYmxhZGVzL3NjaGVkdWxlLWRldGFpbC50cGwuaHRtbCdcbiAgICAgICAgfTtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICB9O1xuXG59XSk7XG4iXSwic291cmNlUm9vdCI6IiJ9