!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(1),n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27),n(28),e.exports=n(29)},function(e,t){null!=AppDependencies&&AppDependencies.push("virtoCommerce.marketingModule"),angular.module("virtoCommerce.marketingModule",[]).config(["$stateProvider",function(e){e.state("workspace.marketing",{url:"/marketing",templateUrl:"$(Platform)/Scripts/common/templates/home.tpl.html",controller:["$scope","platformWebApp.bladeNavigationService",function(e,t){t.showBlade({id:"marketing",title:"marketing.blades.marketing-main.title",controller:"virtoCommerce.marketingModule.marketingMainController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/common/marketing-main.tpl.html",isClosingDisabled:!0})}]})}]).factory("virtoCommerce.marketingModule.marketingMenuItemService",(function(){return{items:[],register:function(e){this.items.push(e)}}})).run(["$http","$compile","platformWebApp.mainMenuService","platformWebApp.widgetService","platformWebApp.toolbarService","platformWebApp.breadcrumbHistoryService","$state","platformWebApp.authService","virtoCommerce.storeModule.stores","platformWebApp.permissionScopeResolver","platformWebApp.bladeNavigationService","virtoCommerce.coreModule.common.dynamicExpressionService","virtoCommerce.marketingModule.marketingMenuItemService",function(e,t,n,o,i,r,a,l,c,s,d,m,u){var p={path:"browse/marketing",icon:"fa fa-flag",title:"marketing.main-menu-title",priority:40,action:function(){a.go("workspace.marketing")},permission:"marketing:access"};n.addMenuItem(p),u.register({id:"1",name:"Promotions",entityName:"promotion",icon:"fa-area-chart"}),u.register({id:"2",name:"Dynamic content",entityName:"dynamicContent",icon:"fa-calendar-o"}),i.register(r.getBackButtonInstance(),"virtoCommerce.marketingModule.itemsDynamicContentListController"),i.register(r.getBackButtonInstance(),"virtoCommerce.marketingModule.placeholdersDynamicContentListController"),i.register(r.getBackButtonInstance(),"virtoCommerce.marketingModule.addPublishingContentItemsStepController"),i.register(r.getBackButtonInstance(),"virtoCommerce.marketingModule.addPublishingPlaceholdersStepController"),o.registerWidget({controller:"virtoCommerce.marketingModule.couponsWidgetController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/promotion/widgets/couponsWidget.tpl.html"},"promotionDetail");var g={type:"MarketingStoreSelectedScope",title:"Only for promotions in selected stores",selectFn:function(e,t){var n={id:"store-pick",title:this.title,subtitle:"Select stores",currentEntity:this,onChangesConfirmedFn:t,dataService:c,controller:"platformWebApp.security.scopeValuePickFromSimpleListController",template:"$(Platform)/Scripts/app/security/blades/common/scope-value-pick-from-simple-list.tpl.html"};d.showBlade(n,e)}};s.register(g),m.registerExpression({id:"ConditionHasNoSalePrice",displayName:"Apply only to full price items and not sales items"});m.registerExpression({groupName:"Catalog",id:"DynamicContentConditionCategoryIs",templateURL:"expression-ConditionCategoryIs.html",displayName:"Specific category"}),m.registerExpression({groupName:"Catalog",id:"DynamicContentConditionProductIs",templateURL:"expression-ConditionEntryIs.html",displayName:"Specific product"}),e.get("Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicConditions/templates.html").then((function(e){t(e.data)}))}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.marketingMainController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.marketingModule.marketingMenuItemService",function(e,t,n){var o;e.selectedNodeId=null,e.blade.openBlade=function(n){e.selectedNodeId=n.id;var o={id:"marketingMainListChildren",title:n.name,subtitle:"Marketing service",controller:n.controller||"virtoCommerce.marketingModule."+n.entityName+"ListController",template:n.template||"Modules/$(VirtoCommerce.Marketing)/Scripts/"+n.entityName+"/blades/"+n.entityName+"-list.tpl.html"};t.showBlade(o,e.blade)},e.blade.headIcon="fa fa-flag",o=_.sortBy(n.items,"id"),e.blade.currentEntities=o,e.blade.isLoading=!1,e.blade.openBlade(o[0])}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.dynamicContentListController",["$scope","platformWebApp.bladeNavigationService",function(e,t){var n=e.blade;e.selectedNodeId=null,n.openBlade=function(o){e.selectedNodeId=o.id;var i={id:"dynamicContentList",title:o.name,subtitle:o.subname,controller:"virtoCommerce.marketingModule."+o.entityName+"DynamicContentListController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/"+o.entityName+"/list.tpl.html"};t.showBlade(i,n)},e.blade.headIcon="fa fa-calendar-o",n.currentEntities=[{id:"DC_1",name:"marketing.blades.items.list.title",subname:"marketing.blades.items.list.subtitle",title:"marketing.blades.dynamicContent-list.menu.items.title",description:"marketing.blades.dynamicContent-list.menu.items.description",icon:"fa-inbox",entityName:"items"},{id:"DC_2",name:"marketing.blades.placeholders.list.title",subname:"marketing.blades.placeholders.list.subtitle",title:"marketing.blades.dynamicContent-list.menu.placeholders.title",description:"marketing.blades.dynamicContent-list.menu.placeholders.description",icon:"fa-location-arrow",entityName:"placeholders"},{id:"DC_3",name:"marketing.blades.publishing.list.title",subname:"marketing.blades.publishing.list.subtitle",title:"marketing.blades.dynamicContent-list.menu.publishing.title",description:"marketing.blades.dynamicContent-list.menu.publishing.description",icon:"fa-paperclip",entityName:"publishing"}],n.isLoading=!1}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.addContentItemsElementController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.catalogModule.categories","virtoCommerce.catalogModule.items","platformWebApp.dynamicProperties.api",function(e,t,n,o,i){var r=e.blade;e.pageSettings={},e.pageSettings.totalItems=0,e.pageSettings.currentPage=1,e.pageSettings.numPages=5,e.pageSettings.itemsPerPageCount=999,r.addFolder=function(){var e={name:"",description:"",parentFolderId:r.chosenFolder,items:[],childrenFolders:[]};r.addNewFolder(e)},r.addContentItem=function(){e.pageSettings.currentPage,e.pageSettings.itemsPerPageCount,e.pageSettings.itemsPerPageCount;i.query({id:"VirtoCommerce.MarketingModule.Core.Model.DynamicContentItem"},(function(e){angular.forEach(e,(function(e){e.values=[],e.displayNames=[]}));var t={name:"",description:"",folderId:r.chosenFolder,dynamicProperties:e};r.addNewContentItem(t)}))},e.blade.isLoading=!1}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.itemDetailController",["$scope","virtoCommerce.marketingModule.dynamicContent.contentItems","platformWebApp.bladeNavigationService","platformWebApp.dialogService","platformWebApp.dynamicProperties.dictionaryItemsApi","platformWebApp.settings","platformWebApp.dynamicProperties.api",function(e,t,n,o,i,r,a){var l=e.blade;l.updatePermission="marketing:update",l.refresh=function(){l.isNew?l.initialize():t.get({id:l.entity.id},(function(e){a.search({objectType:l.entity.objectType,take:1e4},(function(t){var n=t.results;_.each(n,(function(t){t.values=[];var n=_.find(e.dynamicProperties,(function(e){return e.id===t.id}));n&&(t.values=n.values)})),e.dynamicProperties=n,l.entity=e,l.currentEntity=e,l.initialize()}))}))},l.IsChanged=function(){let e=angular.equals(l.origEntity,l.currentEntity);if(e)return!1;if(l.origEntity.name!==l.currentEntity.name||l.origEntity.description!==l.currentEntity.description)return!0;if(e=angular.equals(_.omit(l.origEntity,["dynamicProperties"]),_.omit(l.currentEntity,["dynamicProperties"])),!(l.origEntity.dynamicProperties&&l.currentEntity.dynamicProperties&&l.origEntity.dynamicProperties.length&&l.currentEntity.dynamicProperties.length))return e;for(var t of l.origEntity.dynamicProperties){let n=l.currentEntity.dynamicProperties.find(e=>e.name==t.name);if(t.isDictionary){let o=n.values.filter(e=>null!=e.value).map(e=>e.value.id);e=t.values.length?t.values.every(e=>o.includes(e.valueId)):!o.length}else if(t.isArray){let o=t.values.map(e=>e.value),i=n.values.map(e=>e.value);e=t.values.length==n.values.length&&o.every(e=>i.includes(e))}else n.values=0==t.values.length?n.values.filter(e=>""!=e.value):n.values,e=angular.equals(t.values,n.values);if(!e)break}return!e},l.initialize=function(){l.toolbarCommands=[],l.isNew||(l.toolbarCommands=[{name:"platform.commands.save",icon:"fas fa-save",executeMethod:function(){l.saveChanges()},canExecuteMethod:function(){return l.IsChanged()&&e.formScope.$valid},permission:l.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(l.origEntity,l.currentEntity)},canExecuteMethod:function(){return l.IsChanged()},permission:l.updatePermission},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){var e={id:"confirmDeleteContentItem",title:"marketing.dialogs.content-item-delete.title",message:"marketing.dialogs.content-item-delete.message",callback:function(e){e&&(l.isLoading=!0,t.delete({ids:[l.currentEntity.id]},(function(){l.parentBlade.initializeBlade(),n.closeBlade(l)})))}};o.showConfirmationDialog(e)},canExecuteMethod:function(){return!0},permission:l.updatePermission}]),l.toolbarCommands.push({name:"marketing.commands.manage-type-properties",icon:"fa fa-edit",executeMethod:function(){var e={id:"dynamicPropertyList",objectType:l.currentEntity.objectType,controller:"platformWebApp.dynamicPropertyListController",template:"$(Platform)/Scripts/app/dynamicProperties/blades/dynamicProperty-list.tpl.html"};n.showBlade(e,l)},canExecuteMethod:function(){return angular.isDefined(l.currentEntity.objectType)}}),l.origEntity=l.entity,l.currentEntity=angular.copy(l.origEntity),l.isLoading=!1},l.saveChanges=function(){l.isLoading=!0,l.isNew?t.save(l.currentEntity,(function(e){l.parentBlade.initializeBlade(),n.closeBlade(l)})):t.update(l.currentEntity,(function(e){l.parentBlade.initializeBlade(),l.origEntity=angular.copy(l.currentEntity),l.isLoading=!1}))},e.editDictionary=function(e){var t={id:"propertyDictionary",isApiSave:!0,currentEntity:e,controller:"platformWebApp.propertyDictionaryController",template:"$(Platform)/Scripts/app/dynamicProperties/blades/property-dictionary.tpl.html",onChangesConfirmedFn:function(){l.currentEntity.dynamicProperties=angular.copy(l.currentEntity.dynamicProperties)}};n.showBlade(t,l)},e.getDictionaryValues=function(e,t){i.query({id:e.objectType,propertyId:e.id},t)},e.setForm=function(t){e.formScope=t},l.headIcon="fa fa-inbox",r.getValues({id:"VirtoCommerce.Core.General.Languages"},(function(t){e.languages=t})),l.refresh()}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.itemFolderDetailController",["$scope","virtoCommerce.marketingModule.dynamicContent.folders","platformWebApp.bladeNavigationService","platformWebApp.dialogService",function(e,t,n,o){var i=e.blade;i.updatePermission="marketing:update",i.saveChanges=function(){i.isLoading=!0,i.isNew?t.save(i.currentEntity,(function(e){i.parentBlade.initializeBlade(),n.closeBlade(i),i.isLoading=!1})):t.update(i.currentEntity,(function(){i.parentBlade.initializeBlade(),i.origEntity=angular.copy(i.currentEntity),i.isLoading=!1}))},i.headIcon="fa fa-inbox",i.isNew||(i.toolbarCommands=[{name:"platform.commands.save",icon:"fas fa-save",executeMethod:i.saveChanges,canExecuteMethod:function(){return!angular.equals(i.origEntity,i.currentEntity)&&!e.formScope.$invalid},permission:i.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(i.origEntity,i.currentEntity)},canExecuteMethod:function(){return!angular.equals(i.origEntity,i.currentEntity)},permission:i.updatePermission},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){var e={id:"confirmDeleteContentItem",title:"marketing.dialogs.content-folder-delete.title",message:"marketing.dialogs.content-folder-delete.message",callback:function(e){e&&(i.isLoading=!0,t.delete({ids:[i.currentEntity.id]},(function(){n.closeBlade(i);var e=i.currentEntity.outline.split(";"),t=e[e.length-2];i.parentBlade.chosenFolder=t,i.parentBlade.initializeBlade()})))}};o.showConfirmationDialog(e)},canExecuteMethod:function(){return!0},permission:i.updatePermission}]),e.setForm=function(t){e.formScope=t},i.origEntity=i.entity,i.currentEntity=angular.copy(i.origEntity),i.isLoading=!1}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.itemsDynamicContentListController",["$scope","platformWebApp.bladeUtils","platformWebApp.uiGridHelper","platformWebApp.dialogService","virtoCommerce.marketingModule.dynamicContent.folders","virtoCommerce.marketingModule.dynamicContent.contentItems",function(e,t,n,o,i,r){var a=t.bladeNavigationService,l=e.blade;function c(e){var t={id:"listItemChild",title:"marketing.blades.items.content-item-details.title-new",subtitle:"marketing.blades.items.content-item-details.subtitle-new",entity:e,isNew:!0,controller:"virtoCommerce.marketingModule.itemDetailController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/items/item-detail.tpl.html"};a.showBlade(t,l)}function s(e){var t={id:"listItemChild",title:"marketing.blades.items.folder-details.title-new",subtitle:"marketing.blades.items.folder-details.subtitle-new",entity:e,isNew:!0,controller:"virtoCommerce.marketingModule.itemFolderDetailController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/items/itemFolder-detail.tpl.html"};a.showBlade(t,l)}function d(t){return{id:t.id,name:t.name,navigate:function(){e.selectNode(t)}}}l.headIcon="fa fa-inbox",l.chosenFolderId="ContentItem",l.currentEntity={},l.initializeBlade=function(){l.refresh()},l.addNew=function(){a.closeChildrenBlades(l,(function(){e.selectedNodeId=null;var t={id:"listItemChild",title:"marketing.blades.items.add.title",subtitle:"marketing.blades.items.add.subtitle",chosenFolder:l.chosenFolderId,addNewContentItem:c,addNewFolder:s,controller:"virtoCommerce.marketingModule.addContentItemsElementController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/items/add.tpl.html"};a.showBlade(t,l)}))},l.refresh=function(){l.isLoading=!0,r.search({skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount,keyword:l.searchKeyword,folderId:l.chosenFolderId,sort:n.getSortExpression(e),responseGroup:"18"},(function(t){_.each(t.results,(function(e){e.isFolder="DynamicContentFolder"===e.objectType})),e.listEntries=t.results,e.pageSettings.totalItems=t.totalCount,function(){if(l.breadcrumbs){var e=_.find(l.breadcrumbs,(function(e){return e.id===l.currentEntity.id}));if(e){var t=l.breadcrumbs.indexOf(e);l.breadcrumbs=l.breadcrumbs.slice(0,t+1)}else e=d(l.currentEntity),l.breadcrumbs.push(e)}else l.breadcrumbs=[d({id:"ContentItem",name:"marketing.blades.items.list.bread-crumb-top",isFolder:!0})]}(),l.isLoading=!1}))},l.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:l.refresh,canExecuteMethod:function(){return!0}},{name:"platform.commands.add",icon:"fas fa-plus",executeMethod:l.addNew,canExecuteMethod:function(){return!0}},{name:"platform.commands.delete",icon:"fa fa-trash",executeMethod:function(){e.deleteItems(e.gridApi.selection.getSelectedRows())},canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())}}],(e.filter={}).criteriaChanged=function(){e.pageSettings.currentPage>1?e.pageSettings.currentPage=1:l.refresh()},e.clearKeyword=function(){l.searchKeyword=null,l.refresh()},e.selectNode=function(t){a.closeChildrenBlades(l,(function(){t.id&&t.isFolder?(l.currentEntity=t,l.chosenFolderId=t.id,l.refresh()):e.openDetailsBlade(t)}))},e.openDetailsBlade=function(t){e.selectedNodeId=t.id;var n={id:"listItemChild",entity:t,isNew:!1};t.isFolder?(n.title="marketing.blades.items.folder-details.title",n.subtitle="marketing.blades.items.folder-details.subtitle",n.controller="virtoCommerce.marketingModule.itemFolderDetailController",n.template="Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/items/itemFolder-detail.tpl.html"):(n.title="marketing.blades.items.content-item-details.title",n.subtitle="marketing.blades.items.content-item-details.subtitle",n.controller="virtoCommerce.marketingModule.itemDetailController",n.template="Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/items/item-detail.tpl.html"),a.showBlade(n,l)},e.deleteItems=function(e){a.closeChildrenBlades(l,(function(){var t={id:"confirmDeleteContentItemsFolder",title:"marketing.dialogs.content-item-folder-delete.title",message:"marketing.dialogs.content-item-folder-delete.message",callback:function(t){if(t){l.isLoading=!0;var n=_.filter(e,(function(e){return e.isFolder}));n.length&&i.delete({ids:_.pluck(n,"id")},l.refresh);var o=_.filter(e,(function(e){return!e.isFolder}));o.length&&r.delete({ids:_.pluck(o,"id")},l.refresh)}}};o.showConfirmationDialog(t)}))},e.setGridOptions=function(n){e.gridOptions=n,n.onRegisterApi=function(t){t.core.on.sortChanged(e,(function(){l.isLoading||l.refresh()}))},t.initializePagination(e)}}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.addPlaceholderElementController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.catalogModule.categories","virtoCommerce.catalogModule.items",function(e,t,n,o){var i=e.blade;i.addFolder=function(){var e={outline:"",name:"",description:"",parentFolderId:i.chosenFolder};i.addNewFolder(e)},i.addPlaceholder=function(){var e={name:"",description:"",imageUrl:"Modules/$(VirtoCommerce.Marketing)/Content/images/noimage.png",folderId:i.chosenFolder};i.addNewPlaceholder(e)},e.blade.isLoading=!1}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.addFolderPlaceholderController",["$scope","virtoCommerce.marketingModule.dynamicContent.folders","platformWebApp.bladeNavigationService","platformWebApp.dialogService",function(e,t,n,o){var i=e.blade;i.updatePermission="marketing:update",i.initialize=function(){i.origEntity=i.entity,i.currentEntity=angular.copy(i.origEntity),i.isLoading=!1},i.saveChanges=function(){i.isNew?t.save({},i.currentEntity,(function(){i.parentBlade.initialize(),n.closeBlade(i)})):t.update({},i.currentEntity,(function(){i.origEntity=angular.copy(i.currentEntity),i.parentBlade.initialize()}))},i.isNew||(i.toolbarCommands=[{name:"platform.commands.save",icon:"fas fa-save",executeMethod:function(){i.saveChanges()},canExecuteMethod:function(){return!angular.equals(i.origEntity,i.currentEntity)&&!e.formScope.$invalid},permission:i.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(i.origEntity,i.currentEntity)},canExecuteMethod:function(){return!angular.equals(i.origEntity,i.currentEntity)},permission:i.updatePermission},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){var e={id:"confirmDeleteContentPlaceholdersFolder",title:"marketing.dialogs.placeholders-folder-delete.title",message:"marketing.dialogs.placeholders-folder-delete.message",callback:function(e){e&&(i.isLoading=!0,t.delete({ids:[i.currentEntity.id]},(function(){var e=i.currentEntity.outline.split(";"),t=e[e.length-2];i.parentBlade.chosenFolder=t,i.parentBlade.initialize(),n.closeBlade(i)})))}};o.showConfirmationDialog(e)},canExecuteMethod:function(){return!0},permission:i.updatePermission}]),e.setForm=function(t){e.formScope=t},i.headIcon="fa fa-location-arrow",i.initialize()}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.placeholdersDynamicContentListController",["$scope","platformWebApp.bladeUtils","platformWebApp.uiGridHelper","platformWebApp.dialogService","virtoCommerce.marketingModule.dynamicContent.folders","virtoCommerce.marketingModule.dynamicContent.contentPlaces",function(e,t,n,o,i,r){var a=t.bladeNavigationService,l=e.blade;function c(e){a.closeChildrenBlades(l,(function(){var t={id:"listItemChild",title:"marketing.blades.placeholders.folder-details.title-new",subtitle:"marketing.blades.placeholders.folder-details.subtitle-new",entity:e,isNew:!0,controller:"virtoCommerce.marketingModule.addFolderPlaceholderController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/placeholders/folder-details.tpl.html"};a.showBlade(t,l)}))}function s(e){a.closeChildrenBlades(l,(function(){var t={id:"listItemChild",title:"marketing.blades.placeholders.placeholder-details.title-new",subtitle:"marketing.blades.placeholders.placeholder-details.subtitle-new",entity:e,isNew:!0,controller:"virtoCommerce.marketingModule.placeholderDetailController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/placeholders/placeholder-details.tpl.html"};a.showBlade(t,l)}))}function d(t){return{id:t.id,name:t.name,navigate:function(){e.selectNode(t)}}}l.headIcon="fa fa-location-arrow",l.chosenFolderId="ContentPlace",l.currentEntity={},l.initialize=function(){l.refresh()},l.addNew=function(){a.closeChildrenBlades(l,(function(){e.selectedNodeId=null;var t={id:"listItemChild",title:"marketing.blades.placeholders.add.title",subtitle:"marketing.blades.placeholders.add.subtitle",chosenFolder:l.chosenFolderId,addNewFolder:c,addNewPlaceholder:s,controller:"virtoCommerce.marketingModule.addPlaceholderElementController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/placeholders/add.tpl.html"};a.showBlade(t,l)}))},l.refresh=function(){l.isLoading=!0,r.search({skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount,keyword:l.searchKeyword,folderId:l.chosenFolderId,sort:n.getSortExpression(e),responseGroup:"20"},(function(t){_.each(t.results,(function(e){e.isFolder="DynamicContentFolder"===e.objectType})),e.listEntries=t.results,e.pageSettings.totalItems=t.totalCount,function(){if(l.breadcrumbs){var e=_.find(l.breadcrumbs,(function(e){return e.id===l.currentEntity.id}));if(e){var t=l.breadcrumbs.indexOf(e);l.breadcrumbs=l.breadcrumbs.slice(0,t+1)}else e=d(l.currentEntity),l.breadcrumbs.push(e)}else l.breadcrumbs=[d({id:"ContentPlace",name:"marketing.blades.placeholders.list.bread-crumb-top",isFolder:!0})]}(),l.isLoading=!1}))},l.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:l.refresh,canExecuteMethod:function(){return!0}},{name:"platform.commands.add",icon:"fas fa-plus",executeMethod:l.addNew,canExecuteMethod:function(){return!0}},{name:"platform.commands.delete",icon:"fa fa-trash",executeMethod:function(){e.deleteItems(e.gridApi.selection.getSelectedRows())},canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())}}],(e.filter={}).criteriaChanged=function(){e.pageSettings.currentPage>1?e.pageSettings.currentPage=1:l.refresh()},e.clearKeyword=function(){l.searchKeyword=null,l.refresh()},e.selectNode=function(t){a.closeChildrenBlades(l,(function(){t.id&&t.isFolder?(l.currentEntity=t,l.chosenFolderId=t.id,l.refresh()):e.openDetailsBlade(t)}))},e.openDetailsBlade=function(t){e.selectedNodeId=t.id;var n={id:"listItemChild",entity:t,isNew:!1};t.isFolder?(n.title="marketing.blades.placeholders.folder-details.title-new",n.subtitle="marketing.blades.placeholders.folder-details.subtitle-new",n.controller="virtoCommerce.marketingModule.addFolderPlaceholderController",n.template="Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/placeholders/folder-details.tpl.html"):(n.title="marketing.blades.placeholders.placeholder-details.title",n.subtitle="marketing.blades.placeholders.placeholder-details.subtitle",n.controller="virtoCommerce.marketingModule.placeholderDetailController",n.template="Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/placeholders/placeholder-details.tpl.html"),a.showBlade(n,l)},e.deleteItems=function(e){a.closeChildrenBlades(l,(function(){var t={id:"confirmDeleteContentPlaceholdersFolder",title:"marketing.dialogs.placeholders-folder-delete.title",message:"marketing.dialogs.placeholders-folder-delete.message",callback:function(t){if(t){l.isLoading=!0;var n=_.filter(e,(function(e){return e.isFolder}));n.length&&i.delete({ids:_.pluck(n,"id")},l.refresh);var o=_.filter(e,(function(e){return!e.isFolder}));o.length&&r.delete({ids:_.pluck(o,"id")},l.refresh)}}};o.showConfirmationDialog(t)}))},e.setGridOptions=function(n){e.gridOptions=n,n.onRegisterApi=function(t){t.core.on.sortChanged(e,(function(){l.isLoading||l.refresh()}))},t.initializePagination(e)}}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.placeholderDetailController",["$scope","virtoCommerce.marketingModule.dynamicContent.contentPlaces","platformWebApp.bladeNavigationService","FileUploader","platformWebApp.dialogService",function(e,t,n,o,i){var r=e.blade;r.updatePermission="marketing:update",r.origEntity=r.entity,r.currentEntity=angular.copy(r.origEntity),r.initialize=function(){if(!e.uploader&&r.hasUpdatePermission()){var a=e.uploader=new o({scope:e,headers:{Accept:"application/json"},url:"api/assets?folderUrl=placeholders-images",autoUpload:!0,removeAfterUpload:!0});a.onSuccessItem=function(e,t,n,o){r.currentEntity.imageUrl=t[0].url},a.onAfterAddingAll=function(e){n.setError(null,r)},a.onErrorItem=function(e,t,o,i){n.setError(e._file.name+" failed: "+(t.message?t.message:o),r)}}r.isNew||(e.blade.toolbarCommands=[{name:"platform.commands.save",icon:"fas fa-save",executeMethod:r.saveChanges,canExecuteMethod:function(){return!angular.equals(r.origEntity,r.currentEntity)&&!e.formScope.$invalid},permission:r.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(r.origEntity,r.currentEntity)},canExecuteMethod:function(){return!angular.equals(r.origEntity,r.currentEntity)},permission:r.updatePermission},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){var e={id:"confirmDeleteContentPlaceholder",title:"marketing.dialogs.content-placeholder-delete.title",message:"marketing.dialogs.content-placeholder-delete.message",callback:function(e){e&&(r.isLoading=!0,t.delete({ids:[r.currentEntity.id]},(function(){r.parentBlade.initialize(),n.closeBlade(r)})))}};i.showConfirmationDialog(e)},canExecuteMethod:function(){return!0},permission:r.updatePermission}]),r.isLoading=!1},r.saveChanges=function(){r.isLoading=!0,r.isNew?t.save({},r.currentEntity,(function(e){r.parentBlade.initialize(),n.closeBlade(r)})):t.update({},r.currentEntity,(function(e){r.parentBlade.initialize(),r.origEntity=angular.copy(r.currentEntity),r.isLoading=!1}))},e.setForm=function(t){e.formScope=t},e.blade.headIcon="fa fa-location-arrow",r.initialize()}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.addPublishingContentItemsStepController",["$scope","virtoCommerce.marketingModule.dynamicContent.contentItems","platformWebApp.bladeNavigationService","platformWebApp.bladeUtils","platformWebApp.uiGridHelper",function(e,t,n,o,i){var r=e.blade;function a(e){r.chosenFolder&&angular.equals(r.chosenFolder,e.id)||(r.chosenFolder=e.id,r.currentEntity=e,r.refresh())}function l(e){return{id:e.id,name:e.name,navigate:function(){a(e)}}}r.chosenFolder="ContentItem",r.currentEntity={},r.refresh=function(){r.isLoading=!0,t.search({skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount,folderId:r.chosenFolder,sort:i.getSortExpression(e),responseGroup:"18"},(function(t){_.each(t.results,(function(e){e.isFolder="DynamicContentFolder"===e.objectType})),r.currentEntity.listEntries=t.results,e.pageSettings.totalItems=t.totalCount,function(){if(r.breadcrumbs){var e,t=_.findLastIndex(r.breadcrumbs,{id:r.chosenFolder});t>-1?e=r.breadcrumbs.slice(0,t+1):(e=r.breadcrumbs.slice(0)).push(l(r.currentEntity)),r.breadcrumbs=e}else r.breadcrumbs=[l({id:"ContentItem",name:"marketing.blades.publishing.add-content-items.bread-crumb-top"})]}(),r.isLoading=!1}))},r.publication.contentItems.forEach((function(e){t.get({id:e.id},(function(t){var n=_.find(r.parentBlade.origEntity.contentItems,(function(t){return t.id===e.id}));angular.isUndefined(n)||(n.path=t.path,n.outline=t.outline,n.dynamicProperties=t.dynamicProperties,n.objectType=t.objectType),e.path=t.path,e.outline=t.outline,e.dynamicProperties=t.dynamicProperties,e.objectType=t.objectType}))})),r.deleteAllContentItems=function(){r.publication.contentItems=[],e.gridApi.grid.queueGridRefresh()},r.deleteContentItem=function(t){r.publication.contentItems=_.filter(r.publication.contentItems,(function(e){return!angular.equals(t.id,e.id)})),e.gridApi.grid.queueGridRefresh()},r.selectNode=function(t){t.isFolder?a(t):(r.publication.contentItems.push(t),e.gridApi.grid.queueGridRefresh())},e.setGridOptions=function(t){e.gridOptions=t,t.onRegisterApi=function(t){t.grid.registerRowsProcessor((function(t){var n=0;return t.forEach((function(e){e.visible=e.entity.isFolder||_.all(r.publication.contentItems,(function(t){return t.id!==e.entity.id})),e.visible&&n++})),e.filteredEntitiesCount=n,t}),90),t.core.on.sortChanged(e,(function(){r.isLoading||r.refresh()}))},o.initializePagination(e)}}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.addPublishingPlaceholdersStepController",["$scope","virtoCommerce.marketingModule.dynamicContent.contentPlaces","platformWebApp.bladeNavigationService","platformWebApp.bladeUtils","platformWebApp.uiGridHelper",function(e,t,n,o,i){var r=e.blade;function a(e){r.chosenFolder&&angular.equals(r.chosenFolder,e.id)?(r.chosenFolder=e.parentFolderId,r.currentEntity=void 0):(r.chosenFolder=e.id,r.currentEntity=e,r.refresh())}function l(e){return{id:e.id,name:e.name,navigate:function(){a(e)}}}r.chosenFolder="ContentPlace",r.currentEntity={},r.refresh=function(){r.isLoading=!0,t.search({folderId:r.chosenFolder,skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount,sort:i.getSortExpression(e),responseGroup:"20"},(function(t){_.each(t.results,(function(e){e.isFolder="DynamicContentFolder"===e.objectType})),r.currentEntity.listEntries=t.results,e.pageSettings.totalItems=t.totalCount,function(){if(r.breadcrumbs){var e,t=_.findLastIndex(r.breadcrumbs,{id:r.chosenFolder});t>-1?e=r.breadcrumbs.slice(0,t+1):(e=r.breadcrumbs.slice(0)).push(l(r.currentEntity)),r.breadcrumbs=e}else r.breadcrumbs=[l({id:"ContentPlace",name:"marketing.blades.publishing.add-placeholders.bread-crumb-top"})]}(),r.isLoading=!1}))},_.each(r.publication.contentPlaces,(function(e){t.get({id:e.id},(function(t){var n=_.find(r.parentBlade.origEntity.contentPlaces,(function(t){return t.id===e.id}));angular.isUndefined(n)||(n.path=t.path,n.outline=t.outline),e.path=t.path,e.outline=t.outline}))})),r.deleteAllPlaceholder=function(){r.publication.contentPlaces=[],e.gridApi.grid.queueGridRefresh()},r.deletePlaceholder=function(t){r.publication.contentPlaces=_.filter(r.publication.contentPlaces,(function(e){return!angular.equals(t.id,e.id)})),e.gridApi.grid.queueGridRefresh()},r.selectNode=function(t){t.isFolder?a(t):(r.publication.contentPlaces.push(t),e.gridApi.grid.queueGridRefresh())},e.setGridOptions=function(t){e.gridOptions=t,t.onRegisterApi=function(t){t.grid.registerRowsProcessor((function(t){var n=0;return t.forEach((function(e){e.visible=e.entity.isFolder||_.all(r.publication.contentPlaces,(function(t){return t.id!==e.entity.id})),e.visible&&n++})),e.filteredEntitiesCount=n,t}),90),t.core.on.sortChanged(e,(function(){r.isLoading||r.refresh()}))},o.initializePagination(e)}}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.publishingDynamicContentListController",["$scope","platformWebApp.bladeUtils","platformWebApp.uiGridHelper","platformWebApp.dialogService","virtoCommerce.marketingModule.dynamicContent.contentPublications",function(e,t,n,o,i){var r=t.bladeNavigationService,a=e.blade;a.headIcon="fa fa-paperclip",a.isLoading=!1,a.initialize=function(){a.refresh()},a.removePublishings=function(e){r.closeChildrenBlades(a,(function(){var t={id:"confirmDeletePublishings",title:"marketing.dialogs.publication-delete.title",message:"marketing.dialogs.publication-delete.message",callback:function(t){if(t){var n=_.pluck(e,"id");i.remove({ids:n},a.refresh)}}};o.showConfirmationDialog(t)}))},a.refresh=function(){a.isLoading=!0,i.search({skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount,sort:n.getSortExpression(e),responseGroup:"8",keyword:a.searchKeyword},(function(t){e.listEntries=t.results,e.pageSettings.totalItems=t.totalCount,a.isLoading=!1}))},a.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",canExecuteMethod:function(){return!0},executeMethod:a.refresh},{name:"platform.commands.add",icon:"fas fa-plus",canExecuteMethod:function(){return!0},executeMethod:function(){e.selectNode({},!0)}},{name:"platform.commands.delete",icon:"fa fa-trash",canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())},executeMethod:function(){return a.removePublishings(e.gridApi.selection.getSelectedRows())}}],e.clearKeyword=function(){a.searchKeyword=null,a.refresh()},e.selectNode=function(t,n){e.selectedNodeId=t.id;var o={isNew:n,controller:"virtoCommerce.marketingModule.publicationDetailController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/publishing/publication-detail.tpl.html"};n?angular.extend(o,{id:"add_publishing_element",title:"marketing.blades.publishing.publishing-main-step.title-new",subtitle:"marketing.blades.publishing.publishing-main-step.subtitle-new"}):angular.extend(o,{id:"edit_publishing_element",title:"marketing.blades.publishing.publishing-main-step.title",subtitle:"marketing.blades.publishing.publishing-main-step.subtitle",currentEntity:t}),r.showBlade(o,a)},e.deleteItems=function(e){var t={id:"confirmDeleteContentPublications",title:"marketing.dialogs.content-item-folder-delete.title",message:"marketing.dialogs.content-item-folder-delete.message",callback:function(t){t&&i.remove({ids:_.pluck(e,"id")},(function(){a.refresh()}))}};o.showConfirmationDialog(t)},e.setGridOptions=function(n){e.gridOptions=n,n.onRegisterApi=function(t){t.core.on.sortChanged(e,(function(){a.isLoading||a.refresh()}))},t.initializePagination(e)}}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.publicationDetailController",["$scope","virtoCommerce.marketingModule.dynamicContent.contentPublications","platformWebApp.bladeNavigationService","virtoCommerce.coreModule.common.dynamicExpressionService","virtoCommerce.storeModule.stores","platformWebApp.dialogService",function(e,t,n,o,i,r){var a=e.blade;function l(t){var n;t.dynamicExpression&&(_.each(t.dynamicExpression.children,c),n=t.dynamicExpression.children[0],results=_.groupBy(n.availableChildren,"groupName"),n.availableChildren=_.map(results,(function(e,t){return{displayName:t,subitems:e}}))),a.currentEntity=t,a.origEntity=angular.copy(a.currentEntity),a.isLoading=!1,e.$watch("blade.currentEntity",a.autogenerateName,!0)}function c(e){var t=o.expressions[e.id];return t||(t={displayName:"unknown element: "+e.id}),_.extend(e,t),e.children||(e.children=[]),_.each(e.children,c),_.each(e.availableChildren,c),e}function s(e){e.availableChildren=void 0,e.displayName=void 0,e.getValidationError=void 0,e.groupName=void 0,e.newChildLabel=void 0,e.templateURL=void 0,_.each(e.children,s)}a.updatePermission="marketing:update",a.initializeBlade=function(){a.isNew?t.getNew(l):t.get({id:a.currentEntity.id},(function(e){l(e),a.toolbarCommands=[{name:"platform.commands.save",icon:"fas fa-save",executeMethod:function(){a.saveChanges()},canExecuteMethod:function(){return a.checkDifferense()},permission:a.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(a.origEntity,a.currentEntity)},canExecuteMethod:function(){return a.checkDifferense()},permission:a.updatePermission},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){var e={id:"confirmDeleteContentItem",title:"marketing.dialogs.publication-delete.title",message:"marketing.dialogs.publication-delete.message",callback:function(e){e&&(a.isLoading=!0,t.delete({ids:[a.currentEntity.id]},(function(){a.parentBlade.initialize(),n.closeBlade(a)})))}};r.showConfirmationDialog(e)},canExecuteMethod:function(){return!0},permission:a.updatePermission}]}))},a.addPlaceholders=function(){n.closeChildrenBlades(a,(function(){a.selectedNodeId="addPlaceholders";var e={id:"publishing_add_placeholders",title:"marketing.blades.publishing.add-placeholders.title",subtitle:"marketing.blades.publishing.add-placeholders.subtitle",publication:a.currentEntity,controller:"virtoCommerce.marketingModule.addPublishingPlaceholdersStepController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/publishing/add-placeholders.tpl.html"};n.showBlade(e,a)}))},a.addContentItems=function(){n.closeChildrenBlades(a,(function(){a.selectedNodeId="addContentItems";var e={id:"publishing_add_content_items",title:"marketing.blades.publishing.add-content-items.title",subtitle:"marketing.blades.publishing.add-content-items.subtitle",publication:a.currentEntity,controller:"virtoCommerce.marketingModule.addPublishingContentItemsStepController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/dynamicContent/blades/publishing/add-content-items.tpl.html"};n.showBlade(e,a)}))},a.saveChanges=function(){n.closeChildrenBlades(a,(function(){a.isLoading=!0,a.currentEntity.dynamicExpression&&(a.currentEntity.dynamicExpression.availableChildren=void 0,_.each(a.currentEntity.dynamicExpression.children,s)),a.isNew?t.save({},a.currentEntity,(function(e){a.currentEntity=e,a.origEntity=angular.copy(e),a.isNew=!1,a.initializeBlade(),a.parentBlade.initialize()})):t.update({},a.currentEntity,(function(e){a.currentEntity=e,a.origEntity=angular.copy(e),a.isNew=!1,a.initializeBlade(),a.parentBlade.initialize()}),(function(e){n.setError(e.statusText,a)}))}))},a.availableSave=function(){return!e.formScope.$invalid&&a.currentEntity.contentItems.length>0&&a.currentEntity.contentPlaces.length>0},a.checkDifferense=function(){var t=!e.formScope.$invalid&&a.currentEntity.contentItems.length>0&&a.currentEntity.contentPlaces.length>0;if(t){if(!(t=!angular.equals(a.currentEntity,a.origEntity))){var n=a.currentEntity.contentItems.map((function(e){return e.id})),o=a.origEntity.contentItems.map((function(e){return e.id}));t=_.intersection(n,o).length<Math.max(n.length,o.length)}if(!t){var i=a.currentEntity.contentPlaces.map((function(e){return e.id})),r=a.origEntity.contentPlaces.map((function(e){return e.id}));t=_.intersection(i,r).length<Math.max(i.length,r.length)}}return t},e.setForm=function(t){e.formScope=t},e.datepickers={endDate:!1,startDate:!1},e.today=new Date,e.open=function(t,n){t.preventDefault(),t.stopPropagation(),e.datepickers[n]=!0},e.dateOptions={"year-format":"'yyyy'","starting-day":1},e.formats=["shortDate","dd-MMMM-yyyy","yyyy/MM/dd"],e.format=e.formats[0],a.headIcon="fa fa-paperclip",String.prototype.trimLeft=function(e){return void 0===e&&(e="s"),this.replace(new RegExp("^["+e+"]+"),"")},String.prototype.trimRight=function(e){return void 0===e&&(e="s"),this.replace(new RegExp("["+e+"]+$"),"")},a.focusNameInput=!1,a.autogenerateName=function(){if(!a.focusNameInput){var e="",t="";angular.isUndefined(a.currentEntity)||(angular.isUndefined(a.currentEntity.contentPlaces)||1!=a.currentEntity.contentPlaces.length||(e=a.currentEntity.contentPlaces[0].name),angular.isUndefined(a.currentEntity.contentItems)||1!=a.currentEntity.contentItems.length||(t=a.currentEntity.contentItems[0].name));var n=(e+"_"+t).trimLeft("_").trimRight("_");angular.isUndefined(a.currentEntity.name)||""!==a.currentEntity.name||(angular.isUndefined(a.currentEntity.name)||null===a.currentEntity.name||""===a.currentEntity.name||"_"===n?"_"!==n&&(a.currentEntity.name=n):(a.currentEntity.name.indexOf(e)>=0||a.currentEntity.name.indexOf(t)>=0)&&(a.currentEntity.name=n))}},a.initializeBlade(),e.stores=i.query()}])},function(e,t){angular.module("virtoCommerce.marketingModule").factory("virtoCommerce.marketingModule.dynamicContent.contentItems",["$resource",function(e){return e("api/marketing/contentitems/:id",null,{search:{method:"POST",url:"api/marketing/contentitems/listentries/search"},create:{method:"POST"},update:{method:"PUT"}})}]).factory("virtoCommerce.marketingModule.dynamicContent.contentPlaces",["$resource",function(e){return e("api/marketing/contentplaces/:id",null,{search:{method:"POST",url:"api/marketing/contentplaces/listentries/search"},update:{method:"PUT"}})}]).factory("virtoCommerce.marketingModule.dynamicContent.contentPublications",["$resource",function(e){return e("api/marketing/contentpublications/:id",null,{search:{method:"POST",url:"api/marketing/contentpublications/search"},getNew:{url:"api/marketing/contentpublications/new"},update:{method:"PUT"}})}]).factory("virtoCommerce.marketingModule.dynamicContent.folders",["$resource",function(e){return e("api/marketing/contentfolders/:id",null,{get:{method:"GET"},update:{method:"PUT"}})}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.catalogEntriesController",["$scope","virtoCommerce.catalogModule.items","platformWebApp.ui-grid.extension","platformWebApp.bladeUtils","platformWebApp.uiGridHelper","platformWebApp.bladeNavigationService",function(e,t,n,o,i,r){var a=e.blade;e.isValid=function(){return!angular.equals(this.blade.productIds,this.blade.promotion.productIds)},e.saveChanges=function(){this.blade.promotion.productIds=this.blade.productIds,this.blade.promotion.productNames=_.pluck(c,"name"),this.blade.promotion.productCodes=_.pluck(c,"code"),e.bladeClose()},e.setGridOptions=function(t,r){n.tryExtendGridOptions(t,r),s(),i.initialize(e,r,d),o.initializePagination(e)},a.refresh=function(){s()},e.cancelChanges=function(){e.bladeClose()};var l=!0,c=[];function s(){a.isLoading=!0,a.promotion.productIds||(a.promotion.productIds=[]),!l||(l=!1,a.productIds=angular.copy(a.promotion.productIds),a.promotion.productIds&&a.promotion.productIds.length)?t.query({ids:a.productIds,respGroup:"ItemInfo"},(function(e){a.$scope.gridApi.grid.options.data=e,c=angular.copy(e),a.isLoading=!1})):m()}function d(t){e.gridApi=t,e.$parent.blade.refresh(),i.bindRefreshOnSortChanged(e)}function m(){var e={id:"CatalogEntrySelect",title:"marketing.blades.catalog-items-select.title-product",controller:"virtoCommerce.catalogModule.catalogItemSelectController",template:"Modules/$(VirtoCommerce.Catalog)/Scripts/blades/common/catalog-items-select.tpl.html",breadcrumbs:[],toolbarCommands:[{name:"platform.commands.pick-selected",icon:"fas fa-plus",executeMethod:function(){a.$scope.gridApi.grid.options.data=_.map(c,(function(e){return e.imageUrl&&(e.imgSrc=e.imageUrl),e}));var t=_.pluck(c,"id");a.productIds=_.uniq(_.union(t,a.productIds),!1),r.closeBlade(e)},canExecuteMethod:function(){return c.length>0}}]};e.options={selectedItemIds:[],showCheckingMultiple:!1,checkItemFn:function(e,t){"category"==e.type?(a.error="Must select Product",e.selected=void 0):(t?_.all(c,(function(t){return t.id!=e.id}))&&c.push(e):c=_.reject(c,(function(t){return t.id==e.id})),a.error=void 0)}},r.showBlade(e,a)}e.blade.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:function(e){e.refresh()},canExecuteMethod:function(){return!0}},{name:"platform.commands.add",icon:"fas fa-plus",executeMethod:function(){m()},canExecuteMethod:function(){return!0}},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){var t=e.gridApi.selection.getSelectedRows(),n=_.pluck(t,"id");a.productIds=_.difference(a.productIds,n),a.refresh()},canExecuteMethod:function(){return!(a.childrenBlades.length>0)&&(!!a.$scope.gridApi&&a.$scope.gridApi.grid.api.selection.getSelectedRows().length>0)}}]}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.couponDetailController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.marketingModule.promotions",function(e,t,n){var o=e.blade;o.isLoading=!1,o.refresh=function(e){o.isNew||n.getCoupon({id:o.currentEntity.id},(function(e){o.currentEntity=e,o.parentBlade.refresh()}),(function(e){t.setError("Error "+e.status,o)}))},e.setForm=function(t){e.formCoupon=t},e.datepickers={expirationDate:!1},e.openCalendar=function(t,n){t.preventDefault(),t.stopPropagation(),e.datepickers[n]=!0},e.format="shortDate",e.isValid=function(){return!angular.equals(o.currentEntity,o.originalEntity)&&e.formCoupon&&e.formCoupon.$valid},e.saveChanges=function(){o.isLoading=!0,n.saveCoupon([o.currentEntity],(function(e){o.isLoading=!1,o.parentBlade.refresh(),t.closeBlade(o)}),(function(e){t.setError("Error "+e.status,o)}))},o.toolbarCommands=[{name:"platform.commands.save",icon:"fas fa-save",executeMethod:e.saveChanges,canExecuteMethod:e.isValid}]}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.couponImportProcessingController",["$rootScope","$scope",function(e,t){var n=t.blade;n.isLoading=!1,t.$on("new-notification-event",(function(t,o){n.notification&&o.id==n.notification.id&&(angular.copy(o,n.notification),o.finished&&e.$broadcast("coupon-import-finished"))}))}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.couponImportController",["$scope","platformWebApp.bladeNavigationService","FileUploader","virtoCommerce.marketingModule.promotions",function(e,t,n,o){var i=e.blade;if(i.headIcon="fa fa-download",i.isLoading=!1,!e.uploader){var r=e.uploader=new n({scope:e,headers:{Accept:"application/json"},url:"api/assets?folderUrl=tmp",method:"POST",autoUpload:!0,removeAfterUpload:!0});r.filters.push({name:"csvFilter",fn:function(e,t){var n="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|csv|vnd.ms-excel|".indexOf(n)}}),r.onBeforeUploadItem=function(e){i.isLoading=!0},r.onSuccessItem=function(e,t,n,o){i.isLoading=!1,i.canImport=!0,i.csvFileUrl=t[0].relativeUrl},r.onAfterAddingAll=function(e){t.setError(null,i)},r.onErrorItem=function(e,n,o,r){t.setError(e._file.name+" failed: "+(n.message?n.message:o),i)}}e.setForm=function(t){e.formScope=t},e.columnDelimiters=[{name:"marketing.blades.coupons-import.labels.space",value:" "},{name:"marketing.blades.coupons-import.labels.comma",value:","},{name:"marketing.blades.coupons-import.labels.semicolon",value:";"},{name:"marketing.blades.coupons-import.labels.tab",value:"\t"}],e.datepickers={expirationDate:!1},e.open=function(t,n){t.preventDefault(),t.stopPropagation(),e.datepickers[n]=!0},e.startImport=function(){var n={fileUrl:i.csvFileUrl,delimiter:i.columnDelimiter,promotionId:i.promotionId,expirationDate:i.expirationDate};o.importCoupons(n,(function(n){var o={id:"importProgress",title:"marketing.blades.coupons-import-processing.title",promotionId:i.promotionId,notification:n,controller:"virtoCommerce.marketingModule.couponImportProcessingController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/promotion/blades/coupon-import-processing.tpl.html"};e.$on("new-notification-event",(function(e,t){t&&t.id==o.notification.id&&(i.canImport=null!=t.finished)})),i.canImport=!1,t.showBlade(o,i)}),(function(e){t.setError("Error "+e.status,i)}))}}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.couponListController",["$scope","$localStorage","platformWebApp.dialogService","platformWebApp.bladeUtils","platformWebApp.uiGridHelper","virtoCommerce.marketingModule.promotions",function(e,t,n,o,i,r){var a=e.blade,l=o.bladeNavigationService;a.headIcon="fa fa-ticket",a.isLoading=!1,a.refresh=function(){a.isLoading=!0;var t={promotionId:a.promotionId,sort:i.getSortExpression(e),code:c.keyword,skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount};c.current&&angular.extend(t,c.current),r.searchCoupons(t,(function(t){a.isLoading=!1,a.currentEntities=t.results,a.parentBlade.couponCount(),e.pageSettings.totalItems=t.totalCount}))},e.$on("coupon-import-finished",(function(e){a.refresh()})),a.toolbarCommands=[{name:"marketing.blades.coupons.toolbar.add",icon:"fas fa-plus",canExecuteMethod:function(){return!0},executeMethod:function(){var e={id:"couponImport",title:"marketing.blades.coupon-detail.new-title",promotionId:a.promotionId,currentEntity:{promotionId:a.promotionId,isNew:!0},controller:"virtoCommerce.marketingModule.couponDetailController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/promotion/blades/coupon-detail.tpl.html"};l.showBlade(e,a)}},{name:"marketing.blades.coupons.toolbar.import",icon:"fa fa-download",canExecuteMethod:function(){return!0},executeMethod:function(){var e={id:"couponImport",title:"marketing.blades.coupons-import.title",promotionId:a.promotionId,controller:"virtoCommerce.marketingModule.couponImportController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/promotion/blades/coupon-import.tpl.html"};l.showBlade(e,a)}},{name:"marketing.blades.coupons.toolbar.refresh",icon:"fa fa-refresh",canExecuteMethod:function(){return!0},executeMethod:a.refresh},{name:"marketing.blades.coupons.toolbar.delete",icon:"fas fa-trash-alt",canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())},executeMethod:function(){var t,o,i;i={id:"confirmDeleteItem",title:"marketing.dialogs.coupon-delete.title",message:(t=!1)?"marketing.dialogs.coupon-delete.message-all":"marketing.dialogs.coupon-delete.message",callback:function(n){n&&l.closeChildrenBlades(a,(function(){if(a.isLoading=!0,t&&o)r.clearCoupons({promotionId:o},(function(){a.refresh(),a.parentBlade.refresh()}));else if(!t){var n=_.pluck(e.gridApi.selection.getSelectedRows(),"id");r.deleteCoupons({ids:n,all:t},(function(){a.refresh(),a.parentBlade.refresh()}))}}))}},n.showConfirmationDialog(i)}}];var c=a.filter=e.filter={};function s(e){var t={id:"filterDetail",controller:"virtoCommerce.marketingModule.filterDetailController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/promotion/blades/filter-detail.tpl.html"};angular.extend(t,e),l.showBlade(t,a)}e.$localStorage=t,t.couponSearchFilters||(t.couponSearchFilters=[{name:"marketing.blades.promotion-list.new-filter"}]),t.couponSearchFilterId&&(c.current=_.findWhere(t.couponSearchFilters,{id:t.couponSearchFilterId})),c.change=function(){t.couponSearchFilterId=c.current?c.current.id:null,c.current&&!c.current.id?(c.current=null,s({isNew:!0})):(l.closeBlade({id:"filterDetail"}),c.criteriaChanged())},c.edit=function(){c.current&&s({data:c.current})},c.criteriaChanged=function(){e.pageSettings.currentPage>1?e.pageSettings.currentPage=1:a.refresh()},e.selectNode=function(e){var t={id:"couponDetail",originalEntity:angular.copy(e),currentEntity:angular.copy(e),title:'Coupon "'+e.code+'"',controller:"virtoCommerce.marketingModule.couponDetailController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/promotion/blades/coupon-detail.tpl.html"};l.showBlade(t,a),selectedEntity=e},e.setGridOptions=function(t){i.initialize(e,t,(function(t){i.bindRefreshOnSortChanged(e)})),o.initializePagination(e)}}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.filterDetailController",["$scope","$localStorage","$translate","virtoCommerce.storeModule.stores",function(e,t,n,o){var i,r=e.blade;function a(e){r.currentEntity=angular.copy(e),r.origEntity=e,r.isLoading=!1,r.title=r.isNew?"marketing.blades.filter-detail.new-title":e.name,r.subtitle=r.isNew?"marketing.blades.filter-detail.new-subtitle":"marketing.blades.filter-detail.subtitle"}r.metaFields=[{name:"onlyActive",title:"marketing.blades.filter-detail.labels.active",valueType:"Boolean"},{name:"store",title:"marketing.blades.promotion-detail.labels.store",templateUrl:"storeSelector.html"}],e.saveChanges=function(){angular.copy(r.currentEntity,r.origEntity),r.isNew&&(t.promotionSearchFilters.push(r.origEntity),t.promotionSearchFilterId=r.origEntity.id,r.parentBlade.filter.current=r.origEntity,r.isNew=!1),a(r.origEntity),r.parentBlade.filter.criteriaChanged()},e.setForm=function(e){i=e},r.headIcon="fa fa-filter",r.toolbarCommands=[{name:"core.commands.apply-filter",icon:"fa fa-filter",executeMethod:function(){e.saveChanges()},canExecuteMethod:function(){return i&&i.$valid}},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(r.origEntity,r.currentEntity)},canExecuteMethod:function(){return!angular.equals(r.currentEntity,r.origEntity)}},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){r.parentBlade.filter.current=null,t.promotionSearchFilters.splice(t.promotionSearchFilters.indexOf(r.origEntity),1),delete t.promotionSearchFilterId,r.parentBlade.refresh(),e.bladeClose()},canExecuteMethod:function(){return!r.isNew}}],r.stores=o.query(),r.isNew?n("marketing.blades.filter-detail.unnamed-filter").then((function(e){a({id:(new Date).getTime(),name:e})})):a(r.data)}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.promotionDetailController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.marketingModule.promotions","virtoCommerce.storeModule.stores","virtoCommerce.coreModule.common.dynamicExpressionService","virtoCommerce.catalogModule.categories","virtoCommerce.catalogModule.items","$q","platformWebApp.settings","platformWebApp.metaFormsService","virtoCommerce.shippingModule.shippingMethods","virtoCommerce.paymentModule.paymentMethods",function(e,t,n,o,i,r,a,l,c,s,d,m){var u=e.blade;function p(e){u.isNew||(u.title=e.name),e.coupons=_.map(e.coupons,(function(e){return{text:e}})),u.expressionPromises=[],e.dynamicExpression&&_.each(e.dynamicExpression.children,h),l.all(u.expressionPromises).then((function(t){u.currentEntity=angular.copy(e),u.origEntity=e})).finally((function(){u.isLoading=!1}))}function g(){return!angular.equals(u.currentEntity,u.origEntity)&&u.hasUpdatePermission()}function f(){u.isNew||(u.toolbarCommands=[{name:"platform.commands.save",icon:"fas fa-save",executeMethod:e.saveChanges,canExecuteMethod:e.isValid,permission:u.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(u.origEntity,u.currentEntity)},canExecuteMethod:g,permission:u.updatePermission},{name:"platform.commands.clone",icon:"fas fa-clone",executeMethod:function(){var e={id:"promotionClone",title:"marketing.blades.promotion-detail.title-new",isNew:!0,isCloning:!0,data:u.currentEntity,controller:"virtoCommerce.marketingModule.promotionDetailController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/promotion/blades/promotion-detail.tpl.html"};t.showBlade(e,u.parentBlade)},canExecuteMethod:function(){return!g()},permission:"marketing:create"}])}function h(e){var t=i.expressions[e.id];t||(t={displayName:"unknown element: "+e.id}),_.extend(e,t),e.children||(e.children=[]),_.each(e.excludingCategoryIds,(function(t){var n={id:"ExcludingCategoryCondition",categoryId:t};e.children.push(n);var o=r.query({ids:[t],respGroup:"Info"},(function(e){_.any(e)&&(n.categoryName=e[0].name)})).$promise;u.expressionPromises.push(o)})),_.each(e.excludingProductIds,(function(t){var n={id:"ExcludingProductCondition",productId:t};e.children.push(n);var o=a.query({ids:[t],respGroup:"ItemInfo"},(function(e){_.any(e)&&(n.productName=e[0].name,n.productCode=e[0].code)})).$promise;u.expressionPromises.push(o)})),_.each(e.children,h),_.each(e.availableChildren,h)}function C(e){e.availableChildren=void 0,e.displayName=void 0,e.getValidationError=void 0,e.newChildLabel=void 0,e.templateURL=void 0;var t=_.where(e.children,{id:"ExcludingCategoryCondition"});e.excludingCategoryIds=_.pluck(t,"categoryId"),e.children=_.difference(e.children,t);var n=_.where(e.children,{id:"ExcludingProductCondition"});e.excludingProductIds=_.pluck(n,"productId"),e.children=_.difference(e.children,n),_.each(e.children,C)}u.updatePermission="marketing:update",u.metaFields=s.getMetaFields("promotionDetail"),u.expressionTreeTemplateUrl=i.expressionTreeTemplateUrl,u.showPriority=!1,c.get({id:"Marketing.Promotion.CombinePolicy"},(function(e){u.showPriority="CombineStackable"===e.value})),u.refresh=function(e){var t=u.shippingMethods?l.when():d.getAllRegistered((function(e){u.shippingMethods=_.uniq(e,e=>e.code),_.each(u.shippingMethods,(function(e){e.id=e.id?e.id:e.code}))})).$promise,o=u.paymentMethods?l.when():m.getAllRegistered((function(e){u.paymentMethods=_.uniq(e,e=>e.code),_.each(u.paymentMethods,(function(e){e.id=e.id?e.id:e.code}))})).$promise;l.all(t,o).then(()=>{u.isNew?u.isCloning?(u.data.id=null,u.data.name=null,p(u.data)):n.getNew(p):n.get({id:u.currentEntity.id,code:void 0===u.currentEntityCode?"":u.currentEntityCode},(function(t){p(t),e&&u.parentBlade.refresh()}))})},e.cancelChanges=function(){e.bladeClose()},e.saveChanges=function(){t.setError(null,u),u.isLoading=!0,u.currentEntity.coupons=_.pluck(u.currentEntity.coupons,"text"),u.currentEntity.dynamicExpression&&_.each(u.currentEntity.dynamicExpression.children,C),u.isNew?n.save({},u.currentEntity,(function(e){u.isNew=void 0,u.currentEntity=e,f(),u.refresh(!0)})):n.update({},u.currentEntity,(function(e){u.refresh(!0)}))},e.setForm=function(t){e.formScope=t},e.isValid=function(){return g()&&e.formScope&&e.formScope.$valid},u.onClose=function(n){t.showConfirmationIfNeeded(g()&&!u.isNew,e.isValid(),u,e.saveChanges,n,"marketing.dialogs.promotion-save.title","marketing.dialogs.promotion-save.message")},u.headIcon="fa fa-area-chart",e.datepickers={str:!1,end:!1},e.open=function(t,n){t.preventDefault(),t.stopPropagation(),e.datepickers[n]=!0},f(),e.pageSize=25,e.stores=[];var b="",y=0;function v(){return _.any(u.currentEntity.storeIds)&&!_.any(e.stores)?o.search({storeIds:u.currentEntity.storeIds,take:u.currentEntity.storeIds.length,responseGroup:"none"},e=>{k(e.results)}).$promise:l.resolve()}function k(t){t=_.reject(t,t=>_.any(e.stores,e=>e.id===t.id)),_.each(t,(function(e){e.shippingMethods=u.shippingMethods||[],e.paymentMethods=u.paymentMethods||[]})),e.stores=e.stores.concat(t)}e.fetchStores=function(t){l.all([v(),e.fetchNextStores(t)])},e.fetchNextStores=t=>(t.page=t.page||0,b!==t.search&&(b=t.search,t.page=0),0===t.page||y>e.stores.length?o.search({searchPhrase:t.search,take:e.pageSize,skip:t.page*e.pageSize,responseGroup:"none"},n=>{k(n.results),t.page++,t.page*e.pageSize<n.totalCount&&e.$broadcast("scrollCompleted"),y=Math.max(y,n.totalCount)}).$promise:l.resolve()),u.refresh(!1),e.exclusivityTypes=[{name:"marketing.blades.promotion-detail.labels.combined-with-others",value:!1},{name:"marketing.blades.promotion-detail.labels.exclusive",value:!0}]}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.promotionConditionCurrencyIsController",["$scope","virtoCommerce.coreModule.currency.currencyUtils",function(e,t){e.currencyUtils=t}]).controller("virtoCommerce.marketingModule.promotionExpressionsController",["$scope","virtoCommerce.catalogModule.items","platformWebApp.authService","platformWebApp.bladeNavigationService",function(e,t,n,o){e.openItemSelectWizard=function(t,i){if(n.checkPermission("marketing:update"))if(i){var r={id:"CatalogEntries",title:"marketing.blades.catalog-entries.title-product",controller:"virtoCommerce.marketingModule.catalogEntriesController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/promotion/blades/catalog-entry-list.tpl.html",breadcrumbs:[],promotion:t};o.showBlade(r,e.blade)}else if(t.productId){let n={id:"listItemDetail",itemId:t.productId,title:t.productName,controller:"virtoCommerce.catalogModule.itemDetailController",template:"Modules/$(VirtoCommerce.Catalog)/Scripts/blades/item-detail.tpl.html"};o.showBlade(n,e.blade)}else{var a=[],l={id:"CatalogEntrySelect",title:"marketing.blades.catalog-items-select.title-product",controller:"virtoCommerce.catalogModule.catalogItemSelectController",template:"Modules/$(VirtoCommerce.Catalog)/Scripts/blades/common/catalog-items-select.tpl.html",breadcrumbs:[],toolbarCommands:[{name:"platform.commands.pick-selected",icon:"fas fa-plus",executeMethod:function(e){t.productId=a[0].id,t.productName=a[0].name,t.productCode=a[0].code,o.closeBlade(e)},canExecuteMethod:function(){return 1==a.length}}]};l.options={showCheckingMultiple:!1,checkItemFn:function(e,t){"category"==e.type?(l.error="Must select Product",e.selected=void 0):(t?_.all(a,(function(t){return t.id!=e.id}))&&a.push(e):a=_.reject(a,(function(t){return t.id==e.id})),l.error=void 0)}},o.showBlade(l,e.blade)}},e.openCategorySelectWizard=function(t){if(n.checkPermission("marketing:update")){var i=[],r={id:"CatalogCategorySelect",title:"marketing.blades.catalog-items-select.title-category",controller:"virtoCommerce.catalogModule.catalogItemSelectController",template:"Modules/$(VirtoCommerce.Catalog)/Scripts/blades/common/catalog-items-select.tpl.html",breadcrumbs:[],toolbarCommands:[{name:"platform.commands.pick-selected",icon:"fas fa-plus",executeMethod:function(e){t.categoryId=i[0].id,t.categoryName=i[0].name,o.closeBlade(e)},canExecuteMethod:function(){return 1==i.length}}]};r.options={showCheckingMultiple:!1,allowCheckingItem:!1,allowCheckingCategory:!0,checkItemFn:function(e,t){"category"!=e.type?(r.error="Must select Category",e.selected=void 0):(t?_.all(i,(function(t){return t.id!=e.id}))&&i.push(e):i=_.reject(i,(function(t){return t.id==e.id})),r.error=void 0)}},o.showBlade(r,e.blade)}}}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.promotionListController",["$scope","$localStorage","virtoCommerce.marketingModule.promotions","platformWebApp.dialogService","platformWebApp.bladeUtils","platformWebApp.uiGridHelper",function(e,t,n,o,i,r){var a=e.blade,l=i.bladeNavigationService;a.refresh=function(){a.isLoading=!0;var t={responseGroup:"none",keyword:c.keyword,sort:r.getSortExpression(e),skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount};c.current&&angular.extend(t,c.current),n.search(t,(function(t){a.isLoading=!1,e.pageSettings.totalItems=t.totalCount,a.currentEntities=t.results}))},e.selectNode=function(t){e.selectedNodeId=t.id;var n={id:"listItemChild",currentEntity:t,title:t.name,subtitle:a.subtitle,controller:"virtoCommerce.marketingModule.promotionDetailController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/promotion/blades/promotion-detail.tpl.html"};l.showBlade(n,a)},e.deleteList=function(e){var t={id:"confirmDeleteItem",title:"marketing.dialogs.promotions-delete.title",message:"marketing.dialogs.promotions-delete.message",callback:function(t){t&&l.closeChildrenBlades(a,(function(){a.isLoading=!0;var t=_.pluck(e,"id");n.remove({ids:t},(function(){a.refresh()}))}))}};o.showConfirmationDialog(t)},a.headIcon="fa fa-area-chart",a.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:a.refresh,canExecuteMethod:function(){return!0}},{name:"platform.commands.add",icon:"fas fa-plus",executeMethod:function(){l.closeChildrenBlades(a,(function(){var e={id:"listItemChild",title:"marketing.blades.promotion-detail.title-new",subtitle:a.subtitle,isNew:!0,currentEntity:{},controller:"virtoCommerce.marketingModule.promotionDetailController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/promotion/blades/promotion-detail.tpl.html"};l.showBlade(e,a)}))},canExecuteMethod:function(){return!0},permission:"marketing:create"},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){e.deleteList(e.gridApi.selection.getSelectedRows())},canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())},permission:"marketing:delete"}];var c=a.filter=e.filter={};function s(e){var t={id:"filterDetail",controller:"virtoCommerce.marketingModule.filterDetailController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/promotion/blades/filter-detail.tpl.html"};angular.extend(t,e),l.showBlade(t,a)}e.$localStorage=t,t.promotionSearchFilters||(t.promotionSearchFilters=[{name:"marketing.blades.promotion-list.new-filter"}]),t.promotionSearchFilterId&&(c.current=_.findWhere(t.promotionSearchFilters,{id:t.promotionSearchFilterId})),c.change=function(){t.promotionSearchFilterId=c.current?c.current.id:null,c.current&&!c.current.id?(c.current=null,s({isNew:!0})):(l.closeBlade({id:"filterDetail"}),c.criteriaChanged())},c.edit=function(){c.current&&s({data:c.current})},c.criteriaChanged=function(){e.pageSettings.currentPage>1?e.pageSettings.currentPage=1:a.refresh()},e.setGridOptions=function(t){r.initialize(e,t,(function(t){r.bindRefreshOnSortChanged(e)})),i.initializePagination(e)}}])},function(e,t){angular.module("virtoCommerce.marketingModule").factory("virtoCommerce.marketingModule.promotions",["$resource",function(e){return e("api/marketing/promotions/:id",null,{search:{url:"api/marketing/promotions/search",method:"POST"},getNew:{url:"api/marketing/promotions/new"},update:{method:"PUT"},searchCoupons:{url:"api/marketing/promotions/coupons/search",method:"POST"},getCoupon:{url:"api/marketing/promotions/coupons/:id"},saveCoupon:{url:"api/marketing/promotions/coupons/add",method:"POST"},deleteCoupons:{url:"api/marketing/promotions/coupons/delete",method:"DELETE"},importCoupons:{url:"api/marketing/promotions/coupons/import",method:"POST"}})}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.couponsWidgetController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.marketingModule.promotions",function(e,t,n){var o=e.blade;o.couponCount=function(){o.isNew||n.searchCoupons({promotionId:o.currentEntity.id,skip:0,take:0},(function(e){o.totalCouponsCount=e.totalCount}))},o.couponCount(),e.$on("coupon-import-finished",(function(e){o.couponCount()})),e.openBlade=function(){var e={id:"coupons",title:"marketing.blades.promotion-detail.toolbar.coupons",promotionId:o.currentEntity.id,promotion:o.currentEntity,controller:"virtoCommerce.marketingModule.couponListController",template:"Modules/$(VirtoCommerce.Marketing)/Scripts/promotion/blades/coupon-list.tpl.html"};t.showBlade(e,o)}}])},function(e,t){angular.module("virtoCommerce.marketingModule").controller("virtoCommerce.marketingModule.dashboard.promotionsWidgetController",["$scope","$state","virtoCommerce.marketingModule.promotions",function(e,t,n){e.data={count:"",descr:"Active Promotions"},e.widgetAction=function(){t.go("workspace.marketing")},n.search({responseGroup:"none",count:1e3},(function(t){var n=_.where(t.results,{isActive:!0});e.data.count=n.length}))}])},function(e,t,n){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLk1hcmtldGluZy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLk1hcmtldGluZy8uL1NjcmlwdHMvbWFya2V0aW5nLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTWFya2V0aW5nLy4vU2NyaXB0cy9jb21tb24vbWFya2V0aW5nLW1haW4uanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5NYXJrZXRpbmcvLi9TY3JpcHRzL2R5bmFtaWNDb250ZW50L2JsYWRlcy9keW5hbWljQ29udGVudC1saXN0LmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTWFya2V0aW5nLy4vU2NyaXB0cy9keW5hbWljQ29udGVudC9ibGFkZXMvaXRlbXMvYWRkLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTWFya2V0aW5nLy4vU2NyaXB0cy9keW5hbWljQ29udGVudC9ibGFkZXMvaXRlbXMvaXRlbS1kZXRhaWwuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5NYXJrZXRpbmcvLi9TY3JpcHRzL2R5bmFtaWNDb250ZW50L2JsYWRlcy9pdGVtcy9pdGVtRm9sZGVyLWRldGFpbC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLk1hcmtldGluZy8uL1NjcmlwdHMvZHluYW1pY0NvbnRlbnQvYmxhZGVzL2l0ZW1zL2xpc3QuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5NYXJrZXRpbmcvLi9TY3JpcHRzL2R5bmFtaWNDb250ZW50L2JsYWRlcy9wbGFjZWhvbGRlcnMvYWRkLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTWFya2V0aW5nLy4vU2NyaXB0cy9keW5hbWljQ29udGVudC9ibGFkZXMvcGxhY2Vob2xkZXJzL2ZvbGRlci1kZXRhaWxzLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTWFya2V0aW5nLy4vU2NyaXB0cy9keW5hbWljQ29udGVudC9ibGFkZXMvcGxhY2Vob2xkZXJzL2xpc3QuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5NYXJrZXRpbmcvLi9TY3JpcHRzL2R5bmFtaWNDb250ZW50L2JsYWRlcy9wbGFjZWhvbGRlcnMvcGxhY2Vob2xkZXItZGV0YWlscy5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLk1hcmtldGluZy8uL1NjcmlwdHMvZHluYW1pY0NvbnRlbnQvYmxhZGVzL3B1Ymxpc2hpbmcvYWRkLWNvbnRlbnQtaXRlbXMuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5NYXJrZXRpbmcvLi9TY3JpcHRzL2R5bmFtaWNDb250ZW50L2JsYWRlcy9wdWJsaXNoaW5nL2FkZC1wbGFjZWhvbGRlcnMuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5NYXJrZXRpbmcvLi9TY3JpcHRzL2R5bmFtaWNDb250ZW50L2JsYWRlcy9wdWJsaXNoaW5nL2xpc3QuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5NYXJrZXRpbmcvLi9TY3JpcHRzL2R5bmFtaWNDb250ZW50L2JsYWRlcy9wdWJsaXNoaW5nL3B1YmxpY2F0aW9uLWRldGFpbC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLk1hcmtldGluZy8uL1NjcmlwdHMvZHluYW1pY0NvbnRlbnQvcmVzb3VyY2VzL2R5bmFtaWNDb250ZW50cy5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLk1hcmtldGluZy8uL1NjcmlwdHMvcHJvbW90aW9uL2JsYWRlcy9jYXRhbG9nLWVudHJ5LWxpc3QuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5NYXJrZXRpbmcvLi9TY3JpcHRzL3Byb21vdGlvbi9ibGFkZXMvY291cG9uLWRldGFpbC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLk1hcmtldGluZy8uL1NjcmlwdHMvcHJvbW90aW9uL2JsYWRlcy9jb3Vwb24taW1wb3J0LXByb2Nlc3NpbmcuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5NYXJrZXRpbmcvLi9TY3JpcHRzL3Byb21vdGlvbi9ibGFkZXMvY291cG9uLWltcG9ydC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLk1hcmtldGluZy8uL1NjcmlwdHMvcHJvbW90aW9uL2JsYWRlcy9jb3Vwb24tbGlzdC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLk1hcmtldGluZy8uL1NjcmlwdHMvcHJvbW90aW9uL2JsYWRlcy9maWx0ZXItZGV0YWlsLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTWFya2V0aW5nLy4vU2NyaXB0cy9wcm9tb3Rpb24vYmxhZGVzL3Byb21vdGlvbi1kZXRhaWwuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5NYXJrZXRpbmcvLi9TY3JpcHRzL3Byb21vdGlvbi9ibGFkZXMvcHJvbW90aW9uLWV4cHJlc3Npb25zLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTWFya2V0aW5nLy4vU2NyaXB0cy9wcm9tb3Rpb24vYmxhZGVzL3Byb21vdGlvbi1saXN0LmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuTWFya2V0aW5nLy4vU2NyaXB0cy9wcm9tb3Rpb24vcmVzb3VyY2VzL3Byb21vdGlvbnMuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5NYXJrZXRpbmcvLi9TY3JpcHRzL3Byb21vdGlvbi93aWRnZXRzL2NvdXBvbnNXaWRnZXQuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5NYXJrZXRpbmcvLi9TY3JpcHRzL3Byb21vdGlvbi93aWRnZXRzL2Rhc2hib2FyZC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInVuZGVmaW5lZCIsIkFwcERlcGVuZGVuY2llcyIsInB1c2giLCJhbmd1bGFyIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIiRzY29wZSIsImJsYWRlTmF2aWdhdGlvblNlcnZpY2UiLCJzaG93QmxhZGUiLCJpZCIsInRpdGxlIiwidGVtcGxhdGUiLCJpc0Nsb3NpbmdEaXNhYmxlZCIsImZhY3RvcnkiLCJpdGVtcyIsInJlZ2lzdGVyIiwiaXRlbSIsInRoaXMiLCJydW4iLCIkaHR0cCIsIiRjb21waWxlIiwibWFpbk1lbnVTZXJ2aWNlIiwid2lkZ2V0U2VydmljZSIsInRvb2xiYXJTZXJ2aWNlIiwiYnJlYWRjcnVtYkhpc3RvcnlTZXJ2aWNlIiwiJHN0YXRlIiwiYXV0aFNlcnZpY2UiLCJzdG9yZXMiLCJwZXJtaXNzaW9uU2NvcGVSZXNvbHZlciIsImR5bmFtaWNFeHByZXNzaW9uU2VydmljZSIsIm1hcmtldGluZ01lbnVJdGVtU2VydmljZSIsIm1lbnVJdGVtIiwicGF0aCIsImljb24iLCJwcmlvcml0eSIsImFjdGlvbiIsImdvIiwicGVybWlzc2lvbiIsImFkZE1lbnVJdGVtIiwiZW50aXR5TmFtZSIsImdldEJhY2tCdXR0b25JbnN0YW5jZSIsInJlZ2lzdGVyV2lkZ2V0IiwibWFya2V0aW5nU3RvcmVTY29wZSIsInR5cGUiLCJzZWxlY3RGbiIsImJsYWRlIiwiY2FsbGJhY2siLCJuZXdCbGFkZSIsInN1YnRpdGxlIiwiY3VycmVudEVudGl0eSIsIm9uQ2hhbmdlc0NvbmZpcm1lZEZuIiwiZGF0YVNlcnZpY2UiLCJyZWdpc3RlckV4cHJlc3Npb24iLCJkaXNwbGF5TmFtZSIsImdyb3VwTmFtZSIsInRlbXBsYXRlVVJMIiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsImVudGl0aWVzIiwic2VsZWN0ZWROb2RlSWQiLCJvcGVuQmxhZGUiLCJoZWFkSWNvbiIsIl8iLCJzb3J0QnkiLCJjdXJyZW50RW50aXRpZXMiLCJpc0xvYWRpbmciLCJzdWJuYW1lIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yaWVzIiwiZHluYW1pY1Byb3BlcnRpZXMiLCJwYWdlU2V0dGluZ3MiLCJ0b3RhbEl0ZW1zIiwiY3VycmVudFBhZ2UiLCJudW1QYWdlcyIsIml0ZW1zUGVyUGFnZUNvdW50IiwiYWRkRm9sZGVyIiwicGFyZW50Rm9sZGVySWQiLCJjaG9zZW5Gb2xkZXIiLCJjaGlsZHJlbkZvbGRlcnMiLCJhZGROZXdGb2xkZXIiLCJhZGRDb250ZW50SXRlbSIsInF1ZXJ5IiwiZm9yRWFjaCIsInZhbHVlcyIsImRpc3BsYXlOYW1lcyIsImNvbnRlbnRJdGVtIiwiZm9sZGVySWQiLCJhZGROZXdDb250ZW50SXRlbSIsImR5bmFtaWNDb250ZW50SXRlbXNBcGkiLCJkaWFsb2dTZXJ2aWNlIiwiZGljdGlvbmFyeUl0ZW1zQXBpIiwic2V0dGluZ3MiLCJkeW5hbWljUHJvcGVydGllc0FwaSIsInVwZGF0ZVBlcm1pc3Npb24iLCJyZWZyZXNoIiwiaXNOZXciLCJpbml0aWFsaXplIiwiZW50aXR5Iiwic2VhcmNoIiwib2JqZWN0VHlwZSIsInRha2UiLCJkeW5hbWljUHJvcGVydGllc1Jlc3BvbnNlIiwicmF3RHluYW1pY1Byb3BlcnRpZXMiLCJyZXN1bHRzIiwiZWFjaCIsInByb3AiLCJmaWx0ZXJlZFByb3BlcnR5IiwiZmluZCIsIklzQ2hhbmdlZCIsImVxdWFscyIsIm9yaWdFbnRpdHkiLCJvbWl0IiwibGVuZ3RoIiwib3JpZ2luYWxFbnRpdHlEeW5hbWljUHJvcGVydHkiLCJjdXJyZW50RW50aXR5RHluYW1pY1Byb3BlcnR5IiwieCIsImlzRGljdGlvbmFyeSIsImN1cnJEaWN0aW9uYXJ5VmFsdWVzSWRzIiwiZmlsdGVyIiwibWFwIiwiZXZlcnkiLCJpbmNsdWRlcyIsInZhbHVlSWQiLCJpc0FycmF5Iiwib3JpZ2luYWxWYWx1ZXMiLCJjdXJyZW50VmFsdWVzIiwidG9vbGJhckNvbW1hbmRzIiwiZXhlY3V0ZU1ldGhvZCIsInNhdmVDaGFuZ2VzIiwiY2FuRXhlY3V0ZU1ldGhvZCIsImZvcm1TY29wZSIsIiR2YWxpZCIsImNvcHkiLCJkaWFsb2ciLCJtZXNzYWdlIiwicmVtb3ZlIiwiZGVsZXRlIiwiaWRzIiwicGFyZW50QmxhZGUiLCJpbml0aWFsaXplQmxhZGUiLCJjbG9zZUJsYWRlIiwic2hvd0NvbmZpcm1hdGlvbkRpYWxvZyIsImlzRGVmaW5lZCIsInNhdmUiLCJ1cGRhdGUiLCJlZGl0RGljdGlvbmFyeSIsImlzQXBpU2F2ZSIsImdldERpY3Rpb25hcnlWYWx1ZXMiLCJwcm9wZXJ0eUlkIiwic2V0Rm9ybSIsImZvcm0iLCJnZXRWYWx1ZXMiLCJsYW5ndWFnZXMiLCJtYXJrZXRpbmdfZHluYW1pY0NvbnRlbnRzX3Jlc19mb2xkZXJzIiwiJGludmFsaWQiLCJwYXRoU3RlcHMiLCJvdXRsaW5lIiwic3BsaXQiLCJibGFkZVV0aWxzIiwidWlHcmlkSGVscGVyIiwiZHluYW1pY0NvbnRlbnRGb2xkZXJzQXBpIiwiZ2VuZXJhdGVCcmVhZGNydW1iIiwibm9kZSIsIm5hdmlnYXRlIiwic2VsZWN0Tm9kZSIsImNob3NlbkZvbGRlcklkIiwiYWRkTmV3IiwiY2xvc2VDaGlsZHJlbkJsYWRlcyIsInNraXAiLCJrZXl3b3JkIiwic2VhcmNoS2V5d29yZCIsInNvcnQiLCJnZXRTb3J0RXhwcmVzc2lvbiIsInJlc3BvbnNlR3JvdXAiLCJlbnRyeSIsImlzRm9sZGVyIiwibGlzdEVudHJpZXMiLCJ0b3RhbENvdW50IiwiYnJlYWRjcnVtYnMiLCJicmVhZGNydW1iIiwiYiIsInBvc2l0aW9uIiwiaW5kZXhPZiIsInNsaWNlIiwic2V0QnJlYWRjcnVtYnMiLCJkZWxldGVJdGVtcyIsImdyaWRBcGkiLCJzZWxlY3Rpb24iLCJnZXRTZWxlY3RlZFJvd3MiLCJhbnkiLCJjcml0ZXJpYUNoYW5nZWQiLCJjbGVhcktleXdvcmQiLCJvcGVuRGV0YWlsc0JsYWRlIiwiZm9sZGVySXRlbXMiLCJwbHVjayIsImNvbnRlbnRJdGVtcyIsInNldEdyaWRPcHRpb25zIiwiZ3JpZE9wdGlvbnMiLCJvblJlZ2lzdGVyQXBpIiwiY29yZSIsIm9uIiwic29ydENoYW5nZWQiLCJpbml0aWFsaXplUGFnaW5hdGlvbiIsImFkZFBsYWNlaG9sZGVyIiwiaW1hZ2VVcmwiLCJhZGROZXdQbGFjZWhvbGRlciIsImNvbnRlbnRQbGFjZXNBcGkiLCJwbGFjZWhvbGRlckl0ZW1zIiwiRmlsZVVwbG9hZGVyIiwidXBsb2FkZXIiLCJoYXNVcGRhdGVQZXJtaXNzaW9uIiwic2NvcGUiLCJoZWFkZXJzIiwiQWNjZXB0IiwiYXV0b1VwbG9hZCIsInJlbW92ZUFmdGVyVXBsb2FkIiwib25TdWNjZXNzSXRlbSIsImZpbGVJdGVtIiwiaW1hZ2VzIiwic3RhdHVzIiwib25BZnRlckFkZGluZ0FsbCIsImFkZGVkSXRlbXMiLCJzZXRFcnJvciIsIm9uRXJyb3JJdGVtIiwiX2ZpbGUiLCJicm93c2VGb2xkZXIiLCJpbmRleCIsImZpbmRMYXN0SW5kZXgiLCJwdWJsaWNhdGlvbiIsImVsIiwib3JFbCIsImlzVW5kZWZpbmVkIiwiZGVsZXRlQWxsQ29udGVudEl0ZW1zIiwiZ3JpZCIsInF1ZXVlR3JpZFJlZnJlc2giLCJkZWxldGVDb250ZW50SXRlbSIsInBsYWNlIiwicmVnaXN0ZXJSb3dzUHJvY2Vzc29yIiwicmVuZGVyYWJsZVJvd3MiLCJ2aXNpYmxlQ291bnQiLCJyb3ciLCJ2aXNpYmxlIiwiYWxsIiwiY2kiLCJmaWx0ZXJlZEVudGl0aWVzQ291bnQiLCJjb250ZW50UGxhY2VzIiwiY29udGVudFBsYWNlIiwiZGVsZXRlQWxsUGxhY2Vob2xkZXIiLCJkZWxldGVQbGFjZWhvbGRlciIsImR5bmFtaWNDb250ZW50UHVibGljYXRpb25zQXBpIiwicmVtb3ZlUHVibGlzaGluZ3MiLCJzZWxlY3RlZFJvd3MiLCJjb25maXJtIiwicHVibGlzaGluZ0lkcyIsImV4dGVuZCIsImNvbnRlbnRQdWJsaWNhdGlvbnMiLCJleHByZXNzaW9uQmxvY2siLCJkeW5hbWljRXhwcmVzc2lvbiIsImNoaWxkcmVuIiwiZXh0ZW5kRWxlbWVudEJsb2NrIiwiZ3JvdXBCeSIsImF2YWlsYWJsZUNoaWxkcmVuIiwic3ViaXRlbXMiLCIkd2F0Y2giLCJhdXRvZ2VuZXJhdGVOYW1lIiwicmV0VmFsIiwiZXhwcmVzc2lvbnMiLCJzdHJpcE9mZlVpSW5mb3JtYXRpb24iLCJleHByZXNzaW9uRWxlbWVudCIsImdldFZhbGlkYXRpb25FcnJvciIsIm5ld0NoaWxkTGFiZWwiLCJnZXROZXciLCJjaGVja0RpZmZlcmVuc2UiLCJhZGRQbGFjZWhvbGRlcnMiLCJhZGRDb250ZW50SXRlbXMiLCJlcnJvciIsInN0YXR1c1RleHQiLCJhdmFpbGFibGVTYXZlIiwiY2lJZHNlIiwidiIsImNpSWRzb2UiLCJpbnRlcnNlY3Rpb24iLCJNYXRoIiwibWF4IiwiY3BJZHNlIiwiY3BJZHNvZSIsImRhdGVwaWNrZXJzIiwiZW5kRGF0ZSIsInN0YXJ0RGF0ZSIsInRvZGF5IiwiRGF0ZSIsIm9wZW4iLCIkZXZlbnQiLCJ3aGljaCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiZGF0ZU9wdGlvbnMiLCJmb3JtYXRzIiwiZm9ybWF0IiwiU3RyaW5nIiwidHJpbUxlZnQiLCJjaGFybGlzdCIsInJlcGxhY2UiLCJSZWdFeHAiLCJ0cmltUmlnaHQiLCJmb2N1c05hbWVJbnB1dCIsInBsYWNlaG9sZGVyUHVibGljYXRpb25OYW1lUGFydCIsImNvbnRlbnRJdGVtUHVibGljYXRpb25OYW1lUGFydCIsIm5ld05hbWUiLCIkcmVzb3VyY2UiLCJtZXRob2QiLCJncmlkT3B0aW9uRXh0ZW5zaW9uIiwiaXNWYWxpZCIsInByb2R1Y3RJZHMiLCJwcm9tb3Rpb24iLCJwcm9kdWN0TmFtZXMiLCJzZWxlY3RlZExpc3RFbnRyaWVzIiwicHJvZHVjdENvZGVzIiwiYmxhZGVDbG9zZSIsImdyaWRJZCIsInRyeUV4dGVuZEdyaWRPcHRpb25zIiwiZXh0ZXJuYWxSZWdpc3RlckFwaUNhbGxiYWNrIiwiY2FuY2VsQ2hhbmdlcyIsImlzRmlyc3RSdW4iLCJyZXNwR3JvdXAiLCJvcHRpb25zIiwib3BlbkNhdGFsb2dCbGFkZSIsIiRwYXJlbnQiLCJiaW5kUmVmcmVzaE9uU29ydENoYW5nZWQiLCJjYXRhbG9nQmxhZGUiLCJpbWdTcmMiLCJzZWxlY3RlZElkcyIsInVuaXEiLCJ1bmlvbiIsInNlbGVjdGVkSXRlbUlkcyIsInNob3dDaGVja2luZ011bHRpcGxlIiwiY2hlY2tJdGVtRm4iLCJsaXN0SXRlbSIsImlzU2VsZWN0ZWQiLCJzZWxlY3RlZCIsInJlamVjdCIsInRvUmVtb3ZlQXJyYXkiLCJkaWZmZXJlbmNlIiwiY2hpbGRyZW5CbGFkZXMiLCJhcGkiLCJwcm9tb3Rpb25zQXBpIiwicGFyZW50UmVmcmVzaCIsImdldENvdXBvbiIsImZvcm1Db3Vwb24iLCJleHBpcmF0aW9uRGF0ZSIsIm9wZW5DYWxlbmRhciIsImNhbGVuZGFyIiwib3JpZ2luYWxFbnRpdHkiLCJzYXZlQ291cG9uIiwiJHJvb3RTY29wZSIsIiRvbiIsImV2ZW50Iiwibm90aWZpY2F0aW9uIiwiZmluaXNoZWQiLCIkYnJvYWRjYXN0IiwiZmlsdGVycyIsImZuIiwibGFzdEluZGV4T2YiLCJvbkJlZm9yZVVwbG9hZEl0ZW0iLCJhc3NldCIsImNhbkltcG9ydCIsImNzdkZpbGVVcmwiLCJyZWxhdGl2ZVVybCIsImNvbHVtbkRlbGltaXRlcnMiLCJzdGFydEltcG9ydCIsInJlcXVlc3QiLCJmaWxlVXJsIiwiZGVsaW1pdGVyIiwiY29sdW1uRGVsaW1pdGVyIiwicHJvbW90aW9uSWQiLCJpbXBvcnRDb3Vwb25zIiwiJGxvY2FsU3RvcmFnZSIsImNyaXRlcmlhIiwiY29kZSIsImN1cnJlbnQiLCJzZWFyY2hDb3Vwb25zIiwiY291cG9uQ291bnQiLCJyZW1vdmVBbGwiLCJjbGVhckNvdXBvbnMiLCJpdGVtSWRzIiwiZGVsZXRlQ291cG9ucyIsInNob3dGaWx0ZXJEZXRhaWxCbGFkZSIsImJsYWRlRGF0YSIsImNvdXBvblNlYXJjaEZpbHRlcnMiLCJjb3Vwb25TZWFyY2hGaWx0ZXJJZCIsImZpbmRXaGVyZSIsImNoYW5nZSIsImVkaXQiLCJzZWxlY3RlZEVudGl0eSIsIiR0cmFuc2xhdGUiLCJtZXRhRmllbGRzIiwidmFsdWVUeXBlIiwicHJvbW90aW9uU2VhcmNoRmlsdGVycyIsInByb21vdGlvblNlYXJjaEZpbHRlcklkIiwic3BsaWNlIiwicmVzdWx0IiwiZ2V0VGltZSIsIm1hcmtldGluZ19yZXNfcHJvbW90aW9ucyIsIiRxIiwibWV0YUZvcm1zU2VydmljZSIsInNoaXBwaW5nTWV0aG9kcyIsInBheW1lbnRNZXRob2RzIiwiY291cG9ucyIsInRleHQiLCJleHByZXNzaW9uUHJvbWlzZXMiLCJhbGxEYXRhIiwiZmluYWxseSIsImlzRGlydHkiLCJpbml0aWFsaXplVG9vbGJhciIsImlzQ2xvbmluZyIsImV4Y2x1ZGluZ0NhdGVnb3J5SWRzIiwiZXhjbHVkaW5nSXRlbSIsImNhdGVnb3J5SWQiLCJwcm9taXNlIiwiY2F0ZWdvcnlOYW1lIiwiJHByb21pc2UiLCJleGNsdWRpbmdQcm9kdWN0SWRzIiwicHJvZHVjdElkIiwicHJvZHVjdE5hbWUiLCJwcm9kdWN0Q29kZSIsInNlbGVjdGVkQ2F0ZWdvcmllcyIsIndoZXJlIiwic2VsZWN0ZWRQcm9kdWN0cyIsImdldE1ldGFGaWVsZHMiLCJleHByZXNzaW9uVHJlZVRlbXBsYXRlVXJsIiwic2hvd1ByaW9yaXR5Iiwic2hpcHBpbmdNZXRob2RzUHJvbWlzZSIsIndoZW4iLCJnZXRBbGxSZWdpc3RlcmVkIiwibWV0aG9kcyIsInBheW1lbnRNZXRob2RzUHJvbWlzZSIsImN1cnJlbnRFbnRpdHlDb2RlIiwib25DbG9zZSIsImNsb3NlQ2FsbGJhY2siLCJzaG93Q29uZmlybWF0aW9uSWZOZWVkZWQiLCJzdHIiLCJlbmQiLCJwYWdlU2l6ZSIsImxhc3RTZWFyY2hQaHJhc2UiLCJsb2FkUHJvbW90aW9uU3RvcmVzIiwic3RvcmVJZHMiLCJqb2luU3RvcmVzIiwicmVzb2x2ZSIsIm5ld0l0ZW1zIiwieSIsInN0b3JlIiwiY29uY2F0IiwiZmV0Y2hTdG9yZXMiLCIkc2VsZWN0IiwiZmV0Y2hOZXh0U3RvcmVzIiwicGFnZSIsInNlYXJjaFBocmFzZSIsImV4Y2x1c2l2aXR5VHlwZXMiLCJjdXJyZW5jeVV0aWxzIiwib3Blbkl0ZW1TZWxlY3RXaXphcmQiLCJwYXJlbnRFbGVtZW50IiwiaXNNdWx0aVNlbGVjdCIsImNoZWNrUGVybWlzc2lvbiIsIml0ZW1EZXRhaWxCbGFkZSIsIml0ZW1JZCIsIm9wZW5DYXRlZ29yeVNlbGVjdFdpemFyZCIsImFsbG93Q2hlY2tpbmdJdGVtIiwiYWxsb3dDaGVja2luZ0NhdGVnb3J5IiwicHJvbW90aW9ucyIsImRlbGV0ZUxpc3QiLCJsaXN0IiwidG90YWxDb3Vwb25zQ291bnQiLCJjb3VudCIsImRlc2NyIiwid2lkZ2V0QWN0aW9uIiwiaXNBY3RpdmUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEs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R0FBSUMsTUFBTyxxQkFFbENwZCxFQUFPcWQsYUFBZSxXQUNsQmxjLEVBQU9XLEdBQUcsd0JBR2RpYixFQUFXbFgsT0FBTyxDQUFFMkUsY0FBZSxPQUFRMlMsTUFBTyxNQUFRLFNBQVUvWixHQUNoRSxJQUFJa0ksRUFBWTdILEVBQUU0VyxNQUFNalgsRUFBSzhDLFFBQVMsQ0FBRW9YLFVBQVUsSUFDbER0ZCxFQUFPb0QsS0FBSytaLE1BQVE3UixFQUFVM0UsYyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvL0NhbGwgdGhpcyB0byByZWdpc3RlciBvdXIgbW9kdWxlIHRvIG1haW4gYXBwbGljYXRpb25cbnZhciBtb2R1bGVOYW1lID0gXCJ2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZVwiO1xuXG5pZiAoQXBwRGVwZW5kZW5jaWVzICE9IHVuZGVmaW5lZCkge1xuICAgIEFwcERlcGVuZGVuY2llcy5wdXNoKG1vZHVsZU5hbWUpO1xufVxuXG5hbmd1bGFyLm1vZHVsZShtb2R1bGVOYW1lLCBbXSlcbiAgICAuY29uZmlnKFxuICAgICAgICBbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnd29ya3NwYWNlLm1hcmtldGluZycsIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL21hcmtldGluZycsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnJChQbGF0Zm9ybSkvU2NyaXB0cy9jb21tb24vdGVtcGxhdGVzL2hvbWUudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogJ21hcmtldGluZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnbWFya2V0aW5nLmJsYWRlcy5tYXJrZXRpbmctbWFpbi50aXRsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5tYXJrZXRpbmdNYWluQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTWFya2V0aW5nKS9TY3JpcHRzL2NvbW1vbi9tYXJrZXRpbmctbWFpbi50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ2xvc2luZ0Rpc2FibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShibGFkZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfV0pXG5cblxuICAgIC5mYWN0b3J5KCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5tYXJrZXRpbmdNZW51SXRlbVNlcnZpY2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpdGVtczogW10sXG4gICAgICAgICAgICByZWdpc3RlcjogZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSlcblxuICAgIC5ydW4oWyckaHR0cCcsICckY29tcGlsZScsICdwbGF0Zm9ybVdlYkFwcC5tYWluTWVudVNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAud2lkZ2V0U2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC50b29sYmFyU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC5icmVhZGNydW1iSGlzdG9yeVNlcnZpY2UnLCAnJHN0YXRlJywgJ3BsYXRmb3JtV2ViQXBwLmF1dGhTZXJ2aWNlJywgJ3ZpcnRvQ29tbWVyY2Uuc3RvcmVNb2R1bGUuc3RvcmVzJywgJ3BsYXRmb3JtV2ViQXBwLnBlcm1pc3Npb25TY29wZVJlc29sdmVyJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5jb3JlTW9kdWxlLmNvbW1vbi5keW5hbWljRXhwcmVzc2lvblNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUubWFya2V0aW5nTWVudUl0ZW1TZXJ2aWNlJ1xuICAgICAgICAsIGZ1bmN0aW9uICgkaHR0cCwgJGNvbXBpbGUsIG1haW5NZW51U2VydmljZSwgd2lkZ2V0U2VydmljZSwgdG9vbGJhclNlcnZpY2UsIGJyZWFkY3J1bWJIaXN0b3J5U2VydmljZSwgJHN0YXRlLCBhdXRoU2VydmljZSwgc3RvcmVzLCBwZXJtaXNzaW9uU2NvcGVSZXNvbHZlciwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgZHluYW1pY0V4cHJlc3Npb25TZXJ2aWNlLCBtYXJrZXRpbmdNZW51SXRlbVNlcnZpY2UpIHtcbiAgICAgICAgICAgIC8vUmVnaXN0ZXIgbW9kdWxlIGluIG1haW4gbWVudVxuICAgICAgICAgICAgdmFyIG1lbnVJdGVtID0ge1xuICAgICAgICAgICAgICAgIHBhdGg6ICdicm93c2UvbWFya2V0aW5nJyxcbiAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtZmxhZycsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdtYXJrZXRpbmcubWFpbi1tZW51LXRpdGxlJyxcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogNDAsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7ICRzdGF0ZS5nbygnd29ya3NwYWNlLm1hcmtldGluZycpOyB9LFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdtYXJrZXRpbmc6YWNjZXNzJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG1haW5NZW51U2VydmljZS5hZGRNZW51SXRlbShtZW51SXRlbSk7XG5cbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyIG1hcmtldGluZyBtYWluIGJsYWRlIGl0ZW1zXG4gICAgICAgICAgICBtYXJrZXRpbmdNZW51SXRlbVNlcnZpY2UucmVnaXN0ZXIoeyBpZDogJzEnLCBuYW1lOiAnUHJvbW90aW9ucycsIGVudGl0eU5hbWU6ICdwcm9tb3Rpb24nLCBpY29uOiAnZmEtYXJlYS1jaGFydCcgfSk7XG4gICAgICAgICAgICBtYXJrZXRpbmdNZW51SXRlbVNlcnZpY2UucmVnaXN0ZXIoeyBpZDogJzInLCBuYW1lOiAnRHluYW1pYyBjb250ZW50JywgZW50aXR5TmFtZTogJ2R5bmFtaWNDb250ZW50JywgaWNvbjogJ2ZhLWNhbGVuZGFyLW8nIH0pO1xuXG4gICAgICAgICAgICAvLyByZWdpc3RlciBiYWNrLWJ1dHRvblxuICAgICAgICAgICAgdG9vbGJhclNlcnZpY2UucmVnaXN0ZXIoYnJlYWRjcnVtYkhpc3RvcnlTZXJ2aWNlLmdldEJhY2tCdXR0b25JbnN0YW5jZSgpLCAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuaXRlbXNEeW5hbWljQ29udGVudExpc3RDb250cm9sbGVyJyk7XG4gICAgICAgICAgICB0b29sYmFyU2VydmljZS5yZWdpc3RlcihicmVhZGNydW1iSGlzdG9yeVNlcnZpY2UuZ2V0QmFja0J1dHRvbkluc3RhbmNlKCksICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5wbGFjZWhvbGRlcnNEeW5hbWljQ29udGVudExpc3RDb250cm9sbGVyJyk7XG4gICAgICAgICAgICB0b29sYmFyU2VydmljZS5yZWdpc3RlcihicmVhZGNydW1iSGlzdG9yeVNlcnZpY2UuZ2V0QmFja0J1dHRvbkluc3RhbmNlKCksICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5hZGRQdWJsaXNoaW5nQ29udGVudEl0ZW1zU3RlcENvbnRyb2xsZXInKTtcbiAgICAgICAgICAgIHRvb2xiYXJTZXJ2aWNlLnJlZ2lzdGVyKGJyZWFkY3J1bWJIaXN0b3J5U2VydmljZS5nZXRCYWNrQnV0dG9uSW5zdGFuY2UoKSwgJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmFkZFB1Ymxpc2hpbmdQbGFjZWhvbGRlcnNTdGVwQ29udHJvbGxlcicpO1xuXG4gICAgICAgICAgICB3aWRnZXRTZXJ2aWNlLnJlZ2lzdGVyV2lkZ2V0KHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuY291cG9uc1dpZGdldENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTWFya2V0aW5nKS9TY3JpcHRzL3Byb21vdGlvbi93aWRnZXRzL2NvdXBvbnNXaWRnZXQudHBsLmh0bWwnXG4gICAgICAgICAgICB9LCAncHJvbW90aW9uRGV0YWlsJyk7XG5cbiAgICAgICAgICAgIC8vUmVnaXN0ZXIgcGVybWlzc2lvbiBzY29wZXMgdGVtcGxhdGVzIHVzZWQgZm9yIHNjb3BlIGJvdW5kZWQgZGVmaW5pdGlvbiBpbiByb2xlIG1hbmFnZW1lbnQgdWlcbiAgICAgICAgICAgIHZhciBtYXJrZXRpbmdTdG9yZVNjb3BlID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdNYXJrZXRpbmdTdG9yZVNlbGVjdGVkU2NvcGUnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnT25seSBmb3IgcHJvbW90aW9ucyBpbiBzZWxlY3RlZCBzdG9yZXMnLFxuICAgICAgICAgICAgICAgIHNlbGVjdEZuOiBmdW5jdGlvbiAoYmxhZGUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnc3RvcmUtcGljaycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnU2VsZWN0IHN0b3JlcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW50aXR5OiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VzQ29uZmlybWVkRm46IGNhbGxiYWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNlcnZpY2U6IHN0b3JlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdwbGF0Zm9ybVdlYkFwcC5zZWN1cml0eS5zY29wZVZhbHVlUGlja0Zyb21TaW1wbGVMaXN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJyQoUGxhdGZvcm0pL1NjcmlwdHMvYXBwL3NlY3VyaXR5L2JsYWRlcy9jb21tb24vc2NvcGUtdmFsdWUtcGljay1mcm9tLXNpbXBsZS1saXN0LnRwbC5odG1sJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwZXJtaXNzaW9uU2NvcGVSZXNvbHZlci5yZWdpc3RlcihtYXJrZXRpbmdTdG9yZVNjb3BlKTtcblxuICAgICAgICAgICAgLy9SZWdpc3RlciBkYXNoYm9hcmQgd2lkZ2V0c1xuICAgICAgICAgICAgLy93aWRnZXRTZXJ2aWNlLnJlZ2lzdGVyV2lkZ2V0KHtcbiAgICAgICAgICAgIC8vICAgIGlzVmlzaWJsZTogZnVuY3Rpb24gKGJsYWRlKSB7IHJldHVybiBhdXRoU2VydmljZS5jaGVja1Blcm1pc3Npb24oJ21hcmtldGluZzpyZWFkJyk7IH0sXG4gICAgICAgICAgICAvLyAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuZGFzaGJvYXJkLnByb21vdGlvbnNXaWRnZXRDb250cm9sbGVyJyxcbiAgICAgICAgICAgIC8vICAgIHRlbXBsYXRlOiAndGlsZS1jb3VudC5odG1sJ1xuICAgICAgICAgICAgLy99LCAnbWFpbkRhc2hib2FyZCcpO1xuXG4gICAgICAgICAgICBkeW5hbWljRXhwcmVzc2lvblNlcnZpY2UucmVnaXN0ZXJFeHByZXNzaW9uKHtcbiAgICAgICAgICAgICAgICBpZDogJ0NvbmRpdGlvbkhhc05vU2FsZVByaWNlJyxcbiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ0FwcGx5IG9ubHkgdG8gZnVsbCBwcmljZSBpdGVtcyBhbmQgbm90IHNhbGVzIGl0ZW1zJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBjYXRhbG9nR3JvdXBOYW1lID0gXCJDYXRhbG9nXCI7XG4gICAgICAgICAgICBkeW5hbWljRXhwcmVzc2lvblNlcnZpY2UucmVnaXN0ZXJFeHByZXNzaW9uKHtcbiAgICAgICAgICAgICAgICBncm91cE5hbWU6IGNhdGFsb2dHcm91cE5hbWUsXG4gICAgICAgICAgICAgICAgaWQ6ICdEeW5hbWljQ29udGVudENvbmRpdGlvbkNhdGVnb3J5SXMnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVVJMOiAnZXhwcmVzc2lvbi1Db25kaXRpb25DYXRlZ29yeUlzLmh0bWwnLFxuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnU3BlY2lmaWMgY2F0ZWdvcnknXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGR5bmFtaWNFeHByZXNzaW9uU2VydmljZS5yZWdpc3RlckV4cHJlc3Npb24oe1xuICAgICAgICAgICAgICAgIGdyb3VwTmFtZTogY2F0YWxvZ0dyb3VwTmFtZSxcbiAgICAgICAgICAgICAgICBpZDogJ0R5bmFtaWNDb250ZW50Q29uZGl0aW9uUHJvZHVjdElzJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVSTDogJ2V4cHJlc3Npb24tQ29uZGl0aW9uRW50cnlJcy5odG1sJyxcbiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ1NwZWNpZmljIHByb2R1Y3QnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJGh0dHAuZ2V0KCdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5NYXJrZXRpbmcpL1NjcmlwdHMvZHluYW1pY0NvbmRpdGlvbnMvdGVtcGxhdGVzLmh0bWwnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIC8vIGNvbXBpbGUgdGhlIHJlc3BvbnNlLCB3aGljaCB3aWxsIHB1dCBzdHVmZiBpbnRvIHRoZSBjYWNoZVxuICAgICAgICAgICAgICAgICRjb21waWxlKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZScpXG4gICAgLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLm1hcmtldGluZ01haW5Db250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5tYXJrZXRpbmdNZW51SXRlbVNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBtYXJrZXRpbmdNZW51SXRlbVNlcnZpY2UpIHtcbiAgICAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBudWxsO1xuXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUJsYWRlKCkge1xuICAgICAgICB2YXIgZW50aXRpZXMgPSBfLnNvcnRCeShtYXJrZXRpbmdNZW51SXRlbVNlcnZpY2UuaXRlbXMsICdpZCcpO1xuICAgICAgICAkc2NvcGUuYmxhZGUuY3VycmVudEVudGl0aWVzID0gZW50aXRpZXM7XG4gICAgICAgICRzY29wZS5ibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAkc2NvcGUuYmxhZGUub3BlbkJsYWRlKGVudGl0aWVzWzBdKTtcbiAgICB9XG5cbiAgICAkc2NvcGUuYmxhZGUub3BlbkJsYWRlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBkYXRhLmlkO1xuXG4gICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgIGlkOiAnbWFya2V0aW5nTWFpbkxpc3RDaGlsZHJlbicsXG4gICAgICAgICAgICB0aXRsZTogZGF0YS5uYW1lLFxuICAgICAgICAgICAgc3VidGl0bGU6ICdNYXJrZXRpbmcgc2VydmljZScsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBkYXRhLmNvbnRyb2xsZXIgfHwgJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLicgKyBkYXRhLmVudGl0eU5hbWUgKyAnTGlzdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6IGRhdGEudGVtcGxhdGUgfHwgJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk1hcmtldGluZykvU2NyaXB0cy8nICsgIGRhdGEuZW50aXR5TmFtZSArICAnL2JsYWRlcy8nICsgZGF0YS5lbnRpdHlOYW1lICsgJy1saXN0LnRwbC5odG1sJ1xuICAgICAgICB9O1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgJHNjb3BlLmJsYWRlKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLWZsYWcnO1xuXG4gICAgaW5pdGlhbGl6ZUJsYWRlKCk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmR5bmFtaWNDb250ZW50TGlzdENvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xuICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcblxuICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IG51bGw7XG5cbiAgICBmdW5jdGlvbiBpbml0aWFsaXplQmxhZGUoKSB7XG4gICAgICAgIHZhciBlbnRpdGllcyA9IFtcbiAgICAgICAgICAgIHsgaWQ6ICdEQ18xJywgbmFtZTogJ21hcmtldGluZy5ibGFkZXMuaXRlbXMubGlzdC50aXRsZScsIHN1Ym5hbWU6ICdtYXJrZXRpbmcuYmxhZGVzLml0ZW1zLmxpc3Quc3VidGl0bGUnLCB0aXRsZTogJ21hcmtldGluZy5ibGFkZXMuZHluYW1pY0NvbnRlbnQtbGlzdC5tZW51Lml0ZW1zLnRpdGxlJywgZGVzY3JpcHRpb246ICdtYXJrZXRpbmcuYmxhZGVzLmR5bmFtaWNDb250ZW50LWxpc3QubWVudS5pdGVtcy5kZXNjcmlwdGlvbicsIGljb246ICdmYS1pbmJveCcsIGVudGl0eU5hbWU6ICdpdGVtcycgfSxcbiAgICAgICAgICAgIHsgaWQ6ICdEQ18yJywgbmFtZTogJ21hcmtldGluZy5ibGFkZXMucGxhY2Vob2xkZXJzLmxpc3QudGl0bGUnLCBzdWJuYW1lOiAnbWFya2V0aW5nLmJsYWRlcy5wbGFjZWhvbGRlcnMubGlzdC5zdWJ0aXRsZScsIHRpdGxlOiAnbWFya2V0aW5nLmJsYWRlcy5keW5hbWljQ29udGVudC1saXN0Lm1lbnUucGxhY2Vob2xkZXJzLnRpdGxlJywgZGVzY3JpcHRpb246ICdtYXJrZXRpbmcuYmxhZGVzLmR5bmFtaWNDb250ZW50LWxpc3QubWVudS5wbGFjZWhvbGRlcnMuZGVzY3JpcHRpb24nLCBpY29uOiAnZmEtbG9jYXRpb24tYXJyb3cnLCBlbnRpdHlOYW1lOiAncGxhY2Vob2xkZXJzJyB9LFxuICAgICAgICAgICAgeyBpZDogJ0RDXzMnLCBuYW1lOiAnbWFya2V0aW5nLmJsYWRlcy5wdWJsaXNoaW5nLmxpc3QudGl0bGUnLCBzdWJuYW1lOiAnbWFya2V0aW5nLmJsYWRlcy5wdWJsaXNoaW5nLmxpc3Quc3VidGl0bGUnLCB0aXRsZTogJ21hcmtldGluZy5ibGFkZXMuZHluYW1pY0NvbnRlbnQtbGlzdC5tZW51LnB1Ymxpc2hpbmcudGl0bGUnLCBkZXNjcmlwdGlvbjogJ21hcmtldGluZy5ibGFkZXMuZHluYW1pY0NvbnRlbnQtbGlzdC5tZW51LnB1Ymxpc2hpbmcuZGVzY3JpcHRpb24nLCBpY29uOiAnZmEtcGFwZXJjbGlwJywgZW50aXR5TmFtZTogJ3B1Ymxpc2hpbmcnIH1dO1xuICAgICAgICBibGFkZS5jdXJyZW50RW50aXRpZXMgPSBlbnRpdGllcztcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgfTtcblxuICAgIGJsYWRlLm9wZW5CbGFkZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IGRhdGEuaWQ7XG5cbiAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgaWQ6ICdkeW5hbWljQ29udGVudExpc3QnLFxuICAgICAgICAgICAgdGl0bGU6IGRhdGEubmFtZSxcbiAgICAgICAgICAgIHN1YnRpdGxlOiBkYXRhLnN1Ym5hbWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuJyArIGRhdGEuZW50aXR5TmFtZSArICdEeW5hbWljQ29udGVudExpc3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTWFya2V0aW5nKS9TY3JpcHRzL2R5bmFtaWNDb250ZW50L2JsYWRlcy8nICsgZGF0YS5lbnRpdHlOYW1lICsgJy9saXN0LnRwbC5odG1sJ1xuICAgICAgICB9O1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgIH1cblxuICAgICRzY29wZS5ibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1jYWxlbmRhci1vJztcblxuICAgIGluaXRpYWxpemVCbGFkZSgpO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5hZGRDb250ZW50SXRlbXNFbGVtZW50Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5jYXRhbG9nTW9kdWxlLmNhdGVnb3JpZXMnLCAndmlydG9Db21tZXJjZS5jYXRhbG9nTW9kdWxlLml0ZW1zJywgJ3BsYXRmb3JtV2ViQXBwLmR5bmFtaWNQcm9wZXJ0aWVzLmFwaScsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIGNhdGVnb3JpZXMsIGl0ZW1zLCBkeW5hbWljUHJvcGVydGllcykge1xuXHR2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG5cdCRzY29wZS5wYWdlU2V0dGluZ3MgPSB7fTtcbiAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSAwO1xuICAgICRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSAxO1xuICAgICRzY29wZS5wYWdlU2V0dGluZ3MubnVtUGFnZXMgPSA1O1xuICAgICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnQgPSA5OTk7XG5cblx0YmxhZGUuYWRkRm9sZGVyID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBkYXRhID0geyBuYW1lOiAnJywgZGVzY3JpcHRpb246ICcnLCBwYXJlbnRGb2xkZXJJZDogYmxhZGUuY2hvc2VuRm9sZGVyLCBpdGVtczogW10sIGNoaWxkcmVuRm9sZGVyczogW10gfTtcblx0XHRibGFkZS5hZGROZXdGb2xkZXIoZGF0YSk7XG5cdH07XG5cblx0YmxhZGUuYWRkQ29udGVudEl0ZW0gPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHN0YXJ0ID0gJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAqICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnQgLSAkc2NvcGUucGFnZVNldHRpbmdzLml0ZW1zUGVyUGFnZUNvdW50O1xuXHRcdGR5bmFtaWNQcm9wZXJ0aWVzLnF1ZXJ5KHsgaWQ6ICdWaXJ0b0NvbW1lcmNlLk1hcmtldGluZ01vZHVsZS5Db3JlLk1vZGVsLkR5bmFtaWNDb250ZW50SXRlbScgfSwgZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgICBhbmd1bGFyLmZvckVhY2goZGF0YSwgZnVuY3Rpb24gKGl0ZW0pe1xuXHQgICAgICAgIFx0aXRlbS52YWx1ZXMgPSBbXTtcblx0ICAgICAgICBcdGl0ZW0uZGlzcGxheU5hbWVzID0gW107XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdmFyIGNvbnRlbnRJdGVtID0geyBuYW1lOiAnJywgZGVzY3JpcHRpb246ICcnLCBmb2xkZXJJZDogYmxhZGUuY2hvc2VuRm9sZGVyLCBkeW5hbWljUHJvcGVydGllczogZGF0YSB9O1xuXHQgICAgICAgIGJsYWRlLmFkZE5ld0NvbnRlbnRJdGVtKGNvbnRlbnRJdGVtKTtcblx0ICAgIH0pO1xuXHR9O1xuXG5cdCRzY29wZS5ibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZScpXG4gICAgLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLml0ZW1EZXRhaWxDb250cm9sbGVyJywgWyckc2NvcGUnLCAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuZHluYW1pY0NvbnRlbnQuY29udGVudEl0ZW1zJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAuZGlhbG9nU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC5keW5hbWljUHJvcGVydGllcy5kaWN0aW9uYXJ5SXRlbXNBcGknLCAncGxhdGZvcm1XZWJBcHAuc2V0dGluZ3MnLCAncGxhdGZvcm1XZWJBcHAuZHluYW1pY1Byb3BlcnRpZXMuYXBpJyxcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgZHluYW1pY0NvbnRlbnRJdGVtc0FwaSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgZGlhbG9nU2VydmljZSwgZGljdGlvbmFyeUl0ZW1zQXBpLCBzZXR0aW5ncywgZHluYW1pY1Byb3BlcnRpZXNBcGkpIHtcbiAgICAgICAgICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICAgICAgICAgIGJsYWRlLnVwZGF0ZVBlcm1pc3Npb24gPSAnbWFya2V0aW5nOnVwZGF0ZSc7XG5cbiAgICAgICAgICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFibGFkZS5pc05ldykge1xuICAgICAgICAgICAgICAgICAgICBkeW5hbWljQ29udGVudEl0ZW1zQXBpLmdldCh7IGlkOiBibGFkZS5lbnRpdHkuaWQgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljUHJvcGVydGllc0FwaS5zZWFyY2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdFR5cGU6IGJsYWRlLmVudGl0eS5vYmplY3RUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRha2U6IDEwMDAwICAgICAgICAgLy8gSXQgaXMgZm9yIGdldHRpbmcgYWxsIG9iamVjdCBkeW5hbWljIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkeW5hbWljUHJvcGVydGllc1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhd0R5bmFtaWNQcm9wZXJ0aWVzID0gZHluYW1pY1Byb3BlcnRpZXNSZXNwb25zZS5yZXN1bHRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uZWFjaChyYXdEeW5hbWljUHJvcGVydGllcywgZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcC52YWx1ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkUHJvcGVydHkgPSBfLmZpbmQocmVzcG9uc2UuZHluYW1pY1Byb3BlcnRpZXMsIGZ1bmN0aW9uIChvKSB7IHJldHVybiBvLmlkID09PSBwcm9wLmlkOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkUHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3AudmFsdWVzID0gZmlsdGVyZWRQcm9wZXJ0eS52YWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmR5bmFtaWNQcm9wZXJ0aWVzID0gcmF3RHluYW1pY1Byb3BlcnRpZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuZW50aXR5ID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYmxhZGUuSXNDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIENoYW5nZXMgY2hlY2sgbWV0aG9kIGVuc3VyZXMgdGhlIGZhY3Qgb2YgZGlmZmVyZW50IHByZXNlbnRhdGlvbiB3YXkgb2YgZHluYW1pYyBwcm9wZXJ0aWVzOlxuICAgICAgICAgICAgICAgIC8vIEluIHRoZSB3aG9sZSBvYmplY3QgYW5kIGR5bmFtaWMgcHJvcGVydGllcyB0aHJ1IHZhLWdlbmVyaWMtdmFsdWUtaW5wdXQgdGVtcGxhdGUgZGlyZWN0aXZlXG4gICAgICAgICAgICAgICAgLy8gRmlyc3QgY2hlY2sgb2JqZWN0cyBmb3IgZnVsbCBlcXVpdmFsZW5jZVxuICAgICAgICAgICAgICAgIGxldCBlcXVhbHMgPSBhbmd1bGFyLmVxdWFscyhibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICBpZiAoZXF1YWxzKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYmxhZGUub3JpZ0VudGl0eS5uYW1lICE9PSBibGFkZS5jdXJyZW50RW50aXR5Lm5hbWUgfHwgYmxhZGUub3JpZ0VudGl0eS5kZXNjcmlwdGlvbiAhPT0gYmxhZGUuY3VycmVudEVudGl0eS5kZXNjcmlwdGlvbilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyB2YWxpZGF0aW9uIGxvZ2ljIGlzIG9ubHkgbmVlZGVkIGZvciBkeW5hbWljIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgcG9zc2liaWxpdHkgdGhleSBhcmUgcmVhbGx5IGVxdWl2YWxlbnQgYnV0IGhhdmUgYSBkaWZmZXJlbnQgcmVwcmVzZW50YXRpb24gb2YgZHluYW1pYyBwcm9wZXJ0eSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBlcXVhbHMgPSBhbmd1bGFyLmVxdWFscyhfLm9taXQoYmxhZGUub3JpZ0VudGl0eSwgWydkeW5hbWljUHJvcGVydGllcyddKSwgXy5vbWl0KGJsYWRlLmN1cnJlbnRFbnRpdHksIFsnZHluYW1pY1Byb3BlcnRpZXMnXSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWJsYWRlLm9yaWdFbnRpdHkuZHluYW1pY1Byb3BlcnRpZXMgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICFibGFkZS5jdXJyZW50RW50aXR5LmR5bmFtaWNQcm9wZXJ0aWVzIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhYmxhZGUub3JpZ0VudGl0eS5keW5hbWljUHJvcGVydGllcy5sZW5ndGggfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICFibGFkZS5jdXJyZW50RW50aXR5LmR5bmFtaWNQcm9wZXJ0aWVzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcXVhbHM7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb3JpZ2luYWxFbnRpdHlEeW5hbWljUHJvcGVydHkgb2YgYmxhZGUub3JpZ0VudGl0eS5keW5hbWljUHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRFbnRpdHlEeW5hbWljUHJvcGVydHkgPSBibGFkZS5jdXJyZW50RW50aXR5LmR5bmFtaWNQcm9wZXJ0aWVzLmZpbmQoeCA9PiB4Lm5hbWUgPT0gb3JpZ2luYWxFbnRpdHlEeW5hbWljUHJvcGVydHkubmFtZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbEVudGl0eUR5bmFtaWNQcm9wZXJ0eS5pc0RpY3Rpb25hcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkaWN0aW9uYXJpZXMgY29tcGFyaXNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhc2Ugd2hlbiBib3RoIG9yaWcgYW5kIGN1cnJlbnQgdmFsdWVzIGFyZSBlbXB0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkaWN0aW9uYXJ5IGZpZWxkIGNsZWFyaW5nIChwcmVzcyAnQmFja3NwYWNlJykgYWZ0ZXIgc2VsZWN0aW9uIGlzIHJlYXNvbiB0byBjdXJyZW50RW50aXR5RHluYW1pY1Byb3BlcnR5IHVuZGVmaW5lZCB2YWx1ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VyckRpY3Rpb25hcnlWYWx1ZXNJZHMgPSBjdXJyZW50RW50aXR5RHluYW1pY1Byb3BlcnR5LnZhbHVlcy5maWx0ZXIoeCA9PiB4LnZhbHVlICE9IHVuZGVmaW5lZCkubWFwKHggPT4geC52YWx1ZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJ0V2ZXJ5JyBmdW5jIHJlcXVpcmUgbGVuZ3RoIGNoZWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXF1YWxzID0gb3JpZ2luYWxFbnRpdHlEeW5hbWljUHJvcGVydHkudmFsdWVzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG9yaWdpbmFsRW50aXR5RHluYW1pY1Byb3BlcnR5LnZhbHVlcy5ldmVyeSh4ID0+IGN1cnJEaWN0aW9uYXJ5VmFsdWVzSWRzLmluY2x1ZGVzKHgudmFsdWVJZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogIWN1cnJEaWN0aW9uYXJ5VmFsdWVzSWRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9yaWdpbmFsRW50aXR5RHluYW1pY1Byb3BlcnR5LmlzQXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhcnJheXMgY29tcGFyaXNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGFycmF5cyBlcXVhbGl0eSAoYWRkaW5nIGFuIGVsZW1lbnQgYWZ0ZXIgdGhlIHNhbWUgZWxlbWVudCBkZWxldGF0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcmlnaW5hbFZhbHVlcyA9IG9yaWdpbmFsRW50aXR5RHluYW1pY1Byb3BlcnR5LnZhbHVlcy5tYXAoeCA9PiB4LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFZhbHVlcyA9IGN1cnJlbnRFbnRpdHlEeW5hbWljUHJvcGVydHkudmFsdWVzLm1hcCh4ID0+IHgudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVxdWFscyA9IG9yaWdpbmFsRW50aXR5RHluYW1pY1Byb3BlcnR5LnZhbHVlcy5sZW5ndGggPT0gY3VycmVudEVudGl0eUR5bmFtaWNQcm9wZXJ0eS52YWx1ZXMubGVuZ3RoICYmIG9yaWdpbmFsVmFsdWVzLmV2ZXJ5KHggPT4gY3VycmVudFZhbHVlcy5pbmNsdWRlcyh4KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNpbXBsZSB0eXBlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbnRpdHlEeW5hbWljUHJvcGVydHkudmFsdWVzID0gb3JpZ2luYWxFbnRpdHlEeW5hbWljUHJvcGVydHkudmFsdWVzLmxlbmd0aCA9PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY3VycmVudEVudGl0eUR5bmFtaWNQcm9wZXJ0eS52YWx1ZXMuZmlsdGVyKHggPT4geC52YWx1ZSAhPSAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjdXJyZW50RW50aXR5RHluYW1pY1Byb3BlcnR5LnZhbHVlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcXVhbHMgPSBhbmd1bGFyLmVxdWFscyhvcmlnaW5hbEVudGl0eUR5bmFtaWNQcm9wZXJ0eS52YWx1ZXMsIGN1cnJlbnRFbnRpdHlEeW5hbWljUHJvcGVydHkudmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXF1YWxzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhZXF1YWxzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGJsYWRlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW107XG5cbiAgICAgICAgICAgICAgICBpZiAoIWJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnNhdmVcIiwgaWNvbjogJ2ZhcyBmYS1zYXZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnNhdmVDaGFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBibGFkZS5Jc0NoYW5nZWQoKSAmJiAkc2NvcGUuZm9ybVNjb3BlLiR2YWxpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZXNldFwiLCBpY29uOiAnZmEgZmEtdW5kbycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkoYmxhZGUub3JpZ0VudGl0eSwgYmxhZGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBibGFkZS5Jc0NoYW5nZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5kZWxldGVcIiwgaWNvbjogJ2ZhcyBmYS10cmFzaC1hbHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpYWxvZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcImNvbmZpcm1EZWxldGVDb250ZW50SXRlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwibWFya2V0aW5nLmRpYWxvZ3MuY29udGVudC1pdGVtLWRlbGV0ZS50aXRsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJtYXJrZXRpbmcuZGlhbG9ncy5jb250ZW50LWl0ZW0tZGVsZXRlLm1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljQ29udGVudEl0ZW1zQXBpLmRlbGV0ZSh7IGlkczogW2JsYWRlLmN1cnJlbnRFbnRpdHkuaWRdIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmluaXRpYWxpemVCbGFkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKGJsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbkRpYWxvZyhkaWFsb2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJtYXJrZXRpbmcuY29tbWFuZHMubWFuYWdlLXR5cGUtcHJvcGVydGllc1wiLCBpY29uOiAnZmEgZmEtZWRpdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogJ2R5bmFtaWNQcm9wZXJ0eUxpc3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RUeXBlOiBibGFkZS5jdXJyZW50RW50aXR5Lm9iamVjdFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdwbGF0Zm9ybVdlYkFwcC5keW5hbWljUHJvcGVydHlMaXN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnJChQbGF0Zm9ybSkvU2NyaXB0cy9hcHAvZHluYW1pY1Byb3BlcnRpZXMvYmxhZGVzL2R5bmFtaWNQcm9wZXJ0eS1saXN0LnRwbC5odG1sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuaXNEZWZpbmVkKGJsYWRlLmN1cnJlbnRFbnRpdHkub2JqZWN0VHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGJsYWRlLmVudGl0eTtcbiAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5ID0gYW5ndWxhci5jb3B5KGJsYWRlLm9yaWdFbnRpdHkpO1xuICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYmxhZGUuc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgICAgICAgICBkeW5hbWljQ29udGVudEl0ZW1zQXBpLnNhdmUoYmxhZGUuY3VycmVudEVudGl0eSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmluaXRpYWxpemVCbGFkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKGJsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkeW5hbWljQ29udGVudEl0ZW1zQXBpLnVwZGF0ZShibGFkZS5jdXJyZW50RW50aXR5LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUuaW5pdGlhbGl6ZUJsYWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5vcmlnRW50aXR5ID0gYW5ndWxhci5jb3B5KGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5lZGl0RGljdGlvbmFyeSA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IFwicHJvcGVydHlEaWN0aW9uYXJ5XCIsXG4gICAgICAgICAgICAgICAgICAgIGlzQXBpU2F2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEVudGl0eTogcHJvcGVydHksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdwbGF0Zm9ybVdlYkFwcC5wcm9wZXJ0eURpY3Rpb25hcnlDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICckKFBsYXRmb3JtKS9TY3JpcHRzL2FwcC9keW5hbWljUHJvcGVydGllcy9ibGFkZXMvcHJvcGVydHktZGljdGlvbmFyeS50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlc0NvbmZpcm1lZEZuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5LmR5bmFtaWNQcm9wZXJ0aWVzID0gYW5ndWxhci5jb3B5KGJsYWRlLmN1cnJlbnRFbnRpdHkuZHluYW1pY1Byb3BlcnRpZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLmdldERpY3Rpb25hcnlWYWx1ZXMgPSBmdW5jdGlvbiAocHJvcGVydHksIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgZGljdGlvbmFyeUl0ZW1zQXBpLnF1ZXJ5KHsgaWQ6IHByb3BlcnR5Lm9iamVjdFR5cGUsIHByb3BlcnR5SWQ6IHByb3BlcnR5LmlkIH0sIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5zZXRGb3JtID0gZnVuY3Rpb24gKGZvcm0pIHsgJHNjb3BlLmZvcm1TY29wZSA9IGZvcm07IH07XG5cbiAgICAgICAgICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLWluYm94JztcblxuICAgICAgICAgICAgc2V0dGluZ3MuZ2V0VmFsdWVzKHsgaWQ6ICdWaXJ0b0NvbW1lcmNlLkNvcmUuR2VuZXJhbC5MYW5ndWFnZXMnIH0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxhbmd1YWdlcyA9IGRhdGE7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLml0ZW1Gb2xkZXJEZXRhaWxDb250cm9sbGVyJywgWyckc2NvcGUnLCAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuZHluYW1pY0NvbnRlbnQuZm9sZGVycycsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLmRpYWxvZ1NlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBtYXJrZXRpbmdfZHluYW1pY0NvbnRlbnRzX3Jlc19mb2xkZXJzLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBkaWFsb2dTZXJ2aWNlKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgIGJsYWRlLnVwZGF0ZVBlcm1pc3Npb24gPSAnbWFya2V0aW5nOnVwZGF0ZSc7XG4gICAgXG4gICAgYmxhZGUuc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG5cbiAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICBtYXJrZXRpbmdfZHluYW1pY0NvbnRlbnRzX3Jlc19mb2xkZXJzLnNhdmUoYmxhZGUuY3VycmVudEVudGl0eSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5pbml0aWFsaXplQmxhZGUoKTtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUoYmxhZGUpO1xuICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtYXJrZXRpbmdfZHluYW1pY0NvbnRlbnRzX3Jlc19mb2xkZXJzLnVwZGF0ZShibGFkZS5jdXJyZW50RW50aXR5LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUuaW5pdGlhbGl6ZUJsYWRlKCk7XG4gICAgICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLWluYm94JztcblxuICAgIGlmICghYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuc2F2ZVwiLCBpY29uOiAnZmFzIGZhLXNhdmUnLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGJsYWRlLnNhdmVDaGFuZ2VzLFxuICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFhbmd1bGFyLmVxdWFscyhibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KSAmJiAhJHNjb3BlLmZvcm1TY29wZS4kaW52YWxpZDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZXNldFwiLCBpY29uOiAnZmEgZmEtdW5kbycsXG4gICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkoYmxhZGUub3JpZ0VudGl0eSwgYmxhZGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhYW5ndWxhci5lcXVhbHMoYmxhZGUub3JpZ0VudGl0eSwgYmxhZGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiBibGFkZS51cGRhdGVQZXJtaXNzaW9uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuZGVsZXRlXCIsIGljb246ICdmYXMgZmEtdHJhc2gtYWx0JyxcbiAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJjb25maXJtRGVsZXRlQ29udGVudEl0ZW1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIm1hcmtldGluZy5kaWFsb2dzLmNvbnRlbnQtZm9sZGVyLWRlbGV0ZS50aXRsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJtYXJrZXRpbmcuZGlhbG9ncy5jb250ZW50LWZvbGRlci1kZWxldGUubWVzc2FnZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldGluZ19keW5hbWljQ29udGVudHNfcmVzX2ZvbGRlcnMuZGVsZXRlKHsgaWRzOiBbYmxhZGUuY3VycmVudEVudGl0eS5pZF0gfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKGJsYWRlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGhTdGVwcyA9IGJsYWRlLmN1cnJlbnRFbnRpdHkub3V0bGluZS5zcGxpdCgnOycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gcGF0aFN0ZXBzW3BhdGhTdGVwcy5sZW5ndGggLSAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmNob3NlbkZvbGRlciA9IGlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUuaW5pdGlhbGl6ZUJsYWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Q29uZmlybWF0aW9uRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2V0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7ICRzY29wZS5mb3JtU2NvcGUgPSBmb3JtOyB9O1xuICAgIFxuICAgIGJsYWRlLm9yaWdFbnRpdHkgPSBibGFkZS5lbnRpdHk7XG4gICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5KTtcbiAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuaXRlbXNEeW5hbWljQ29udGVudExpc3RDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVVdGlscycsICdwbGF0Zm9ybVdlYkFwcC51aUdyaWRIZWxwZXInLCAncGxhdGZvcm1XZWJBcHAuZGlhbG9nU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5keW5hbWljQ29udGVudC5mb2xkZXJzJywgJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmR5bmFtaWNDb250ZW50LmNvbnRlbnRJdGVtcycsXG5mdW5jdGlvbiAoJHNjb3BlLCBibGFkZVV0aWxzLCB1aUdyaWRIZWxwZXIsIGRpYWxvZ1NlcnZpY2UsIGR5bmFtaWNDb250ZW50Rm9sZGVyc0FwaSwgZHluYW1pY0NvbnRlbnRJdGVtc0FwaSkge1xuICAgIHZhciBibGFkZU5hdmlnYXRpb25TZXJ2aWNlID0gYmxhZGVVdGlscy5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlO1xuICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1pbmJveCc7XG4gICAgYmxhZGUuY2hvc2VuRm9sZGVySWQgPSAnQ29udGVudEl0ZW0nO1xuICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkgPSB7fTtcblxuICAgIGJsYWRlLmluaXRpYWxpemVCbGFkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgIH07XG5cbiAgICBibGFkZS5hZGROZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VDaGlsZHJlbkJsYWRlcyhibGFkZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkTm9kZUlkID0gbnVsbDtcblxuICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgIGlkOiAnbGlzdEl0ZW1DaGlsZCcsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdtYXJrZXRpbmcuYmxhZGVzLml0ZW1zLmFkZC50aXRsZScsXG4gICAgICAgICAgICAgICAgc3VidGl0bGU6ICdtYXJrZXRpbmcuYmxhZGVzLml0ZW1zLmFkZC5zdWJ0aXRsZScsXG4gICAgICAgICAgICAgICAgY2hvc2VuRm9sZGVyOiBibGFkZS5jaG9zZW5Gb2xkZXJJZCxcbiAgICAgICAgICAgICAgICBhZGROZXdDb250ZW50SXRlbTogYWRkTmV3Q29udGVudEl0ZW0sXG4gICAgICAgICAgICAgICAgYWRkTmV3Rm9sZGVyOiBhZGROZXdGb2xkZXIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmFkZENvbnRlbnRJdGVtc0VsZW1lbnRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk1hcmtldGluZykvU2NyaXB0cy9keW5hbWljQ29udGVudC9ibGFkZXMvaXRlbXMvYWRkLnRwbC5odG1sJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBhZGROZXdDb250ZW50SXRlbShkYXRhKSB7XG4gICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgIGlkOiAnbGlzdEl0ZW1DaGlsZCcsXG4gICAgICAgICAgICB0aXRsZTogJ21hcmtldGluZy5ibGFkZXMuaXRlbXMuY29udGVudC1pdGVtLWRldGFpbHMudGl0bGUtbmV3JyxcbiAgICAgICAgICAgIHN1YnRpdGxlOiAnbWFya2V0aW5nLmJsYWRlcy5pdGVtcy5jb250ZW50LWl0ZW0tZGV0YWlscy5zdWJ0aXRsZS1uZXcnLFxuICAgICAgICAgICAgZW50aXR5OiBkYXRhLFxuICAgICAgICAgICAgaXNOZXc6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuaXRlbURldGFpbENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5NYXJrZXRpbmcpL1NjcmlwdHMvZHluYW1pY0NvbnRlbnQvYmxhZGVzL2l0ZW1zL2l0ZW0tZGV0YWlsLnRwbC5odG1sJ1xuICAgICAgICB9O1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZE5ld0ZvbGRlcihkYXRhKSB7XG4gICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgIGlkOiAnbGlzdEl0ZW1DaGlsZCcsXG4gICAgICAgICAgICB0aXRsZTogJ21hcmtldGluZy5ibGFkZXMuaXRlbXMuZm9sZGVyLWRldGFpbHMudGl0bGUtbmV3JyxcbiAgICAgICAgICAgIHN1YnRpdGxlOiAnbWFya2V0aW5nLmJsYWRlcy5pdGVtcy5mb2xkZXItZGV0YWlscy5zdWJ0aXRsZS1uZXcnLFxuICAgICAgICAgICAgZW50aXR5OiBkYXRhLFxuICAgICAgICAgICAgaXNOZXc6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuaXRlbUZvbGRlckRldGFpbENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5NYXJrZXRpbmcpL1NjcmlwdHMvZHluYW1pY0NvbnRlbnQvYmxhZGVzL2l0ZW1zL2l0ZW1Gb2xkZXItZGV0YWlsLnRwbC5odG1sJ1xuICAgICAgICB9O1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgIH1cblxuICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgIGR5bmFtaWNDb250ZW50SXRlbXNBcGkuc2VhcmNoKHtcbiAgICAgICAgICAgIHNraXA6ICgkc2NvcGUucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlIC0gMSkgKiAkc2NvcGUucGFnZVNldHRpbmdzLml0ZW1zUGVyUGFnZUNvdW50LFxuICAgICAgICAgICAgdGFrZTogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCxcbiAgICAgICAgICAgIGtleXdvcmQ6IGJsYWRlLnNlYXJjaEtleXdvcmQsXG4gICAgICAgICAgICBmb2xkZXJJZDogYmxhZGUuY2hvc2VuRm9sZGVySWQsXG4gICAgICAgICAgICBzb3J0OiB1aUdyaWRIZWxwZXIuZ2V0U29ydEV4cHJlc3Npb24oJHNjb3BlKSxcbiAgICAgICAgICAgIHJlc3BvbnNlR3JvdXA6ICcxOCdcbiAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIF8uZWFjaChkYXRhLnJlc3VsdHMsIGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgICAgIGVudHJ5LmlzRm9sZGVyID0gZW50cnkub2JqZWN0VHlwZSA9PT0gJ0R5bmFtaWNDb250ZW50Rm9sZGVyJztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkc2NvcGUubGlzdEVudHJpZXMgPSBkYXRhLnJlc3VsdHM7XG4gICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSBkYXRhLnRvdGFsQ291bnQ7XG4gICAgICAgICAgICBzZXRCcmVhZGNydW1icygpO1xuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3BsYXRmb3JtLmNvbW1hbmRzLnJlZnJlc2gnLCBpY29uOiAnZmEgZmEtcmVmcmVzaCcsXG4gICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBibGFkZS5yZWZyZXNoLFxuICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiAncGxhdGZvcm0uY29tbWFuZHMuYWRkJywgaWNvbjogJ2ZhcyBmYS1wbHVzJyxcbiAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGJsYWRlLmFkZE5ldyxcbiAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ3BsYXRmb3JtLmNvbW1hbmRzLmRlbGV0ZScsIGljb246ICdmYSBmYS10cmFzaCcsXG4gICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZUl0ZW1zKCRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuZ3JpZEFwaSAmJiBfLmFueSgkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XTtcblxuICAgIGZ1bmN0aW9uIHNldEJyZWFkY3J1bWJzKCkge1xuICAgICAgICBpZiAoYmxhZGUuYnJlYWRjcnVtYnMpIHtcbiAgICAgICAgICAgIHZhciBicmVhZGNydW1iID0gXy5maW5kKGJsYWRlLmJyZWFkY3J1bWJzLCBmdW5jdGlvbiAoYikgeyByZXR1cm4gYi5pZCA9PT0gYmxhZGUuY3VycmVudEVudGl0eS5pZDsgfSk7XG4gICAgICAgICAgICBpZiAoIWJyZWFkY3J1bWIpIHtcbiAgICAgICAgICAgICAgICBicmVhZGNydW1iID0gZ2VuZXJhdGVCcmVhZGNydW1iKGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgIGJsYWRlLmJyZWFkY3J1bWJzLnB1c2goYnJlYWRjcnVtYik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IGJsYWRlLmJyZWFkY3J1bWJzLmluZGV4T2YoYnJlYWRjcnVtYik7XG4gICAgICAgICAgICAgICAgYmxhZGUuYnJlYWRjcnVtYnMgPSBibGFkZS5icmVhZGNydW1icy5zbGljZSgwLCBwb3NpdGlvbiArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmxhZGUuYnJlYWRjcnVtYnMgPSBbZ2VuZXJhdGVCcmVhZGNydW1iKHsgaWQ6ICdDb250ZW50SXRlbScsIG5hbWU6ICdtYXJrZXRpbmcuYmxhZGVzLml0ZW1zLmxpc3QuYnJlYWQtY3J1bWItdG9wJywgaXNGb2xkZXI6IHRydWUgfSldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVCcmVhZGNydW1iKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBub2RlLmlkLFxuICAgICAgICAgICAgbmFtZTogbm9kZS5uYW1lLFxuICAgICAgICAgICAgbmF2aWdhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0Tm9kZShub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgZmlsdGVyID0gJHNjb3BlLmZpbHRlciA9IHt9O1xuICAgIGZpbHRlci5jcml0ZXJpYUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkc2NvcGUucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID4gMSkge1xuICAgICAgICAgICAgJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLmNsZWFyS2V5d29yZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUuc2VhcmNoS2V5d29yZCA9IG51bGw7XG4gICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChub2RlLmlkICYmIG5vZGUuaXNGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5ID0gbm9kZTtcbiAgICAgICAgICAgICAgICBibGFkZS5jaG9zZW5Gb2xkZXJJZCA9IG5vZGUuaWQ7XG4gICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUub3BlbkRldGFpbHNCbGFkZShub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5vcGVuRGV0YWlsc0JsYWRlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkTm9kZUlkID0gbm9kZS5pZDtcblxuICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICBpZDogJ2xpc3RJdGVtQ2hpbGQnLFxuICAgICAgICAgICAgZW50aXR5OiBub2RlLFxuICAgICAgICAgICAgaXNOZXc6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIGlmIChub2RlLmlzRm9sZGVyKSB7XG4gICAgICAgICAgICBuZXdCbGFkZS50aXRsZSA9ICdtYXJrZXRpbmcuYmxhZGVzLml0ZW1zLmZvbGRlci1kZXRhaWxzLnRpdGxlJztcbiAgICAgICAgICAgIG5ld0JsYWRlLnN1YnRpdGxlID0gJ21hcmtldGluZy5ibGFkZXMuaXRlbXMuZm9sZGVyLWRldGFpbHMuc3VidGl0bGUnO1xuICAgICAgICAgICAgbmV3QmxhZGUuY29udHJvbGxlciA9ICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5pdGVtRm9sZGVyRGV0YWlsQ29udHJvbGxlcic7XG4gICAgICAgICAgICBuZXdCbGFkZS50ZW1wbGF0ZSA9ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5NYXJrZXRpbmcpL1NjcmlwdHMvZHluYW1pY0NvbnRlbnQvYmxhZGVzL2l0ZW1zL2l0ZW1Gb2xkZXItZGV0YWlsLnRwbC5odG1sJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld0JsYWRlLnRpdGxlID0gJ21hcmtldGluZy5ibGFkZXMuaXRlbXMuY29udGVudC1pdGVtLWRldGFpbHMudGl0bGUnO1xuICAgICAgICAgICAgbmV3QmxhZGUuc3VidGl0bGUgPSAnbWFya2V0aW5nLmJsYWRlcy5pdGVtcy5jb250ZW50LWl0ZW0tZGV0YWlscy5zdWJ0aXRsZSc7XG4gICAgICAgICAgICBuZXdCbGFkZS5jb250cm9sbGVyID0gJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLml0ZW1EZXRhaWxDb250cm9sbGVyJztcbiAgICAgICAgICAgIG5ld0JsYWRlLnRlbXBsYXRlID0gJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk1hcmtldGluZykvU2NyaXB0cy9keW5hbWljQ29udGVudC9ibGFkZXMvaXRlbXMvaXRlbS1kZXRhaWwudHBsLmh0bWwnO1xuICAgICAgICB9XG4gICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kZWxldGVJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IFwiY29uZmlybURlbGV0ZUNvbnRlbnRJdGVtc0ZvbGRlclwiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIm1hcmtldGluZy5kaWFsb2dzLmNvbnRlbnQtaXRlbS1mb2xkZXItZGVsZXRlLnRpdGxlXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJtYXJrZXRpbmcuZGlhbG9ncy5jb250ZW50LWl0ZW0tZm9sZGVyLWRlbGV0ZS5tZXNzYWdlXCIsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmb2xkZXJJdGVtcyA9IF8uZmlsdGVyKGl0ZW1zLCBmdW5jdGlvbiAoaSkgeyByZXR1cm4gaS5pc0ZvbGRlcjsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9sZGVySXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHluYW1pY0NvbnRlbnRGb2xkZXJzQXBpLmRlbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkczogXy5wbHVjayhmb2xkZXJJdGVtcywgJ2lkJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBibGFkZS5yZWZyZXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50SXRlbXMgPSBfLmZpbHRlcihpdGVtcywgZnVuY3Rpb24gKGkpIHsgcmV0dXJuICFpLmlzRm9sZGVyOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50SXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHluYW1pY0NvbnRlbnRJdGVtc0FwaS5kZWxldGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHM6IF8ucGx1Y2soY29udGVudEl0ZW1zLCAnaWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGJsYWRlLnJlZnJlc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbkRpYWxvZyhkaWFsb2cpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gdWktZ3JpZFxuICAgICRzY29wZS5zZXRHcmlkT3B0aW9ucyA9IGZ1bmN0aW9uIChncmlkT3B0aW9ucykge1xuICAgICAgICAkc2NvcGUuZ3JpZE9wdGlvbnMgPSBncmlkT3B0aW9ucztcblxuICAgICAgICBncmlkT3B0aW9ucy5vblJlZ2lzdGVyQXBpID0gZnVuY3Rpb24gKGdyaWRBcGkpIHtcbiAgICAgICAgICAgIGdyaWRBcGkuY29yZS5vbi5zb3J0Q2hhbmdlZCgkc2NvcGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJsYWRlLmlzTG9hZGluZykgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYmxhZGVVdGlscy5pbml0aWFsaXplUGFnaW5hdGlvbigkc2NvcGUpO1xuICAgIH07XG59XSk7XG4iLCLvu79hbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmFkZFBsYWNlaG9sZGVyRWxlbWVudENvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3ZpcnRvQ29tbWVyY2UuY2F0YWxvZ01vZHVsZS5jYXRlZ29yaWVzJywgJ3ZpcnRvQ29tbWVyY2UuY2F0YWxvZ01vZHVsZS5pdGVtcycsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIGNhdGVnb3JpZXMsIGl0ZW1zKSB7XG5cdHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcblxuXHRibGFkZS5hZGRGb2xkZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGRhdGEgPSB7IG91dGxpbmU6ICcnLCBuYW1lOiAnJywgZGVzY3JpcHRpb246ICcnLCBwYXJlbnRGb2xkZXJJZDogYmxhZGUuY2hvc2VuRm9sZGVyfTtcblx0XHRibGFkZS5hZGROZXdGb2xkZXIoZGF0YSk7XG5cdH07XG5cblx0YmxhZGUuYWRkUGxhY2Vob2xkZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgZGF0YSA9IHsgbmFtZTogJycsIGRlc2NyaXB0aW9uOiAnJywgaW1hZ2VVcmw6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5NYXJrZXRpbmcpL0NvbnRlbnQvaW1hZ2VzL25vaW1hZ2UucG5nJywgZm9sZGVySWQ6IGJsYWRlLmNob3NlbkZvbGRlciB9O1xuXHRcdGJsYWRlLmFkZE5ld1BsYWNlaG9sZGVyKGRhdGEpO1xuXHR9O1xuXG5cdCRzY29wZS5ibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuYWRkRm9sZGVyUGxhY2Vob2xkZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuZHluYW1pY0NvbnRlbnQuZm9sZGVycycsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLmRpYWxvZ1NlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBtYXJrZXRpbmdfZHluYW1pY0NvbnRlbnRzX3Jlc19mb2xkZXJzLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBkaWFsb2dTZXJ2aWNlKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgIGJsYWRlLnVwZGF0ZVBlcm1pc3Npb24gPSAnbWFya2V0aW5nOnVwZGF0ZSc7XG5cbiAgICBibGFkZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBibGFkZS5vcmlnRW50aXR5ID0gYmxhZGUuZW50aXR5O1xuICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5ID0gYW5ndWxhci5jb3B5KGJsYWRlLm9yaWdFbnRpdHkpO1xuICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgYmxhZGUuc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgbWFya2V0aW5nX2R5bmFtaWNDb250ZW50c19yZXNfZm9sZGVycy5zYXZlKHt9LCBibGFkZS5jdXJyZW50RW50aXR5LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VCbGFkZShibGFkZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1hcmtldGluZ19keW5hbWljQ29udGVudHNfcmVzX2ZvbGRlcnMudXBkYXRlKHt9LCBibGFkZS5jdXJyZW50RW50aXR5LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoIWJsYWRlLmlzTmV3KSB7XG4gICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnNhdmVcIiwgaWNvbjogJ2ZhcyBmYS1zYXZlJyxcbiAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnNhdmVDaGFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhYW5ndWxhci5lcXVhbHMoYmxhZGUub3JpZ0VudGl0eSwgYmxhZGUuY3VycmVudEVudGl0eSkgJiYgISRzY29wZS5mb3JtU2NvcGUuJGludmFsaWQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiBibGFkZS51cGRhdGVQZXJtaXNzaW9uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucmVzZXRcIiwgaWNvbjogJ2ZhIGZhLXVuZG8nLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KGJsYWRlLm9yaWdFbnRpdHksIGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWFuZ3VsYXIuZXF1YWxzKGJsYWRlLm9yaWdFbnRpdHksIGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmRlbGV0ZVwiLCBpY29uOiAnZmFzIGZhLXRyYXNoLWFsdCcsXG4gICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiY29uZmlybURlbGV0ZUNvbnRlbnRQbGFjZWhvbGRlcnNGb2xkZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIm1hcmtldGluZy5kaWFsb2dzLnBsYWNlaG9sZGVycy1mb2xkZXItZGVsZXRlLnRpdGxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIm1hcmtldGluZy5kaWFsb2dzLnBsYWNlaG9sZGVycy1mb2xkZXItZGVsZXRlLm1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXRpbmdfZHluYW1pY0NvbnRlbnRzX3Jlc19mb2xkZXJzLmRlbGV0ZSh7IGlkczogW2JsYWRlLmN1cnJlbnRFbnRpdHkuaWRdIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXRoU3RlcHMgPSBibGFkZS5jdXJyZW50RW50aXR5Lm91dGxpbmUuc3BsaXQoJzsnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHBhdGhTdGVwc1twYXRoU3RlcHMubGVuZ3RoIC0gMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5jaG9zZW5Gb2xkZXIgPSBpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmluaXRpYWxpemUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKGJsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3dDb25maXJtYXRpb25EaWFsb2coZGlhbG9nKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiBibGFkZS51cGRhdGVQZXJtaXNzaW9uXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgJHNjb3BlLnNldEZvcm0gPSBmdW5jdGlvbiAoZm9ybSkgeyAkc2NvcGUuZm9ybVNjb3BlID0gZm9ybTsgfTtcblxuICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLWxvY2F0aW9uLWFycm93JztcblxuICAgIGJsYWRlLmluaXRpYWxpemUoKTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUucGxhY2Vob2xkZXJzRHluYW1pY0NvbnRlbnRMaXN0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlVXRpbHMnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJywgJ3BsYXRmb3JtV2ViQXBwLmRpYWxvZ1NlcnZpY2UnLCAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuZHluYW1pY0NvbnRlbnQuZm9sZGVycycsICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5keW5hbWljQ29udGVudC5jb250ZW50UGxhY2VzJyxcbmZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlVXRpbHMsIHVpR3JpZEhlbHBlciwgZGlhbG9nU2VydmljZSwgZHluYW1pY0NvbnRlbnRGb2xkZXJzQXBpLCBjb250ZW50UGxhY2VzQXBpKSB7XG4gICAgdmFyIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UgPSBibGFkZVV0aWxzLmJsYWRlTmF2aWdhdGlvblNlcnZpY2U7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLWxvY2F0aW9uLWFycm93JztcbiAgICBibGFkZS5jaG9zZW5Gb2xkZXJJZCA9ICdDb250ZW50UGxhY2UnO1xuICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkgPSB7fTtcblxuICAgIGJsYWRlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICB9O1xuXG4gICAgYmxhZGUuYWRkTmV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IG51bGw7XG5cbiAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICBpZDogJ2xpc3RJdGVtQ2hpbGQnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnbWFya2V0aW5nLmJsYWRlcy5wbGFjZWhvbGRlcnMuYWRkLnRpdGxlJyxcbiAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ21hcmtldGluZy5ibGFkZXMucGxhY2Vob2xkZXJzLmFkZC5zdWJ0aXRsZScsXG4gICAgICAgICAgICAgICAgY2hvc2VuRm9sZGVyOiBibGFkZS5jaG9zZW5Gb2xkZXJJZCxcbiAgICAgICAgICAgICAgICBhZGROZXdGb2xkZXI6IGFkZE5ld0ZvbGRlcixcbiAgICAgICAgICAgICAgICBhZGROZXdQbGFjZWhvbGRlcjogYWRkTmV3UGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmFkZFBsYWNlaG9sZGVyRWxlbWVudENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTWFya2V0aW5nKS9TY3JpcHRzL2R5bmFtaWNDb250ZW50L2JsYWRlcy9wbGFjZWhvbGRlcnMvYWRkLnRwbC5odG1sJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBhZGROZXdGb2xkZXIoZGF0YSkge1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICBpZDogJ2xpc3RJdGVtQ2hpbGQnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnbWFya2V0aW5nLmJsYWRlcy5wbGFjZWhvbGRlcnMuZm9sZGVyLWRldGFpbHMudGl0bGUtbmV3JyxcbiAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ21hcmtldGluZy5ibGFkZXMucGxhY2Vob2xkZXJzLmZvbGRlci1kZXRhaWxzLnN1YnRpdGxlLW5ldycsXG4gICAgICAgICAgICAgICAgZW50aXR5OiBkYXRhLFxuICAgICAgICAgICAgICAgIGlzTmV3OiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5hZGRGb2xkZXJQbGFjZWhvbGRlckNvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTWFya2V0aW5nKS9TY3JpcHRzL2R5bmFtaWNDb250ZW50L2JsYWRlcy9wbGFjZWhvbGRlcnMvZm9sZGVyLWRldGFpbHMudHBsLmh0bWwnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkTmV3UGxhY2Vob2xkZXIoZGF0YSkge1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICBpZDogJ2xpc3RJdGVtQ2hpbGQnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnbWFya2V0aW5nLmJsYWRlcy5wbGFjZWhvbGRlcnMucGxhY2Vob2xkZXItZGV0YWlscy50aXRsZS1uZXcnLFxuICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnbWFya2V0aW5nLmJsYWRlcy5wbGFjZWhvbGRlcnMucGxhY2Vob2xkZXItZGV0YWlscy5zdWJ0aXRsZS1uZXcnLFxuICAgICAgICAgICAgICAgIGVudGl0eTogZGF0YSxcbiAgICAgICAgICAgICAgICBpc05ldzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUucGxhY2Vob2xkZXJEZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk1hcmtldGluZykvU2NyaXB0cy9keW5hbWljQ29udGVudC9ibGFkZXMvcGxhY2Vob2xkZXJzL3BsYWNlaG9sZGVyLWRldGFpbHMudHBsLmh0bWwnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgY29udGVudFBsYWNlc0FwaS5zZWFyY2goe1xuICAgICAgICAgICAgc2tpcDogKCRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgLSAxKSAqICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnQsXG4gICAgICAgICAgICB0YWtlOiAkc2NvcGUucGFnZVNldHRpbmdzLml0ZW1zUGVyUGFnZUNvdW50LFxuICAgICAgICAgICAga2V5d29yZDogYmxhZGUuc2VhcmNoS2V5d29yZCxcbiAgICAgICAgICAgIGZvbGRlcklkOiBibGFkZS5jaG9zZW5Gb2xkZXJJZCxcbiAgICAgICAgICAgIHNvcnQ6IHVpR3JpZEhlbHBlci5nZXRTb3J0RXhwcmVzc2lvbigkc2NvcGUpLFxuICAgICAgICAgICAgcmVzcG9uc2VHcm91cDogJzIwJ1xuICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgXy5lYWNoKGRhdGEucmVzdWx0cywgZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgZW50cnkuaXNGb2xkZXIgPSBlbnRyeS5vYmplY3RUeXBlID09PSAnRHluYW1pY0NvbnRlbnRGb2xkZXInO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS5saXN0RW50cmllcyA9IGRhdGEucmVzdWx0cztcbiAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MudG90YWxJdGVtcyA9IGRhdGEudG90YWxDb3VudDtcbiAgICAgICAgICAgIHNldEJyZWFkY3J1bWJzKCk7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFt7XG4gICAgICAgIG5hbWU6ICdwbGF0Zm9ybS5jb21tYW5kcy5yZWZyZXNoJywgaWNvbjogJ2ZhIGZhLXJlZnJlc2gnLFxuICAgICAgICBleGVjdXRlTWV0aG9kOiBibGFkZS5yZWZyZXNoLFxuICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgfSwge1xuICAgICAgICBuYW1lOiAncGxhdGZvcm0uY29tbWFuZHMuYWRkJywgaWNvbjogJ2ZhcyBmYS1wbHVzJyxcbiAgICAgICAgZXhlY3V0ZU1ldGhvZDogYmxhZGUuYWRkTmV3LFxuICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgfSwge1xuICAgICAgICBuYW1lOiAncGxhdGZvcm0uY29tbWFuZHMuZGVsZXRlJywgaWNvbjogJ2ZhIGZhLXRyYXNoJyxcbiAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZUl0ZW1zKCRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkc2NvcGUuZ3JpZEFwaSAmJiBfLmFueSgkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpO1xuICAgICAgICB9XG4gICAgfV07XG5cbiAgICBmdW5jdGlvbiBzZXRCcmVhZGNydW1icygpIHtcbiAgICAgICAgaWYgKGJsYWRlLmJyZWFkY3J1bWJzKSB7XG4gICAgICAgICAgICB2YXIgYnJlYWRjcnVtYiA9IF8uZmluZChibGFkZS5icmVhZGNydW1icywgZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGIuaWQgPT09IGJsYWRlLmN1cnJlbnRFbnRpdHkuaWQ7IH0pO1xuICAgICAgICAgICAgaWYgKCFicmVhZGNydW1iKSB7XG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYiA9IGdlbmVyYXRlQnJlYWRjcnVtYihibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICBibGFkZS5icmVhZGNydW1icy5wdXNoKGJyZWFkY3J1bWIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBibGFkZS5icmVhZGNydW1icy5pbmRleE9mKGJyZWFkY3J1bWIpO1xuICAgICAgICAgICAgICAgIGJsYWRlLmJyZWFkY3J1bWJzID0gYmxhZGUuYnJlYWRjcnVtYnMuc2xpY2UoMCwgcG9zaXRpb24gKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJsYWRlLmJyZWFkY3J1bWJzID0gW2dlbmVyYXRlQnJlYWRjcnVtYih7IGlkOiAnQ29udGVudFBsYWNlJywgbmFtZTogJ21hcmtldGluZy5ibGFkZXMucGxhY2Vob2xkZXJzLmxpc3QuYnJlYWQtY3J1bWItdG9wJywgaXNGb2xkZXI6IHRydWUgfSldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVCcmVhZGNydW1iKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBub2RlLmlkLFxuICAgICAgICAgICAgbmFtZTogbm9kZS5uYW1lLFxuICAgICAgICAgICAgbmF2aWdhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0Tm9kZShub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgZmlsdGVyID0gJHNjb3BlLmZpbHRlciA9IHt9O1xuICAgIGZpbHRlci5jcml0ZXJpYUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkc2NvcGUucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID4gMSkge1xuICAgICAgICAgICAgJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLmNsZWFyS2V5d29yZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUuc2VhcmNoS2V5d29yZCA9IG51bGw7XG4gICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChub2RlLmlkICYmIG5vZGUuaXNGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5ID0gbm9kZTtcbiAgICAgICAgICAgICAgICBibGFkZS5jaG9zZW5Gb2xkZXJJZCA9IG5vZGUuaWQ7XG4gICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUub3BlbkRldGFpbHNCbGFkZShub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5vcGVuRGV0YWlsc0JsYWRlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkTm9kZUlkID0gbm9kZS5pZDtcblxuICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICBpZDogJ2xpc3RJdGVtQ2hpbGQnLFxuICAgICAgICAgICAgZW50aXR5OiBub2RlLFxuICAgICAgICAgICAgaXNOZXc6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIGlmIChub2RlLmlzRm9sZGVyKSB7XG4gICAgICAgICAgICBuZXdCbGFkZS50aXRsZSA9ICdtYXJrZXRpbmcuYmxhZGVzLnBsYWNlaG9sZGVycy5mb2xkZXItZGV0YWlscy50aXRsZS1uZXcnO1xuICAgICAgICAgICAgbmV3QmxhZGUuc3VidGl0bGUgPSAnbWFya2V0aW5nLmJsYWRlcy5wbGFjZWhvbGRlcnMuZm9sZGVyLWRldGFpbHMuc3VidGl0bGUtbmV3JztcbiAgICAgICAgICAgIG5ld0JsYWRlLmNvbnRyb2xsZXIgPSAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuYWRkRm9sZGVyUGxhY2Vob2xkZXJDb250cm9sbGVyJztcbiAgICAgICAgICAgIG5ld0JsYWRlLnRlbXBsYXRlID0gJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk1hcmtldGluZykvU2NyaXB0cy9keW5hbWljQ29udGVudC9ibGFkZXMvcGxhY2Vob2xkZXJzL2ZvbGRlci1kZXRhaWxzLnRwbC5odG1sJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld0JsYWRlLnRpdGxlID0gJ21hcmtldGluZy5ibGFkZXMucGxhY2Vob2xkZXJzLnBsYWNlaG9sZGVyLWRldGFpbHMudGl0bGUnO1xuICAgICAgICAgICAgbmV3QmxhZGUuc3VidGl0bGUgPSAnbWFya2V0aW5nLmJsYWRlcy5wbGFjZWhvbGRlcnMucGxhY2Vob2xkZXItZGV0YWlscy5zdWJ0aXRsZSc7XG4gICAgICAgICAgICBuZXdCbGFkZS5jb250cm9sbGVyID0gJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLnBsYWNlaG9sZGVyRGV0YWlsQ29udHJvbGxlcic7XG4gICAgICAgICAgICBuZXdCbGFkZS50ZW1wbGF0ZSA9ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5NYXJrZXRpbmcpL1NjcmlwdHMvZHluYW1pY0NvbnRlbnQvYmxhZGVzL3BsYWNlaG9sZGVycy9wbGFjZWhvbGRlci1kZXRhaWxzLnRwbC5odG1sJztcbiAgICAgICAgfVxuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZGVsZXRlSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUNoaWxkcmVuQmxhZGVzKGJsYWRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgICAgIGlkOiBcImNvbmZpcm1EZWxldGVDb250ZW50UGxhY2Vob2xkZXJzRm9sZGVyXCIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwibWFya2V0aW5nLmRpYWxvZ3MucGxhY2Vob2xkZXJzLWZvbGRlci1kZWxldGUudGl0bGVcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIm1hcmtldGluZy5kaWFsb2dzLnBsYWNlaG9sZGVycy1mb2xkZXItZGVsZXRlLm1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvbGRlckl0ZW1zID0gXy5maWx0ZXIoaXRlbXMsIGZ1bmN0aW9uIChpKSB7IHJldHVybiBpLmlzRm9sZGVyOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb2xkZXJJdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljQ29udGVudEZvbGRlcnNBcGkuZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRzOiBfLnBsdWNrKGZvbGRlckl0ZW1zLCAnaWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGJsYWRlLnJlZnJlc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYWNlaG9sZGVySXRlbXMgPSBfLmZpbHRlcihpdGVtcywgZnVuY3Rpb24gKGkpIHsgcmV0dXJuICFpLmlzRm9sZGVyOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbGFjZWhvbGRlckl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRQbGFjZXNBcGkuZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRzOiBfLnBsdWNrKHBsYWNlaG9sZGVySXRlbXMsICdpZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgYmxhZGUucmVmcmVzaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Q29uZmlybWF0aW9uRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2V0R3JpZE9wdGlvbnMgPSBmdW5jdGlvbiAoZ3JpZE9wdGlvbnMpIHtcbiAgICAgICAgJHNjb3BlLmdyaWRPcHRpb25zID0gZ3JpZE9wdGlvbnM7XG5cbiAgICAgICAgZ3JpZE9wdGlvbnMub25SZWdpc3RlckFwaSA9IGZ1bmN0aW9uIChncmlkQXBpKSB7XG4gICAgICAgICAgICBncmlkQXBpLmNvcmUub24uc29ydENoYW5nZWQoJHNjb3BlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFibGFkZS5pc0xvYWRpbmcpIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGJsYWRlVXRpbHMuaW5pdGlhbGl6ZVBhZ2luYXRpb24oJHNjb3BlKTtcbiAgICB9O1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5wbGFjZWhvbGRlckRldGFpbENvbnRyb2xsZXInLCBbJyRzY29wZScsICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5keW5hbWljQ29udGVudC5jb250ZW50UGxhY2VzJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAnRmlsZVVwbG9hZGVyJywgJ3BsYXRmb3JtV2ViQXBwLmRpYWxvZ1NlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBjb250ZW50UGxhY2VzQXBpLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBGaWxlVXBsb2FkZXIsIGRpYWxvZ1NlcnZpY2UpIHtcbiAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgYmxhZGUudXBkYXRlUGVybWlzc2lvbiA9ICdtYXJrZXRpbmc6dXBkYXRlJztcblxuICAgIGJsYWRlLm9yaWdFbnRpdHkgPSBibGFkZS5lbnRpdHk7XG4gICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5KTtcblxuICAgIGJsYWRlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghJHNjb3BlLnVwbG9hZGVyICYmIGJsYWRlLmhhc1VwZGF0ZVBlcm1pc3Npb24oKSkge1xuICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSB1cGxvYWRlclxuICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gJHNjb3BlLnVwbG9hZGVyID0gbmV3IEZpbGVVcGxvYWRlcih7XG4gICAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgICAgdXJsOiAnYXBpL2Fzc2V0cz9mb2xkZXJVcmw9cGxhY2Vob2xkZXJzLWltYWdlcycsXG4gICAgICAgICAgICAgICAgYXV0b1VwbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICByZW1vdmVBZnRlclVwbG9hZDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHVwbG9hZGVyLm9uU3VjY2Vzc0l0ZW0gPSBmdW5jdGlvbiAoZmlsZUl0ZW0sIGltYWdlcywgc3RhdHVzLCBoZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5pbWFnZVVybCA9IGltYWdlc1swXS51cmw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB1cGxvYWRlci5vbkFmdGVyQWRkaW5nQWxsID0gZnVuY3Rpb24gKGFkZGVkSXRlbXMpIHtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKG51bGwsIGJsYWRlKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHVwbG9hZGVyLm9uRXJyb3JJdGVtID0gZnVuY3Rpb24gKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKGl0ZW0uX2ZpbGUubmFtZSArICcgZmFpbGVkOiAnICsgKHJlc3BvbnNlLm1lc3NhZ2UgPyByZXNwb25zZS5tZXNzYWdlIDogc3RhdHVzKSwgYmxhZGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgICAgICRzY29wZS5ibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnNhdmVcIiwgaWNvbjogJ2ZhcyBmYS1zYXZlJyxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogYmxhZGUuc2F2ZUNoYW5nZXMsXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhYW5ndWxhci5lcXVhbHMoYmxhZGUub3JpZ0VudGl0eSwgYmxhZGUuY3VycmVudEVudGl0eSkgJiYgISRzY29wZS5mb3JtU2NvcGUuJGludmFsaWQ7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZXNldFwiLCBpY29uOiAnZmEgZmEtdW5kbycsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFhbmd1bGFyLmVxdWFscyhibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmRlbGV0ZVwiLCBpY29uOiAnZmFzIGZhLXRyYXNoLWFsdCcsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiY29uZmlybURlbGV0ZUNvbnRlbnRQbGFjZWhvbGRlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIm1hcmtldGluZy5kaWFsb2dzLmNvbnRlbnQtcGxhY2Vob2xkZXItZGVsZXRlLnRpdGxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJtYXJrZXRpbmcuZGlhbG9ncy5jb250ZW50LXBsYWNlaG9sZGVyLWRlbGV0ZS5tZXNzYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRQbGFjZXNBcGkuZGVsZXRlKHsgaWRzOiBbYmxhZGUuY3VycmVudEVudGl0eS5pZF0gfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUoYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Q29uZmlybWF0aW9uRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH0sXG4gICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG5cbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgYmxhZGUuc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG5cbiAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICBjb250ZW50UGxhY2VzQXBpLnNhdmUoe30sIGJsYWRlLmN1cnJlbnRFbnRpdHksIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VCbGFkZShibGFkZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRlbnRQbGFjZXNBcGkudXBkYXRlKHt9LCBibGFkZS5jdXJyZW50RW50aXR5LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICBibGFkZS5vcmlnRW50aXR5ID0gYW5ndWxhci5jb3B5KGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldEZvcm0gPSBmdW5jdGlvbiAoZm9ybSkgeyAkc2NvcGUuZm9ybVNjb3BlID0gZm9ybTsgfTtcblxuICAgICRzY29wZS5ibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1sb2NhdGlvbi1hcnJvdyc7XG5cbiAgICBibGFkZS5pbml0aWFsaXplKCk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmFkZFB1Ymxpc2hpbmdDb250ZW50SXRlbXNTdGVwQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmR5bmFtaWNDb250ZW50LmNvbnRlbnRJdGVtcycsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlVXRpbHMnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJywgZnVuY3Rpb24gKCRzY29wZSwgZHluYW1pY0NvbnRlbnRJdGVtc0FwaSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgYmxhZGVVdGlscywgdWlHcmlkSGVscGVyKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgIGJsYWRlLmNob3NlbkZvbGRlciA9ICdDb250ZW50SXRlbSc7XG4gICAgYmxhZGUuY3VycmVudEVudGl0eSA9IHt9O1xuXG4gICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgZHluYW1pY0NvbnRlbnRJdGVtc0FwaS5zZWFyY2goe1xuICAgICAgICAgICAgc2tpcDogKCRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgLSAxKSAqICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnQsXG4gICAgICAgICAgICB0YWtlOiAkc2NvcGUucGFnZVNldHRpbmdzLml0ZW1zUGVyUGFnZUNvdW50LFxuICAgICAgICAgICAgZm9sZGVySWQ6IGJsYWRlLmNob3NlbkZvbGRlcixcbiAgICAgICAgICAgIHNvcnQ6IHVpR3JpZEhlbHBlci5nZXRTb3J0RXhwcmVzc2lvbigkc2NvcGUpLFxuICAgICAgICAgICAgcmVzcG9uc2VHcm91cDogJzE4J1xuICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgXy5lYWNoKGRhdGEucmVzdWx0cywgZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgZW50cnkuaXNGb2xkZXIgPSBlbnRyeS5vYmplY3RUeXBlID09PSAnRHluYW1pY0NvbnRlbnRGb2xkZXInO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkubGlzdEVudHJpZXMgPSBkYXRhLnJlc3VsdHM7XG4gICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSBkYXRhLnRvdGFsQ291bnQ7XG4gICAgICAgICAgICBzZXRCcmVhZGNydW1icygpO1xuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBibGFkZS5wdWJsaWNhdGlvbi5jb250ZW50SXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgZHluYW1pY0NvbnRlbnRJdGVtc0FwaS5nZXQoeyBpZDogZWwuaWQgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBvckVsID0gXy5maW5kKGJsYWRlLnBhcmVudEJsYWRlLm9yaWdFbnRpdHkuY29udGVudEl0ZW1zLCBmdW5jdGlvbiAoY29udGVudEl0ZW0pIHsgcmV0dXJuIGNvbnRlbnRJdGVtLmlkID09PSBlbC5pZCB9KTtcbiAgICAgICAgICAgIGlmICghYW5ndWxhci5pc1VuZGVmaW5lZChvckVsKSkge1xuICAgICAgICAgICAgICAgIG9yRWwucGF0aCA9IGRhdGEucGF0aDtcbiAgICAgICAgICAgICAgICBvckVsLm91dGxpbmUgPSBkYXRhLm91dGxpbmU7XG4gICAgICAgICAgICAgICAgb3JFbC5keW5hbWljUHJvcGVydGllcyA9IGRhdGEuZHluYW1pY1Byb3BlcnRpZXM7XG4gICAgICAgICAgICAgICAgb3JFbC5vYmplY3RUeXBlID0gZGF0YS5vYmplY3RUeXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWwucGF0aCA9IGRhdGEucGF0aDtcbiAgICAgICAgICAgIGVsLm91dGxpbmUgPSBkYXRhLm91dGxpbmU7XG4gICAgICAgICAgICBlbC5keW5hbWljUHJvcGVydGllcyA9IGRhdGEuZHluYW1pY1Byb3BlcnRpZXM7XG4gICAgICAgICAgICBlbC5vYmplY3RUeXBlID0gZGF0YS5vYmplY3RUeXBlO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGJsYWRlLmRlbGV0ZUFsbENvbnRlbnRJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUucHVibGljYXRpb24uY29udGVudEl0ZW1zID0gW107XG4gICAgICAgICRzY29wZS5ncmlkQXBpLmdyaWQucXVldWVHcmlkUmVmcmVzaCgpO1xuICAgIH07XG5cbiAgICBibGFkZS5kZWxldGVDb250ZW50SXRlbSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGJsYWRlLnB1YmxpY2F0aW9uLmNvbnRlbnRJdGVtcyA9IF8uZmlsdGVyKGJsYWRlLnB1YmxpY2F0aW9uLmNvbnRlbnRJdGVtcywgZnVuY3Rpb24gKHBsYWNlKSB7IHJldHVybiAhYW5ndWxhci5lcXVhbHMoZGF0YS5pZCwgcGxhY2UuaWQpOyB9KTtcbiAgICAgICAgJHNjb3BlLmdyaWRBcGkuZ3JpZC5xdWV1ZUdyaWRSZWZyZXNoKCk7XG4gICAgfTtcblxuICAgIGJsYWRlLnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBpZiAobm9kZS5pc0ZvbGRlcikge1xuICAgICAgICAgICAgYnJvd3NlRm9sZGVyKG5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmxhZGUucHVibGljYXRpb24uY29udGVudEl0ZW1zLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAkc2NvcGUuZ3JpZEFwaS5ncmlkLnF1ZXVlR3JpZFJlZnJlc2goKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBicm93c2VGb2xkZXIobm9kZSkge1xuICAgICAgICBpZiAoIWJsYWRlLmNob3NlbkZvbGRlciB8fCAhYW5ndWxhci5lcXVhbHMoYmxhZGUuY2hvc2VuRm9sZGVyLCBub2RlLmlkKSkge1xuICAgICAgICAgICAgYmxhZGUuY2hvc2VuRm9sZGVyID0gbm9kZS5pZDtcbiAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkgPSBub2RlO1xuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0QnJlYWRjcnVtYnMoKSB7XG4gICAgICAgIGlmIChibGFkZS5icmVhZGNydW1icykge1xuICAgICAgICAgICAgdmFyIGJyZWFkY3J1bWJzO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gXy5maW5kTGFzdEluZGV4KGJsYWRlLmJyZWFkY3J1bWJzLCB7IGlkOiBibGFkZS5jaG9zZW5Gb2xkZXIgfSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIC8vQ2xvbmUgYXJyYXkgKGFuZ3VsYXIuY29weSBsZWF2ZXMgdGhlIHNhbWUgcmVmZXJlbmNlKVxuICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJzID0gYmxhZGUuYnJlYWRjcnVtYnMuc2xpY2UoMCwgaW5kZXggKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJzID0gYmxhZGUuYnJlYWRjcnVtYnMuc2xpY2UoMCk7XG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYnMucHVzaChnZW5lcmF0ZUJyZWFkY3J1bWIoYmxhZGUuY3VycmVudEVudGl0eSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxhZGUuYnJlYWRjcnVtYnMgPSBicmVhZGNydW1icztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJsYWRlLmJyZWFkY3J1bWJzID0gWyhnZW5lcmF0ZUJyZWFkY3J1bWIoeyBpZDogJ0NvbnRlbnRJdGVtJywgbmFtZTogJ21hcmtldGluZy5ibGFkZXMucHVibGlzaGluZy5hZGQtY29udGVudC1pdGVtcy5icmVhZC1jcnVtYi10b3AnIH0pKV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUJyZWFkY3J1bWIobm9kZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IG5vZGUuaWQsXG4gICAgICAgICAgICBuYW1lOiBub2RlLm5hbWUsXG4gICAgICAgICAgICBuYXZpZ2F0ZTogZnVuY3Rpb24gKCkgeyBicm93c2VGb2xkZXIobm9kZSk7IH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyB1aS1ncmlkXG4gICAgJHNjb3BlLnNldEdyaWRPcHRpb25zID0gZnVuY3Rpb24gKGdyaWRPcHRpb25zKSB7XG4gICAgICAgICRzY29wZS5ncmlkT3B0aW9ucyA9IGdyaWRPcHRpb25zO1xuXG4gICAgICAgIGdyaWRPcHRpb25zLm9uUmVnaXN0ZXJBcGkgPSBmdW5jdGlvbiAoZ3JpZEFwaSkge1xuICAgICAgICAgICAgZ3JpZEFwaS5ncmlkLnJlZ2lzdGVyUm93c1Byb2Nlc3NvcihmdW5jdGlvbiAocmVuZGVyYWJsZVJvd3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmlzaWJsZUNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICByZW5kZXJhYmxlUm93cy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LnZpc2libGUgPSByb3cuZW50aXR5LmlzRm9sZGVyIHx8IF8uYWxsKGJsYWRlLnB1YmxpY2F0aW9uLmNvbnRlbnRJdGVtcywgZnVuY3Rpb24gKGNpKSB7IHJldHVybiBjaS5pZCAhPT0gcm93LmVudGl0eS5pZDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3cudmlzaWJsZSkgdmlzaWJsZUNvdW50Kys7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyZWRFbnRpdGllc0NvdW50ID0gdmlzaWJsZUNvdW50O1xuICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJhYmxlUm93cztcbiAgICAgICAgICAgIH0sIDkwKTtcblxuICAgICAgICAgICAgZ3JpZEFwaS5jb3JlLm9uLnNvcnRDaGFuZ2VkKCRzY29wZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICghYmxhZGUuaXNMb2FkaW5nKSBibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBibGFkZVV0aWxzLmluaXRpYWxpemVQYWdpbmF0aW9uKCRzY29wZSk7XG4gICAgfTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuYWRkUHVibGlzaGluZ1BsYWNlaG9sZGVyc1N0ZXBDb250cm9sbGVyJywgWyckc2NvcGUnLCAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuZHluYW1pY0NvbnRlbnQuY29udGVudFBsYWNlcycsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlVXRpbHMnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJywgZnVuY3Rpb24gKCRzY29wZSwgY29udGVudFBsYWNlc0FwaSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgYmxhZGVVdGlscywgdWlHcmlkSGVscGVyKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgIGJsYWRlLmNob3NlbkZvbGRlciA9ICdDb250ZW50UGxhY2UnO1xuICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkgPSB7fTtcblxuICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgIGNvbnRlbnRQbGFjZXNBcGkuc2VhcmNoKHtcbiAgICAgICAgICAgIGZvbGRlcklkOiBibGFkZS5jaG9zZW5Gb2xkZXIsXG4gICAgICAgICAgICBza2lwOiAoJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAtIDEpICogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCxcbiAgICAgICAgICAgIHRha2U6ICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnQsXG4gICAgICAgICAgICBzb3J0OiB1aUdyaWRIZWxwZXIuZ2V0U29ydEV4cHJlc3Npb24oJHNjb3BlKSxcbiAgICAgICAgICAgIHJlc3BvbnNlR3JvdXA6ICcyMCdcbiAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIF8uZWFjaChkYXRhLnJlc3VsdHMsIGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgICAgIGVudHJ5LmlzRm9sZGVyID0gZW50cnkub2JqZWN0VHlwZSA9PT0gJ0R5bmFtaWNDb250ZW50Rm9sZGVyJztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5Lmxpc3RFbnRyaWVzID0gZGF0YS5yZXN1bHRzO1xuICAgICAgICAgICAgJHNjb3BlLnBhZ2VTZXR0aW5ncy50b3RhbEl0ZW1zID0gZGF0YS50b3RhbENvdW50O1xuICAgICAgICAgICAgc2V0QnJlYWRjcnVtYnMoKTtcbiAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgXy5lYWNoKGJsYWRlLnB1YmxpY2F0aW9uLmNvbnRlbnRQbGFjZXMsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBjb250ZW50UGxhY2VzQXBpLmdldCh7IGlkOiBlbC5pZCB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIG9yRWwgPSBfLmZpbmQoYmxhZGUucGFyZW50QmxhZGUub3JpZ0VudGl0eS5jb250ZW50UGxhY2VzLCBmdW5jdGlvbiAoY29udGVudFBsYWNlKSB7IHJldHVybiBjb250ZW50UGxhY2UuaWQgPT09IGVsLmlkIH0pO1xuICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzVW5kZWZpbmVkKG9yRWwpKSB7XG4gICAgICAgICAgICAgICAgb3JFbC5wYXRoID0gZGF0YS5wYXRoO1xuICAgICAgICAgICAgICAgIG9yRWwub3V0bGluZSA9IGRhdGEub3V0bGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsLnBhdGggPSBkYXRhLnBhdGg7XG4gICAgICAgICAgICBlbC5vdXRsaW5lID0gZGF0YS5vdXRsaW5lO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGJsYWRlLmRlbGV0ZUFsbFBsYWNlaG9sZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBibGFkZS5wdWJsaWNhdGlvbi5jb250ZW50UGxhY2VzID0gW107XG4gICAgICAgICRzY29wZS5ncmlkQXBpLmdyaWQucXVldWVHcmlkUmVmcmVzaCgpO1xuICAgIH07XG5cbiAgICBibGFkZS5kZWxldGVQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGJsYWRlLnB1YmxpY2F0aW9uLmNvbnRlbnRQbGFjZXMgPSBfLmZpbHRlcihibGFkZS5wdWJsaWNhdGlvbi5jb250ZW50UGxhY2VzLCBmdW5jdGlvbiAocGxhY2UpIHsgcmV0dXJuICFhbmd1bGFyLmVxdWFscyhkYXRhLmlkLCBwbGFjZS5pZCk7IH0pO1xuICAgICAgICAkc2NvcGUuZ3JpZEFwaS5ncmlkLnF1ZXVlR3JpZFJlZnJlc2goKTtcbiAgICB9O1xuXG4gICAgYmxhZGUuc2VsZWN0Tm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIGlmIChub2RlLmlzRm9sZGVyKSB7XG4gICAgICAgICAgICBicm93c2VGb2xkZXIobm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBibGFkZS5wdWJsaWNhdGlvbi5jb250ZW50UGxhY2VzLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAkc2NvcGUuZ3JpZEFwaS5ncmlkLnF1ZXVlR3JpZFJlZnJlc2goKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBicm93c2VGb2xkZXIobm9kZSkge1xuICAgICAgICBpZiAoIWJsYWRlLmNob3NlbkZvbGRlciB8fCAhYW5ndWxhci5lcXVhbHMoYmxhZGUuY2hvc2VuRm9sZGVyLCBub2RlLmlkKSkge1xuICAgICAgICAgICAgYmxhZGUuY2hvc2VuRm9sZGVyID0gbm9kZS5pZDtcbiAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkgPSBub2RlO1xuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmxhZGUuY2hvc2VuRm9sZGVyID0gbm9kZS5wYXJlbnRGb2xkZXJJZDtcbiAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRCcmVhZGNydW1icygpIHtcbiAgICAgICAgaWYgKGJsYWRlLmJyZWFkY3J1bWJzKSB7XG4gICAgICAgICAgICB2YXIgYnJlYWRjcnVtYnM7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBfLmZpbmRMYXN0SW5kZXgoYmxhZGUuYnJlYWRjcnVtYnMsIHsgaWQ6IGJsYWRlLmNob3NlbkZvbGRlciB9KTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgLy9DbG9uZSBhcnJheSAoYW5ndWxhci5jb3B5IGxlYXZlcyB0aGUgc2FtZSByZWZlcmVuY2UpXG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYnMgPSBibGFkZS5icmVhZGNydW1icy5zbGljZSgwLCBpbmRleCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYnMgPSBibGFkZS5icmVhZGNydW1icy5zbGljZSgwKTtcbiAgICAgICAgICAgICAgICBicmVhZGNydW1icy5wdXNoKGdlbmVyYXRlQnJlYWRjcnVtYihibGFkZS5jdXJyZW50RW50aXR5KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBibGFkZS5icmVhZGNydW1icyA9IGJyZWFkY3J1bWJzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmxhZGUuYnJlYWRjcnVtYnMgPSBbKGdlbmVyYXRlQnJlYWRjcnVtYih7IGlkOiAnQ29udGVudFBsYWNlJywgbmFtZTogJ21hcmtldGluZy5ibGFkZXMucHVibGlzaGluZy5hZGQtcGxhY2Vob2xkZXJzLmJyZWFkLWNydW1iLXRvcCcgfSkpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlQnJlYWRjcnVtYihub2RlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogbm9kZS5pZCxcbiAgICAgICAgICAgIG5hbWU6IG5vZGUubmFtZSxcbiAgICAgICAgICAgIG5hdmlnYXRlOiBmdW5jdGlvbiAoKSB7IGJyb3dzZUZvbGRlcihub2RlKTsgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIHVpLWdyaWRcbiAgICAkc2NvcGUuc2V0R3JpZE9wdGlvbnMgPSBmdW5jdGlvbiAoZ3JpZE9wdGlvbnMpIHtcbiAgICAgICAgJHNjb3BlLmdyaWRPcHRpb25zID0gZ3JpZE9wdGlvbnM7XG5cbiAgICAgICAgZ3JpZE9wdGlvbnMub25SZWdpc3RlckFwaSA9IGZ1bmN0aW9uIChncmlkQXBpKSB7XG4gICAgICAgICAgICBncmlkQXBpLmdyaWQucmVnaXN0ZXJSb3dzUHJvY2Vzc29yKGZ1bmN0aW9uIChyZW5kZXJhYmxlUm93cykge1xuICAgICAgICAgICAgICAgIHZhciB2aXNpYmxlQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHJlbmRlcmFibGVSb3dzLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgICAgICByb3cudmlzaWJsZSA9IHJvdy5lbnRpdHkuaXNGb2xkZXIgfHwgXy5hbGwoYmxhZGUucHVibGljYXRpb24uY29udGVudFBsYWNlcywgZnVuY3Rpb24gKGNpKSB7IHJldHVybiBjaS5pZCAhPT0gcm93LmVudGl0eS5pZDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3cudmlzaWJsZSkgdmlzaWJsZUNvdW50Kys7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyZWRFbnRpdGllc0NvdW50ID0gdmlzaWJsZUNvdW50O1xuICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJhYmxlUm93cztcbiAgICAgICAgICAgIH0sIDkwKTtcblxuICAgICAgICAgICAgZ3JpZEFwaS5jb3JlLm9uLnNvcnRDaGFuZ2VkKCRzY29wZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICghYmxhZGUuaXNMb2FkaW5nKSBibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBibGFkZVV0aWxzLmluaXRpYWxpemVQYWdpbmF0aW9uKCRzY29wZSk7XG4gICAgfTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUucHVibGlzaGluZ0R5bmFtaWNDb250ZW50TGlzdENvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZVV0aWxzJywgJ3BsYXRmb3JtV2ViQXBwLnVpR3JpZEhlbHBlcicsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmR5bmFtaWNDb250ZW50LmNvbnRlbnRQdWJsaWNhdGlvbnMnLFxuZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVVdGlscywgdWlHcmlkSGVscGVyLCBkaWFsb2dTZXJ2aWNlLCBkeW5hbWljQ29udGVudFB1YmxpY2F0aW9uc0FwaSkge1xuICAgIHZhciBibGFkZU5hdmlnYXRpb25TZXJ2aWNlID0gYmxhZGVVdGlscy5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlO1xuICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1wYXBlcmNsaXAnO1xuICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgYmxhZGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgIH07XG5cbiAgICBibGFkZS5yZW1vdmVQdWJsaXNoaW5ncyA9IGZ1bmN0aW9uIChzZWxlY3RlZFJvd3MpIHtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUNoaWxkcmVuQmxhZGVzKGJsYWRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgICAgIGlkOiAnY29uZmlybURlbGV0ZVB1Ymxpc2hpbmdzJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ21hcmtldGluZy5kaWFsb2dzLnB1YmxpY2F0aW9uLWRlbGV0ZS50aXRsZScsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ21hcmtldGluZy5kaWFsb2dzLnB1YmxpY2F0aW9uLWRlbGV0ZS5tZXNzYWdlJyxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGNvbmZpcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwdWJsaXNoaW5nSWRzID0gXy5wbHVjayhzZWxlY3RlZFJvd3MsICdpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZHluYW1pY0NvbnRlbnRQdWJsaWNhdGlvbnNBcGkucmVtb3ZlKHsgaWRzOiBwdWJsaXNoaW5nSWRzIH0sIGJsYWRlLnJlZnJlc2gpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbkRpYWxvZyhkaWFsb2cpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgZHluYW1pY0NvbnRlbnRQdWJsaWNhdGlvbnNBcGkuc2VhcmNoKHtcbiAgICAgICAgICAgIHNraXA6ICgkc2NvcGUucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlIC0gMSkgKiAkc2NvcGUucGFnZVNldHRpbmdzLml0ZW1zUGVyUGFnZUNvdW50LFxuICAgICAgICAgICAgdGFrZTogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCxcbiAgICAgICAgICAgIHNvcnQ6IHVpR3JpZEhlbHBlci5nZXRTb3J0RXhwcmVzc2lvbigkc2NvcGUpLFxuICAgICAgICAgICAgcmVzcG9uc2VHcm91cDogJzgnLFxuICAgICAgICAgICAga2V5d29yZDogYmxhZGUuc2VhcmNoS2V5d29yZFxuICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLmxpc3RFbnRyaWVzID0gZGF0YS5yZXN1bHRzO1xuICAgICAgICAgICAgJHNjb3BlLnBhZ2VTZXR0aW5ncy50b3RhbEl0ZW1zID0gZGF0YS50b3RhbENvdW50O1xuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbe1xuICAgICAgICBuYW1lOiAncGxhdGZvcm0uY29tbWFuZHMucmVmcmVzaCcsIGljb246ICdmYSBmYS1yZWZyZXNoJyxcbiAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgZXhlY3V0ZU1ldGhvZDogYmxhZGUucmVmcmVzaFxuICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ3BsYXRmb3JtLmNvbW1hbmRzLmFkZCcsIGljb246ICdmYXMgZmEtcGx1cycsXG4gICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH0sXG4gICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgJHNjb3BlLnNlbGVjdE5vZGUoe30sIHRydWUpOyB9XG4gICAgfSwge1xuICAgICAgICBuYW1lOiAncGxhdGZvcm0uY29tbWFuZHMuZGVsZXRlJywgaWNvbjogJ2ZhIGZhLXRyYXNoJyxcbiAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogaXNJdGVtc0NoZWNrZWQsXG4gICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBibGFkZS5yZW1vdmVQdWJsaXNoaW5ncygkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpO1xuICAgICAgICB9XG4gICAgfV07XG5cbiAgICBmdW5jdGlvbiBpc0l0ZW1zQ2hlY2tlZCgpIHtcbiAgICAgICAgcmV0dXJuICRzY29wZS5ncmlkQXBpICYmIF8uYW55KCRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNsZWFyS2V5d29yZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUuc2VhcmNoS2V5d29yZCA9IG51bGw7XG4gICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAobm9kZSwgaXNOZXcpIHtcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkTm9kZUlkID0gbm9kZS5pZDtcblxuICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICBpc05ldzogaXNOZXcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUucHVibGljYXRpb25EZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTWFya2V0aW5nKS9TY3JpcHRzL2R5bmFtaWNDb250ZW50L2JsYWRlcy9wdWJsaXNoaW5nL3B1YmxpY2F0aW9uLWRldGFpbC50cGwuaHRtbCdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoaXNOZXcpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKG5ld0JsYWRlLCB7XG4gICAgICAgICAgICAgICAgaWQ6ICdhZGRfcHVibGlzaGluZ19lbGVtZW50JyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ21hcmtldGluZy5ibGFkZXMucHVibGlzaGluZy5wdWJsaXNoaW5nLW1haW4tc3RlcC50aXRsZS1uZXcnLFxuICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnbWFya2V0aW5nLmJsYWRlcy5wdWJsaXNoaW5nLnB1Ymxpc2hpbmctbWFpbi1zdGVwLnN1YnRpdGxlLW5ldydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYW5ndWxhci5leHRlbmQobmV3QmxhZGUsIHtcbiAgICAgICAgICAgICAgICBpZDogJ2VkaXRfcHVibGlzaGluZ19lbGVtZW50JyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ21hcmtldGluZy5ibGFkZXMucHVibGlzaGluZy5wdWJsaXNoaW5nLW1haW4tc3RlcC50aXRsZScsXG4gICAgICAgICAgICAgICAgc3VidGl0bGU6ICdtYXJrZXRpbmcuYmxhZGVzLnB1Ymxpc2hpbmcucHVibGlzaGluZy1tYWluLXN0ZXAuc3VidGl0bGUnLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRFbnRpdHk6IG5vZGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kZWxldGVJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgaWQ6IFwiY29uZmlybURlbGV0ZUNvbnRlbnRQdWJsaWNhdGlvbnNcIixcbiAgICAgICAgICAgIHRpdGxlOiBcIm1hcmtldGluZy5kaWFsb2dzLmNvbnRlbnQtaXRlbS1mb2xkZXItZGVsZXRlLnRpdGxlXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIm1hcmtldGluZy5kaWFsb2dzLmNvbnRlbnQtaXRlbS1mb2xkZXItZGVsZXRlLm1lc3NhZ2VcIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICBkeW5hbWljQ29udGVudFB1YmxpY2F0aW9uc0FwaS5yZW1vdmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWRzOiBfLnBsdWNrKGl0ZW1zLCAnaWQnKVxuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3dDb25maXJtYXRpb25EaWFsb2coZGlhbG9nKTtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2V0R3JpZE9wdGlvbnMgPSBmdW5jdGlvbiAoZ3JpZE9wdGlvbnMpIHtcbiAgICAgICAgJHNjb3BlLmdyaWRPcHRpb25zID0gZ3JpZE9wdGlvbnM7XG5cbiAgICAgICAgZ3JpZE9wdGlvbnMub25SZWdpc3RlckFwaSA9IGZ1bmN0aW9uIChncmlkQXBpKSB7XG4gICAgICAgICAgICBncmlkQXBpLmNvcmUub24uc29ydENoYW5nZWQoJHNjb3BlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFibGFkZS5pc0xvYWRpbmcpIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGJsYWRlVXRpbHMuaW5pdGlhbGl6ZVBhZ2luYXRpb24oJHNjb3BlKTtcbiAgICB9O1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5wdWJsaWNhdGlvbkRldGFpbENvbnRyb2xsZXInLCBbJyRzY29wZScsICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5keW5hbWljQ29udGVudC5jb250ZW50UHVibGljYXRpb25zJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5jb3JlTW9kdWxlLmNvbW1vbi5keW5hbWljRXhwcmVzc2lvblNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5zdG9yZU1vZHVsZS5zdG9yZXMnLCAncGxhdGZvcm1XZWJBcHAuZGlhbG9nU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsIGNvbnRlbnRQdWJsaWNhdGlvbnMsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIGR5bmFtaWNFeHByZXNzaW9uU2VydmljZSwgc3RvcmVzLCBkaWFsb2dTZXJ2aWNlKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgIGJsYWRlLnVwZGF0ZVBlcm1pc3Npb24gPSAnbWFya2V0aW5nOnVwZGF0ZSc7XG5cbiAgICBibGFkZS5pbml0aWFsaXplQmxhZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgICAgIGNvbnRlbnRQdWJsaWNhdGlvbnMuZ2V0KHsgaWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHkuaWQgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplQmxhZGUoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuc2F2ZVwiLCBpY29uOiAnZmFzIGZhLXNhdmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnNhdmVDaGFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBibGFkZS5jaGVja0RpZmZlcmVuc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiBibGFkZS51cGRhdGVQZXJtaXNzaW9uXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucmVzZXRcIiwgaWNvbjogJ2ZhIGZhLXVuZG8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJsYWRlLmNoZWNrRGlmZmVyZW5zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5kZWxldGVcIiwgaWNvbjogJ2ZhcyBmYS10cmFzaC1hbHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcImNvbmZpcm1EZWxldGVDb250ZW50SXRlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJtYXJrZXRpbmcuZGlhbG9ncy5wdWJsaWNhdGlvbi1kZWxldGUudGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJtYXJrZXRpbmcuZGlhbG9ncy5wdWJsaWNhdGlvbi1kZWxldGUubWVzc2FnZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFB1YmxpY2F0aW9ucy5kZWxldGUoeyBpZHM6IFtibGFkZS5jdXJyZW50RW50aXR5LmlkXSB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKGJsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Q29uZmlybWF0aW9uRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRlbnRQdWJsaWNhdGlvbnMuZ2V0TmV3KGluaXRpYWxpemVCbGFkZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0aWFsaXplQmxhZGUoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5keW5hbWljRXhwcmVzc2lvbikge1xuICAgICAgICAgICAgXy5lYWNoKGRhdGEuZHluYW1pY0V4cHJlc3Npb24uY2hpbGRyZW4sIGV4dGVuZEVsZW1lbnRCbG9jayk7XG4gICAgICAgICAgICBncm91cEF2YWlsYWJsZUNoaWxkcmVuKGRhdGEuZHluYW1pY0V4cHJlc3Npb24uY2hpbGRyZW5bMF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGRhdGE7XG4gICAgICAgIGJsYWRlLm9yaWdFbnRpdHkgPSBhbmd1bGFyLmNvcHkoYmxhZGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuJHdhdGNoKCdibGFkZS5jdXJyZW50RW50aXR5JywgYmxhZGUuYXV0b2dlbmVyYXRlTmFtZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgYmxhZGUuYWRkUGxhY2Vob2xkZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJsYWRlLnNlbGVjdGVkTm9kZUlkID0gJ2FkZFBsYWNlaG9sZGVycyc7XG4gICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6ICdwdWJsaXNoaW5nX2FkZF9wbGFjZWhvbGRlcnMnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnbWFya2V0aW5nLmJsYWRlcy5wdWJsaXNoaW5nLmFkZC1wbGFjZWhvbGRlcnMudGl0bGUnLFxuICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnbWFya2V0aW5nLmJsYWRlcy5wdWJsaXNoaW5nLmFkZC1wbGFjZWhvbGRlcnMuc3VidGl0bGUnLFxuICAgICAgICAgICAgICAgIHB1YmxpY2F0aW9uOiBibGFkZS5jdXJyZW50RW50aXR5LFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5hZGRQdWJsaXNoaW5nUGxhY2Vob2xkZXJzU3RlcENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTWFya2V0aW5nKS9TY3JpcHRzL2R5bmFtaWNDb250ZW50L2JsYWRlcy9wdWJsaXNoaW5nL2FkZC1wbGFjZWhvbGRlcnMudHBsLmh0bWwnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYmxhZGUuYWRkQ29udGVudEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJsYWRlLnNlbGVjdGVkTm9kZUlkID0gJ2FkZENvbnRlbnRJdGVtcyc7XG4gICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6ICdwdWJsaXNoaW5nX2FkZF9jb250ZW50X2l0ZW1zJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ21hcmtldGluZy5ibGFkZXMucHVibGlzaGluZy5hZGQtY29udGVudC1pdGVtcy50aXRsZScsXG4gICAgICAgICAgICAgICAgc3VidGl0bGU6ICdtYXJrZXRpbmcuYmxhZGVzLnB1Ymxpc2hpbmcuYWRkLWNvbnRlbnQtaXRlbXMuc3VidGl0bGUnLFxuICAgICAgICAgICAgICAgIHB1YmxpY2F0aW9uOiBibGFkZS5jdXJyZW50RW50aXR5LFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5hZGRQdWJsaXNoaW5nQ29udGVudEl0ZW1zU3RlcENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTWFya2V0aW5nKS9TY3JpcHRzL2R5bmFtaWNDb250ZW50L2JsYWRlcy9wdWJsaXNoaW5nL2FkZC1jb250ZW50LWl0ZW1zLnRwbC5odG1sJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGJsYWRlLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICBpZiAoYmxhZGUuY3VycmVudEVudGl0eS5keW5hbWljRXhwcmVzc2lvbikge1xuICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkuZHluYW1pY0V4cHJlc3Npb24uYXZhaWxhYmxlQ2hpbGRyZW4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgXy5lYWNoKGJsYWRlLmN1cnJlbnRFbnRpdHkuZHluYW1pY0V4cHJlc3Npb24uY2hpbGRyZW4sIHN0cmlwT2ZmVWlJbmZvcm1hdGlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRQdWJsaWNhdGlvbnMuc2F2ZSh7fSwgYmxhZGUuY3VycmVudEVudGl0eSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLm9yaWdFbnRpdHkgPSBhbmd1bGFyLmNvcHkoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNOZXcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuaW5pdGlhbGl6ZUJsYWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRQdWJsaWNhdGlvbnMudXBkYXRlKHt9LCBibGFkZS5jdXJyZW50RW50aXR5LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5ID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGFuZ3VsYXIuY29weShkYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICBibGFkZS5pc05ldyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5pbml0aWFsaXplQmxhZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKGVycm9yLnN0YXR1c1RleHQsIGJsYWRlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYmxhZGUuYXZhaWxhYmxlU2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEkc2NvcGUuZm9ybVNjb3BlLiRpbnZhbGlkICYmXG4gICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5LmNvbnRlbnRJdGVtcy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5LmNvbnRlbnRQbGFjZXMubGVuZ3RoID4gMDtcbiAgICB9O1xuICAgIFxuICAgIGJsYWRlLmNoZWNrRGlmZmVyZW5zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJldFZhbCA9ICEkc2NvcGUuZm9ybVNjb3BlLiRpbnZhbGlkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5jb250ZW50SXRlbXMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkuY29udGVudFBsYWNlcy5sZW5ndGggPiAwO1xuXG4gICAgICAgIGlmIChyZXRWYWwpIHtcbiAgICAgICAgICAgIHJldFZhbCA9ICFhbmd1bGFyLmVxdWFscyhibGFkZS5jdXJyZW50RW50aXR5LCBibGFkZS5vcmlnRW50aXR5KTtcblxuICAgICAgICAgICAgaWYgKCFyZXRWYWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2lJZHNlID0gYmxhZGUuY3VycmVudEVudGl0eS5jb250ZW50SXRlbXMubWFwKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2LmlkO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNpSWRzb2UgPSBibGFkZS5vcmlnRW50aXR5LmNvbnRlbnRJdGVtcy5tYXAoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYuaWQ7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXRWYWwgPSBfLmludGVyc2VjdGlvbihjaUlkc2UsIGNpSWRzb2UpLmxlbmd0aCA8IE1hdGgubWF4KGNpSWRzZS5sZW5ndGgsIGNpSWRzb2UubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFyZXRWYWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3BJZHNlID0gYmxhZGUuY3VycmVudEVudGl0eS5jb250ZW50UGxhY2VzLm1hcChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdi5pZDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHZhciBjcElkc29lID0gYmxhZGUub3JpZ0VudGl0eS5jb250ZW50UGxhY2VzLm1hcChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdi5pZDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldFZhbCA9IF8uaW50ZXJzZWN0aW9uKGNwSWRzZSwgY3BJZHNvZSkubGVuZ3RoIDwgTWF0aC5tYXgoY3BJZHNlLmxlbmd0aCwgY3BJZHNvZS5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJldFZhbDtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldEZvcm0gPSBmdW5jdGlvbiAoZm9ybSkgeyAkc2NvcGUuZm9ybVNjb3BlID0gZm9ybTsgfTtcblxuICAgIC8vIGRhdGVwaWNrZXJcbiAgICAkc2NvcGUuZGF0ZXBpY2tlcnMgPSB7XG4gICAgICAgIGVuZERhdGU6IGZhbHNlLFxuICAgICAgICBzdGFydERhdGU6IGZhbHNlLFxuICAgIH1cbiAgICAkc2NvcGUudG9kYXkgPSBuZXcgRGF0ZSgpO1xuXG4gICAgJHNjb3BlLm9wZW4gPSBmdW5jdGlvbiAoJGV2ZW50LCB3aGljaCkge1xuICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICRzY29wZS5kYXRlcGlja2Vyc1t3aGljaF0gPSB0cnVlO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZGF0ZU9wdGlvbnMgPSB7XG4gICAgICAgICd5ZWFyLWZvcm1hdCc6IFwiJ3l5eXknXCIsXG4gICAgICAgICdzdGFydGluZy1kYXknOiAxXG4gICAgfTtcblxuICAgICRzY29wZS5mb3JtYXRzID0gWydzaG9ydERhdGUnLCAnZGQtTU1NTS15eXl5JywgJ3l5eXkvTU0vZGQnXTtcbiAgICAkc2NvcGUuZm9ybWF0ID0gJHNjb3BlLmZvcm1hdHNbMF07XG5cbiAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1wYXBlcmNsaXAnO1xuXG4gICAgLy8gRHluYW1pYyBFeHByZXNzaW9uQmxvY2tcbiAgICBmdW5jdGlvbiBleHRlbmRFbGVtZW50QmxvY2soZXhwcmVzc2lvbkJsb2NrKSB7XG4gICAgICAgIHZhciByZXRWYWwgPSBkeW5hbWljRXhwcmVzc2lvblNlcnZpY2UuZXhwcmVzc2lvbnNbZXhwcmVzc2lvbkJsb2NrLmlkXTtcbiAgICAgICAgaWYgKCFyZXRWYWwpIHtcbiAgICAgICAgICAgIHJldFZhbCA9IHsgZGlzcGxheU5hbWU6ICd1bmtub3duIGVsZW1lbnQ6ICcgKyBleHByZXNzaW9uQmxvY2suaWQgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIF8uZXh0ZW5kKGV4cHJlc3Npb25CbG9jaywgcmV0VmFsKTtcblxuICAgICAgICBpZiAoIWV4cHJlc3Npb25CbG9jay5jaGlsZHJlbikge1xuICAgICAgICAgICAgZXhwcmVzc2lvbkJsb2NrLmNoaWxkcmVuID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBfLmVhY2goZXhwcmVzc2lvbkJsb2NrLmNoaWxkcmVuLCBleHRlbmRFbGVtZW50QmxvY2spO1xuICAgICAgICBfLmVhY2goZXhwcmVzc2lvbkJsb2NrLmF2YWlsYWJsZUNoaWxkcmVuLCBleHRlbmRFbGVtZW50QmxvY2spO1xuICAgICAgICByZXR1cm4gZXhwcmVzc2lvbkJsb2NrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdyb3VwQXZhaWxhYmxlQ2hpbGRyZW4oZXhwcmVzc2lvbkJsb2NrKSB7XG4gICAgICAgIHJlc3VsdHMgPSBfLmdyb3VwQnkoZXhwcmVzc2lvbkJsb2NrLmF2YWlsYWJsZUNoaWxkcmVuLCAnZ3JvdXBOYW1lJyk7XG4gICAgICAgIGV4cHJlc3Npb25CbG9jay5hdmFpbGFibGVDaGlsZHJlbiA9IF8ubWFwKHJlc3VsdHMsIGZ1bmN0aW9uIChpdGVtcywga2V5KSB7IHJldHVybiB7IGRpc3BsYXlOYW1lOiBrZXksIHN1Yml0ZW1zOiBpdGVtcyB9OyB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdHJpcE9mZlVpSW5mb3JtYXRpb24oZXhwcmVzc2lvbkVsZW1lbnQpIHtcbiAgICAgICAgZXhwcmVzc2lvbkVsZW1lbnQuYXZhaWxhYmxlQ2hpbGRyZW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIGV4cHJlc3Npb25FbGVtZW50LmRpc3BsYXlOYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICBleHByZXNzaW9uRWxlbWVudC5nZXRWYWxpZGF0aW9uRXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgICAgIGV4cHJlc3Npb25FbGVtZW50Lmdyb3VwTmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgZXhwcmVzc2lvbkVsZW1lbnQubmV3Q2hpbGRMYWJlbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZXhwcmVzc2lvbkVsZW1lbnQudGVtcGxhdGVVUkwgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgXy5lYWNoKGV4cHJlc3Npb25FbGVtZW50LmNoaWxkcmVuLCBzdHJpcE9mZlVpSW5mb3JtYXRpb24pO1xuICAgIH07XG5cbiAgICBTdHJpbmcucHJvdG90eXBlLnRyaW1MZWZ0ID0gZnVuY3Rpb24gKGNoYXJsaXN0KSB7XG4gICAgICAgIGlmIChjaGFybGlzdCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgY2hhcmxpc3QgPSBcIlxcc1wiO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UobmV3IFJlZ0V4cChcIl5bXCIgKyBjaGFybGlzdCArIFwiXStcIiksIFwiXCIpO1xuICAgIH07XG4gICAgU3RyaW5nLnByb3RvdHlwZS50cmltUmlnaHQgPSBmdW5jdGlvbiAoY2hhcmxpc3QpIHtcbiAgICAgICAgaWYgKGNoYXJsaXN0ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBjaGFybGlzdCA9IFwiXFxzXCI7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZShuZXcgUmVnRXhwKFwiW1wiICsgY2hhcmxpc3QgKyBcIl0rJFwiKSwgXCJcIik7XG4gICAgfTtcblxuICAgIGJsYWRlLmZvY3VzTmFtZUlucHV0ID0gZmFsc2U7XG4gICAgYmxhZGUuYXV0b2dlbmVyYXRlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFibGFkZS5mb2N1c05hbWVJbnB1dCkge1xuXG5cbiAgICAgICAgICAgIHZhciBwbGFjZWhvbGRlclB1YmxpY2F0aW9uTmFtZVBhcnQgPSAnJztcbiAgICAgICAgICAgIHZhciBjb250ZW50SXRlbVB1YmxpY2F0aW9uTmFtZVBhcnQgPSAnJztcblxuICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzVW5kZWZpbmVkKGJsYWRlLmN1cnJlbnRFbnRpdHkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzVW5kZWZpbmVkKGJsYWRlLmN1cnJlbnRFbnRpdHkuY29udGVudFBsYWNlcykgJiYgYmxhZGUuY3VycmVudEVudGl0eS5jb250ZW50UGxhY2VzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyUHVibGljYXRpb25OYW1lUGFydCA9IGJsYWRlLmN1cnJlbnRFbnRpdHkuY29udGVudFBsYWNlc1swXS5uYW1lO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghYW5ndWxhci5pc1VuZGVmaW5lZChibGFkZS5jdXJyZW50RW50aXR5LmNvbnRlbnRJdGVtcykgJiYgYmxhZGUuY3VycmVudEVudGl0eS5jb250ZW50SXRlbXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEl0ZW1QdWJsaWNhdGlvbk5hbWVQYXJ0ID0gYmxhZGUuY3VycmVudEVudGl0eS5jb250ZW50SXRlbXNbMF0ubmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBuZXdOYW1lID0gKHBsYWNlaG9sZGVyUHVibGljYXRpb25OYW1lUGFydCArICdfJyArIGNvbnRlbnRJdGVtUHVibGljYXRpb25OYW1lUGFydCkudHJpbUxlZnQoJ18nKS50cmltUmlnaHQoJ18nKTtcblxuICAgICAgICAgICAgLy9IZXJlIHdlIGRpc2FibGUgcmVwbGFjaW5nIG9mIGVudGVyZWQgdGV4dFxuICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzVW5kZWZpbmVkKGJsYWRlLmN1cnJlbnRFbnRpdHkubmFtZSkgJiYgYmxhZGUuY3VycmVudEVudGl0eS5uYW1lID09PSAnJykge1xuICAgICAgICAgICAgICAgIGlmICghYW5ndWxhci5pc1VuZGVmaW5lZChibGFkZS5jdXJyZW50RW50aXR5Lm5hbWUpICYmIGJsYWRlLmN1cnJlbnRFbnRpdHkubmFtZSAhPT0gbnVsbCAmJiBibGFkZS5jdXJyZW50RW50aXR5Lm5hbWUgIT09ICcnICYmIG5ld05hbWUgIT09ICdfJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmxhZGUuY3VycmVudEVudGl0eS5uYW1lLmluZGV4T2YocGxhY2Vob2xkZXJQdWJsaWNhdGlvbk5hbWVQYXJ0KSA+PSAwIHx8IGJsYWRlLmN1cnJlbnRFbnRpdHkubmFtZS5pbmRleE9mKGNvbnRlbnRJdGVtUHVibGljYXRpb25OYW1lUGFydCkgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5uYW1lID0gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChuZXdOYW1lICE9PSAnXycpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5uYW1lID0gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBibGFkZS5pbml0aWFsaXplQmxhZGUoKTtcbiAgICAkc2NvcGUuc3RvcmVzID0gc3RvcmVzLnF1ZXJ5KCk7XG59XSk7XG4iLCLvu79hbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUnKVxuICAgIC5mYWN0b3J5KCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5keW5hbWljQ29udGVudC5jb250ZW50SXRlbXMnLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgnYXBpL21hcmtldGluZy9jb250ZW50aXRlbXMvOmlkJywgbnVsbCwge1xuICAgICAgICAgICAgc2VhcmNoOiB7IG1ldGhvZDogJ1BPU1QnLCB1cmw6ICdhcGkvbWFya2V0aW5nL2NvbnRlbnRpdGVtcy9saXN0ZW50cmllcy9zZWFyY2gnIH0sXG4gICAgICAgICAgICBjcmVhdGU6IHsgbWV0aG9kOiAnUE9TVCcgfSxcbiAgICAgICAgICAgIHVwZGF0ZTogeyBtZXRob2Q6ICdQVVQnIH1cbiAgICAgICAgfSk7XG4gICAgfV0pXG4gICAgLmZhY3RvcnkoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmR5bmFtaWNDb250ZW50LmNvbnRlbnRQbGFjZXMnLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgnYXBpL21hcmtldGluZy9jb250ZW50cGxhY2VzLzppZCcsIG51bGwsIHtcbiAgICAgICAgICAgIHNlYXJjaDogeyBtZXRob2Q6ICdQT1NUJywgdXJsOiAnYXBpL21hcmtldGluZy9jb250ZW50cGxhY2VzL2xpc3RlbnRyaWVzL3NlYXJjaCcgfSxcbiAgICAgICAgICAgIHVwZGF0ZTogeyBtZXRob2Q6ICdQVVQnIH1cbiAgICAgICAgfSk7XG4gICAgfV0pXG4gICAgLmZhY3RvcnkoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmR5bmFtaWNDb250ZW50LmNvbnRlbnRQdWJsaWNhdGlvbnMnLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgnYXBpL21hcmtldGluZy9jb250ZW50cHVibGljYXRpb25zLzppZCcsIG51bGwsIHtcbiAgICAgICAgICAgIHNlYXJjaDogeyBtZXRob2Q6ICdQT1NUJywgdXJsOiAnYXBpL21hcmtldGluZy9jb250ZW50cHVibGljYXRpb25zL3NlYXJjaCcgfSxcbiAgICAgICAgICAgIGdldE5ldzogeyB1cmw6ICdhcGkvbWFya2V0aW5nL2NvbnRlbnRwdWJsaWNhdGlvbnMvbmV3JyB9LFxuICAgICAgICAgICAgdXBkYXRlOiB7IG1ldGhvZDogJ1BVVCcgfVxuICAgICAgICB9KTtcbiAgICB9XSlcblx0LmZhY3RvcnkoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmR5bmFtaWNDb250ZW50LmZvbGRlcnMnLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcblx0ICAgIHJldHVybiAkcmVzb3VyY2UoJ2FwaS9tYXJrZXRpbmcvY29udGVudGZvbGRlcnMvOmlkJywgbnVsbCwge1xuXHQgICAgICAgIGdldDogeyBtZXRob2Q6ICdHRVQnIH0sXG5cdCAgICAgICAgdXBkYXRlOiB7IG1ldGhvZDogJ1BVVCcgfVxuXHQgICAgfSk7XG5cdH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZScpXG4gICAgLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmNhdGFsb2dFbnRyaWVzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3ZpcnRvQ29tbWVyY2UuY2F0YWxvZ01vZHVsZS5pdGVtcycsICdwbGF0Zm9ybVdlYkFwcC51aS1ncmlkLmV4dGVuc2lvbicsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZVV0aWxzJywgJ3BsYXRmb3JtV2ViQXBwLnVpR3JpZEhlbHBlcicsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJyxcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgaXRlbXMsIGdyaWRPcHRpb25FeHRlbnNpb24sIGJsYWRlVXRpbHMsIHVpR3JpZEhlbHBlciwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xuICAgICAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuXG4gICAgICAgICAgICAkc2NvcGUuaXNWYWxpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWFuZ3VsYXIuZXF1YWxzKHRoaXMuYmxhZGUucHJvZHVjdElkcywgdGhpcy5ibGFkZS5wcm9tb3Rpb24ucHJvZHVjdElkcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ibGFkZS5wcm9tb3Rpb24ucHJvZHVjdElkcyA9IHRoaXMuYmxhZGUucHJvZHVjdElkcztcbiAgICAgICAgICAgICAgICB0aGlzLmJsYWRlLnByb21vdGlvbi5wcm9kdWN0TmFtZXMgPSBfLnBsdWNrKHNlbGVjdGVkTGlzdEVudHJpZXMsICduYW1lJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5ibGFkZS5wcm9tb3Rpb24ucHJvZHVjdENvZGVzID0gXy5wbHVjayhzZWxlY3RlZExpc3RFbnRyaWVzLCAnY29kZScpO1xuICAgICAgICAgICAgICAgICRzY29wZS5ibGFkZUNsb3NlKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuc2V0R3JpZE9wdGlvbnMgPSBmdW5jdGlvbiAoZ3JpZElkLCBncmlkT3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGdyaWRPcHRpb25FeHRlbnNpb24udHJ5RXh0ZW5kR3JpZE9wdGlvbnMoZ3JpZElkLCBncmlkT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgIHVpR3JpZEhlbHBlci5pbml0aWFsaXplKCRzY29wZSwgZ3JpZE9wdGlvbnMsIGV4dGVybmFsUmVnaXN0ZXJBcGlDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgYmxhZGVVdGlscy5pbml0aWFsaXplUGFnaW5hdGlvbigkc2NvcGUpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuY2FuY2VsQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYmxhZGVDbG9zZSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGlzRmlyc3RSdW4gPSB0cnVlO1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkTGlzdEVudHJpZXMgPSBbXTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghYmxhZGUucHJvbW90aW9uLnByb2R1Y3RJZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUucHJvbW90aW9uLnByb2R1Y3RJZHMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNGaXJzdFJ1bikge1xuICAgICAgICAgICAgICAgICAgICBpc0ZpcnN0UnVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnByb2R1Y3RJZHMgPSBhbmd1bGFyLmNvcHkoYmxhZGUucHJvbW90aW9uLnByb2R1Y3RJZHMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGJsYWRlLnByb21vdGlvbi5wcm9kdWN0SWRzICYmIGJsYWRlLnByb21vdGlvbi5wcm9kdWN0SWRzLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5DYXRhbG9nQmxhZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGl0ZW1zLnF1ZXJ5KHsgaWRzOiBibGFkZS5wcm9kdWN0SWRzLCByZXNwR3JvdXA6ICdJdGVtSW5mbycgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuJHNjb3BlLmdyaWRBcGkuZ3JpZC5vcHRpb25zLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExpc3RFbnRyaWVzID0gYW5ndWxhci5jb3B5KGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXh0ZXJuYWxSZWdpc3RlckFwaUNhbGxiYWNrKGdyaWRBcGkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ3JpZEFwaSA9IGdyaWRBcGk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIHVpR3JpZEhlbHBlci5iaW5kUmVmcmVzaE9uU29ydENoYW5nZWQoJHNjb3BlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb3BlbkNhdGFsb2dCbGFkZSgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2F0YWxvZ0JsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogXCJDYXRhbG9nRW50cnlTZWxlY3RcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwibWFya2V0aW5nLmJsYWRlcy5jYXRhbG9nLWl0ZW1zLXNlbGVjdC50aXRsZS1wcm9kdWN0XCIsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNhdGFsb2dNb2R1bGUuY2F0YWxvZ0l0ZW1TZWxlY3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5DYXRhbG9nKS9TY3JpcHRzL2JsYWRlcy9jb21tb24vY2F0YWxvZy1pdGVtcy1zZWxlY3QudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1iczogW10sXG4gICAgICAgICAgICAgICAgICAgIHRvb2xiYXJDb21tYW5kczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucGljay1zZWxlY3RlZFwiLCBpY29uOiAnZmFzIGZhLXBsdXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuJHNjb3BlLmdyaWRBcGkuZ3JpZC5vcHRpb25zLmRhdGEgPSBfLm1hcChzZWxlY3RlZExpc3RFbnRyaWVzLCBmdW5jdGlvbiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS5pbWFnZVVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LmltZ1NyYyA9IGVudHJ5LmltYWdlVXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkSWRzID0gXy5wbHVjayhzZWxlY3RlZExpc3RFbnRyaWVzLCAnaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucHJvZHVjdElkcyA9IF8udW5pcShfLnVuaW9uKHNlbGVjdGVkSWRzLCBibGFkZS5wcm9kdWN0SWRzKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUoY2F0YWxvZ0JsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkTGlzdEVudHJpZXMubGVuZ3RoID4gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjYXRhbG9nQmxhZGUub3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtSWRzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NoZWNraW5nTXVsdGlwbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja0l0ZW1GbjogZnVuY3Rpb24gKGxpc3RJdGVtLCBpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlzdEl0ZW0udHlwZSA9PSAnY2F0ZWdvcnknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuZXJyb3IgPSAnTXVzdCBzZWxlY3QgUHJvZHVjdCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uc2VsZWN0ZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfLmFsbChzZWxlY3RlZExpc3RFbnRyaWVzLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCAhPSBsaXN0SXRlbS5pZDsgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGlzdEVudHJpZXMucHVzaChsaXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGlzdEVudHJpZXMgPSBfLnJlamVjdChzZWxlY3RlZExpc3RFbnRyaWVzLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCA9PSBsaXN0SXRlbS5pZDsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmVycm9yID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKGNhdGFsb2dCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZWZyZXNoXCIsIGljb246ICdmYSBmYS1yZWZyZXNoJyxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKGJsYWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5hZGRcIiwgaWNvbjogJ2ZhcyBmYS1wbHVzJyxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbkNhdGFsb2dCbGFkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmRlbGV0ZVwiLCBpY29uOiAnZmFzIGZhLXRyYXNoLWFsdCcsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvd3MgPSAkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9SZW1vdmVBcnJheSA9IF8ucGx1Y2soc2VsZWN0ZWRSb3dzLCAnaWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucHJvZHVjdElkcyA9IF8uZGlmZmVyZW5jZShibGFkZS5wcm9kdWN0SWRzLCB0b1JlbW92ZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsYWRlLmNoaWxkcmVuQmxhZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmxhZGUuJHNjb3BlLmdyaWRBcGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmxhZGUuJHNjb3BlLmdyaWRBcGkuZ3JpZC5hcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmNvdXBvbkRldGFpbENvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLnByb21vdGlvbnMnLCBmdW5jdGlvbiAoJHNjb3BlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBwcm9tb3Rpb25zQXBpKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uIChwYXJlbnRSZWZyZXNoKSB7XG4gICAgICAgIGlmICghYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgICAgIHByb21vdGlvbnNBcGkuZ2V0Q291cG9uKHtcbiAgICAgICAgICAgICAgICBpZDogYmxhZGUuY3VycmVudEVudGl0eS5pZFxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNEaXJ0eSgpIHtcbiAgICAgICAgcmV0dXJuICFhbmd1bGFyLmVxdWFscyhibGFkZS5jdXJyZW50RW50aXR5LCBibGFkZS5vcmlnaW5hbEVudGl0eSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLnNldEZvcm0gPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAkc2NvcGUuZm9ybUNvdXBvbiA9IGZvcm07XG4gICAgfVxuXG4gICAgJHNjb3BlLmRhdGVwaWNrZXJzID0ge1xuICAgICAgICBleHBpcmF0aW9uRGF0ZTogZmFsc2VcbiAgICB9XG5cbiAgICAkc2NvcGUub3BlbkNhbGVuZGFyID0gZnVuY3Rpb24gKCRldmVudCwgY2FsZW5kYXIpIHtcbiAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgJHNjb3BlLmRhdGVwaWNrZXJzW2NhbGVuZGFyXSA9IHRydWU7XG4gICAgfVxuXG4gICAgJHNjb3BlLmZvcm1hdCA9ICdzaG9ydERhdGUnO1xuXG4gICAgJHNjb3BlLmlzVmFsaWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBpc0RpcnR5KClcbiAgICAgICAgICAgICYmICRzY29wZS5mb3JtQ291cG9uXG4gICAgICAgICAgICAmJiAkc2NvcGUuZm9ybUNvdXBvbi4kdmFsaWQ7XG4gICAgfTtcblxuICAgICRzY29wZS5zYXZlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgcHJvbW90aW9uc0FwaS5zYXZlQ291cG9uKFtcbiAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHlcbiAgICAgICAgXSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VCbGFkZShibGFkZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbe1xuICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnNhdmVcIixcbiAgICAgICAgaWNvbjogJ2ZhcyBmYS1zYXZlJyxcbiAgICAgICAgZXhlY3V0ZU1ldGhvZDogJHNjb3BlLnNhdmVDaGFuZ2VzLFxuICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiAkc2NvcGUuaXNWYWxpZFxuICAgIH1dO1xufV0pO1xuIiwi77u/YW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5jb3Vwb25JbXBvcnRQcm9jZXNzaW5nQ29udHJvbGxlcicsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgJHNjb3BlLiRvbihcIm5ldy1ub3RpZmljYXRpb24tZXZlbnRcIiwgZnVuY3Rpb24gKGV2ZW50LCBub3RpZmljYXRpb24pIHtcbiAgICAgICAgaWYgKGJsYWRlLm5vdGlmaWNhdGlvbiAmJiBub3RpZmljYXRpb24uaWQgPT0gYmxhZGUubm90aWZpY2F0aW9uLmlkKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmNvcHkobm90aWZpY2F0aW9uLCBibGFkZS5ub3RpZmljYXRpb24pO1xuICAgICAgICAgICAgaWYgKG5vdGlmaWNhdGlvbi5maW5pc2hlZCkge1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnY291cG9uLWltcG9ydC1maW5pc2hlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5jb3Vwb25JbXBvcnRDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICdGaWxlVXBsb2FkZXInLCAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUucHJvbW90aW9ucycsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIEZpbGVVcGxvYWRlciwgcHJvbW90aW9uc0FwaSkge1xuICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1kb3dubG9hZCc7XG4gICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICBpZiAoISRzY29wZS51cGxvYWRlcikge1xuICAgICAgICB2YXIgdXBsb2FkZXIgPSAkc2NvcGUudXBsb2FkZXIgPSBuZXcgRmlsZVVwbG9hZGVyKHtcbiAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICB1cmw6ICdhcGkvYXNzZXRzP2ZvbGRlclVybD10bXAnLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBhdXRvVXBsb2FkOiB0cnVlLFxuICAgICAgICAgICAgcmVtb3ZlQWZ0ZXJVcGxvYWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHVwbG9hZGVyLmZpbHRlcnMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiAnY3N2RmlsdGVyJyxcbiAgICAgICAgICAgIGZuOiBmdW5jdGlvbiAoaSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gJ3wnICsgaS50eXBlLnNsaWNlKGkudHlwZS5sYXN0SW5kZXhPZignLycpICsgMSkgKyAnfCc7XG4gICAgICAgICAgICAgICAgcmV0dXJuICd8Y3N2fHZuZC5tcy1leGNlbHwnLmluZGV4T2YodHlwZSkgIT09IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdXBsb2FkZXIub25CZWZvcmVVcGxvYWRJdGVtID0gZnVuY3Rpb24gKGZpbGVJdGVtKSB7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vblN1Y2Nlc3NJdGVtID0gZnVuY3Rpb24gKGZpbGVJdGVtLCBhc3NldCwgc3RhdHVzLCBoZWFkZXJzKSB7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGJsYWRlLmNhbkltcG9ydCA9IHRydWU7XG4gICAgICAgICAgICBibGFkZS5jc3ZGaWxlVXJsID0gYXNzZXRbMF0ucmVsYXRpdmVVcmw7XG4gICAgICAgIH1cbiAgICAgICAgdXBsb2FkZXIub25BZnRlckFkZGluZ0FsbCA9IGZ1bmN0aW9uIChhZGRlZEl0ZW1zKSB7XG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKG51bGwsIGJsYWRlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25FcnJvckl0ZW0gPSBmdW5jdGlvbiAoaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcihpdGVtLl9maWxlLm5hbWUgKyAnIGZhaWxlZDogJyArIChyZXNwb25zZS5tZXNzYWdlID8gcmVzcG9uc2UubWVzc2FnZSA6IHN0YXR1cyksIGJsYWRlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2V0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICRzY29wZS5mb3JtU2NvcGUgPSBmb3JtO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY29sdW1uRGVsaW1pdGVycyA9IFt7XG4gICAgICAgIG5hbWU6ICdtYXJrZXRpbmcuYmxhZGVzLmNvdXBvbnMtaW1wb3J0LmxhYmVscy5zcGFjZScsXG4gICAgICAgIHZhbHVlOiAnICdcbiAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdtYXJrZXRpbmcuYmxhZGVzLmNvdXBvbnMtaW1wb3J0LmxhYmVscy5jb21tYScsXG4gICAgICAgIHZhbHVlOiAnLCdcbiAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdtYXJrZXRpbmcuYmxhZGVzLmNvdXBvbnMtaW1wb3J0LmxhYmVscy5zZW1pY29sb24nLFxuICAgICAgICB2YWx1ZTogJzsnXG4gICAgfSwge1xuICAgICAgICBuYW1lOiAnbWFya2V0aW5nLmJsYWRlcy5jb3Vwb25zLWltcG9ydC5sYWJlbHMudGFiJyxcbiAgICAgICAgdmFsdWU6ICdcXHQnXG4gICAgfV07XG5cbiAgICAkc2NvcGUuZGF0ZXBpY2tlcnMgPSB7XG4gICAgICAgIGV4cGlyYXRpb25EYXRlOiBmYWxzZVxuICAgIH07XG5cbiAgICAkc2NvcGUub3BlbiA9IGZ1bmN0aW9uICgkZXZlbnQsIHdoaWNoKSB7XG4gICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICRzY29wZS5kYXRlcGlja2Vyc1t3aGljaF0gPSB0cnVlO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc3RhcnRJbXBvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgZmlsZVVybDogYmxhZGUuY3N2RmlsZVVybCxcbiAgICAgICAgICAgIGRlbGltaXRlcjogYmxhZGUuY29sdW1uRGVsaW1pdGVyLFxuICAgICAgICAgICAgcHJvbW90aW9uSWQ6IGJsYWRlLnByb21vdGlvbklkLFxuICAgICAgICAgICAgZXhwaXJhdGlvbkRhdGU6IGJsYWRlLmV4cGlyYXRpb25EYXRlXG4gICAgICAgIH07XG4gICAgICAgIHByb21vdGlvbnNBcGkuaW1wb3J0Q291cG9ucyhyZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICBpZDogJ2ltcG9ydFByb2dyZXNzJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ21hcmtldGluZy5ibGFkZXMuY291cG9ucy1pbXBvcnQtcHJvY2Vzc2luZy50aXRsZScsXG4gICAgICAgICAgICAgICAgcHJvbW90aW9uSWQ6IGJsYWRlLnByb21vdGlvbklkLFxuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbjogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmNvdXBvbkltcG9ydFByb2Nlc3NpbmdDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk1hcmtldGluZykvU2NyaXB0cy9wcm9tb3Rpb24vYmxhZGVzL2NvdXBvbi1pbXBvcnQtcHJvY2Vzc2luZy50cGwuaHRtbCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAkc2NvcGUuJG9uKFwibmV3LW5vdGlmaWNhdGlvbi1ldmVudFwiLCBmdW5jdGlvbiAoZXZlbnQsIG5vdGlmaWNhdGlvbikge1xuICAgICAgICAgICAgICAgIGlmIChub3RpZmljYXRpb24gJiYgbm90aWZpY2F0aW9uLmlkID09IG5ld0JsYWRlLm5vdGlmaWNhdGlvbi5pZCkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5jYW5JbXBvcnQgPSBub3RpZmljYXRpb24uZmluaXNoZWQgIT0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJsYWRlLmNhbkltcG9ydCA9IGZhbHNlO1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuY291cG9uTGlzdENvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYWxTdG9yYWdlJywgJ3BsYXRmb3JtV2ViQXBwLmRpYWxvZ1NlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVVdGlscycsICdwbGF0Zm9ybVdlYkFwcC51aUdyaWRIZWxwZXInLCAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUucHJvbW90aW9ucycsXG5mdW5jdGlvbiAoJHNjb3BlLCAkbG9jYWxTdG9yYWdlLCBkaWFsb2dTZXJ2aWNlLCBibGFkZVV0aWxzLCB1aUdyaWRIZWxwZXIsIHByb21vdGlvbnNBcGkpIHtcbiAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgdmFyIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UgPSBibGFkZVV0aWxzLmJsYWRlTmF2aWdhdGlvblNlcnZpY2U7XG4gICAgYmxhZGUuaGVhZEljb24gPSAnZmEgZmEtdGlja2V0JztcbiAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgIHZhciBjcml0ZXJpYSA9IHtcbiAgICAgICAgICAgIHByb21vdGlvbklkOiBibGFkZS5wcm9tb3Rpb25JZCxcbiAgICAgICAgICAgIHNvcnQ6IHVpR3JpZEhlbHBlci5nZXRTb3J0RXhwcmVzc2lvbigkc2NvcGUpLFxuICAgICAgICAgICAgY29kZTogZmlsdGVyLmtleXdvcmQsXG4gICAgICAgICAgICBza2lwOiAoJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAtIDEpICogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCxcbiAgICAgICAgICAgIHRha2U6ICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZpbHRlci5jdXJyZW50KSB7XG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChjcml0ZXJpYSwgZmlsdGVyLmN1cnJlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvbW90aW9uc0FwaS5zZWFyY2hDb3Vwb25zKGNyaXRlcmlhLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0aWVzID0gcmVzcG9uc2UucmVzdWx0cztcbiAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmNvdXBvbkNvdW50KCk7XG4gICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSByZXNwb25zZS50b3RhbENvdW50O1xuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgICRzY29wZS4kb24oJ2NvdXBvbi1pbXBvcnQtZmluaXNoZWQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW3tcbiAgICAgICAgbmFtZTogJ21hcmtldGluZy5ibGFkZXMuY291cG9ucy50b29sYmFyLmFkZCcsXG4gICAgICAgIGljb246ICdmYXMgZmEtcGx1cycsXG4gICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBleGVjdXRlTWV0aG9kOiBzaG93QWRkQ291cG9uQmxhZGVcbiAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdtYXJrZXRpbmcuYmxhZGVzLmNvdXBvbnMudG9vbGJhci5pbXBvcnQnLFxuICAgICAgICBpY29uOiAnZmEgZmEtZG93bmxvYWQnLFxuICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZXhlY3V0ZU1ldGhvZDogc2hvd0NvdXBvbkltcG9ydEJsYWRlXG4gICAgfSwge1xuICAgICAgICBuYW1lOiAnbWFya2V0aW5nLmJsYWRlcy5jb3Vwb25zLnRvb2xiYXIucmVmcmVzaCcsXG4gICAgICAgIGljb246ICdmYSBmYS1yZWZyZXNoJyxcbiAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIGV4ZWN1dGVNZXRob2Q6IGJsYWRlLnJlZnJlc2hcbiAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdtYXJrZXRpbmcuYmxhZGVzLmNvdXBvbnMudG9vbGJhci5kZWxldGUnLFxuICAgICAgICBpY29uOiAnZmFzIGZhLXRyYXNoLWFsdCcsXG4gICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkc2NvcGUuZ3JpZEFwaSAmJiBfLmFueSgkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpO1xuICAgICAgICB9LFxuICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZW1vdmVDb3Vwb25zKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1dO1xuXG4gICAgdmFyIGZpbHRlciA9IGJsYWRlLmZpbHRlciA9ICRzY29wZS5maWx0ZXIgPSB7fTtcbiAgICAkc2NvcGUuJGxvY2FsU3RvcmFnZSA9ICRsb2NhbFN0b3JhZ2U7XG4gICAgaWYgKCEkbG9jYWxTdG9yYWdlLmNvdXBvblNlYXJjaEZpbHRlcnMpIHtcbiAgICAgICAgJGxvY2FsU3RvcmFnZS5jb3Vwb25TZWFyY2hGaWx0ZXJzID0gW3sgbmFtZTogJ21hcmtldGluZy5ibGFkZXMucHJvbW90aW9uLWxpc3QubmV3LWZpbHRlcicgfV07XG4gICAgfVxuICAgIGlmICgkbG9jYWxTdG9yYWdlLmNvdXBvblNlYXJjaEZpbHRlcklkKSB7XG4gICAgICAgIGZpbHRlci5jdXJyZW50ID0gXy5maW5kV2hlcmUoJGxvY2FsU3RvcmFnZS5jb3Vwb25TZWFyY2hGaWx0ZXJzLCB7IGlkOiAkbG9jYWxTdG9yYWdlLmNvdXBvblNlYXJjaEZpbHRlcklkIH0pO1xuICAgIH1cbiAgICBmaWx0ZXIuY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkbG9jYWxTdG9yYWdlLmNvdXBvblNlYXJjaEZpbHRlcklkID0gZmlsdGVyLmN1cnJlbnQgPyBmaWx0ZXIuY3VycmVudC5pZCA6IG51bGw7XG4gICAgICAgIGlmIChmaWx0ZXIuY3VycmVudCAmJiAhZmlsdGVyLmN1cnJlbnQuaWQpIHtcbiAgICAgICAgICAgIGZpbHRlci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHNob3dGaWx0ZXJEZXRhaWxCbGFkZSh7IGlzTmV3OiB0cnVlIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKHsgaWQ6ICdmaWx0ZXJEZXRhaWwnIH0pO1xuICAgICAgICAgICAgZmlsdGVyLmNyaXRlcmlhQ2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBmaWx0ZXIuZWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGZpbHRlci5jdXJyZW50KSB7XG4gICAgICAgICAgICBzaG93RmlsdGVyRGV0YWlsQmxhZGUoeyBkYXRhOiBmaWx0ZXIuY3VycmVudCB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZmlsdGVyLmNyaXRlcmlhQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPiAxKSB7XG4gICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkc2NvcGUuc2VsZWN0Tm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgIGlkOiAnY291cG9uRGV0YWlsJyxcbiAgICAgICAgICAgIG9yaWdpbmFsRW50aXR5OiBhbmd1bGFyLmNvcHkobm9kZSksXG4gICAgICAgICAgICBjdXJyZW50RW50aXR5OiBhbmd1bGFyLmNvcHkobm9kZSksXG4gICAgICAgICAgICB0aXRsZTogJ0NvdXBvbiBcIicgKyBub2RlLmNvZGUgKyAnXCInLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmNvdXBvbkRldGFpbENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5NYXJrZXRpbmcpL1NjcmlwdHMvcHJvbW90aW9uL2JsYWRlcy9jb3Vwb24tZGV0YWlsLnRwbC5odG1sJ1xuICAgICAgICB9O1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICBzZWxlY3RlZEVudGl0eSA9IG5vZGU7XG4gICAgfTtcblxuICAgICRzY29wZS5zZXRHcmlkT3B0aW9ucyA9IGZ1bmN0aW9uIChncmlkT3B0aW9ucykge1xuICAgICAgICB1aUdyaWRIZWxwZXIuaW5pdGlhbGl6ZSgkc2NvcGUsIGdyaWRPcHRpb25zLCBmdW5jdGlvbiAoZ3JpZEFwaSkge1xuICAgICAgICAgICAgdWlHcmlkSGVscGVyLmJpbmRSZWZyZXNoT25Tb3J0Q2hhbmdlZCgkc2NvcGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBibGFkZVV0aWxzLmluaXRpYWxpemVQYWdpbmF0aW9uKCRzY29wZSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNob3dBZGRDb3Vwb25CbGFkZSgpIHtcbiAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgaWQ6ICdjb3Vwb25JbXBvcnQnLFxuICAgICAgICAgICAgdGl0bGU6ICdtYXJrZXRpbmcuYmxhZGVzLmNvdXBvbi1kZXRhaWwubmV3LXRpdGxlJyxcbiAgICAgICAgICAgIHByb21vdGlvbklkOiBibGFkZS5wcm9tb3Rpb25JZCxcbiAgICAgICAgICAgIGN1cnJlbnRFbnRpdHk6IHtcbiAgICAgICAgICAgICAgICBwcm9tb3Rpb25JZDogYmxhZGUucHJvbW90aW9uSWQsXG4gICAgICAgICAgICAgICAgaXNOZXc6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuY291cG9uRGV0YWlsQ29udHJvbGxlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk1hcmtldGluZykvU2NyaXB0cy9wcm9tb3Rpb24vYmxhZGVzL2NvdXBvbi1kZXRhaWwudHBsLmh0bWwnXG4gICAgICAgIH1cbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93Q291cG9uSW1wb3J0QmxhZGUoKSB7XG4gICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgIGlkOiAnY291cG9uSW1wb3J0JyxcbiAgICAgICAgICAgIHRpdGxlOiAnbWFya2V0aW5nLmJsYWRlcy5jb3Vwb25zLWltcG9ydC50aXRsZScsXG4gICAgICAgICAgICBwcm9tb3Rpb25JZDogYmxhZGUucHJvbW90aW9uSWQsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuY291cG9uSW1wb3J0Q29udHJvbGxlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk1hcmtldGluZykvU2NyaXB0cy9wcm9tb3Rpb24vYmxhZGVzL2NvdXBvbi1pbXBvcnQudHBsLmh0bWwnXG4gICAgICAgIH1cbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVDb3Vwb25zKHJlbW92ZUFsbCwgcHJvbW90aW9uSWQpIHtcbiAgICAgICAgdmFyIGRpYWxvZyA9IHtcbiAgICAgICAgICAgIGlkOiBcImNvbmZpcm1EZWxldGVJdGVtXCIsXG4gICAgICAgICAgICB0aXRsZTogXCJtYXJrZXRpbmcuZGlhbG9ncy5jb3Vwb24tZGVsZXRlLnRpdGxlXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiByZW1vdmVBbGwgPyBcIm1hcmtldGluZy5kaWFsb2dzLmNvdXBvbi1kZWxldGUubWVzc2FnZS1hbGxcIjogXCJtYXJrZXRpbmcuZGlhbG9ncy5jb3Vwb24tZGVsZXRlLm1lc3NhZ2VcIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZlQWxsICYmIHByb21vdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbW90aW9uc0FwaS5jbGVhckNvdXBvbnMoeyBwcm9tb3Rpb25JZDogcHJvbW90aW9uSWQgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXJlbW92ZUFsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtSWRzID0gXy5wbHVjaygkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCksICdpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21vdGlvbnNBcGkuZGVsZXRlQ291cG9ucyh7IGlkczogaXRlbUlkcywgYWxsOiByZW1vdmVBbGwgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3dDb25maXJtYXRpb25EaWFsb2coZGlhbG9nKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93RmlsdGVyRGV0YWlsQmxhZGUoYmxhZGVEYXRhKSB7XG4gICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgIGlkOiAnZmlsdGVyRGV0YWlsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5maWx0ZXJEZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTWFya2V0aW5nKS9TY3JpcHRzL3Byb21vdGlvbi9ibGFkZXMvZmlsdGVyLWRldGFpbC50cGwuaHRtbCdcbiAgICAgICAgfTtcbiAgICAgICAgYW5ndWxhci5leHRlbmQobmV3QmxhZGUsIGJsYWRlRGF0YSk7XG4gICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgfVxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5maWx0ZXJEZXRhaWxDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2FsU3RvcmFnZScsICckdHJhbnNsYXRlJywgJ3ZpcnRvQ29tbWVyY2Uuc3RvcmVNb2R1bGUuc3RvcmVzJyxcbiAgICBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYWxTdG9yYWdlLCAkdHJhbnNsYXRlLCBzdG9yZXMpIHtcbiAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVCbGFkZShkYXRhKSB7XG4gICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5ID0gYW5ndWxhci5jb3B5KGRhdGEpO1xuICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGRhdGE7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgYmxhZGUudGl0bGUgPSBibGFkZS5pc05ldyA/ICdtYXJrZXRpbmcuYmxhZGVzLmZpbHRlci1kZXRhaWwubmV3LXRpdGxlJyA6IGRhdGEubmFtZTtcbiAgICAgICAgICAgIGJsYWRlLnN1YnRpdGxlID0gYmxhZGUuaXNOZXcgPyAnbWFya2V0aW5nLmJsYWRlcy5maWx0ZXItZGV0YWlsLm5ldy1zdWJ0aXRsZScgOiAnbWFya2V0aW5nLmJsYWRlcy5maWx0ZXItZGV0YWlsLnN1YnRpdGxlJztcbiAgICAgICAgfVxuXG4gICAgICAgIGJsYWRlLm1ldGFGaWVsZHMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ29ubHlBY3RpdmUnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIm1hcmtldGluZy5ibGFkZXMuZmlsdGVyLWRldGFpbC5sYWJlbHMuYWN0aXZlXCIsXG4gICAgICAgICAgICAgICAgdmFsdWVUeXBlOiBcIkJvb2xlYW5cIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdzdG9yZScsXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwibWFya2V0aW5nLmJsYWRlcy5wcm9tb3Rpb24tZGV0YWlsLmxhYmVscy5zdG9yZVwiLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RvcmVTZWxlY3Rvci5odG1sJ1xuICAgICAgICAgICAgLy99LCB7XG4gICAgICAgICAgICAvLyAgICBuYW1lOiAnc3RhcnREYXRlJyxcbiAgICAgICAgICAgIC8vICAgIHRpdGxlOiBcIm1hcmtldGluZy5ibGFkZXMucHJvbW90aW9uLWRldGFpbC5sYWJlbHMuc3RhcnQtZGF0ZVwiLFxuICAgICAgICAgICAgLy8gICAgdmFsdWVUeXBlOiBcIkRhdGVUaW1lXCJcbiAgICAgICAgICAgIC8vfSwge1xuICAgICAgICAgICAgLy8gICAgbmFtZTogJ2VuZERhdGUnLFxuICAgICAgICAgICAgLy8gICAgdGl0bGU6IFwibWFya2V0aW5nLmJsYWRlcy5wcm9tb3Rpb24tZGV0YWlsLmxhYmVscy5leHBpcmF0aW9uLWRhdGVcIixcbiAgICAgICAgICAgIC8vICAgIHZhbHVlVHlwZTogXCJEYXRlVGltZVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG5cbiAgICAgICAgJHNjb3BlLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYW5ndWxhci5jb3B5KGJsYWRlLmN1cnJlbnRFbnRpdHksIGJsYWRlLm9yaWdFbnRpdHkpO1xuICAgICAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5wcm9tb3Rpb25TZWFyY2hGaWx0ZXJzLnB1c2goYmxhZGUub3JpZ0VudGl0eSk7XG4gICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5wcm9tb3Rpb25TZWFyY2hGaWx0ZXJJZCA9IGJsYWRlLm9yaWdFbnRpdHkuaWQ7XG4gICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUuZmlsdGVyLmN1cnJlbnQgPSBibGFkZS5vcmlnRW50aXR5O1xuICAgICAgICAgICAgICAgIGJsYWRlLmlzTmV3ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGluaXRpYWxpemVCbGFkZShibGFkZS5vcmlnRW50aXR5KTtcbiAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmZpbHRlci5jcml0ZXJpYUNoYW5nZWQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZm9ybVNjb3BlO1xuICAgICAgICAkc2NvcGUuc2V0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7IGZvcm1TY29wZSA9IGZvcm07IH07XG5cbiAgICAgICAgZnVuY3Rpb24gaXNEaXJ0eSgpIHtcbiAgICAgICAgICAgIHJldHVybiAhYW5ndWxhci5lcXVhbHMoYmxhZGUuY3VycmVudEVudGl0eSwgYmxhZGUub3JpZ0VudGl0eSk7XG4gICAgICAgIH1cblxuICAgICAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1maWx0ZXInO1xuXG4gICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiY29yZS5jb21tYW5kcy5hcHBseS1maWx0ZXJcIiwgaWNvbjogJ2ZhIGZhLWZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zYXZlQ2hhbmdlcygpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybVNjb3BlICYmIGZvcm1TY29wZS4kdmFsaWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZXNldFwiLCBpY29uOiAnZmEgZmEtdW5kbycsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogaXNEaXJ0eVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmRlbGV0ZVwiLCBpY29uOiAnZmFzIGZhLXRyYXNoLWFsdCcsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGRlbGV0ZUVudHJ5LFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWJsYWRlLmlzTmV3O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfV07XG5cblxuICAgICAgICBmdW5jdGlvbiBkZWxldGVFbnRyeSgpIHtcbiAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmZpbHRlci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICRsb2NhbFN0b3JhZ2UucHJvbW90aW9uU2VhcmNoRmlsdGVycy5zcGxpY2UoJGxvY2FsU3RvcmFnZS5wcm9tb3Rpb25TZWFyY2hGaWx0ZXJzLmluZGV4T2YoYmxhZGUub3JpZ0VudGl0eSksIDEpO1xuICAgICAgICAgICAgZGVsZXRlICRsb2NhbFN0b3JhZ2UucHJvbW90aW9uU2VhcmNoRmlsdGVySWQ7XG4gICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAkc2NvcGUuYmxhZGVDbG9zZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgYmxhZGUuc3RvcmVzID0gc3RvcmVzLnF1ZXJ5KCk7XG5cbiAgICAgICAgLy8gYWN0aW9ucyBvbiBsb2FkXG4gICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgJHRyYW5zbGF0ZSgnbWFya2V0aW5nLmJsYWRlcy5maWx0ZXItZGV0YWlsLnVubmFtZWQtZmlsdGVyJykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZUJsYWRlKHsgaWQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLCBuYW1lOiByZXN1bHQgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluaXRpYWxpemVCbGFkZShibGFkZS5kYXRhKTtcbiAgICAgICAgfVxuICAgIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZScpXG4gICAgLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLnByb21vdGlvbkRldGFpbENvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLnByb21vdGlvbnMnLCAndmlydG9Db21tZXJjZS5zdG9yZU1vZHVsZS5zdG9yZXMnLCAndmlydG9Db21tZXJjZS5jb3JlTW9kdWxlLmNvbW1vbi5keW5hbWljRXhwcmVzc2lvblNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5jYXRhbG9nTW9kdWxlLmNhdGVnb3JpZXMnLCAndmlydG9Db21tZXJjZS5jYXRhbG9nTW9kdWxlLml0ZW1zJywgJyRxJywgJ3BsYXRmb3JtV2ViQXBwLnNldHRpbmdzJywgJ3BsYXRmb3JtV2ViQXBwLm1ldGFGb3Jtc1NlcnZpY2UnLCAndmlydG9Db21tZXJjZS5zaGlwcGluZ01vZHVsZS5zaGlwcGluZ01ldGhvZHMnLCAndmlydG9Db21tZXJjZS5wYXltZW50TW9kdWxlLnBheW1lbnRNZXRob2RzJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgbWFya2V0aW5nX3Jlc19wcm9tb3Rpb25zLCBzdG9yZXMsIGR5bmFtaWNFeHByZXNzaW9uU2VydmljZSwgY2F0ZWdvcmllcywgaXRlbXMsICRxLCBzZXR0aW5ncywgbWV0YUZvcm1zU2VydmljZSwgc2hpcHBpbmdNZXRob2RzLCBwYXltZW50TWV0aG9kcykge1xuICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgICAgIGJsYWRlLnVwZGF0ZVBlcm1pc3Npb24gPSAnbWFya2V0aW5nOnVwZGF0ZSc7XG5cbiAgICAgICAgYmxhZGUubWV0YUZpZWxkcyA9IG1ldGFGb3Jtc1NlcnZpY2UuZ2V0TWV0YUZpZWxkcyhcInByb21vdGlvbkRldGFpbFwiKTtcblxuICAgICAgICBibGFkZS5leHByZXNzaW9uVHJlZVRlbXBsYXRlVXJsID0gZHluYW1pY0V4cHJlc3Npb25TZXJ2aWNlLmV4cHJlc3Npb25UcmVlVGVtcGxhdGVVcmw7XG5cbiAgICAgICAgYmxhZGUuc2hvd1ByaW9yaXR5ID0gZmFsc2U7XG4gICAgICAgIHNldHRpbmdzLmdldCh7IGlkOiAnTWFya2V0aW5nLlByb21vdGlvbi5Db21iaW5lUG9saWN5JyB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgYmxhZGUuc2hvd1ByaW9yaXR5ID0gZGF0YS52YWx1ZSA9PT0gJ0NvbWJpbmVTdGFja2FibGUnO1xuICAgICAgICB9KTtcbiAgICAgICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uIChwYXJlbnRSZWZyZXNoKSB7XG5cbiAgICAgICAgICAgIHZhciBzaGlwcGluZ01ldGhvZHNQcm9taXNlID0gIWJsYWRlLnNoaXBwaW5nTWV0aG9kc1xuICAgICAgICAgICAgICAgID8gc2hpcHBpbmdNZXRob2RzLmdldEFsbFJlZ2lzdGVyZWQoZnVuY3Rpb24gKG1ldGhvZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuc2hpcHBpbmdNZXRob2RzID0gXy51bmlxKG1ldGhvZHMsIG1ldGhvZCA9PiBtZXRob2QuY29kZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFZQLTU2NDc6IE5lZWQgdG8gZmlsbCBgbWV0aG9kLmlkYCBmb3IgcHJvcGVyIHdvcmsgb2YgbWV0aG9kcyBzZWxlY3RvcnMgVUkgdGVtcGxhdGUgZnJvbSBjb3JlIG1vZHVsZSAoZS5nLiBleHByZXNzaW9uLVJld2FyZFNoaXBwaW5nR2V0T2ZBYnNTaGlwcGluZ01ldGhvZC5odG1sKVxuICAgICAgICAgICAgICAgICAgICBfLmVhY2goYmxhZGUuc2hpcHBpbmdNZXRob2RzLCBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QuaWQgPSBtZXRob2QuaWQgPyBtZXRob2QuaWQgOiBtZXRob2QuY29kZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLiRwcm9taXNlXG4gICAgICAgICAgICAgICAgOiAkcS53aGVuKCk7XG5cbiAgICAgICAgICAgIHZhciBwYXltZW50TWV0aG9kc1Byb21pc2UgPSAhYmxhZGUucGF5bWVudE1ldGhvZHNcbiAgICAgICAgICAgICAgICA/IHBheW1lbnRNZXRob2RzLmdldEFsbFJlZ2lzdGVyZWQoZnVuY3Rpb24gKG1ldGhvZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUucGF5bWVudE1ldGhvZHMgPSBfLnVuaXEobWV0aG9kcywgbWV0aG9kID0+IG1ldGhvZC5jb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVlAtNTY0NzogTmVlZCB0byBmaWxsIGBtZXRob2QuaWRgIGZvciBwcm9wZXIgd29yayBvZiBtZXRob2RzIHNlbGVjdG9ycyBVSSB0ZW1wbGF0ZSBmcm9tIGNvcmUgbW9kdWxlIChlLmcuIGV4cHJlc3Npb24tUmV3YXJkU2hpcHBpbmdHZXRPZkFic1NoaXBwaW5nTWV0aG9kLmh0bWwpXG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaChibGFkZS5wYXltZW50TWV0aG9kcywgZnVuY3Rpb24gKG1ldGhvZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kLmlkID0gbWV0aG9kLmlkID8gbWV0aG9kLmlkIDogbWV0aG9kLmNvZGU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC4kcHJvbWlzZVxuICAgICAgICAgICAgICAgIDogJHEud2hlbigpO1xuXG4gICAgICAgICAgICAvLyBWUC01NjQ3OiBXYWl0IGZvciBwYXltZW50L3NoaXBtZW50IG1ldGhvZCBsb2FkaW5nIGJlZm9yZSByZXF1ZXN0aW5nIHN0b3JlcyBhbmQgaW5pdGlhbGl6ZSBkeW5hbWljIHRyZWVcbiAgICAgICAgICAgICRxLmFsbChzaGlwcGluZ01ldGhvZHNQcm9taXNlLCBwYXltZW50TWV0aG9kc1Byb21pc2UpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmxhZGUuaXNDbG9uaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5kYXRhLmlkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmRhdGEubmFtZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplQmxhZGUoYmxhZGUuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXRpbmdfcmVzX3Byb21vdGlvbnMuZ2V0TmV3KGluaXRpYWxpemVCbGFkZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXRpbmdfcmVzX3Byb21vdGlvbnMuZ2V0KHsgaWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHkuaWQsIGNvZGU6IChibGFkZS5jdXJyZW50RW50aXR5Q29kZSA9PT0gdW5kZWZpbmVkKSA/ICcnIDogYmxhZGUuY3VycmVudEVudGl0eUNvZGUgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemVCbGFkZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplQmxhZGUoZGF0YSkge1xuICAgICAgICAgICAgaWYgKCFibGFkZS5pc05ldykge1xuICAgICAgICAgICAgICAgIGJsYWRlLnRpdGxlID0gZGF0YS5uYW1lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB0cmFuc2Zvcm0gc2ltcGxlIHN0cmluZyB0byBjb21wbGV4IG9iamVjdC4gU2ltcGxlIHN0cmluZyBpc24ndCBlZGl0YWJsZS5cbiAgICAgICAgICAgIGRhdGEuY291cG9ucyA9IF8ubWFwKGRhdGEuY291cG9ucywgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHsgdGV4dDogeCB9OyB9KTtcblxuICAgICAgICAgICAgYmxhZGUuZXhwcmVzc2lvblByb21pc2VzID0gW107XG4gICAgICAgICAgICBpZiAoZGF0YS5keW5hbWljRXhwcmVzc2lvbikge1xuICAgICAgICAgICAgICAgIF8uZWFjaChkYXRhLmR5bmFtaWNFeHByZXNzaW9uLmNoaWxkcmVuLCBleHRlbmRFbGVtZW50QmxvY2spO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkcS5hbGwoYmxhZGUuZXhwcmVzc2lvblByb21pc2VzKS50aGVuKGZ1bmN0aW9uIChhbGxEYXRhKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGFuZ3VsYXIuY29weShkYXRhKTtcbiAgICAgICAgICAgICAgICBibGFkZS5vcmlnRW50aXR5ID0gZGF0YTtcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpc0RpcnR5KCkge1xuICAgICAgICAgICAgcmV0dXJuICFhbmd1bGFyLmVxdWFscyhibGFkZS5jdXJyZW50RW50aXR5LCBibGFkZS5vcmlnRW50aXR5KSAmJiBibGFkZS5oYXNVcGRhdGVQZXJtaXNzaW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuY2FuY2VsQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vYW5ndWxhci5jb3B5KGJsYWRlLm9yaWdFbnRpdHksIGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgJHNjb3BlLmJsYWRlQ2xvc2UoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKG51bGwsIGJsYWRlKTtcbiAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkuY291cG9ucyA9IF8ucGx1Y2soYmxhZGUuY3VycmVudEVudGl0eS5jb3Vwb25zLCAndGV4dCcpO1xuXG4gICAgICAgICAgICBpZiAoYmxhZGUuY3VycmVudEVudGl0eS5keW5hbWljRXhwcmVzc2lvbikge1xuICAgICAgICAgICAgICAgIF8uZWFjaChibGFkZS5jdXJyZW50RW50aXR5LmR5bmFtaWNFeHByZXNzaW9uLmNoaWxkcmVuLCBzdHJpcE9mZlVpSW5mb3JtYXRpb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgICAgICAgICBtYXJrZXRpbmdfcmVzX3Byb21vdGlvbnMuc2F2ZSh7fSwgYmxhZGUuY3VycmVudEVudGl0eSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNOZXcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplVG9vbGJhcigpO1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5yZWZyZXNoKHRydWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtYXJrZXRpbmdfcmVzX3Byb21vdGlvbnMudXBkYXRlKHt9LCBibGFkZS5jdXJyZW50RW50aXR5LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5yZWZyZXNoKHRydWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRGb3JtID0gZnVuY3Rpb24gKGZvcm0pIHsgJHNjb3BlLmZvcm1TY29wZSA9IGZvcm07IH07XG5cbiAgICAgICAgJHNjb3BlLmlzVmFsaWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNEaXJ0eSgpXG4gICAgICAgICAgICAgICAgJiYgJHNjb3BlLmZvcm1TY29wZVxuICAgICAgICAgICAgICAgICYmICRzY29wZS5mb3JtU2NvcGUuJHZhbGlkO1xuICAgICAgICAgICAgLy8mJiAoIWJsYWRlLmN1cnJlbnRFbnRpdHkuZHluYW1pY0V4cHJlc3Npb247XG4gICAgICAgICAgICAvLyAgICB8fCAoYmxhZGUuY3VycmVudEVudGl0eS5keW5hbWljRXhwcmVzc2lvbi5jaGlsZHJlblswXS5jaGlsZHJlbi5sZW5ndGggPiAwXG4gICAgICAgICAgICAvLyAgICAgICAgJiYgYmxhZGUuY3VycmVudEVudGl0eS5keW5hbWljRXhwcmVzc2lvbi5jaGlsZHJlblszXS5jaGlsZHJlbi5sZW5ndGggPiAwKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYmxhZGUub25DbG9zZSA9IGZ1bmN0aW9uIChjbG9zZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dDb25maXJtYXRpb25JZk5lZWRlZChpc0RpcnR5KCkgJiYgIWJsYWRlLmlzTmV3LCAkc2NvcGUuaXNWYWxpZCgpLCBibGFkZSwgJHNjb3BlLnNhdmVDaGFuZ2VzLCBjbG9zZUNhbGxiYWNrLCBcIm1hcmtldGluZy5kaWFsb2dzLnByb21vdGlvbi1zYXZlLnRpdGxlXCIsIFwibWFya2V0aW5nLmRpYWxvZ3MucHJvbW90aW9uLXNhdmUubWVzc2FnZVwiKTtcbiAgICAgICAgfTtcblxuICAgICAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1hcmVhLWNoYXJ0JztcblxuICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplVG9vbGJhcigpIHtcbiAgICAgICAgICAgIGlmICghYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuc2F2ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ZhcyBmYS1zYXZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6ICRzY29wZS5zYXZlQ2hhbmdlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6ICRzY29wZS5pc1ZhbGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnJlc2V0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtdW5kbycsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KGJsYWRlLm9yaWdFbnRpdHksIGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGlzRGlydHksXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiBibGFkZS51cGRhdGVQZXJtaXNzaW9uXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuY2xvbmVcIiwgaWNvbjogJ2ZhcyBmYS1jbG9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogJ3Byb21vdGlvbkNsb25lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdtYXJrZXRpbmcuYmxhZGVzLnByb21vdGlvbi1kZXRhaWwudGl0bGUtbmV3JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ2xvbmluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogYmxhZGUuY3VycmVudEVudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLnByb21vdGlvbkRldGFpbENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk1hcmtldGluZykvU2NyaXB0cy9wcm9tb3Rpb24vYmxhZGVzL3Byb21vdGlvbi1kZXRhaWwudHBsLmh0bWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUucGFyZW50QmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICFpc0RpcnR5KCk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnbWFya2V0aW5nOmNyZWF0ZSdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkYXRlcGlja2VyXG4gICAgICAgICRzY29wZS5kYXRlcGlja2VycyA9IHtcbiAgICAgICAgICAgIHN0cjogZmFsc2UsXG4gICAgICAgICAgICBlbmQ6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLm9wZW4gPSBmdW5jdGlvbiAoJGV2ZW50LCB3aGljaCkge1xuICAgICAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICRzY29wZS5kYXRlcGlja2Vyc1t3aGljaF0gPSB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIER5bmFtaWMgRXhwcmVzc2lvbkJsb2NrXG4gICAgICAgIGZ1bmN0aW9uIGV4dGVuZEVsZW1lbnRCbG9jayhleHByZXNzaW9uQmxvY2spIHtcbiAgICAgICAgICAgIHZhciByZXRWYWwgPSBkeW5hbWljRXhwcmVzc2lvblNlcnZpY2UuZXhwcmVzc2lvbnNbZXhwcmVzc2lvbkJsb2NrLmlkXTtcbiAgICAgICAgICAgIGlmICghcmV0VmFsKSB7XG4gICAgICAgICAgICAgICAgcmV0VmFsID0geyBkaXNwbGF5TmFtZTogJ3Vua25vd24gZWxlbWVudDogJyArIGV4cHJlc3Npb25CbG9jay5pZCB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfLmV4dGVuZChleHByZXNzaW9uQmxvY2ssIHJldFZhbCk7XG5cbiAgICAgICAgICAgIGlmICghZXhwcmVzc2lvbkJsb2NrLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgZXhwcmVzc2lvbkJsb2NrLmNoaWxkcmVuID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfLmVhY2goZXhwcmVzc2lvbkJsb2NrLmV4Y2x1ZGluZ0NhdGVnb3J5SWRzLCBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICAgICAvLyBsb2FkIGVhY2ggY2F0ZWdvcnkgdG8gZGlzcGxheSBpdHMgbmFtZSBpbiBVSVxuICAgICAgICAgICAgICAgIHZhciBleGNsdWRpbmdJdGVtID0geyBpZDogJ0V4Y2x1ZGluZ0NhdGVnb3J5Q29uZGl0aW9uJywgY2F0ZWdvcnlJZDogaWQgfTtcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uQmxvY2suY2hpbGRyZW4ucHVzaChleGNsdWRpbmdJdGVtKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IGNhdGVnb3JpZXMucXVlcnkoeyBpZHM6IFtpZF0sIHJlc3BHcm91cDogJ0luZm8nIH0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfLmFueShkYXRhKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGluZ0l0ZW0uY2F0ZWdvcnlOYW1lID0gZGF0YVswXS5uYW1lO1xuICAgICAgICAgICAgICAgIH0pLiRwcm9taXNlO1xuICAgICAgICAgICAgICAgIGJsYWRlLmV4cHJlc3Npb25Qcm9taXNlcy5wdXNoKHByb21pc2UpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIF8uZWFjaChleHByZXNzaW9uQmxvY2suZXhjbHVkaW5nUHJvZHVjdElkcywgZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAgICAgLy8gbG9hZCBlYWNoIHByb2R1Y3QgdG8gZGlzcGxheSBpdHMgbmFtZSBhbmQgY29kZSBpbiBVSVxuICAgICAgICAgICAgICAgIHZhciBleGNsdWRpbmdJdGVtID0geyBpZDogJ0V4Y2x1ZGluZ1Byb2R1Y3RDb25kaXRpb24nLCBwcm9kdWN0SWQ6IGlkIH07XG4gICAgICAgICAgICAgICAgZXhwcmVzc2lvbkJsb2NrLmNoaWxkcmVuLnB1c2goZXhjbHVkaW5nSXRlbSk7IC8vIGNhdGVnb3J5TmFtZVxuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gaXRlbXMucXVlcnkoeyBpZHM6IFtpZF0sIHJlc3BHcm91cDogJ0l0ZW1JbmZvJyB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXy5hbnkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGluZ0l0ZW0ucHJvZHVjdE5hbWUgPSBkYXRhWzBdLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGNsdWRpbmdJdGVtLnByb2R1Y3RDb2RlID0gZGF0YVswXS5jb2RlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkuJHByb21pc2U7XG4gICAgICAgICAgICAgICAgYmxhZGUuZXhwcmVzc2lvblByb21pc2VzLnB1c2gocHJvbWlzZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgXy5lYWNoKGV4cHJlc3Npb25CbG9jay5jaGlsZHJlbiwgZXh0ZW5kRWxlbWVudEJsb2NrKTtcbiAgICAgICAgICAgIF8uZWFjaChleHByZXNzaW9uQmxvY2suYXZhaWxhYmxlQ2hpbGRyZW4sIGV4dGVuZEVsZW1lbnRCbG9jayk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdHJpcE9mZlVpSW5mb3JtYXRpb24oZXhwcmVzc2lvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgIGV4cHJlc3Npb25FbGVtZW50LmF2YWlsYWJsZUNoaWxkcmVuID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgZXhwcmVzc2lvbkVsZW1lbnQuZGlzcGxheU5hbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBleHByZXNzaW9uRWxlbWVudC5nZXRWYWxpZGF0aW9uRXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBleHByZXNzaW9uRWxlbWVudC5uZXdDaGlsZExhYmVsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgZXhwcmVzc2lvbkVsZW1lbnQudGVtcGxhdGVVUkwgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHZhciBzZWxlY3RlZENhdGVnb3JpZXMgPSBfLndoZXJlKGV4cHJlc3Npb25FbGVtZW50LmNoaWxkcmVuLCB7IGlkOiAnRXhjbHVkaW5nQ2F0ZWdvcnlDb25kaXRpb24nIH0pO1xuICAgICAgICAgICAgZXhwcmVzc2lvbkVsZW1lbnQuZXhjbHVkaW5nQ2F0ZWdvcnlJZHMgPSBfLnBsdWNrKHNlbGVjdGVkQ2F0ZWdvcmllcywgJ2NhdGVnb3J5SWQnKTtcbiAgICAgICAgICAgIGV4cHJlc3Npb25FbGVtZW50LmNoaWxkcmVuID0gXy5kaWZmZXJlbmNlKGV4cHJlc3Npb25FbGVtZW50LmNoaWxkcmVuLCBzZWxlY3RlZENhdGVnb3JpZXMpO1xuXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRQcm9kdWN0cyA9IF8ud2hlcmUoZXhwcmVzc2lvbkVsZW1lbnQuY2hpbGRyZW4sIHsgaWQ6ICdFeGNsdWRpbmdQcm9kdWN0Q29uZGl0aW9uJyB9KTtcbiAgICAgICAgICAgIGV4cHJlc3Npb25FbGVtZW50LmV4Y2x1ZGluZ1Byb2R1Y3RJZHMgPSBfLnBsdWNrKHNlbGVjdGVkUHJvZHVjdHMsICdwcm9kdWN0SWQnKTtcbiAgICAgICAgICAgIGV4cHJlc3Npb25FbGVtZW50LmNoaWxkcmVuID0gXy5kaWZmZXJlbmNlKGV4cHJlc3Npb25FbGVtZW50LmNoaWxkcmVuLCBzZWxlY3RlZFByb2R1Y3RzKTtcblxuICAgICAgICAgICAgXy5lYWNoKGV4cHJlc3Npb25FbGVtZW50LmNoaWxkcmVuLCBzdHJpcE9mZlVpSW5mb3JtYXRpb24pO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyRzY29wZS4kd2F0Y2goJ2JsYWRlLmN1cnJlbnRFbnRpdHkuZW5kRGF0ZScsXG4gICAgICAgIC8vICAgIGZ1bmN0aW9uIChuZXdWYWx1ZSwgb2xkVmFsdWUsIHNjb3BlKSB7XG4gICAgICAgIC8vICAgICAgICBpZiAobmV3VmFsdWUgIT0gdW5kZWZpbmVkICYmIChuZXdWYWx1ZSBpbnN0YW5jZW9mIERhdGUpKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIC8vICAgICAgICAgICAgLy92YXIgZGF0ZSA9IGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5LmVuZERhdGUpXG4gICAgICAgIC8vICAgICAgICAgICAgLy9kYXRlID0gbW9tZW50KGRhdGUpLmFkZCh7IGhvdXJzOiAyMywgbWludXRlczogNTksIHNlY29uZHM6IDU5IH0pLnRvRGF0ZSgpO1xuICAgICAgICAvLyAgICAgICAgICAgIC8vbmV3VmFsdWUgPSBtb21lbnQobmV3VmFsdWUpLmFkZCh7IGhvdXJzOiAyMywgbWludXRlczogNTcsIHNlY29uZHM6IDU5IH0pLnRvRGF0ZSgpO1xuICAgICAgICAvLyAgICAgICAgICAgIG5ld1ZhbHVlLnNldEhvdXJzKDIzLCA1OSwgNTkpO1xuXG4gICAgICAgIC8vICAgICAgICB9XG4gICAgICAgIC8vICAgIH1cbiAgICAgICAgLy8pO1xuXG4gICAgICAgIGluaXRpYWxpemVUb29sYmFyKCk7XG5cbiAgICAgICAgLy8vIFRPRE86IHJlZmFjdG9yIHRvIG5ldyB2YS1tYXJrZXRpbmctc3RvcmVzLXNlbGVjdG9yIGRpcmVjdGl2ZS5cbiAgICAgICAgLy8gUGFnZVNpemUgYW1vdW50IG11c3QgYmUgZW5vdWdoIHRvIHNob3cgc2Nyb2xsYmFyIGluIGRyb3Bkb3duIGxpc3QgY29udGFpbmVyLlxuICAgICAgICAvLyBJZiBzY3JvbGxiYXIgZG9lc24ndCBhcHBlYXIgYXV0byBsb2FkaW5nIHdvbid0IHdvcmsuXG4gICAgICAgICRzY29wZS5wYWdlU2l6ZSA9IDI1O1xuICAgICAgICAkc2NvcGUuc3RvcmVzID0gW107XG4gICAgICAgIHZhciBsYXN0U2VhcmNoUGhyYXNlID0gJyc7XG4gICAgICAgIHZhciB0b3RhbENvdW50ID0gMDtcblxuICAgICAgICAkc2NvcGUuZmV0Y2hTdG9yZXMgPSBmdW5jdGlvbiAoJHNlbGVjdCkge1xuICAgICAgICAgICAgJHEuYWxsKFtsb2FkUHJvbW90aW9uU3RvcmVzKCksICRzY29wZS5mZXRjaE5leHRTdG9yZXMoJHNlbGVjdCldKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBsb2FkUHJvbW90aW9uU3RvcmVzKCkge1xuICAgICAgICAgICAgaWYgKF8uYW55KGJsYWRlLmN1cnJlbnRFbnRpdHkuc3RvcmVJZHMpICYmICFfLmFueSgkc2NvcGUuc3RvcmVzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZXMuc2VhcmNoKHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVJZHM6IGJsYWRlLmN1cnJlbnRFbnRpdHkuc3RvcmVJZHMsXG4gICAgICAgICAgICAgICAgICAgIHRha2U6IGJsYWRlLmN1cnJlbnRFbnRpdHkuc3RvcmVJZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUdyb3VwOiAnbm9uZSdcbiAgICAgICAgICAgICAgICB9LCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBqb2luU3RvcmVzKGRhdGEucmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgfSkuJHByb21pc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAkcS5yZXNvbHZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuZmV0Y2hOZXh0U3RvcmVzID0gKCRzZWxlY3QpID0+IHtcbiAgICAgICAgICAgICRzZWxlY3QucGFnZSA9ICRzZWxlY3QucGFnZSB8fCAwO1xuXG4gICAgICAgICAgICBpZiAobGFzdFNlYXJjaFBocmFzZSAhPT0gJHNlbGVjdC5zZWFyY2gpIHtcbiAgICAgICAgICAgICAgICBsYXN0U2VhcmNoUGhyYXNlID0gJHNlbGVjdC5zZWFyY2g7XG4gICAgICAgICAgICAgICAgJHNlbGVjdC5wYWdlID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCRzZWxlY3QucGFnZSA9PT0gMCB8fCB0b3RhbENvdW50ID4gJHNjb3BlLnN0b3Jlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVzLnNlYXJjaChcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoUGhyYXNlOiAkc2VsZWN0LnNlYXJjaCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2U6ICRzY29wZS5wYWdlU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraXA6ICRzZWxlY3QucGFnZSAqICRzY29wZS5wYWdlU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlR3JvdXA6ICdub25lJ1xuICAgICAgICAgICAgICAgICAgICB9LCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgam9pblN0b3JlcyhkYXRhLnJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGVjdC5wYWdlKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2VsZWN0LnBhZ2UgKiAkc2NvcGUucGFnZVNpemUgPCBkYXRhLnRvdGFsQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsQ29tcGxldGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQ291bnQgPSBNYXRoLm1heCh0b3RhbENvdW50LCBkYXRhLnRvdGFsQ291bnQpO1xuICAgICAgICAgICAgICAgICAgICB9KS4kcHJvbWlzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuICRxLnJlc29sdmUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBqb2luU3RvcmVzKG5ld0l0ZW1zKSB7XG4gICAgICAgICAgICBuZXdJdGVtcyA9IF8ucmVqZWN0KG5ld0l0ZW1zLCB4ID0+IF8uYW55KCRzY29wZS5zdG9yZXMsIHkgPT4geS5pZCA9PT0geC5pZCkpO1xuXG4gICAgICAgICAgICBfLmVhY2gobmV3SXRlbXMsIGZ1bmN0aW9uIChzdG9yZSkge1xuICAgICAgICAgICAgICAgIC8vIFZQLTU2NDc6IExlZnQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIGFzIHZpcnRvQ29tbWVyY2UuZHluYW1pY0V4cHJlc3Npb25zLnNoaXBwaW5nTWV0aG9kUmV3YXJkQ29udHJvbGxlciBpbiBDb3JlIG1vZHVsZSBleHBlY3RzIHRoZXNlIHByb3BlcnRpZXMgdG8gYmUgZmlsbGVkIGluIHRoZSBzdG9yZVxuICAgICAgICAgICAgICAgIHN0b3JlLnNoaXBwaW5nTWV0aG9kcyA9IGJsYWRlLnNoaXBwaW5nTWV0aG9kcyB8fCBbXTtcbiAgICAgICAgICAgICAgICBzdG9yZS5wYXltZW50TWV0aG9kcyA9IGJsYWRlLnBheW1lbnRNZXRob2RzIHx8IFtdO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS5zdG9yZXMgPSAkc2NvcGUuc3RvcmVzLmNvbmNhdChuZXdJdGVtcyk7XG4gICAgICAgIH1cblxuICAgICAgICBibGFkZS5yZWZyZXNoKGZhbHNlKTtcblxuICAgICAgICAkc2NvcGUuZXhjbHVzaXZpdHlUeXBlcyA9IFt7IG5hbWU6ICdtYXJrZXRpbmcuYmxhZGVzLnByb21vdGlvbi1kZXRhaWwubGFiZWxzLmNvbWJpbmVkLXdpdGgtb3RoZXJzJywgdmFsdWU6IGZhbHNlIH0sIHsgbmFtZTogJ21hcmtldGluZy5ibGFkZXMucHJvbW90aW9uLWRldGFpbC5sYWJlbHMuZXhjbHVzaXZlJywgdmFsdWU6IHRydWUgfV07XG4gICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5wcm9tb3Rpb25Db25kaXRpb25DdXJyZW5jeUlzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3ZpcnRvQ29tbWVyY2UuY29yZU1vZHVsZS5jdXJyZW5jeS5jdXJyZW5jeVV0aWxzJywgZnVuY3Rpb24gKCRzY29wZSwgY3VycmVuY3lVdGlscykge1xuICAgICRzY29wZS5jdXJyZW5jeVV0aWxzID0gY3VycmVuY3lVdGlscztcbn1dKVxuXG4gICAgLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLnByb21vdGlvbkV4cHJlc3Npb25zQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3ZpcnRvQ29tbWVyY2UuY2F0YWxvZ01vZHVsZS5pdGVtcycsICdwbGF0Zm9ybVdlYkFwcC5hdXRoU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgaXRlbXMsIGF1dGhTZXJ2aWNlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG5cbiAgICAkc2NvcGUub3Blbkl0ZW1TZWxlY3RXaXphcmQgPSBmdW5jdGlvbiAocGFyZW50RWxlbWVudCwgaXNNdWx0aVNlbGVjdCkge1xuICAgICAgICBpZiAoIWF1dGhTZXJ2aWNlLmNoZWNrUGVybWlzc2lvbignbWFya2V0aW5nOnVwZGF0ZScpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNNdWx0aVNlbGVjdCkge1xuICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgIGlkOiBcIkNhdGFsb2dFbnRyaWVzXCIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwibWFya2V0aW5nLmJsYWRlcy5jYXRhbG9nLWVudHJpZXMudGl0bGUtcHJvZHVjdFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5jYXRhbG9nRW50cmllc0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTWFya2V0aW5nKS9TY3JpcHRzL3Byb21vdGlvbi9ibGFkZXMvY2F0YWxvZy1lbnRyeS1saXN0LnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICBicmVhZGNydW1iczogW10sXG4gICAgICAgICAgICAgICAgcHJvbW90aW9uOiBwYXJlbnRFbGVtZW50XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsICRzY29wZS5ibGFkZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFyZW50RWxlbWVudC5wcm9kdWN0SWQpIHtcbiAgICAgICAgICAgIGxldCBpdGVtRGV0YWlsQmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IFwibGlzdEl0ZW1EZXRhaWxcIixcbiAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcmVudEVsZW1lbnQucHJvZHVjdElkLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBwYXJlbnRFbGVtZW50LnByb2R1Y3ROYW1lLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNhdGFsb2dNb2R1bGUuaXRlbURldGFpbENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuQ2F0YWxvZykvU2NyaXB0cy9ibGFkZXMvaXRlbS1kZXRhaWwudHBsLmh0bWwnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUoaXRlbURldGFpbEJsYWRlLCAkc2NvcGUuYmxhZGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgc2VsZWN0ZWRMaXN0RW50cmllcyA9IFtdO1xuICAgICAgICB2YXIgY2F0YWxvZ0JsYWRlID0ge1xuICAgICAgICAgICAgaWQ6IFwiQ2F0YWxvZ0VudHJ5U2VsZWN0XCIsXG4gICAgICAgICAgICB0aXRsZTogXCJtYXJrZXRpbmcuYmxhZGVzLmNhdGFsb2ctaXRlbXMtc2VsZWN0LnRpdGxlLXByb2R1Y3RcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNhdGFsb2dNb2R1bGUuY2F0YWxvZ0l0ZW1TZWxlY3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuQ2F0YWxvZykvU2NyaXB0cy9ibGFkZXMvY29tbW9uL2NhdGFsb2ctaXRlbXMtc2VsZWN0LnRwbC5odG1sJyxcbiAgICAgICAgICAgIGJyZWFkY3J1bWJzOiBbXSxcbiAgICAgICAgICAgIHRvb2xiYXJDb21tYW5kczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucGljay1zZWxlY3RlZFwiLCBpY29uOiAnZmFzIGZhLXBsdXMnLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uIChibGFkZSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50LnByb2R1Y3RJZCA9IHNlbGVjdGVkTGlzdEVudHJpZXNbMF0uaWQ7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudEVsZW1lbnQucHJvZHVjdE5hbWUgPSBzZWxlY3RlZExpc3RFbnRyaWVzWzBdLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudEVsZW1lbnQucHJvZHVjdENvZGUgPSBzZWxlY3RlZExpc3RFbnRyaWVzWzBdLmNvZGU7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VCbGFkZShibGFkZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZExpc3RFbnRyaWVzLmxlbmd0aCA9PSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1dXG4gICAgICAgIH07XG5cbiAgICAgICAgY2F0YWxvZ0JsYWRlLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICBzaG93Q2hlY2tpbmdNdWx0aXBsZTogZmFsc2UsXG4gICAgICAgICAgICBjaGVja0l0ZW1GbjogZnVuY3Rpb24gKGxpc3RJdGVtLCBpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpc3RJdGVtLnR5cGUgPT0gJ2NhdGVnb3J5Jykge1xuICAgICAgICAgICAgICAgICAgICBjYXRhbG9nQmxhZGUuZXJyb3IgPSAnTXVzdCBzZWxlY3QgUHJvZHVjdCc7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RJdGVtLnNlbGVjdGVkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXy5hbGwoc2VsZWN0ZWRMaXN0RW50cmllcywgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQgIT0gbGlzdEl0ZW0uaWQ7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMaXN0RW50cmllcy5wdXNoKGxpc3RJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGlzdEVudHJpZXMgPSBfLnJlamVjdChzZWxlY3RlZExpc3RFbnRyaWVzLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCA9PSBsaXN0SXRlbS5pZDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0YWxvZ0JsYWRlLmVycm9yID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShjYXRhbG9nQmxhZGUsICRzY29wZS5ibGFkZSk7XG4gICAgfTtcblxuICAgICRzY29wZS5vcGVuQ2F0ZWdvcnlTZWxlY3RXaXphcmQgPSBmdW5jdGlvbiAocGFyZW50RWxlbWVudCkge1xuICAgICAgICBpZiAoIWF1dGhTZXJ2aWNlLmNoZWNrUGVybWlzc2lvbignbWFya2V0aW5nOnVwZGF0ZScpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2VsZWN0ZWRMaXN0RW50cmllcyA9IFtdO1xuICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICBpZDogXCJDYXRhbG9nQ2F0ZWdvcnlTZWxlY3RcIixcbiAgICAgICAgICAgIHRpdGxlOiBcIm1hcmtldGluZy5ibGFkZXMuY2F0YWxvZy1pdGVtcy1zZWxlY3QudGl0bGUtY2F0ZWdvcnlcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNhdGFsb2dNb2R1bGUuY2F0YWxvZ0l0ZW1TZWxlY3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuQ2F0YWxvZykvU2NyaXB0cy9ibGFkZXMvY29tbW9uL2NhdGFsb2ctaXRlbXMtc2VsZWN0LnRwbC5odG1sJyxcbiAgICAgICAgICAgIGJyZWFkY3J1bWJzOiBbXSxcbiAgICAgICAgICAgIHRvb2xiYXJDb21tYW5kczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucGljay1zZWxlY3RlZFwiLCBpY29uOiAnZmFzIGZhLXBsdXMnLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uIChibGFkZSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50LmNhdGVnb3J5SWQgPSBzZWxlY3RlZExpc3RFbnRyaWVzWzBdLmlkO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50LmNhdGVnb3J5TmFtZSA9IHNlbGVjdGVkTGlzdEVudHJpZXNbMF0ubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKGJsYWRlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkTGlzdEVudHJpZXMubGVuZ3RoID09IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfTtcblxuICAgICAgICBuZXdCbGFkZS5vcHRpb25zID0ge1xuICAgICAgICAgICAgc2hvd0NoZWNraW5nTXVsdGlwbGU6IGZhbHNlLFxuICAgICAgICAgICAgYWxsb3dDaGVja2luZ0l0ZW06IGZhbHNlLFxuICAgICAgICAgICAgYWxsb3dDaGVja2luZ0NhdGVnb3J5OiB0cnVlLFxuICAgICAgICAgICAgY2hlY2tJdGVtRm46IGZ1bmN0aW9uIChsaXN0SXRlbSwgaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGlmIChsaXN0SXRlbS50eXBlICE9ICdjYXRlZ29yeScpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3QmxhZGUuZXJyb3IgPSAnTXVzdCBzZWxlY3QgQ2F0ZWdvcnknO1xuICAgICAgICAgICAgICAgICAgICBsaXN0SXRlbS5zZWxlY3RlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF8uYWxsKHNlbGVjdGVkTGlzdEVudHJpZXMsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkICE9IGxpc3RJdGVtLmlkOyB9KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGlzdEVudHJpZXMucHVzaChsaXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExpc3RFbnRyaWVzID0gXy5yZWplY3Qoc2VsZWN0ZWRMaXN0RW50cmllcywgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQgPT0gbGlzdEl0ZW0uaWQ7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5ld0JsYWRlLmVycm9yID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgJHNjb3BlLmJsYWRlKTtcbiAgICB9O1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5wcm9tb3Rpb25MaXN0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhbFN0b3JhZ2UnLCAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUucHJvbW90aW9ucycsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlVXRpbHMnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJyxcbiAgICBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYWxTdG9yYWdlLCBwcm9tb3Rpb25zLCBkaWFsb2dTZXJ2aWNlLCBibGFkZVV0aWxzLCB1aUdyaWRIZWxwZXIpIHtcbiAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgICAgICB2YXIgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSA9IGJsYWRlVXRpbHMuYmxhZGVOYXZpZ2F0aW9uU2VydmljZTtcblxuICAgICAgICBibGFkZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgdmFyIGNyaXRlcmlhID0ge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlR3JvdXA6ICdub25lJyxcbiAgICAgICAgICAgICAgICBrZXl3b3JkOiBmaWx0ZXIua2V5d29yZCxcbiAgICAgICAgICAgICAgICBzb3J0OiB1aUdyaWRIZWxwZXIuZ2V0U29ydEV4cHJlc3Npb24oJHNjb3BlKSxcbiAgICAgICAgICAgICAgICBza2lwOiAoJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAtIDEpICogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCxcbiAgICAgICAgICAgICAgICB0YWtlOiAkc2NvcGUucGFnZVNldHRpbmdzLml0ZW1zUGVyUGFnZUNvdW50XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGZpbHRlci5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoY3JpdGVyaWEsIGZpbHRlci5jdXJyZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcHJvbW90aW9ucy5zZWFyY2goY3JpdGVyaWEsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSBkYXRhLnRvdGFsQ291bnQ7XG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0aWVzID0gZGF0YS5yZXN1bHRzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkTm9kZUlkID0gbm9kZS5pZDtcblxuICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgIGlkOiAnbGlzdEl0ZW1DaGlsZCcsXG4gICAgICAgICAgICAgICAgY3VycmVudEVudGl0eTogbm9kZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogbm9kZS5uYW1lLFxuICAgICAgICAgICAgICAgIHN1YnRpdGxlOiBibGFkZS5zdWJ0aXRsZSxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUucHJvbW90aW9uRGV0YWlsQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5NYXJrZXRpbmcpL1NjcmlwdHMvcHJvbW90aW9uL2JsYWRlcy9wcm9tb3Rpb24tZGV0YWlsLnRwbC5odG1sJ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZGVsZXRlTGlzdCA9IGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgICAgIGlkOiBcImNvbmZpcm1EZWxldGVJdGVtXCIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwibWFya2V0aW5nLmRpYWxvZ3MucHJvbW90aW9ucy1kZWxldGUudGl0bGVcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIm1hcmtldGluZy5kaWFsb2dzLnByb21vdGlvbnMtZGVsZXRlLm1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1JZHMgPSBfLnBsdWNrKGxpc3QsICdpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21vdGlvbnMucmVtb3ZlKHsgaWRzOiBpdGVtSWRzIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Q29uZmlybWF0aW9uRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYmxhZGUuaGVhZEljb24gPSAnZmEgZmEtYXJlYS1jaGFydCc7XG5cbiAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucmVmcmVzaFwiLCBpY29uOiAnZmEgZmEtcmVmcmVzaCcsXG4gICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogYmxhZGUucmVmcmVzaCxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuYWRkXCIsIGljb246ICdmYXMgZmEtcGx1cycsXG4gICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogJ2xpc3RJdGVtQ2hpbGQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnbWFya2V0aW5nLmJsYWRlcy5wcm9tb3Rpb24tZGV0YWlsLnRpdGxlLW5ldycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IGJsYWRlLnN1YnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTmV3OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbnRpdHk6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5wcm9tb3Rpb25EZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLk1hcmtldGluZykvU2NyaXB0cy9wcm9tb3Rpb24vYmxhZGVzL3Byb21vdGlvbi1kZXRhaWwudHBsLmh0bWwnXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdtYXJrZXRpbmc6Y3JlYXRlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmRlbGV0ZVwiLCBpY29uOiAnZmFzIGZhLXRyYXNoLWFsdCcsXG4gICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlTGlzdCgkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmdyaWRBcGkgJiYgXy5hbnkoJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdtYXJrZXRpbmc6ZGVsZXRlJ1xuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIHNpbXBsZSBhbmQgYWR2YW5jZWQgZmlsdGVyaW5nXG4gICAgICAgIHZhciBmaWx0ZXIgPSBibGFkZS5maWx0ZXIgPSAkc2NvcGUuZmlsdGVyID0ge307XG4gICAgICAgICRzY29wZS4kbG9jYWxTdG9yYWdlID0gJGxvY2FsU3RvcmFnZTtcbiAgICAgICAgaWYgKCEkbG9jYWxTdG9yYWdlLnByb21vdGlvblNlYXJjaEZpbHRlcnMpIHtcbiAgICAgICAgICAgICRsb2NhbFN0b3JhZ2UucHJvbW90aW9uU2VhcmNoRmlsdGVycyA9IFt7IG5hbWU6ICdtYXJrZXRpbmcuYmxhZGVzLnByb21vdGlvbi1saXN0Lm5ldy1maWx0ZXInIH1dO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkbG9jYWxTdG9yYWdlLnByb21vdGlvblNlYXJjaEZpbHRlcklkKSB7XG4gICAgICAgICAgICBmaWx0ZXIuY3VycmVudCA9IF8uZmluZFdoZXJlKCRsb2NhbFN0b3JhZ2UucHJvbW90aW9uU2VhcmNoRmlsdGVycywgeyBpZDogJGxvY2FsU3RvcmFnZS5wcm9tb3Rpb25TZWFyY2hGaWx0ZXJJZCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZpbHRlci5jaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbG9jYWxTdG9yYWdlLnByb21vdGlvblNlYXJjaEZpbHRlcklkID0gZmlsdGVyLmN1cnJlbnQgPyBmaWx0ZXIuY3VycmVudC5pZCA6IG51bGw7XG4gICAgICAgICAgICBpZiAoZmlsdGVyLmN1cnJlbnQgJiYgIWZpbHRlci5jdXJyZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJEZXRhaWxCbGFkZSh7IGlzTmV3OiB0cnVlIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUoeyBpZDogJ2ZpbHRlckRldGFpbCcgfSk7XG4gICAgICAgICAgICAgICAgZmlsdGVyLmNyaXRlcmlhQ2hhbmdlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZpbHRlci5lZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGZpbHRlci5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgc2hvd0ZpbHRlckRldGFpbEJsYWRlKHsgZGF0YTogZmlsdGVyLmN1cnJlbnQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gc2hvd0ZpbHRlckRldGFpbEJsYWRlKGJsYWRlRGF0YSkge1xuICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgIGlkOiAnZmlsdGVyRGV0YWlsJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUuZmlsdGVyRGV0YWlsQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5NYXJrZXRpbmcpL1NjcmlwdHMvcHJvbW90aW9uL2JsYWRlcy9maWx0ZXItZGV0YWlsLnRwbC5odG1sJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKG5ld0JsYWRlLCBibGFkZURhdGEpO1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZpbHRlci5jcml0ZXJpYUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIHVpLWdyaWRcbiAgICAgICAgJHNjb3BlLnNldEdyaWRPcHRpb25zID0gZnVuY3Rpb24gKGdyaWRPcHRpb25zKSB7XG4gICAgICAgICAgICB1aUdyaWRIZWxwZXIuaW5pdGlhbGl6ZSgkc2NvcGUsIGdyaWRPcHRpb25zLCBmdW5jdGlvbiAoZ3JpZEFwaSkge1xuICAgICAgICAgICAgICAgIHVpR3JpZEhlbHBlci5iaW5kUmVmcmVzaE9uU29ydENoYW5nZWQoJHNjb3BlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBibGFkZVV0aWxzLmluaXRpYWxpemVQYWdpbmF0aW9uKCRzY29wZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gYWN0aW9ucyBvbiBsb2FkXG4gICAgICAgIC8vTm8gbmVlZCB0byBjYWxsIHRoaXMgYmVjYXVzZSBwYWdlICdwYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UnIGlzIHdhdGNoZWQhISEgSXQgd291bGQgdHJpZ2dlciBzdWJzZXF1ZW50IGR1cGxpY2F0ZWQgcmVxLi4uXG4gICAgICAgIC8vYmxhZGUucmVmcmVzaCgpO1xuICAgIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZScpXG4uZmFjdG9yeSgndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUucHJvbW90aW9ucycsIFsnJHJlc291cmNlJywgZnVuY3Rpb24gKCRyZXNvdXJjZSkge1xuICAgIHJldHVybiAkcmVzb3VyY2UoJ2FwaS9tYXJrZXRpbmcvcHJvbW90aW9ucy86aWQnLCBudWxsLCB7XG4gICAgICAgIHNlYXJjaDogeyB1cmw6ICdhcGkvbWFya2V0aW5nL3Byb21vdGlvbnMvc2VhcmNoJywgbWV0aG9kOiAnUE9TVCcgfSxcbiAgICAgICAgZ2V0TmV3OiB7IHVybDogJ2FwaS9tYXJrZXRpbmcvcHJvbW90aW9ucy9uZXcnIH0sXG4gICAgICAgIHVwZGF0ZTogeyBtZXRob2Q6ICdQVVQnIH0sXG4gICAgICAgIHNlYXJjaENvdXBvbnM6IHsgdXJsOiAnYXBpL21hcmtldGluZy9wcm9tb3Rpb25zL2NvdXBvbnMvc2VhcmNoJywgbWV0aG9kOiAnUE9TVCcgfSxcbiAgICAgICAgZ2V0Q291cG9uOiB7IHVybDogJ2FwaS9tYXJrZXRpbmcvcHJvbW90aW9ucy9jb3Vwb25zLzppZCcgfSxcbiAgICAgICAgc2F2ZUNvdXBvbjogeyB1cmw6ICdhcGkvbWFya2V0aW5nL3Byb21vdGlvbnMvY291cG9ucy9hZGQnLCBtZXRob2Q6ICdQT1NUJyB9LFxuICAgICAgICBkZWxldGVDb3Vwb25zOiB7IHVybDogJ2FwaS9tYXJrZXRpbmcvcHJvbW90aW9ucy9jb3Vwb25zL2RlbGV0ZScsIG1ldGhvZDogJ0RFTEVURScgfSxcbiAgICAgICAgaW1wb3J0Q291cG9uczogeyB1cmw6ICdhcGkvbWFya2V0aW5nL3Byb21vdGlvbnMvY291cG9ucy9pbXBvcnQnLCBtZXRob2Q6ICdQT1NUJyB9XG4gICAgfSk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmNvdXBvbnNXaWRnZXRDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5wcm9tb3Rpb25zJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgcHJvbW90aW9uc0FwaSkge1xuICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcblxuICAgIGJsYWRlLmNvdXBvbkNvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICBwcm9tb3Rpb25zQXBpLnNlYXJjaENvdXBvbnMoeyBwcm9tb3Rpb25JZDogYmxhZGUuY3VycmVudEVudGl0eS5pZCwgc2tpcDogMCwgdGFrZTogMCB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBibGFkZS50b3RhbENvdXBvbnNDb3VudCA9IHJlc3BvbnNlLnRvdGFsQ291bnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGJsYWRlLmNvdXBvbkNvdW50KCk7XG5cbiAgICAkc2NvcGUuJG9uKCdjb3Vwb24taW1wb3J0LWZpbmlzaGVkJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGJsYWRlLmNvdXBvbkNvdW50KCk7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUub3BlbkJsYWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICBpZDogJ2NvdXBvbnMnLFxuICAgICAgICAgICAgdGl0bGU6ICdtYXJrZXRpbmcuYmxhZGVzLnByb21vdGlvbi1kZXRhaWwudG9vbGJhci5jb3Vwb25zJyxcbiAgICAgICAgICAgIHByb21vdGlvbklkOiBibGFkZS5jdXJyZW50RW50aXR5LmlkLFxuICAgICAgICAgICAgcHJvbW90aW9uOiBibGFkZS5jdXJyZW50RW50aXR5LFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmNvdXBvbkxpc3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuTWFya2V0aW5nKS9TY3JpcHRzL3Byb21vdGlvbi9ibGFkZXMvY291cG9uLWxpc3QudHBsLmh0bWwnXG4gICAgICAgIH1cbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICB9XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5tYXJrZXRpbmdNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UubWFya2V0aW5nTW9kdWxlLmRhc2hib2FyZC5wcm9tb3Rpb25zV2lkZ2V0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRzdGF0ZScsICd2aXJ0b0NvbW1lcmNlLm1hcmtldGluZ01vZHVsZS5wcm9tb3Rpb25zJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCBwcm9tb3Rpb25zKSB7XG4gICAgJHNjb3BlLmRhdGEgPSB7IGNvdW50OiAnJywgZGVzY3I6ICdBY3RpdmUgUHJvbW90aW9ucycgfTtcblxuICAgICRzY29wZS53aWRnZXRBY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzdGF0ZS5nbygnd29ya3NwYWNlLm1hcmtldGluZycpO1xuICAgIH07XG5cbiAgICBwcm9tb3Rpb25zLnNlYXJjaCh7IHJlc3BvbnNlR3JvdXA6ICdub25lJywgY291bnQ6IDEwMDAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdmFyIHNlbGVjdGlvbiA9IF8ud2hlcmUoZGF0YS5yZXN1bHRzLCB7IGlzQWN0aXZlOiB0cnVlIH0pO1xuICAgICAgICAkc2NvcGUuZGF0YS5jb3VudCA9IHNlbGVjdGlvbi5sZW5ndGg7XG4gICAgfSk7XG59XSk7XG4iXSwic291cmNlUm9vdCI6IiJ9