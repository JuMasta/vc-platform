!function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){o(1),o(2),o(3),o(4),o(5),o(6),o(7),o(8),o(9),o(10),e.exports=o(11)},function(e,t){void 0!==AppDependencies&&AppDependencies.push("virtoCommerce.sitemapsModule"),angular.module("virtoCommerce.sitemapsModule",[]).run(["platformWebApp.widgetService","platformWebApp.toolbarService","platformWebApp.breadcrumbHistoryService",function(e,t,o){e.registerWidget({controller:"virtoCommerce.sitemapsModule.storeSitemapsWidgetController",template:"Modules/$(VirtoCommerce.Sitemaps)/Scripts/widgets/store-sitemaps-widget.tpl.html"},"storeDetail"),t.register(o.getBackButtonInstance(),"virtoCommerce.sitemapsModule.staticContentItemSelectController")}])},function(e,t){angular.module("virtoCommerce.customerModule").controller("virtoCommerce.customerModule.memberItemSelectController",["$scope","$timeout","virtoCommerce.customerModule.members","platformWebApp.dialogService","platformWebApp.bladeUtils","platformWebApp.uiGridHelper","virtoCommerce.customerModule.memberTypesResolverService",function(e,t,o,i,n,r,a){e.uiGridConstants=r.uiGridConstants;var s=n.bladeNavigationService,l=e.blade;l.selectedItems=[],l.headIcon="fa fa-user",l.currentEntity={},l.setSelectedNode=function(t){e.selectedNodeId=t.id},l.refresh=function(){l.isLoading=!0,o.search({memberTypes:l.options.memberTypes,memberType:l.memberType,memberId:l.currentEntity.id,keyword:m.keyword?m.keyword:void 0,sort:r.getSortExpression(e),skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount},(function(t){var o;e.listEntries=t.results,e.pageSettings.totalItems=t.totalCount,_.each(t.results,(function(e){(o=a.resolve(e.memberType))&&(e._memberTypeIcon=o.icon)})),function(){if(l.breadcrumbs){var e=l.breadcrumbs.slice(0);if(_.all(e,(function(e){return e.id!==l.currentEntity.id}))){var t=d(l.currentEntity.id,l.currentEntity.name);e.push(t)}l.breadcrumbs=e}else l.breadcrumbs=[d(void 0,"sitemapsModule.blades.addVendorItems.bread-crumb-top")]}(),l.isLoading=!1}))},e.options=angular.extend({showCheckingMultiple:!0,allowCheckingItem:!0,selectedItemIds:[]},l.options),e.selectNode=function(t){if(e.selectedNodeId!==t.id)if(l.setSelectedNode(t),e.options.selectItemFn&&e.options.selectItemFn(t),"organization"===t.memberType.toLowerCase()){var o={id:l.id,breadcrumbs:l.breadcrumbs,subtitle:"customer.blades.member-list.subtitle",subtitleValues:{name:t.name},currentEntity:t,disableOpenAnimation:!0,controller:l.controller,template:l.template,isClosingDisabled:!0};s.showBlade(o,l.parentBlade)}else l.showDetailBlade(t)};var m=e.filter={};function d(e,t){return{id:e,name:t,blade:l,navigate:function(e){e.blade.disableOpenAnimation=!0,s.showBlade(e.blade),e.blade.refresh()}}}function c(o){o.grid.registerDataChangeCallback((function(i){t((function(){_.each(e.items,(function(t){_.some(e.options.selectedItemIds,(function(e){return e===t.id}))&&o.selection.selectRow(t)}))}))}),[e.uiGridConstants.dataChange.ROW]),o.selection.on.rowSelectionChanged(e,(function(t){e.options.checkItemFn&&e.options.checkItemFn(t.entity,t.isSelected),t.isSelected?_.contains(e.options.selectedItemIds,t.entity.id)||(e.options.selectedItemIds.push(t.entity.id),l.selectedItems.push(t.entity)):(e.options.selectedItemIds=_.without(e.options.selectedItemIds,t.entity.id),l.selectedItems=_.filter(l.selectedItems,(function(e){return e.id!==t.entity.id})))})),r.bindRefreshOnSortChanged(e)}m.criteriaChanged=function(){null===m.keyword&&(l.memberType=void 0),e.pageSettings.currentPage>1?e.pageSettings.currentPage=1:l.refresh()},e.setGridOptions=function(t){r.initialize(e,t,c),n.initializePagination(e)}}])},function(e,t){angular.module("virtoCommerce.sitemapsModule").controller("virtoCommerce.sitemapsModule.sitemapItemsAddCustomItemController",["$scope","platformWebApp.bladeNavigationService",function(e,t){var o=e.blade;o.toolbarCommands=[{name:"sitemapsModule.blades.addCustomItem.toolbar.save",icon:"fa fa-save",executeMethod:function(){o.confirmChangesFn([{title:o.currentEntity.urlTemplate,objectType:"Custom",urlTemplate:o.currentEntity.urlTemplate}],o)},canExecuteMethod:function(){return e.formScope&&e.formScope.$valid}}],e.setForm=function(t){e.formScope=t},o.currentEntity={},o.isLoading=!1}])},function(e,t){angular.module("virtoCommerce.sitemapsModule").controller("virtoCommerce.sitemapsModule.sitemapDetailController",["$scope","platformWebApp.bladeUtils","platformWebApp.uiGridHelper","platformWebApp.bladeNavigationService","virtoCommerce.sitemapsModule.sitemapApi","platformWebApp.dialogService",function(e,t,o,i,n,r){var a=e.blade;function s(e){a.currentEntity=angular.copy(e),a.origEntity=e,a.isLoading=!1}function l(){a.refreshSitemapItems(),m()}function m(){a.parentRefresh&&a.parentRefresh()}function d(){return!angular.equals(a.origEntity,a.currentEntity)&&a.hasUpdatePermission()}function c(){return d()&&e.formScope&&e.formScope.$valid}if(a.updatePermission="sitemaps:update",a.refresh=function(){a.isLoading=!0,n.get({id:a.currentEntity.id},(function(e){s(e),a.title=a.currentEntity.location}))},a.refreshSitemapItems=function(){n.searchSitemapItems({sitemapId:a.currentEntity.id,sort:o.getSortExpression(e),skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount},(function(t){e.pageSettings.totalItems=t.totalCount,a.currentEntities=t.results,a.isLoading=!1}))},a.onClose=function(t){i.showConfirmationIfNeeded(d(),c(),a,e.saveChanges,t,"sitemapsModule.dialogs.discardChanges.title","sitemapsModule.dialogs.discardChanges.message")},e.setForm=function(t){e.formScope=t},e.hasStaticContentItems=function(){var e=_.find(a.currentEntities,(function(e){return"contentitem"===e.objectType.toLowerCase()||"folder"===e.objectType.toLowerCase()}));return null!=e&&null!=e},e.saveChanges=function(){e.errorMessage=null,"sitemap.xml"===a.currentEntity.location.toLowerCase()?e.errorMessage="sitemapsModule.blades.sitemap.formSitemap.sitemapIndexErrorMessage":(a.isLoading=!0,n.search({storeId:a.currentEntity.storeId,location:a.currentEntity.location},(function(t){_.any(t.results,(function(e){return a.inNew||e.id!==a.currentEntity.id}))?(e.errorMessage="sitemapsModule.blades.sitemap.formSitemap.sitemapSitemapLocationExistErrorMessage",a.isLoading=!1):a.isNew?n.addSitemap(a.currentEntity,(function(){angular.copy(a.currentEntity,a.origEntity),i.closeBlade(a,a.parentRefresh)})):n.updateSitemap(a.currentEntity,(function(){a.refresh(),m()}))})))},a.isNew)a.title="sitemapsModule.blades.sitemap.newSitemapTitle",s(a.currentEntity);else{a.title=a.currentEntity.location,a.toolbarCommands=[{name:"platform.commands.save",icon:"fa fa-save",executeMethod:e.saveChanges,canExecuteMethod:c},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(a.origEntity,a.currentEntity)},canExecuteMethod:d,permission:a.updatePermission},{name:"sitemapsModule.blades.sitemap.toolbar.addItems",icon:"fa fa-plus",executeMethod:function(){var e={id:"addSitemapItemsBlade",sitemap:a.currentEntity,storeId:a.currentEntity.storeId,parentRefresh:l,title:"sitemapsModule.blades.addItems.title",controller:"virtoCommerce.sitemapsModule.sitemapItemsAddController",template:"Modules/$(VirtoCommerce.Sitemaps)/Scripts/blades/sitemap-items-add.tpl.html"};i.showBlade(e,a)},canExecuteMethod:function(){return!0},permission:a.updatePermission},{name:"sitemapsModule.blades.sitemap.toolbar.removeItems",icon:"fa fa-trash-o",executeMethod:function(){a.removeItems(e.gridApi.selection.getSelectedRows())},canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())},permission:a.updatePermission}],a.removeItems=function(e){var t={id:"confirmDelete",title:"sitemapsModule.dialogs.sitemapItems-delete.title",message:"sitemapsModule.dialogs.sitemapItems-delete.message",callback:function(t){if(t){a.isLoading=!0;var o=_.pluck(e,"id");n.removeSitemapItems({itemIds:o},l)}}};r.showConfirmationDialog(t)},e.setGridOptions=function(o){e.gridOptions=o,o.onRegisterApi=function(t){t.core.on.sortChanged(e,(function(){a.isLoading||a.refreshSitemapItems()}))},t.initializePagination(e,!0),e.$watch("pageSettings.currentPage",(function(){a.refreshSitemapItems()})),a.refresh()}}}])},function(e,t){angular.module("virtoCommerce.sitemapsModule").controller("virtoCommerce.sitemapsModule.sitemapDownloadController",["$scope","virtoCommerce.sitemapsModule.sitemapApi","platformWebApp.bladeNavigationService",function(e,t,o){var i=e.blade;i.isLoading=!1,e.$on("new-notification-event",(function(e,t){i.notification&&t.id==i.notification.id&&angular.copy(t,i.notification)})),t.download({storeId:i.storeId,baseUrl:i.baseUrl},(function(e){i.notification=e}),(function(t){o.setError("Error "+t.status,e.blade)}))}])},function(e,t){angular.module("virtoCommerce.sitemapsModule").controller("virtoCommerce.sitemapsModule.sitemapItemsAddController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.sitemapsModule.sitemapApi","virtoCommerce.sitemapsModule.knownSitemapItemTypes",function(e,t,o,i){var n=e.blade;function r(e,t,o){return o?_.all(e,(function(e){return e.id!=t.id}))&&e.push(t):e=_.reject(e,(function(e){return e.id==t.id})),n.error=void 0,e}function a(e,i){i.isLoading=!0,o.addSitemapItems({sitemapId:n.sitemap.id},e,(function(){t.closeBlade(i,n.parentRefresh)}))}e.availableTypes=i.types,n.isLoading=!1,e.addItem=function(e){var o=angular.extend(e.newBlade,{id:e.newBlade.id||"sitemapItem-details",selectedItems:[],storeId:n.storeId,checkItemFn:r,confirmChangesFn:a});t.showBlade(o,n.parentBlade)}}]).run(["virtoCommerce.sitemapsModule.knownSitemapItemTypes",function(e){function t(e){return{title:e.name,imageUrl:e.imageUrl,objectId:e.id,objectType:e.type||e.seoObjectType}}var o={id:"addSitemapCatalogItems",title:"sitemapsModule.blades.addCatalogItems.title",controller:"virtoCommerce.catalogModule.catalogItemSelectController",template:"Modules/$(VirtoCommerce.Catalog)/Scripts/blades/common/catalog-items-select.tpl.html",breadcrumbs:[],toolbarCommands:[{name:"sitemapsModule.blades.addCatalogItems.toolbar.addSelected",icon:"fa fa-plus",executeMethod:function(e){var i=_.map(o.selectedItems,t);o.confirmChangesFn(i,e)},canExecuteMethod:function(){return _.any(o.selectedItems)}}],options:{allowCheckingCategory:!0,checkItemFn:function(e,t){o.selectedItems=o.checkItemFn(o.selectedItems,e,t)}}};e.registerType({type:"CatalogItem",icon:"fa-folder",newBlade:o}),e.registerType({type:"VendorItem",icon:"fa-balance-scale",newBlade:{title:"sitemapsModule.blades.addVendorItems.title",controller:"virtoCommerce.customerModule.memberItemSelectController",template:"Modules/$(VirtoCommerce.Sitemaps)/Scripts/blades/member-items-select.tpl.html",toolbarCommands:[{name:"sitemapsModule.blades.addVendorItems.toolbar.addSelected",icon:"fa fa-plus",executeMethod:function(e){var o=_.map(e.selectedItems,t);e.confirmChangesFn(o,e)},canExecuteMethod:function(e){return _.any(e.selectedItems)}}],options:{memberTypes:["vendor"]}}}),e.registerType({type:"CustomItem",icon:"fa-link",newBlade:{id:"addCustomItemBlade",title:"sitemapsModule.blades.addCustomItem.title",controller:"virtoCommerce.sitemapsModule.sitemapItemsAddCustomItemController",template:"Modules/$(VirtoCommerce.Sitemaps)/Scripts/blades/sitemap-add-custom-item.tpl.html"}});e.registerType({type:"StaticContentItem",icon:"fa-code",newBlade:{id:"addSitemapStaticContentItems",title:"sitemapsModule.blades.addStaticContentItems.title",controller:"virtoCommerce.sitemapsModule.staticContentItemSelectController",template:"Modules/$(VirtoCommerce.Sitemaps)/Scripts/blades/static-content-items-select.tpl.html",headIcon:"fa fa-code",breadcrumbs:null,currentEntity:{}}})}]).factory("virtoCommerce.sitemapsModule.knownSitemapItemTypes",["platformWebApp.bladeNavigationService",function(e){return{types:[],registerType:function(e){this.types.push(e)}}}])},function(e,t){angular.module("virtoCommerce.sitemapsModule").controller("virtoCommerce.sitemapsModule.sitemapListController",["$window","$scope","$modal","platformWebApp.bladeUtils","platformWebApp.bladeNavigationService","platformWebApp.dialogService","platformWebApp.uiGridHelper","virtoCommerce.sitemapsModule.sitemapApi",function(e,t,o,i,n,r,a,s){var l=t.blade;l.refresh=function(){l.isLoading=!0,s.search({storeId:l.store.id,skip:(t.pageSettings.currentPage-1)*t.pageSettings.itemsPerPageCount,take:t.pageSettings.itemsPerPageCount},(function(e){t.pageSettings.totalItems=e.totalCount,t.listEntries=e.results,l.isLoading=!1}))},l.selectNode=function(e,o){t.selectedNodeId=e.id;var i={id:"sitemap-detail",isNew:o,currentEntity:e,parentRefresh:l.refresh,controller:"virtoCommerce.sitemapsModule.sitemapDetailController",template:"Modules/$(VirtoCommerce.Sitemaps)/Scripts/blades/sitemap-detail.tpl.html"};n.showBlade(i,l)},l.headIcon="fa fa-sitemap",l.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:l.refresh,canExecuteMethod:function(){return!0}},{name:"platform.commands.add",icon:"fa fa-plus",executeMethod:function(){l.selectNode({location:"sitemap/",urlTemplate:"{slug}",storeId:l.store.id,items:[]},!0)},canExecuteMethod:function(){return!0},permission:"sitemaps:create"},{name:"platform.commands.delete",icon:"fa fa-trash-o",executeMethod:function(){var e;e=t.gridApi.selection.getSelectedRows(),n.closeChildrenBlades(l,(function(){var t={id:"confirmDeleteSitemaps",title:"sitemapsModule.dialogs.sitemap-delete.title",message:"sitemapsModule.dialogs.sitemap-delete.message",callback:function(t){if(t){l.isLoading=!0;var o=_.pluck(e,"id");s.remove({ids:o},l.refresh)}}};r.showConfirmationDialog(t)}))},canExecuteMethod:function(){return t.gridApi&&_.any(t.gridApi.selection.getSelectedRows())},permission:"sitemaps:delete"},{name:"sitemapsModule.blades.sitemapList.toolbar.download",icon:"fa fa-download",executeMethod:function(){var e=l.store.url||l.store.secureUrl,t={id:"confirmBaseUrl",originalBaseUrl:angular.copy(e),baseUrl:e,templateUrl:"Modules/$(VirtoCommerce.Sitemaps)/Scripts/dialogs/confirm-base-url-dialog.tpl.html",controller:"virtoCommerce.sitemapsModule.baseUrlDialogController",resolve:{dialog:function(){return t}}};o.open(t).result.then((function(e){if(e){var t={id:"sitemap-download",title:"sitemapsModule.blades.download.title",headIcon:"fa fa-download",controller:"virtoCommerce.sitemapsModule.sitemapDownloadController",template:"Modules/$(VirtoCommerce.Sitemaps)/Scripts/blades/sitemap-download.tpl.html",storeId:l.store.id,baseUrl:e};n.showBlade(t,l)}}))},canExecuteMethod:function(){return!l.isLoading&&t.pageSettings.totalItems>0}}],t.setGridOptions=function(e){a.initialize(t,e,(function(e){a.bindRefreshOnSortChanged(t)})),i.initializePagination(t)}}])},function(e,t){angular.module("virtoCommerce.sitemapsModule").controller("virtoCommerce.sitemapsModule.staticContentItemSelectController",["$scope","$timeout","virtoCommerce.contentModule.contentApi","platformWebApp.bladeNavigationService","platformWebApp.bladeUtils","platformWebApp.uiGridHelper",function(e,t,o,i,n,r){var a=e.blade;function s(e,t){return{id:e,name:t,blade:a,navigate:function(e){e.blade.disableOpenAnimation=!0,i.showBlade(e.blade),e.blade.refresh()}}}function l(o){e.$watch("pageSettings.currentPage",o.pagination.seek),o.grid.registerDataChangeCallback((function(i){t((function(){_.each(e.items,(function(t){_.some(e.options.selectedItemIds,(function(e){return e===t.id}))&&o.selection.selectRow(t)}))}))}),[e.uiGridConstants.dataChange.ROW]),o.selection.on.rowSelectionChanged(e,(function(t){e.options.checkItemFn&&e.options.checkItemFn(t.entity,t.isSelected),t.isSelected?_.contains(e.options.selectedItemIds,t.entity.id)||(e.options.selectedItemIds.push(t.entity.id),a.selectedItems.push(t.entity)):(e.options.selectedItemIds=_.without(e.options.selectedItemIds,t.entity.id),a.selectedItems=_.filter(a.selectedItems,(function(e){return e.id!==t.entity.id})))}))}function m(e){return{title:e.relativeUrl,urlTemplate:e.relativeUrl,objectType:"folder"!==e.type.toLowerCase()?"ContentItem":e.type}}a.selectedItems=[],a.toolbarCommands=[{name:"sitemapsModule.blades.addStaticContentItems.toolbar.addSelected",icon:"fa fa-plus",canExecuteMethod:function(e){return _.any(e.selectedItems)},executeMethod:function(e){var t=_.map(e.selectedItems,m);e.confirmChangesFn(t,e)}}],a.refresh=function(){a.isLoading=!0,o.query({contentType:"pages",storeId:a.storeId,keyword:a.searchKeyword,folderUrl:a.currentEntity.url},(function(t){e.pageSettings.totalItems=t.length,_.each(t,(function(e){e.id=e.url,e.isImage=e.mimeType&&e.mimeType.startsWith("image/"),e.isOpenable=e.mimeType&&(e.mimeType.startsWith("application/j")||e.mimeType.startsWith("text/"))})),e.listEntries=t,a.isLoading=!1,function(){if(a.breadcrumbs){var e=a.breadcrumbs.slice(0);if(_.all(e,(function(e){return e.id!==a.currentEntity.id}))){var t=s(a.currentEntity.id,a.currentEntity.name);e.push(t)}a.breadcrumbs=e}else a.breadcrumbs=[s(void 0,"sitemapsModule.blades.addStaticContentItems.bread-crumb-top")]}()}),(function(e){i.setError("Error "+e.status,a),a.isLoading=!1}))},a.setSelectedNode=function(t){e.selectedNodeId=t.id},e.uiGridConstants=r.uiGridConstants,e.setGridOptions=function(t){r.initialize(e,t,l)},e.selectNode=function(t){if(e.selectedNodeId!==t.id&&(a.setSelectedNode(t),e.options.selectItemFn&&e.options.selectItemFn(t),"folder"===t.type.toLowerCase())){var o={confirmChangesFn:a.confirmChangesFn,id:a.id,contentType:a.contentType,storeId:a.storeId,languages:a.languages,currentEntity:t,breadcrumbs:a.breadcrumbs,title:a.title,subtitle:a.subtitle,controller:a.controller,template:a.template,disableOpenAnimation:!0,isClosingDisabled:a.isClosingDisabled};i.showBlade(o,a.parentBlade)}},e.options=angular.extend({showCheckingMultiple:!0,allowCheckingItem:!0,selectedItemIds:[]},a.options),n.initializePagination(e,!0),a.refresh()}])},function(e,t){angular.module("virtoCommerce.sitemapsModule").controller("virtoCommerce.sitemapsModule.baseUrlDialogController",["$scope","$modalInstance","dialog",function(e,t,o){angular.extend(e,o),e.confirm=function(){t.close(e.baseUrl)},e.cancel=function(){t.dismiss("cancel")}}])},function(e,t){angular.module("virtoCommerce.sitemapsModule").factory("virtoCommerce.sitemapsModule.sitemapApi",["$resource",function(e){return e("api/sitemaps/:id",{},{search:{method:"POST",url:"api/sitemaps/search"},addSitemap:{method:"POST"},updateSitemap:{method:"PUT"},removeSitemap:{method:"DELETE"},searchSitemapItems:{method:"POST",url:"api/sitemaps/items/search"},addSitemapItems:{method:"POST",url:"api/sitemaps/:sitemapId/items"},removeSitemapItems:{method:"DELETE",url:"api/sitemaps/:sitemapId/items"},download:{method:"GET",url:"api/sitemaps/download"}})}])},function(e,t){angular.module("virtoCommerce.sitemapsModule").controller("virtoCommerce.sitemapsModule.storeSitemapsWidgetController",["$scope","platformWebApp.bladeNavigationService",function(e,t){var o=e.blade;e.openBlade=function(){var e={id:"storeSitemapsList",title:"sitemapsModule.blades.sitemapList.title",subtitle:"sitemapsModule.blades.sitemapList.subtitle",controller:"virtoCommerce.sitemapsModule.sitemapListController",template:"Modules/$(VirtoCommerce.Sitemaps)/Scripts/blades/sitemap-list.tpl.html",store:o.currentEntity};t.showBlade(e,o)}}])}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLlNpdGVtYXBzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuU2l0ZW1hcHMvLi9TY3JpcHRzL3NpdGVtYXBzTW9kdWxlLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuU2l0ZW1hcHMvLi9TY3JpcHRzL2JsYWRlcy9tZW1iZXItaXRlbXMtc2VsZWN0LmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuU2l0ZW1hcHMvLi9TY3JpcHRzL2JsYWRlcy9zaXRlbWFwLWFkZC1jdXN0b20taXRlbS5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLlNpdGVtYXBzLy4vU2NyaXB0cy9ibGFkZXMvc2l0ZW1hcC1kZXRhaWwuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5TaXRlbWFwcy8uL1NjcmlwdHMvYmxhZGVzL3NpdGVtYXAtZG93bmxvYWQuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5TaXRlbWFwcy8uL1NjcmlwdHMvYmxhZGVzL3NpdGVtYXAtaXRlbXMtYWRkLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuU2l0ZW1hcHMvLi9TY3JpcHRzL2JsYWRlcy9zaXRlbWFwLWxpc3QuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5TaXRlbWFwcy8uL1NjcmlwdHMvYmxhZGVzL3N0YXRpYy1jb250ZW50LWl0ZW1zLXNlbGVjdC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLlNpdGVtYXBzLy4vU2NyaXB0cy9kaWFsb2dzL2NvbmZpcm0tYmFzZS11cmwtZGlhbG9nLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuU2l0ZW1hcHMvLi9TY3JpcHRzL3Jlc291cmNlcy9zaXRlbWFwQVBJLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuU2l0ZW1hcHMvLi9TY3JpcHRzL3dpZGdldHMvc3RvcmUtc2l0ZW1hcHMtd2lkZ2V0LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidW5kZWZpbmVkIiwiQXBwRGVwZW5kZW5jaWVzIiwicHVzaCIsImFuZ3VsYXIiLCJydW4iLCJ3aWRnZXRTZXJ2aWNlIiwidG9vbGJhclNlcnZpY2UiLCJicmVhZGNydW1iSGlzdG9yeVNlcnZpY2UiLCJyZWdpc3RlcldpZGdldCIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZSIsInJlZ2lzdGVyIiwiZ2V0QmFja0J1dHRvbkluc3RhbmNlIiwiJHNjb3BlIiwiJHRpbWVvdXQiLCJtZW1iZXJzIiwiZGlhbG9nU2VydmljZSIsImJsYWRlVXRpbHMiLCJ1aUdyaWRIZWxwZXIiLCJtZW1iZXJUeXBlc1Jlc29sdmVyU2VydmljZSIsInVpR3JpZENvbnN0YW50cyIsImJsYWRlTmF2aWdhdGlvblNlcnZpY2UiLCJibGFkZSIsInNlbGVjdGVkSXRlbXMiLCJoZWFkSWNvbiIsImN1cnJlbnRFbnRpdHkiLCJzZXRTZWxlY3RlZE5vZGUiLCJsaXN0SXRlbSIsInNlbGVjdGVkTm9kZUlkIiwiaWQiLCJyZWZyZXNoIiwiaXNMb2FkaW5nIiwic2VhcmNoIiwibWVtYmVyVHlwZXMiLCJvcHRpb25zIiwibWVtYmVyVHlwZSIsIm1lbWJlcklkIiwia2V5d29yZCIsImZpbHRlciIsInNvcnQiLCJnZXRTb3J0RXhwcmVzc2lvbiIsInNraXAiLCJwYWdlU2V0dGluZ3MiLCJjdXJyZW50UGFnZSIsIml0ZW1zUGVyUGFnZUNvdW50IiwidGFrZSIsImRhdGEiLCJtZW1iZXJUeXBlRGVmaW5pdGlvbiIsImxpc3RFbnRyaWVzIiwicmVzdWx0cyIsInRvdGFsSXRlbXMiLCJ0b3RhbENvdW50IiwiXyIsImVhY2giLCJ4IiwicmVzb2x2ZSIsIl9tZW1iZXJUeXBlSWNvbiIsImljb24iLCJicmVhZGNydW1icyIsInNsaWNlIiwiYWxsIiwiYnJlYWRDcnVtYiIsImdlbmVyYXRlQnJlYWRjcnVtYiIsInNldEJyZWFkY3J1bWJzIiwiZXh0ZW5kIiwic2hvd0NoZWNraW5nTXVsdGlwbGUiLCJhbGxvd0NoZWNraW5nSXRlbSIsInNlbGVjdGVkSXRlbUlkcyIsInNlbGVjdE5vZGUiLCJzZWxlY3RJdGVtRm4iLCJ0b0xvd2VyQ2FzZSIsIm5ld0JsYWRlIiwic3VidGl0bGUiLCJzdWJ0aXRsZVZhbHVlcyIsImRpc2FibGVPcGVuQW5pbWF0aW9uIiwiaXNDbG9zaW5nRGlzYWJsZWQiLCJzaG93QmxhZGUiLCJwYXJlbnRCbGFkZSIsInNob3dEZXRhaWxCbGFkZSIsIm5hdmlnYXRlIiwiYnJlYWRjcnVtYiIsImV4dGVybmFsUmVnaXN0ZXJBcGlDYWxsYmFjayIsImdyaWRBcGkiLCJncmlkIiwicmVnaXN0ZXJEYXRhQ2hhbmdlQ2FsbGJhY2siLCJpdGVtcyIsInNvbWUiLCJ5Iiwic2VsZWN0aW9uIiwic2VsZWN0Um93IiwiZGF0YUNoYW5nZSIsIlJPVyIsIm9uIiwicm93U2VsZWN0aW9uQ2hhbmdlZCIsInJvdyIsImNoZWNrSXRlbUZuIiwiZW50aXR5IiwiaXNTZWxlY3RlZCIsImNvbnRhaW5zIiwid2l0aG91dCIsImJpbmRSZWZyZXNoT25Tb3J0Q2hhbmdlZCIsImNyaXRlcmlhQ2hhbmdlZCIsInNldEdyaWRPcHRpb25zIiwiZ3JpZE9wdGlvbnMiLCJpbml0aWFsaXplIiwiaW5pdGlhbGl6ZVBhZ2luYXRpb24iLCJ0b29sYmFyQ29tbWFuZHMiLCJleGVjdXRlTWV0aG9kIiwiY29uZmlybUNoYW5nZXNGbiIsInRpdGxlIiwidXJsVGVtcGxhdGUiLCJvYmplY3RUeXBlIiwiY2FuRXhlY3V0ZU1ldGhvZCIsImZvcm1TY29wZSIsIiR2YWxpZCIsInNldEZvcm0iLCJmb3JtIiwic2l0ZW1hcEFwaSIsImluaXRpYWxpemVCbGFkZSIsImNvcHkiLCJvcmlnRW50aXR5IiwicmVmcmVzaFNpdGVtYXBJdGVtc0FuZFBhcmVudCIsInJlZnJlc2hTaXRlbWFwSXRlbXMiLCJyZWZyZXNoUGFyZW50IiwicGFyZW50UmVmcmVzaCIsImlzRGlydHkiLCJlcXVhbHMiLCJoYXNVcGRhdGVQZXJtaXNzaW9uIiwiY2FuU2F2ZSIsInVwZGF0ZVBlcm1pc3Npb24iLCJsb2NhdGlvbiIsInNlYXJjaFNpdGVtYXBJdGVtcyIsInNpdGVtYXBJZCIsInJlc3BvbnNlIiwiY3VycmVudEVudGl0aWVzIiwib25DbG9zZSIsImNsb3NlQ2FsbGJhY2siLCJzaG93Q29uZmlybWF0aW9uSWZOZWVkZWQiLCJzYXZlQ2hhbmdlcyIsImhhc1N0YXRpY0NvbnRlbnRJdGVtcyIsInN0YXRpY0NvbnRlbnRJdGVtIiwiZmluZCIsImUiLCJlcnJvck1lc3NhZ2UiLCJzdG9yZUlkIiwiYW55IiwiaW5OZXciLCJpc05ldyIsImFkZFNpdGVtYXAiLCJjbG9zZUJsYWRlIiwidXBkYXRlU2l0ZW1hcCIsInBlcm1pc3Npb24iLCJzaXRlbWFwIiwicmVtb3ZlSXRlbXMiLCJnZXRTZWxlY3RlZFJvd3MiLCJsaXN0IiwiZGlhbG9nIiwibWVzc2FnZSIsImNhbGxiYWNrIiwicmVtb3ZlIiwiaWRzIiwicGx1Y2siLCJyZW1vdmVTaXRlbWFwSXRlbXMiLCJpdGVtSWRzIiwic2hvd0NvbmZpcm1hdGlvbkRpYWxvZyIsIm9uUmVnaXN0ZXJBcGkiLCJjb3JlIiwic29ydENoYW5nZWQiLCIkd2F0Y2giLCIkb24iLCJldmVudCIsIm5vdGlmaWNhdGlvbiIsImRvd25sb2FkIiwiYmFzZVVybCIsImVycm9yIiwic2V0RXJyb3IiLCJzdGF0dXMiLCJrbm93blNpdGVtYXBJdGVtVHlwZXMiLCJ1cGRhdGVTZWxlY3RlZEl0ZW1zTGlzdCIsInJlamVjdCIsInNhdmVOZXdTaXRlbWFwSXRlbXMiLCJzaXRlbWFwSXRlbXMiLCJjdXJyZW50QmxhZGUiLCJhZGRTaXRlbWFwSXRlbXMiLCJhdmFpbGFibGVUeXBlcyIsInR5cGVzIiwiYWRkSXRlbSIsIm5vZGUiLCJpdGVtVG9TaXRlbWFwSXRlbSIsIml0ZW0iLCJpbWFnZVVybCIsIm9iamVjdElkIiwidHlwZSIsInNlb09iamVjdFR5cGUiLCJjYXRhbG9nSXRlbVNlbGVjdEJsYWRlIiwiY2F0YWxvZ0JsYWRlIiwibWFwIiwiYWxsb3dDaGVja2luZ0NhdGVnb3J5IiwicmVnaXN0ZXJUeXBlIiwidmVuZG9yc0JsYWRlIiwiZmFjdG9yeSIsInR5cGVEZWZpbml0aW9uIiwidGhpcyIsIiR3aW5kb3ciLCIkbW9kYWwiLCJzdG9yZSIsImNsb3NlQ2hpbGRyZW5CbGFkZXMiLCJjb25maXJtIiwic2l0ZW1hcElkcyIsInVybCIsInNlY3VyZVVybCIsImNvbmZpcm1EaWFsb2ciLCJvcmlnaW5hbEJhc2VVcmwiLCJ0ZW1wbGF0ZVVybCIsIm9wZW4iLCJyZXN1bHQiLCJ0aGVuIiwic3RhdGljQ29udGVudCIsInBhZ2luYXRpb24iLCJzZWVrIiwicmVsYXRpdmVVcmwiLCJzdGF0aWNDb250ZW50QmxhZGUiLCJxdWVyeSIsImNvbnRlbnRUeXBlIiwic2VhcmNoS2V5d29yZCIsImZvbGRlclVybCIsImxlbmd0aCIsImlzSW1hZ2UiLCJtaW1lVHlwZSIsInN0YXJ0c1dpdGgiLCJpc09wZW5hYmxlIiwibGFuZ3VhZ2VzIiwiJG1vZGFsSW5zdGFuY2UiLCJjbG9zZSIsImNhbmNlbCIsImRpc21pc3MiLCIkcmVzb3VyY2UiLCJtZXRob2QiLCJyZW1vdmVTaXRlbWFwIiwib3BlbkJsYWRlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUdu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QVVJLEVBQVFRLEdBQzVJLElBQUlDLEVBQVFULEVBQU9TLE1BRW5CVCxFQUFPa08sVUFBWSxXQUNmLElBQUl4SyxFQUFXLENBQ1gxQyxHQUFJLG9CQUNKZ0YsTUFBTywwQ0FDUHJDLFNBQVUsNkNBQ1YvRCxXQUFZLHFEQUNaQyxTQUFVLHlFQUNWbU0sTUFBT3ZMLEVBQU1HLGVBRWpCSixFQUF1QnVELFVBQVVMLEVBQVVqRCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJ2YXIgbW9kdWxlTmFtZSA9ICd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlJztcblxuaWYgKEFwcERlcGVuZGVuY2llcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgQXBwRGVwZW5kZW5jaWVzLnB1c2gobW9kdWxlTmFtZSk7XG59XG5cbmFuZ3VsYXIubW9kdWxlKG1vZHVsZU5hbWUsIFtdKVxuICAgIC5ydW4oWydwbGF0Zm9ybVdlYkFwcC53aWRnZXRTZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLnRvb2xiYXJTZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLmJyZWFkY3J1bWJIaXN0b3J5U2VydmljZScsIGZ1bmN0aW9uICh3aWRnZXRTZXJ2aWNlLCB0b29sYmFyU2VydmljZSwgYnJlYWRjcnVtYkhpc3RvcnlTZXJ2aWNlKSB7XG4gICAgICAgIHdpZGdldFNlcnZpY2UucmVnaXN0ZXJXaWRnZXQoe1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uuc2l0ZW1hcHNNb2R1bGUuc3RvcmVTaXRlbWFwc1dpZGdldENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5TaXRlbWFwcykvU2NyaXB0cy93aWRnZXRzL3N0b3JlLXNpdGVtYXBzLXdpZGdldC50cGwuaHRtbCdcbiAgICAgICAgfSwgJ3N0b3JlRGV0YWlsJyk7XG5cbiAgICAgICAgLy8gcmVnaXN0ZXIgYmFjay1idXR0b25cbiAgICAgICAgdG9vbGJhclNlcnZpY2UucmVnaXN0ZXIoYnJlYWRjcnVtYkhpc3RvcnlTZXJ2aWNlLmdldEJhY2tCdXR0b25JbnN0YW5jZSgpLCAndmlydG9Db21tZXJjZS5zaXRlbWFwc01vZHVsZS5zdGF0aWNDb250ZW50SXRlbVNlbGVjdENvbnRyb2xsZXInKTtcbiAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5jdXN0b21lck1vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5jdXN0b21lck1vZHVsZS5tZW1iZXJJdGVtU2VsZWN0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyR0aW1lb3V0JywgJ3ZpcnRvQ29tbWVyY2UuY3VzdG9tZXJNb2R1bGUubWVtYmVycycsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlVXRpbHMnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJywgJ3ZpcnRvQ29tbWVyY2UuY3VzdG9tZXJNb2R1bGUubWVtYmVyVHlwZXNSZXNvbHZlclNlcnZpY2UnLFxuZnVuY3Rpb24gKCRzY29wZSwgJHRpbWVvdXQsIG1lbWJlcnMsIGRpYWxvZ1NlcnZpY2UsIGJsYWRlVXRpbHMsIHVpR3JpZEhlbHBlciwgbWVtYmVyVHlwZXNSZXNvbHZlclNlcnZpY2UpIHtcbiAgICAkc2NvcGUudWlHcmlkQ29uc3RhbnRzID0gdWlHcmlkSGVscGVyLnVpR3JpZENvbnN0YW50cztcbiAgICB2YXIgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSA9IGJsYWRlVXRpbHMuYmxhZGVOYXZpZ2F0aW9uU2VydmljZTtcbiAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgYmxhZGUuc2VsZWN0ZWRJdGVtcyA9IFtdO1xuXG4gICAgYmxhZGUuaGVhZEljb24gPSAnZmEgZmEtdXNlcic7XG4gICAgYmxhZGUuY3VycmVudEVudGl0eSA9IHt9O1xuICAgIGJsYWRlLnNldFNlbGVjdGVkTm9kZSA9IGZ1bmN0aW9uIChsaXN0SXRlbSkge1xuICAgICAgICAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBsaXN0SXRlbS5pZDtcbiAgICB9O1xuXG4gICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgbWVtYmVycy5zZWFyY2goe1xuICAgICAgICAgICAgbWVtYmVyVHlwZXM6IGJsYWRlLm9wdGlvbnMubWVtYmVyVHlwZXMsXG4gICAgICAgICAgICBtZW1iZXJUeXBlOiBibGFkZS5tZW1iZXJUeXBlLFxuICAgICAgICAgICAgbWVtYmVySWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHkuaWQsXG4gICAgICAgICAgICBrZXl3b3JkOiBmaWx0ZXIua2V5d29yZCA/IGZpbHRlci5rZXl3b3JkIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc29ydDogdWlHcmlkSGVscGVyLmdldFNvcnRFeHByZXNzaW9uKCRzY29wZSksXG4gICAgICAgICAgICBza2lwOiAoJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAtIDEpICogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCxcbiAgICAgICAgICAgIHRha2U6ICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnRcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5saXN0RW50cmllcyA9IGRhdGEucmVzdWx0cztcbiAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MudG90YWxJdGVtcyA9IGRhdGEudG90YWxDb3VudDtcbiAgICAgICAgICAgIHZhciBtZW1iZXJUeXBlRGVmaW5pdGlvbjtcbiAgICAgICAgICAgIF8uZWFjaChkYXRhLnJlc3VsdHMsIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgaWYgKG1lbWJlclR5cGVEZWZpbml0aW9uID0gbWVtYmVyVHlwZXNSZXNvbHZlclNlcnZpY2UucmVzb2x2ZSh4Lm1lbWJlclR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHguX21lbWJlclR5cGVJY29uID0gbWVtYmVyVHlwZURlZmluaXRpb24uaWNvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNldEJyZWFkY3J1bWJzKCk7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5vcHRpb25zID0gYW5ndWxhci5leHRlbmQoe1xuICAgICAgICBzaG93Q2hlY2tpbmdNdWx0aXBsZTogdHJ1ZSxcbiAgICAgICAgYWxsb3dDaGVja2luZ0l0ZW06IHRydWUsXG4gICAgICAgIHNlbGVjdGVkSXRlbUlkczogW11cbiAgICB9LCBibGFkZS5vcHRpb25zKTtcblxuICAgICRzY29wZS5zZWxlY3ROb2RlID0gZnVuY3Rpb24gKGxpc3RJdGVtKSB7XG4gICAgICAgIGlmICgkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPT09IGxpc3RJdGVtLmlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYmxhZGUuc2V0U2VsZWN0ZWROb2RlKGxpc3RJdGVtKTtcblxuICAgICAgICBpZiAoJHNjb3BlLm9wdGlvbnMuc2VsZWN0SXRlbUZuKSB7XG4gICAgICAgICAgICAkc2NvcGUub3B0aW9ucy5zZWxlY3RJdGVtRm4obGlzdEl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaXN0SXRlbS5tZW1iZXJUeXBlLnRvTG93ZXJDYXNlKCkgPT09ICdvcmdhbml6YXRpb24nKSB7XG4gICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IGJsYWRlLmlkLFxuICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJzOiBibGFkZS5icmVhZGNydW1icyxcbiAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ2N1c3RvbWVyLmJsYWRlcy5tZW1iZXItbGlzdC5zdWJ0aXRsZScsXG4gICAgICAgICAgICAgICAgc3VidGl0bGVWYWx1ZXM6IHsgbmFtZTogbGlzdEl0ZW0ubmFtZSB9LFxuICAgICAgICAgICAgICAgIGN1cnJlbnRFbnRpdHk6IGxpc3RJdGVtLFxuICAgICAgICAgICAgICAgIGRpc2FibGVPcGVuQW5pbWF0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IGJsYWRlLmNvbnRyb2xsZXIsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGJsYWRlLnRlbXBsYXRlLFxuICAgICAgICAgICAgICAgIGlzQ2xvc2luZ0Rpc2FibGVkOiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlLnBhcmVudEJsYWRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJsYWRlLnNob3dEZXRhaWxCbGFkZShsaXN0SXRlbSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGZpbHRlciA9ICRzY29wZS5maWx0ZXIgPSB7fTtcbiAgICBmaWx0ZXIuY3JpdGVyaWFDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZmlsdGVyLmtleXdvcmQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGJsYWRlLm1lbWJlclR5cGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPiAxKSB7XG4gICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzZXRCcmVhZGNydW1icygpIHtcbiAgICAgICAgaWYgKGJsYWRlLmJyZWFkY3J1bWJzKSB7XG4gICAgICAgICAgICB2YXIgYnJlYWRjcnVtYnMgPSBibGFkZS5icmVhZGNydW1icy5zbGljZSgwKTtcbiAgICAgICAgICAgIGlmIChfLmFsbChicmVhZGNydW1icywgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQgIT09IGJsYWRlLmN1cnJlbnRFbnRpdHkuaWQ7IH0pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJyZWFkQ3J1bWIgPSBnZW5lcmF0ZUJyZWFkY3J1bWIoYmxhZGUuY3VycmVudEVudGl0eS5pZCwgYmxhZGUuY3VycmVudEVudGl0eS5uYW1lKTtcbiAgICAgICAgICAgICAgICBicmVhZGNydW1icy5wdXNoKGJyZWFkQ3J1bWIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxhZGUuYnJlYWRjcnVtYnMgPSBicmVhZGNydW1icztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJsYWRlLmJyZWFkY3J1bWJzID0gW2dlbmVyYXRlQnJlYWRjcnVtYih1bmRlZmluZWQsICdzaXRlbWFwc01vZHVsZS5ibGFkZXMuYWRkVmVuZG9ySXRlbXMuYnJlYWQtY3J1bWItdG9wJyldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVCcmVhZGNydW1iKGlkLCBuYW1lKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgYmxhZGU6IGJsYWRlLFxuICAgICAgICAgICAgbmF2aWdhdGU6IGZ1bmN0aW9uIChicmVhZGNydW1iKSB7XG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYi5ibGFkZS5kaXNhYmxlT3BlbkFuaW1hdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUoYnJlYWRjcnVtYi5ibGFkZSk7XG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYi5ibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gdWktZ3JpZFxuICAgICRzY29wZS5zZXRHcmlkT3B0aW9ucyA9IGZ1bmN0aW9uIChncmlkT3B0aW9ucykge1xuICAgICAgICB1aUdyaWRIZWxwZXIuaW5pdGlhbGl6ZSgkc2NvcGUsIGdyaWRPcHRpb25zLCBleHRlcm5hbFJlZ2lzdGVyQXBpQ2FsbGJhY2spO1xuICAgICAgICBibGFkZVV0aWxzLmluaXRpYWxpemVQYWdpbmF0aW9uKCRzY29wZSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGV4dGVybmFsUmVnaXN0ZXJBcGlDYWxsYmFjayhncmlkQXBpKSB7XG4gICAgICAgIGdyaWRBcGkuZ3JpZC5yZWdpc3RlckRhdGFDaGFuZ2VDYWxsYmFjayhmdW5jdGlvbiAoZ3JpZCkge1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF8uZWFjaCgkc2NvcGUuaXRlbXMsIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfLnNvbWUoJHNjb3BlLm9wdGlvbnMuc2VsZWN0ZWRJdGVtSWRzLCBmdW5jdGlvbiAoeSkgeyByZXR1cm4geSA9PT0geC5pZDsgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRBcGkuc2VsZWN0aW9uLnNlbGVjdFJvdyh4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIFskc2NvcGUudWlHcmlkQ29uc3RhbnRzLmRhdGFDaGFuZ2UuUk9XXSk7XG5cbiAgICAgICAgZ3JpZEFwaS5zZWxlY3Rpb24ub24ucm93U2VsZWN0aW9uQ2hhbmdlZCgkc2NvcGUsIGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgIGlmICgkc2NvcGUub3B0aW9ucy5jaGVja0l0ZW1Gbikge1xuICAgICAgICAgICAgICAgICRzY29wZS5vcHRpb25zLmNoZWNrSXRlbUZuKHJvdy5lbnRpdHksIHJvdy5pc1NlbGVjdGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cuaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGlmICghXy5jb250YWlucygkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1JZHMsIHJvdy5lbnRpdHkuaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vcHRpb25zLnNlbGVjdGVkSXRlbUlkcy5wdXNoKHJvdy5lbnRpdHkuaWQpO1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5zZWxlY3RlZEl0ZW1zLnB1c2gocm93LmVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm9wdGlvbnMuc2VsZWN0ZWRJdGVtSWRzID0gXy53aXRob3V0KCRzY29wZS5vcHRpb25zLnNlbGVjdGVkSXRlbUlkcywgcm93LmVudGl0eS5pZCk7XG4gICAgICAgICAgICAgICAgYmxhZGUuc2VsZWN0ZWRJdGVtcyA9IF8uZmlsdGVyKGJsYWRlLnNlbGVjdGVkSXRlbXMsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkICE9PSByb3cuZW50aXR5LmlkOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdWlHcmlkSGVscGVyLmJpbmRSZWZyZXNoT25Tb3J0Q2hhbmdlZCgkc2NvcGUpO1xuICAgIH1cbn1dKTtcbiIsIu+7v2FuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlLnNpdGVtYXBJdGVtc0FkZEN1c3RvbUl0ZW1Db250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UpIHtcbiAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG5cbiAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbe1xuICAgICAgICBuYW1lOiAnc2l0ZW1hcHNNb2R1bGUuYmxhZGVzLmFkZEN1c3RvbUl0ZW0udG9vbGJhci5zYXZlJyxcbiAgICAgICAgaWNvbjogJ2ZhIGZhLXNhdmUnLFxuICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBibGFkZS5jb25maXJtQ2hhbmdlc0ZuKFt7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGJsYWRlLmN1cnJlbnRFbnRpdHkudXJsVGVtcGxhdGUsXG4gICAgICAgICAgICAgICAgb2JqZWN0VHlwZTogJ0N1c3RvbScsXG4gICAgICAgICAgICAgICAgdXJsVGVtcGxhdGU6IGJsYWRlLmN1cnJlbnRFbnRpdHkudXJsVGVtcGxhdGVcbiAgICAgICAgICAgIH1dLCBibGFkZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkc2NvcGUuZm9ybVNjb3BlICYmICRzY29wZS5mb3JtU2NvcGUuJHZhbGlkO1xuICAgICAgICB9XG4gICAgfV07XG5cbiAgICAkc2NvcGUuc2V0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7ICRzY29wZS5mb3JtU2NvcGUgPSBmb3JtOyB9O1xuXG4gICAgYmxhZGUuY3VycmVudEVudGl0eSA9IHt9O1xuICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xufV0pOyIsIu+7v2FuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlJykuY29udHJvbGxlcigndmlydG9Db21tZXJjZS5zaXRlbWFwc01vZHVsZS5zaXRlbWFwRGV0YWlsQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlVXRpbHMnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5zaXRlbWFwc01vZHVsZS5zaXRlbWFwQXBpJywgJ3BsYXRmb3JtV2ViQXBwLmRpYWxvZ1NlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBibGFkZVV0aWxzLCB1aUdyaWRIZWxwZXIsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIHNpdGVtYXBBcGksIGRpYWxvZ1NlcnZpY2UpIHtcbiAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgYmxhZGUudXBkYXRlUGVybWlzc2lvbiA9ICdzaXRlbWFwczp1cGRhdGUnO1xuXG4gICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgc2l0ZW1hcEFwaS5nZXQoeyBpZDogYmxhZGUuY3VycmVudEVudGl0eS5pZCB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaW5pdGlhbGl6ZUJsYWRlKGRhdGEpO1xuICAgICAgICAgICAgYmxhZGUudGl0bGUgPSBibGFkZS5jdXJyZW50RW50aXR5LmxvY2F0aW9uO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUJsYWRlKGRhdGEpIHtcbiAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGFuZ3VsYXIuY29weShkYXRhKTtcbiAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGRhdGE7XG4gICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIGJsYWRlLnJlZnJlc2hTaXRlbWFwSXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNpdGVtYXBBcGkuc2VhcmNoU2l0ZW1hcEl0ZW1zKHtcbiAgICAgICAgICAgIHNpdGVtYXBJZDogYmxhZGUuY3VycmVudEVudGl0eS5pZCxcbiAgICAgICAgICAgIHNvcnQ6IHVpR3JpZEhlbHBlci5nZXRTb3J0RXhwcmVzc2lvbigkc2NvcGUpLFxuICAgICAgICAgICAgc2tpcDogKCRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgLSAxKSAqICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnQsXG4gICAgICAgICAgICB0YWtlOiAkc2NvcGUucGFnZVNldHRpbmdzLml0ZW1zUGVyUGFnZUNvdW50XG4gICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgJHNjb3BlLnBhZ2VTZXR0aW5ncy50b3RhbEl0ZW1zID0gcmVzcG9uc2UudG90YWxDb3VudDtcbiAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdGllcyA9IHJlc3BvbnNlLnJlc3VsdHM7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHJlZnJlc2hTaXRlbWFwSXRlbXNBbmRQYXJlbnQoKSB7XG4gICAgICAgIGJsYWRlLnJlZnJlc2hTaXRlbWFwSXRlbXMoKTtcbiAgICAgICAgcmVmcmVzaFBhcmVudCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlZnJlc2hQYXJlbnQoKSB7XG4gICAgICAgIGlmIChibGFkZS5wYXJlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICBibGFkZS5wYXJlbnRSZWZyZXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBibGFkZS5vbkNsb3NlID0gZnVuY3Rpb24gKGNsb3NlQ2FsbGJhY2spIHtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93Q29uZmlybWF0aW9uSWZOZWVkZWQoaXNEaXJ0eSgpLCBjYW5TYXZlKCksIGJsYWRlLCAkc2NvcGUuc2F2ZUNoYW5nZXMsIGNsb3NlQ2FsbGJhY2ssIFwic2l0ZW1hcHNNb2R1bGUuZGlhbG9ncy5kaXNjYXJkQ2hhbmdlcy50aXRsZVwiLCBcInNpdGVtYXBzTW9kdWxlLmRpYWxvZ3MuZGlzY2FyZENoYW5nZXMubWVzc2FnZVwiKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldEZvcm0gPSBmdW5jdGlvbiAoZm9ybSkgeyAkc2NvcGUuZm9ybVNjb3BlID0gZm9ybTsgfTtcblxuICAgIGZ1bmN0aW9uIGlzRGlydHkoKSB7XG4gICAgICAgIHJldHVybiAhYW5ndWxhci5lcXVhbHMoYmxhZGUub3JpZ0VudGl0eSwgYmxhZGUuY3VycmVudEVudGl0eSkgJiYgYmxhZGUuaGFzVXBkYXRlUGVybWlzc2lvbigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblNhdmUoKSB7XG4gICAgICAgIHJldHVybiBpc0RpcnR5KCkgJiYgJHNjb3BlLmZvcm1TY29wZSAmJiAkc2NvcGUuZm9ybVNjb3BlLiR2YWxpZDtcbiAgICB9XG5cbiAgICAkc2NvcGUuaGFzU3RhdGljQ29udGVudEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhdGljQ29udGVudEl0ZW0gPSBfLmZpbmQoYmxhZGUuY3VycmVudEVudGl0aWVzLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZS5vYmplY3RUeXBlLnRvTG93ZXJDYXNlKCkgPT09ICdjb250ZW50aXRlbScgfHwgZS5vYmplY3RUeXBlLnRvTG93ZXJDYXNlKCkgPT09ICdmb2xkZXInIH0pO1xuICAgICAgICByZXR1cm4gc3RhdGljQ29udGVudEl0ZW0gIT0gbnVsbCAmJiBzdGF0aWNDb250ZW50SXRlbSAhPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgJHNjb3BlLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gbnVsbDtcblxuICAgICAgICBpZiAoYmxhZGUuY3VycmVudEVudGl0eS5sb2NhdGlvbi50b0xvd2VyQ2FzZSgpID09PSAnc2l0ZW1hcC54bWwnKSB7XG4gICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ3NpdGVtYXBzTW9kdWxlLmJsYWRlcy5zaXRlbWFwLmZvcm1TaXRlbWFwLnNpdGVtYXBJbmRleEVycm9yTWVzc2FnZSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICBzaXRlbWFwQXBpLnNlYXJjaCh7XG4gICAgICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuY3VycmVudEVudGl0eS5zdG9yZUlkLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBibGFkZS5jdXJyZW50RW50aXR5LmxvY2F0aW9uLFxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKF8uYW55KHJlc3BvbnNlLnJlc3VsdHMsIGZ1bmN0aW9uIChzKSB7IHJldHVybiBibGFkZS5pbk5ldyB8fCBzLmlkICE9PSBibGFkZS5jdXJyZW50RW50aXR5LmlkIH0pKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnc2l0ZW1hcHNNb2R1bGUuYmxhZGVzLnNpdGVtYXAuZm9ybVNpdGVtYXAuc2l0ZW1hcFNpdGVtYXBMb2NhdGlvbkV4aXN0RXJyb3JNZXNzYWdlJztcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaXRlbWFwQXBpLmFkZFNpdGVtYXAoYmxhZGUuY3VycmVudEVudGl0eSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5LCBibGFkZS5vcmlnRW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUoYmxhZGUsIGJsYWRlLnBhcmVudFJlZnJlc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaXRlbWFwQXBpLnVwZGF0ZVNpdGVtYXAoYmxhZGUuY3VycmVudEVudGl0eSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFyZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgIGJsYWRlLnRpdGxlID0gJ3NpdGVtYXBzTW9kdWxlLmJsYWRlcy5zaXRlbWFwLm5ld1NpdGVtYXBUaXRsZSc7XG4gICAgICAgIGluaXRpYWxpemVCbGFkZShibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBibGFkZS50aXRsZSA9IGJsYWRlLmN1cnJlbnRFbnRpdHkubG9jYXRpb247XG4gICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnNhdmVcIiwgaWNvbjogJ2ZhIGZhLXNhdmUnLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6ICRzY29wZS5zYXZlQ2hhbmdlcyxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBjYW5TYXZlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucmVzZXRcIiwgaWNvbjogJ2ZhIGZhLXVuZG8nLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KGJsYWRlLm9yaWdFbnRpdHksIGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogaXNEaXJ0eSxcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiBibGFkZS51cGRhdGVQZXJtaXNzaW9uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdzaXRlbWFwc01vZHVsZS5ibGFkZXMuc2l0ZW1hcC50b29sYmFyLmFkZEl0ZW1zJywgaWNvbjogJ2ZhIGZhLXBsdXMnLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IHNob3dBZGRJdGVtc0JsYWRlLFxuICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH0sXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnc2l0ZW1hcHNNb2R1bGUuYmxhZGVzLnNpdGVtYXAudG9vbGJhci5yZW1vdmVJdGVtcycsIGljb246ICdmYSBmYS10cmFzaC1vJyxcbiAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlbW92ZUl0ZW1zKCRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuZ3JpZEFwaSAmJiBfLmFueSgkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIGZ1bmN0aW9uIHNob3dBZGRJdGVtc0JsYWRlKCkge1xuICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgIGlkOiAnYWRkU2l0ZW1hcEl0ZW1zQmxhZGUnLFxuICAgICAgICAgICAgICAgIHNpdGVtYXA6IGJsYWRlLmN1cnJlbnRFbnRpdHksXG4gICAgICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuY3VycmVudEVudGl0eS5zdG9yZUlkLFxuICAgICAgICAgICAgICAgIHBhcmVudFJlZnJlc2g6IHJlZnJlc2hTaXRlbWFwSXRlbXNBbmRQYXJlbnQsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdzaXRlbWFwc01vZHVsZS5ibGFkZXMuYWRkSXRlbXMudGl0bGUnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlLnNpdGVtYXBJdGVtc0FkZENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuU2l0ZW1hcHMpL1NjcmlwdHMvYmxhZGVzL3NpdGVtYXAtaXRlbXMtYWRkLnRwbC5odG1sJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJsYWRlLnJlbW92ZUl0ZW1zID0gZnVuY3Rpb24gKGxpc3QpIHtcbiAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IFwiY29uZmlybURlbGV0ZVwiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcInNpdGVtYXBzTW9kdWxlLmRpYWxvZ3Muc2l0ZW1hcEl0ZW1zLWRlbGV0ZS50aXRsZVwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwic2l0ZW1hcHNNb2R1bGUuZGlhbG9ncy5zaXRlbWFwSXRlbXMtZGVsZXRlLm1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkcyA9IF8ucGx1Y2sobGlzdCwgJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaXRlbWFwQXBpLnJlbW92ZVNpdGVtYXBJdGVtcyh7IGl0ZW1JZHM6IGlkcyB9LCByZWZyZXNoU2l0ZW1hcEl0ZW1zQW5kUGFyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbkRpYWxvZyhkaWFsb2cpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIHVpLWdyaWRcbiAgICAgICAgJHNjb3BlLnNldEdyaWRPcHRpb25zID0gZnVuY3Rpb24gKGdyaWRPcHRpb25zKSB7XG4gICAgICAgICAgICAkc2NvcGUuZ3JpZE9wdGlvbnMgPSBncmlkT3B0aW9ucztcblxuICAgICAgICAgICAgZ3JpZE9wdGlvbnMub25SZWdpc3RlckFwaSA9IGZ1bmN0aW9uIChncmlkQXBpKSB7XG4gICAgICAgICAgICAgICAgZ3JpZEFwaS5jb3JlLm9uLnNvcnRDaGFuZ2VkKCRzY29wZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWJsYWRlLmlzTG9hZGluZykgYmxhZGUucmVmcmVzaFNpdGVtYXBJdGVtcygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYmxhZGVVdGlscy5pbml0aWFsaXplUGFnaW5hdGlvbigkc2NvcGUsIHRydWUpO1xuICAgICAgICAgICAgJHNjb3BlLiR3YXRjaCgncGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlJywgZnVuY3Rpb24gKCkgeyBibGFkZS5yZWZyZXNoU2l0ZW1hcEl0ZW1zKCk7IH0pO1xuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgIH1cblxufV0pO1xuIiwi77u/YW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2Uuc2l0ZW1hcHNNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2Uuc2l0ZW1hcHNNb2R1bGUuc2l0ZW1hcERvd25sb2FkQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3ZpcnRvQ29tbWVyY2Uuc2l0ZW1hcHNNb2R1bGUuc2l0ZW1hcEFwaScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgc2l0ZW1hcEFwaSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xuICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICRzY29wZS4kb24oXCJuZXctbm90aWZpY2F0aW9uLWV2ZW50XCIsIGZ1bmN0aW9uIChldmVudCwgbm90aWZpY2F0aW9uKSB7XG4gICAgICAgIGlmIChibGFkZS5ub3RpZmljYXRpb24gJiYgbm90aWZpY2F0aW9uLmlkID09IGJsYWRlLm5vdGlmaWNhdGlvbi5pZCkge1xuICAgICAgICAgICAgYW5ndWxhci5jb3B5KG5vdGlmaWNhdGlvbiwgYmxhZGUubm90aWZpY2F0aW9uKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgc2l0ZW1hcEFwaS5kb3dubG9hZCh7XG4gICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgICAgIGJhc2VVcmw6IGJsYWRlLmJhc2VVcmxcbiAgICB9LFxuICAgIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBibGFkZS5ub3RpZmljYXRpb24gPSByZXNwb25zZTtcbiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgJHNjb3BlLmJsYWRlKTtcbiAgICB9KTtcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5zaXRlbWFwc01vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5zaXRlbWFwc01vZHVsZS5zaXRlbWFwSXRlbXNBZGRDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlLnNpdGVtYXBBcGknLCAndmlydG9Db21tZXJjZS5zaXRlbWFwc01vZHVsZS5rbm93blNpdGVtYXBJdGVtVHlwZXMnLCBmdW5jdGlvbiAoJHNjb3BlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBzaXRlbWFwQXBpLCBrbm93blNpdGVtYXBJdGVtVHlwZXMpIHtcbiAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgJHNjb3BlLmF2YWlsYWJsZVR5cGVzID0ga25vd25TaXRlbWFwSXRlbVR5cGVzLnR5cGVzO1xuICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgJHNjb3BlLmFkZEl0ZW0gPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICB2YXIgbmV3QmxhZGUgPSBhbmd1bGFyLmV4dGVuZChub2RlLm5ld0JsYWRlLCB7XG4gICAgICAgICAgICBpZDogbm9kZS5uZXdCbGFkZS5pZCB8fCAnc2l0ZW1hcEl0ZW0tZGV0YWlscycsXG4gICAgICAgICAgICBzZWxlY3RlZEl0ZW1zOiBbXSxcbiAgICAgICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgICAgICAgICBjaGVja0l0ZW1GbjogdXBkYXRlU2VsZWN0ZWRJdGVtc0xpc3QsXG4gICAgICAgICAgICBjb25maXJtQ2hhbmdlc0ZuOiBzYXZlTmV3U2l0ZW1hcEl0ZW1zXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZS5wYXJlbnRCbGFkZSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkSXRlbXNMaXN0KHNlbGVjdGVkSXRlbXMsIGxpc3RJdGVtLCBpc1NlbGVjdGVkKSB7XG4gICAgICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICBpZiAoXy5hbGwoc2VsZWN0ZWRJdGVtcywgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQgIT0gbGlzdEl0ZW0uaWQ7IH0pKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcy5wdXNoKGxpc3RJdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGVjdGVkSXRlbXMgPSBfLnJlamVjdChzZWxlY3RlZEl0ZW1zLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCA9PSBsaXN0SXRlbS5pZDsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgYmxhZGUuZXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBzZWxlY3RlZEl0ZW1zO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmVOZXdTaXRlbWFwSXRlbXMoc2l0ZW1hcEl0ZW1zLCBjdXJyZW50QmxhZGUpIHtcbiAgICAgICAgY3VycmVudEJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG5cbiAgICAgICAgc2l0ZW1hcEFwaS5hZGRTaXRlbWFwSXRlbXMoeyBzaXRlbWFwSWQ6IGJsYWRlLnNpdGVtYXAuaWQgfSwgc2l0ZW1hcEl0ZW1zLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUoY3VycmVudEJsYWRlLCBibGFkZS5wYXJlbnRSZWZyZXNoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59XSlcblxuLnJ1bihbJ3ZpcnRvQ29tbWVyY2Uuc2l0ZW1hcHNNb2R1bGUua25vd25TaXRlbWFwSXRlbVR5cGVzJywgZnVuY3Rpb24gKGtub3duU2l0ZW1hcEl0ZW1UeXBlcykge1xuICAgIGZ1bmN0aW9uIGl0ZW1Ub1NpdGVtYXBJdGVtKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpdGxlOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICBpbWFnZVVybDogaXRlbS5pbWFnZVVybCxcbiAgICAgICAgICAgIG9iamVjdElkOiBpdGVtLmlkLFxuICAgICAgICAgICAgb2JqZWN0VHlwZTogaXRlbS50eXBlIHx8IGl0ZW0uc2VvT2JqZWN0VHlwZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIHJlZ2lzdGVyIGtub3duIGl0ZW0gdHlwZXNcbiAgICB2YXIgY2F0YWxvZ0l0ZW1TZWxlY3RCbGFkZSA9IHtcbiAgICAgICAgaWQ6ICdhZGRTaXRlbWFwQ2F0YWxvZ0l0ZW1zJyxcbiAgICAgICAgdGl0bGU6ICdzaXRlbWFwc01vZHVsZS5ibGFkZXMuYWRkQ2F0YWxvZ0l0ZW1zLnRpdGxlJyxcbiAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuY2F0YWxvZ01vZHVsZS5jYXRhbG9nSXRlbVNlbGVjdENvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLkNhdGFsb2cpL1NjcmlwdHMvYmxhZGVzL2NvbW1vbi9jYXRhbG9nLWl0ZW1zLXNlbGVjdC50cGwuaHRtbCcsXG4gICAgICAgIGJyZWFkY3J1bWJzOiBbXSxcbiAgICAgICAgdG9vbGJhckNvbW1hbmRzOiBbe1xuICAgICAgICAgICAgbmFtZTogJ3NpdGVtYXBzTW9kdWxlLmJsYWRlcy5hZGRDYXRhbG9nSXRlbXMudG9vbGJhci5hZGRTZWxlY3RlZCcsIGljb246ICdmYSBmYS1wbHVzJyxcbiAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uIChjYXRhbG9nQmxhZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2l0ZW1hcEl0ZW1zID0gXy5tYXAoY2F0YWxvZ0l0ZW1TZWxlY3RCbGFkZS5zZWxlY3RlZEl0ZW1zLCBpdGVtVG9TaXRlbWFwSXRlbSk7XG4gICAgICAgICAgICAgICAgY2F0YWxvZ0l0ZW1TZWxlY3RCbGFkZS5jb25maXJtQ2hhbmdlc0ZuKHNpdGVtYXBJdGVtcywgY2F0YWxvZ0JsYWRlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfLmFueShjYXRhbG9nSXRlbVNlbGVjdEJsYWRlLnNlbGVjdGVkSXRlbXMpOyB9XG4gICAgICAgIH1dLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBhbGxvd0NoZWNraW5nQ2F0ZWdvcnk6IHRydWUsXG4gICAgICAgICAgICBjaGVja0l0ZW1GbjogZnVuY3Rpb24gKGxpc3RJdGVtLCBpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY2F0YWxvZ0l0ZW1TZWxlY3RCbGFkZS5zZWxlY3RlZEl0ZW1zID0gY2F0YWxvZ0l0ZW1TZWxlY3RCbGFkZS5jaGVja0l0ZW1GbihjYXRhbG9nSXRlbVNlbGVjdEJsYWRlLnNlbGVjdGVkSXRlbXMsIGxpc3RJdGVtLCBpc1NlbGVjdGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAga25vd25TaXRlbWFwSXRlbVR5cGVzLnJlZ2lzdGVyVHlwZSh7XG4gICAgICAgIHR5cGU6ICdDYXRhbG9nSXRlbScsXG4gICAgICAgIGljb246ICdmYS1mb2xkZXInLFxuICAgICAgICBuZXdCbGFkZTogY2F0YWxvZ0l0ZW1TZWxlY3RCbGFkZVxuICAgIH0pO1xuXG4gICAga25vd25TaXRlbWFwSXRlbVR5cGVzLnJlZ2lzdGVyVHlwZSh7XG4gICAgICAgIHR5cGU6ICdWZW5kb3JJdGVtJyxcbiAgICAgICAgaWNvbjogJ2ZhLWJhbGFuY2Utc2NhbGUnLFxuICAgICAgICBuZXdCbGFkZToge1xuICAgICAgICAgICAgdGl0bGU6ICdzaXRlbWFwc01vZHVsZS5ibGFkZXMuYWRkVmVuZG9ySXRlbXMudGl0bGUnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuY3VzdG9tZXJNb2R1bGUubWVtYmVySXRlbVNlbGVjdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5TaXRlbWFwcykvU2NyaXB0cy9ibGFkZXMvbWVtYmVyLWl0ZW1zLXNlbGVjdC50cGwuaHRtbCcsXG4gICAgICAgICAgICB0b29sYmFyQ29tbWFuZHM6IFt7XG4gICAgICAgICAgICAgICAgbmFtZTogJ3NpdGVtYXBzTW9kdWxlLmJsYWRlcy5hZGRWZW5kb3JJdGVtcy50b29sYmFyLmFkZFNlbGVjdGVkJywgaWNvbjogJ2ZhIGZhLXBsdXMnLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICh2ZW5kb3JzQmxhZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNpdGVtYXBJdGVtcyA9IF8ubWFwKHZlbmRvcnNCbGFkZS5zZWxlY3RlZEl0ZW1zLCBpdGVtVG9TaXRlbWFwSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIHZlbmRvcnNCbGFkZS5jb25maXJtQ2hhbmdlc0ZuKHNpdGVtYXBJdGVtcywgdmVuZG9yc0JsYWRlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICh2ZW5kb3JzQmxhZGUpIHsgcmV0dXJuIF8uYW55KHZlbmRvcnNCbGFkZS5zZWxlY3RlZEl0ZW1zKTsgfVxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgbWVtYmVyVHlwZXM6IFsndmVuZG9yJ11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIGtub3duU2l0ZW1hcEl0ZW1UeXBlcy5yZWdpc3RlclR5cGUoe1xuICAgICAgICB0eXBlOiAnQ3VzdG9tSXRlbScsXG4gICAgICAgIGljb246ICdmYS1saW5rJyxcbiAgICAgICAgbmV3QmxhZGU6IHtcbiAgICAgICAgICAgIGlkOiAnYWRkQ3VzdG9tSXRlbUJsYWRlJyxcbiAgICAgICAgICAgIHRpdGxlOiAnc2l0ZW1hcHNNb2R1bGUuYmxhZGVzLmFkZEN1c3RvbUl0ZW0udGl0bGUnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uuc2l0ZW1hcHNNb2R1bGUuc2l0ZW1hcEl0ZW1zQWRkQ3VzdG9tSXRlbUNvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5TaXRlbWFwcykvU2NyaXB0cy9ibGFkZXMvc2l0ZW1hcC1hZGQtY3VzdG9tLWl0ZW0udHBsLmh0bWwnXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBzdGF0aWNDb250ZW50QmxhZGUgPSB7XG4gICAgICAgIGlkOiAnYWRkU2l0ZW1hcFN0YXRpY0NvbnRlbnRJdGVtcycsXG4gICAgICAgIHRpdGxlOiAnc2l0ZW1hcHNNb2R1bGUuYmxhZGVzLmFkZFN0YXRpY0NvbnRlbnRJdGVtcy50aXRsZScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlLnN0YXRpY0NvbnRlbnRJdGVtU2VsZWN0Q29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuU2l0ZW1hcHMpL1NjcmlwdHMvYmxhZGVzL3N0YXRpYy1jb250ZW50LWl0ZW1zLXNlbGVjdC50cGwuaHRtbCcsXG4gICAgICAgIGhlYWRJY29uOiAnZmEgZmEtY29kZScsXG4gICAgICAgIGJyZWFkY3J1bWJzOiBudWxsLFxuICAgICAgICBjdXJyZW50RW50aXR5OiB7fVxuICAgIH1cblxuICAgIGtub3duU2l0ZW1hcEl0ZW1UeXBlcy5yZWdpc3RlclR5cGUoe1xuICAgICAgICB0eXBlOiAnU3RhdGljQ29udGVudEl0ZW0nLFxuICAgICAgICBpY29uOiAnZmEtY29kZScsXG4gICAgICAgIG5ld0JsYWRlOiBzdGF0aWNDb250ZW50QmxhZGVcbiAgICB9KTtcbn1dKVxuLy8gZGVmaW5lIGtub3duIHNpdGVtYXAgaXRlbSB0eXBlcyB0byBiZSBhY2Nlc3NpYmxlIHBsYXRmb3JtLXdpZGVcbi5mYWN0b3J5KCd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlLmtub3duU2l0ZW1hcEl0ZW1UeXBlcycsIFsncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsIGZ1bmN0aW9uIChibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZXM6IFtdLFxuICAgICAgICByZWdpc3RlclR5cGU6IGZ1bmN0aW9uICh0eXBlRGVmaW5pdGlvbikge1xuICAgICAgICAgICAgdGhpcy50eXBlcy5wdXNoKHR5cGVEZWZpbml0aW9uKTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG4iLCLvu79hbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5zaXRlbWFwc01vZHVsZScpLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2Uuc2l0ZW1hcHNNb2R1bGUuc2l0ZW1hcExpc3RDb250cm9sbGVyJywgWyckd2luZG93JywgJyRzY29wZScsICckbW9kYWwnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVVdGlscycsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLmRpYWxvZ1NlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJywgJ3ZpcnRvQ29tbWVyY2Uuc2l0ZW1hcHNNb2R1bGUuc2l0ZW1hcEFwaScsIGZ1bmN0aW9uICgkd2luZG93LCAkc2NvcGUsICRtb2RhbCwgYmxhZGVVdGlscywgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgZGlhbG9nU2VydmljZSwgdWlHcmlkSGVscGVyLCBzaXRlbWFwQXBpKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuXG4gICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgc2l0ZW1hcEFwaS5zZWFyY2goe1xuICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuc3RvcmUuaWQsXG4gICAgICAgICAgICBza2lwOiAoJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAtIDEpICogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCxcbiAgICAgICAgICAgIHRha2U6ICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnRcbiAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSByZXNwb25zZS50b3RhbENvdW50O1xuICAgICAgICAgICAgJHNjb3BlLmxpc3RFbnRyaWVzID0gcmVzcG9uc2UucmVzdWx0cztcbiAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgYmxhZGUuc2VsZWN0Tm9kZSA9IGZ1bmN0aW9uIChub2RlLCBpc05ldykge1xuICAgICAgICAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBub2RlLmlkO1xuXG4gICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgIGlkOiAnc2l0ZW1hcC1kZXRhaWwnLFxuICAgICAgICAgICAgaXNOZXc6IGlzTmV3LFxuICAgICAgICAgICAgY3VycmVudEVudGl0eTogbm9kZSxcbiAgICAgICAgICAgIHBhcmVudFJlZnJlc2g6IGJsYWRlLnJlZnJlc2gsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5zaXRlbWFwc01vZHVsZS5zaXRlbWFwRGV0YWlsQ29udHJvbGxlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLlNpdGVtYXBzKS9TY3JpcHRzL2JsYWRlcy9zaXRlbWFwLWRldGFpbC50cGwuaHRtbCdcbiAgICAgICAgfTtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICB9O1xuXG4gICAgYmxhZGUuaGVhZEljb24gPSAnZmEgZmEtc2l0ZW1hcCc7XG4gICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnJlZnJlc2hcIiwgaWNvbjogJ2ZhIGZhLXJlZnJlc2gnLFxuICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogYmxhZGUucmVmcmVzaCxcbiAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5hZGRcIiwgaWNvbjogJ2ZhIGZhLXBsdXMnLFxuICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGJsYWRlLnNlbGVjdE5vZGUoe1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogJ3NpdGVtYXAvJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsVGVtcGxhdGU6ICd7c2x1Z30nLFxuICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFtdXG4gICAgICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgICAgIHBlcm1pc3Npb246ICdzaXRlbWFwczpjcmVhdGUnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuZGVsZXRlXCIsIGljb246ICdmYSBmYS10cmFzaC1vJyxcbiAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBkZWxldGVMaXN0KCRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuZ3JpZEFwaSAmJiBfLmFueSgkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBlcm1pc3Npb246ICdzaXRlbWFwczpkZWxldGUnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdzaXRlbWFwc01vZHVsZS5ibGFkZXMuc2l0ZW1hcExpc3QudG9vbGJhci5kb3dubG9hZCcsIGljb246ICdmYSBmYS1kb3dubG9hZCcsXG4gICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBzaG93RG93bmxvYWREaWFsb2csXG4gICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFibGFkZS5pc0xvYWRpbmcgJiYgJHNjb3BlLnBhZ2VTZXR0aW5ncy50b3RhbEl0ZW1zID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfV07XG5cbiAgICBmdW5jdGlvbiBkZWxldGVMaXN0KHNlbGVjdGlvbikge1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgaWQ6ICdjb25maXJtRGVsZXRlU2l0ZW1hcHMnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnc2l0ZW1hcHNNb2R1bGUuZGlhbG9ncy5zaXRlbWFwLWRlbGV0ZS50aXRsZScsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ3NpdGVtYXBzTW9kdWxlLmRpYWxvZ3Muc2l0ZW1hcC1kZWxldGUubWVzc2FnZScsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChjb25maXJtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNpdGVtYXBJZHMgPSBfLnBsdWNrKHNlbGVjdGlvbiwgJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaXRlbWFwQXBpLnJlbW92ZSh7IGlkczogc2l0ZW1hcElkcyB9LCBibGFkZS5yZWZyZXNoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3dDb25maXJtYXRpb25EaWFsb2coZGlhbG9nKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd0Rvd25sb2FkRGlhbG9nKCkge1xuICAgICAgICB2YXIgYmFzZVVybCA9IGJsYWRlLnN0b3JlLnVybCB8fCBibGFkZS5zdG9yZS5zZWN1cmVVcmxcbiAgICAgICAgdmFyIGNvbmZpcm1EaWFsb2cgPSB7XG4gICAgICAgICAgICBpZDogJ2NvbmZpcm1CYXNlVXJsJyxcbiAgICAgICAgICAgIG9yaWdpbmFsQmFzZVVybDogYW5ndWxhci5jb3B5KGJhc2VVcmwpLFxuICAgICAgICAgICAgYmFzZVVybDogYmFzZVVybCxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuU2l0ZW1hcHMpL1NjcmlwdHMvZGlhbG9ncy9jb25maXJtLWJhc2UtdXJsLWRpYWxvZy50cGwuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5zaXRlbWFwc01vZHVsZS5iYXNlVXJsRGlhbG9nQ29udHJvbGxlcicsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgZGlhbG9nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25maXJtRGlhbG9nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGRpYWxvZ0luc3RhbmNlID0gJG1vZGFsLm9wZW4oY29uZmlybURpYWxvZyk7XG4gICAgICAgIGRpYWxvZ0luc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChiYXNlVXJsKSB7XG4gICAgICAgICAgICBpZiAoYmFzZVVybCkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdzaXRlbWFwLWRvd25sb2FkJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdzaXRlbWFwc01vZHVsZS5ibGFkZXMuZG93bmxvYWQudGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICBoZWFkSWNvbjogJ2ZhIGZhLWRvd25sb2FkJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uuc2l0ZW1hcHNNb2R1bGUuc2l0ZW1hcERvd25sb2FkQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuU2l0ZW1hcHMpL1NjcmlwdHMvYmxhZGVzL3NpdGVtYXAtZG93bmxvYWQudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgYmFzZVVybDogYmFzZVVybFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcblxuICAgICAgICAgICAgICAgIC8vJHdpbmRvdy5vcGVuKCdhcGkvc2l0ZW1hcHMvZG93bmxvYWQ/c3RvcmVJZD0nICsgYmxhZGUuc3RvcmUuaWQgKyAnJmJhc2VVcmw9JyArIGJhc2VVcmwsICdfYmxhbmsnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gdWktZ3JpZFxuICAgICRzY29wZS5zZXRHcmlkT3B0aW9ucyA9IGZ1bmN0aW9uIChncmlkT3B0aW9ucykge1xuICAgICAgICB1aUdyaWRIZWxwZXIuaW5pdGlhbGl6ZSgkc2NvcGUsIGdyaWRPcHRpb25zLCBmdW5jdGlvbiAoZ3JpZEFwaSkge1xuICAgICAgICAgICAgdWlHcmlkSGVscGVyLmJpbmRSZWZyZXNoT25Tb3J0Q2hhbmdlZCgkc2NvcGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgYmxhZGVVdGlscy5pbml0aWFsaXplUGFnaW5hdGlvbigkc2NvcGUpO1xuICAgIH07XG5cbiAgICAvL05vIG5lZWQgdG8gY2FsbCB0aGlzIGJlY2F1c2UgcGFnZSAncGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlJyBpcyB3YXRjaGVkISEhIEl0IHdvdWxkIHRyaWdnZXIgc3Vic2VxdWVudCBkdXBsaWNhdGVkIHJlcS4uLlxuICAgIC8vYmxhZGUucmVmcmVzaCgpO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2Uuc2l0ZW1hcHNNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2Uuc2l0ZW1hcHNNb2R1bGUuc3RhdGljQ29udGVudEl0ZW1TZWxlY3RDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHRpbWVvdXQnLCAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLmNvbnRlbnRBcGknLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZVV0aWxzJywgJ3BsYXRmb3JtV2ViQXBwLnVpR3JpZEhlbHBlcicsXG5mdW5jdGlvbiAoJHNjb3BlLCAkdGltZW91dCwgc3RhdGljQ29udGVudCwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgYmxhZGVVdGlscywgdWlHcmlkSGVscGVyKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuXG4gICAgYmxhZGUuc2VsZWN0ZWRJdGVtcyA9IFtdO1xuXG4gICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW3tcbiAgICAgICAgbmFtZTogJ3NpdGVtYXBzTW9kdWxlLmJsYWRlcy5hZGRTdGF0aWNDb250ZW50SXRlbXMudG9vbGJhci5hZGRTZWxlY3RlZCcsXG4gICAgICAgIGljb246ICdmYSBmYS1wbHVzJyxcbiAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKHN0YXRpY0NvbnRlbnRCbGFkZSkge1xuICAgICAgICAgICAgcmV0dXJuIF8uYW55KHN0YXRpY0NvbnRlbnRCbGFkZS5zZWxlY3RlZEl0ZW1zKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKHN0YXRpY0NvbnRlbnRCbGFkZSkge1xuICAgICAgICAgICAgdmFyIHNpdGVtYXBJdGVtcyA9IF8ubWFwKHN0YXRpY0NvbnRlbnRCbGFkZS5zZWxlY3RlZEl0ZW1zLCBpdGVtVG9TaXRlbWFwSXRlbSk7XG4gICAgICAgICAgICBzdGF0aWNDb250ZW50QmxhZGUuY29uZmlybUNoYW5nZXNGbihzaXRlbWFwSXRlbXMsIHN0YXRpY0NvbnRlbnRCbGFkZSk7XG4gICAgICAgIH1cbiAgICB9XTtcblxuICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgIHN0YXRpY0NvbnRlbnQucXVlcnkoe1xuICAgICAgICAgICAgY29udGVudFR5cGU6ICdwYWdlcycsXG4gICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZUlkLFxuICAgICAgICAgICAga2V5d29yZDogYmxhZGUuc2VhcmNoS2V5d29yZCxcbiAgICAgICAgICAgIGZvbGRlclVybDogYmxhZGUuY3VycmVudEVudGl0eS51cmxcbiAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MudG90YWxJdGVtcyA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgXy5lYWNoKGRhdGEsIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgeC5pZCA9IHgudXJsO1xuICAgICAgICAgICAgICAgIHguaXNJbWFnZSA9IHgubWltZVR5cGUgJiYgeC5taW1lVHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKTtcbiAgICAgICAgICAgICAgICB4LmlzT3BlbmFibGUgPSB4Lm1pbWVUeXBlICYmICh4Lm1pbWVUeXBlLnN0YXJ0c1dpdGgoJ2FwcGxpY2F0aW9uL2onKSB8fCB4Lm1pbWVUeXBlLnN0YXJ0c1dpdGgoJ3RleHQvJykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkc2NvcGUubGlzdEVudHJpZXMgPSBkYXRhO1xuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBzZXRCcmVhZGNydW1icygpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTtcbiAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgYmxhZGUuc2V0U2VsZWN0ZWROb2RlID0gZnVuY3Rpb24gKGxpc3RJdGVtKSB7XG4gICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IGxpc3RJdGVtLmlkO1xuICAgIH07XG5cbiAgICAkc2NvcGUudWlHcmlkQ29uc3RhbnRzID0gdWlHcmlkSGVscGVyLnVpR3JpZENvbnN0YW50cztcblxuICAgICRzY29wZS5zZXRHcmlkT3B0aW9ucyA9IGZ1bmN0aW9uIChncmlkT3B0aW9ucykge1xuICAgICAgICB1aUdyaWRIZWxwZXIuaW5pdGlhbGl6ZSgkc2NvcGUsIGdyaWRPcHRpb25zLCBleHRlcm5hbFJlZ2lzdGVyQXBpQ2FsbGJhY2spO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2VsZWN0Tm9kZSA9IGZ1bmN0aW9uIChsaXN0SXRlbSkge1xuICAgICAgICBpZiAoJHNjb3BlLnNlbGVjdGVkTm9kZUlkID09PSBsaXN0SXRlbS5pZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGJsYWRlLnNldFNlbGVjdGVkTm9kZShsaXN0SXRlbSk7XG4gICAgICAgIGlmICgkc2NvcGUub3B0aW9ucy5zZWxlY3RJdGVtRm4pIHtcbiAgICAgICAgICAgICRzY29wZS5vcHRpb25zLnNlbGVjdEl0ZW1GbihsaXN0SXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpc3RJdGVtLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ2ZvbGRlcicpIHtcbiAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICBjb25maXJtQ2hhbmdlc0ZuOiBibGFkZS5jb25maXJtQ2hhbmdlc0ZuLFxuICAgICAgICAgICAgICAgIGlkOiBibGFkZS5pZCxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogYmxhZGUuY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCxcbiAgICAgICAgICAgICAgICBsYW5ndWFnZXM6IGJsYWRlLmxhbmd1YWdlcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50RW50aXR5OiBsaXN0SXRlbSxcbiAgICAgICAgICAgICAgICBicmVhZGNydW1iczogYmxhZGUuYnJlYWRjcnVtYnMsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGJsYWRlLnRpdGxlLFxuICAgICAgICAgICAgICAgIHN1YnRpdGxlOiBibGFkZS5zdWJ0aXRsZSxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBibGFkZS5jb250cm9sbGVyLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBibGFkZS50ZW1wbGF0ZSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlT3BlbkFuaW1hdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc0Nsb3NpbmdEaXNhYmxlZDogYmxhZGUuaXNDbG9zaW5nRGlzYWJsZWRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUucGFyZW50QmxhZGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5vcHRpb25zID0gYW5ndWxhci5leHRlbmQoe1xuICAgICAgICBzaG93Q2hlY2tpbmdNdWx0aXBsZTogdHJ1ZSxcbiAgICAgICAgYWxsb3dDaGVja2luZ0l0ZW06IHRydWUsXG4gICAgICAgIHNlbGVjdGVkSXRlbUlkczogW11cbiAgICB9LCBibGFkZS5vcHRpb25zKTtcblxuICAgIGJsYWRlVXRpbHMuaW5pdGlhbGl6ZVBhZ2luYXRpb24oJHNjb3BlLCB0cnVlKTtcblxuICAgIGJsYWRlLnJlZnJlc2goKTtcblxuICAgIGZ1bmN0aW9uIHNldEJyZWFkY3J1bWJzKCkge1xuICAgICAgICBpZiAoYmxhZGUuYnJlYWRjcnVtYnMpIHtcbiAgICAgICAgICAgIHZhciBicmVhZGNydW1icyA9IGJsYWRlLmJyZWFkY3J1bWJzLnNsaWNlKDApO1xuICAgICAgICAgICAgaWYgKF8uYWxsKGJyZWFkY3J1bWJzLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCAhPT0gYmxhZGUuY3VycmVudEVudGl0eS5pZDsgfSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnJlYWRDcnVtYiA9IGdlbmVyYXRlQnJlYWRjcnVtYihibGFkZS5jdXJyZW50RW50aXR5LmlkLCBibGFkZS5jdXJyZW50RW50aXR5Lm5hbWUpO1xuICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJzLnB1c2goYnJlYWRDcnVtYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBibGFkZS5icmVhZGNydW1icyA9IGJyZWFkY3J1bWJzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmxhZGUuYnJlYWRjcnVtYnMgPSBbZ2VuZXJhdGVCcmVhZGNydW1iKHVuZGVmaW5lZCwgJ3NpdGVtYXBzTW9kdWxlLmJsYWRlcy5hZGRTdGF0aWNDb250ZW50SXRlbXMuYnJlYWQtY3J1bWItdG9wJyldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVCcmVhZGNydW1iKGlkLCBuYW1lKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgYmxhZGU6IGJsYWRlLFxuICAgICAgICAgICAgbmF2aWdhdGU6IGZ1bmN0aW9uIChicmVhZGNydW1iKSB7XG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYi5ibGFkZS5kaXNhYmxlT3BlbkFuaW1hdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUoYnJlYWRjcnVtYi5ibGFkZSk7XG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYi5ibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXh0ZXJuYWxSZWdpc3RlckFwaUNhbGxiYWNrKGdyaWRBcGkpIHtcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgncGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlJywgZ3JpZEFwaS5wYWdpbmF0aW9uLnNlZWspO1xuICAgICAgICBncmlkQXBpLmdyaWQucmVnaXN0ZXJEYXRhQ2hhbmdlQ2FsbGJhY2soZnVuY3Rpb24gKGdyaWQpIHtcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfLmVhY2goJHNjb3BlLml0ZW1zLCBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXy5zb21lKCRzY29wZS5vcHRpb25zLnNlbGVjdGVkSXRlbUlkcywgZnVuY3Rpb24gKHkpIHsgcmV0dXJuIHkgPT09IHguaWQ7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkQXBpLnNlbGVjdGlvbi5zZWxlY3RSb3coeCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBbJHNjb3BlLnVpR3JpZENvbnN0YW50cy5kYXRhQ2hhbmdlLlJPV10pO1xuXG4gICAgICAgIGdyaWRBcGkuc2VsZWN0aW9uLm9uLnJvd1NlbGVjdGlvbkNoYW5nZWQoJHNjb3BlLCBmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLm9wdGlvbnMuY2hlY2tJdGVtRm4pIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUub3B0aW9ucy5jaGVja0l0ZW1Gbihyb3cuZW50aXR5LCByb3cuaXNTZWxlY3RlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LmlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV8uY29udGFpbnMoJHNjb3BlLm9wdGlvbnMuc2VsZWN0ZWRJdGVtSWRzLCByb3cuZW50aXR5LmlkKSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1JZHMucHVzaChyb3cuZW50aXR5LmlkKTtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuc2VsZWN0ZWRJdGVtcy5wdXNoKHJvdy5lbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICRzY29wZS5vcHRpb25zLnNlbGVjdGVkSXRlbUlkcyA9IF8ud2l0aG91dCgkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1JZHMsIHJvdy5lbnRpdHkuaWQpO1xuICAgICAgICAgICAgICAgIGJsYWRlLnNlbGVjdGVkSXRlbXMgPSBfLmZpbHRlcihibGFkZS5zZWxlY3RlZEl0ZW1zLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCAhPT0gcm93LmVudGl0eS5pZDsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGl0ZW1Ub1NpdGVtYXBJdGVtKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpdGxlOiBpdGVtLnJlbGF0aXZlVXJsLFxuICAgICAgICAgICAgdXJsVGVtcGxhdGU6IGl0ZW0ucmVsYXRpdmVVcmwsXG4gICAgICAgICAgICBvYmplY3RUeXBlOiBpdGVtLnR5cGUudG9Mb3dlckNhc2UoKSAhPT0gJ2ZvbGRlcicgPyAnQ29udGVudEl0ZW0nIDogaXRlbS50eXBlXG4gICAgICAgIH07XG4gICAgfVxuXG5cblxuXG4gICAgLy8kc2NvcGUudWlHcmlkQ29uc3RhbnRzID0gdWlHcmlkSGVscGVyLnVpR3JpZENvbnN0YW50cztcbiAgICAvL3ZhciBibGFkZU5hdmlnYXRpb25TZXJ2aWNlID0gYmxhZGVVdGlscy5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlO1xuICAgIC8vdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgIC8vYmxhZGUuc2VsZWN0ZWRJdGVtcyA9IFtdO1xuICAgIC8vYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW3tcbiAgICAvLyAgICBuYW1lOiAnc2l0ZW1hcHNNb2R1bGUuYmxhZGVzLmFkZFN0YXRpY0NvbnRlbnRJdGVtcy50b29sYmFyLmFkZFNlbGVjdGVkJyxcbiAgICAvLyAgICBpY29uOiAnZmEgZmEtcGx1cycsXG4gICAgLy8gICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKHN0YXRpY0NvbnRlbnRCbGFkZSkge1xuICAgIC8vICAgICAgICByZXR1cm4gXy5hbnkoc3RhdGljQ29udGVudEJsYWRlLnNlbGVjdGVkSXRlbXMpO1xuICAgIC8vICAgIH0sXG4gICAgLy8gICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKHN0YXRpY0NvbnRlbnRCbGFkZSkge1xuICAgIC8vICAgICAgICB2YXIgc2l0ZW1hcEl0ZW1zID0gXy5tYXAoc3RhdGljQ29udGVudEJsYWRlLnNlbGVjdGVkSXRlbXMsIGl0ZW1Ub1NpdGVtYXBJdGVtKTtcbiAgICAvLyAgICAgICAgc3RhdGljQ29udGVudEJsYWRlLmNvbmZpcm1DaGFuZ2VzRm4oc2l0ZW1hcEl0ZW1zLCBzdGF0aWNDb250ZW50QmxhZGUpO1xuICAgIC8vICAgIH1cbiAgICAvL31dO1xuXG4gICAgLy9ibGFkZS5zZXRTZWxlY3RlZE5vZGUgPSBmdW5jdGlvbiAobGlzdEl0ZW0pIHtcbiAgICAvLyAgICAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBsaXN0SXRlbS5pZDtcbiAgICAvL307XG5cbiAgICAvL2JsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAvLyAgICBzdGF0aWNDb250ZW50LnF1ZXJ5KHtcbiAgICAvLyAgICAgICAgY29udGVudFR5cGU6ICdwYWdlcycsXG4gICAgLy8gICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgLy8gICAgICAgIGtleXdvcmQ6IGJsYWRlLnNlYXJjaEtleXdvcmQsXG4gICAgLy8gICAgICAgIGZvbGRlclVybDogYmxhZGUuY3VycmVudEVudGl0eS51cmxcbiAgICAvLyAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgIC8vICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSBkYXRhLmxlbmd0aDtcbiAgICAvLyAgICAgICAgXy5lYWNoKGRhdGEsIGZ1bmN0aW9uICh4KSB7XG4gICAgLy8gICAgICAgICAgICB4LmlkID0geC51cmw7XG4gICAgLy8gICAgICAgICAgICB4LmlzSW1hZ2UgPSB4Lm1pbWVUeXBlICYmIHgubWltZVR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJyk7XG4gICAgLy8gICAgICAgICAgICB4LmlzT3BlbmFibGUgPSB4Lm1pbWVUeXBlICYmICh4Lm1pbWVUeXBlLnN0YXJ0c1dpdGgoJ2FwcGxpY2F0aW9uL2onKSB8fCB4Lm1pbWVUeXBlLnN0YXJ0c1dpdGgoJ3RleHQvJykpO1xuICAgIC8vICAgICAgICB9KTtcbiAgICAvLyAgICAgICAgJHNjb3BlLmxpc3RFbnRyaWVzID0gZGF0YTtcbiAgICAvLyAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgLy8gICAgICAgIHNldEJyZWFkY3J1bWJzKCk7XG4gICAgLy8gICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgLy8gICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTtcbiAgICAvLyAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgLy8gICAgfSk7XG4gICAgLy99O1xuXG4gICAgLy8kc2NvcGUub3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKHtcbiAgICAvLyAgICBzaG93Q2hlY2tpbmdNdWx0aXBsZTogdHJ1ZSxcbiAgICAvLyAgICBhbGxvd0NoZWNraW5nSXRlbTogdHJ1ZSxcbiAgICAvLyAgICBzZWxlY3RlZEl0ZW1JZHM6IFtdXG4gICAgLy99LCBibGFkZS5vcHRpb25zKTtcblxuICAgIC8vJHNjb3BlLnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAobGlzdEl0ZW0pIHtcbiAgICAvLyAgICBpZiAoJHNjb3BlLnNlbGVjdGVkTm9kZUlkID09PSBsaXN0SXRlbS5pZCkge1xuICAgIC8vICAgICAgICByZXR1cm47XG4gICAgLy8gICAgfVxuICAgIC8vICAgIGJsYWRlLnNldFNlbGVjdGVkTm9kZShsaXN0SXRlbSk7XG4gICAgLy8gICAgaWYgKCRzY29wZS5vcHRpb25zLnNlbGVjdEl0ZW1Gbikge1xuICAgIC8vICAgICAgICAkc2NvcGUub3B0aW9ucy5zZWxlY3RJdGVtRm4obGlzdEl0ZW0pO1xuICAgIC8vICAgIH1cbiAgICAvLyAgICBpZiAobGlzdEl0ZW0udHlwZS50b0xvd2VyQ2FzZSgpID09PSAnZm9sZGVyJykge1xuICAgIC8vICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgLy8gICAgICAgICAgICBjb25maXJtQ2hhbmdlc0ZuOiBibGFkZS5jb25maXJtQ2hhbmdlc0ZuLFxuICAgIC8vICAgICAgICAgICAgaWQ6IGJsYWRlLmlkLFxuICAgIC8vICAgICAgICAgICAgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLFxuICAgIC8vICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCxcbiAgICAvLyAgICAgICAgICAgIGxhbmd1YWdlczogYmxhZGUubGFuZ3VhZ2VzLFxuICAgIC8vICAgICAgICAgICAgY3VycmVudEVudGl0eTogbGlzdEl0ZW0sXG4gICAgLy8gICAgICAgICAgICBicmVhZGNydW1iczogYmxhZGUuYnJlYWRjcnVtYnMsXG4gICAgLy8gICAgICAgICAgICB0aXRsZTogYmxhZGUudGl0bGUsXG4gICAgLy8gICAgICAgICAgICBzdWJ0aXRsZTogYmxhZGUuc3VidGl0bGUsXG4gICAgLy8gICAgICAgICAgICBjb250cm9sbGVyOiBibGFkZS5jb250cm9sbGVyLFxuICAgIC8vICAgICAgICAgICAgdGVtcGxhdGU6IGJsYWRlLnRlbXBsYXRlLFxuICAgIC8vICAgICAgICAgICAgZGlzYWJsZU9wZW5BbmltYXRpb246IHRydWUsXG4gICAgLy8gICAgICAgICAgICBpc0Nsb3NpbmdEaXNhYmxlZDogYmxhZGUuaXNDbG9zaW5nRGlzYWJsZWRcbiAgICAvLyAgICAgICAgfTtcbiAgICAvLyAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlLnBhcmVudEJsYWRlKTtcbiAgICAvLyAgICB9XG4gICAgLy99O1xuXG4gICAgLy92YXIgZmlsdGVyID0gJHNjb3BlLmZpbHRlciA9IHt9O1xuICAgIC8vZmlsdGVyLmNyaXRlcmlhQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgICBpZiAoZmlsdGVyLmtleXdvcmQgPT09IG51bGwpIHtcbiAgICAvLyAgICAgICAgYmxhZGUubWVtYmVyVHlwZSA9IHVuZGVmaW5lZDtcbiAgICAvLyAgICB9XG4gICAgLy8gICAgaWYgKCRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPiAxKSB7XG4gICAgLy8gICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSAxO1xuICAgIC8vICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAvLyAgICB9XG4gICAgLy99O1xuXG4gICAgLy9mdW5jdGlvbiBzZXRCcmVhZGNydW1icygpIHtcbiAgICAvLyAgICBpZiAoYmxhZGUuYnJlYWRjcnVtYnMpIHtcbiAgICAvLyAgICAgICAgdmFyIGJyZWFkY3J1bWJzID0gYmxhZGUuYnJlYWRjcnVtYnMuc2xpY2UoMCk7XG4gICAgLy8gICAgICAgIGlmIChfLmFsbChicmVhZGNydW1icywgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQgIT09IGJsYWRlLmN1cnJlbnRFbnRpdHkuaWQ7IH0pKSB7XG4gICAgLy8gICAgICAgICAgICB2YXIgYnJlYWRDcnVtYiA9IGdlbmVyYXRlQnJlYWRjcnVtYihibGFkZS5jdXJyZW50RW50aXR5LmlkLCBibGFkZS5jdXJyZW50RW50aXR5Lm5hbWUpO1xuICAgIC8vICAgICAgICAgICAgYnJlYWRjcnVtYnMucHVzaChicmVhZENydW1iKTtcbiAgICAvLyAgICAgICAgfVxuICAgIC8vICAgICAgICBibGFkZS5icmVhZGNydW1icyA9IGJyZWFkY3J1bWJzO1xuICAgIC8vICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgIGJsYWRlLmJyZWFkY3J1bWJzID0gW2dlbmVyYXRlQnJlYWRjcnVtYihudWxsLCAnYWxsJyldO1xuICAgIC8vICAgIH1cbiAgICAvL31cblxuICAgIC8vZnVuY3Rpb24gZ2VuZXJhdGVCcmVhZGNydW1iKGlkLCBuYW1lKSB7XG4gICAgLy8gICAgcmV0dXJuIHtcbiAgICAvLyAgICAgICAgaWQ6IGlkLFxuICAgIC8vICAgICAgICBuYW1lOiBuYW1lLFxuICAgIC8vICAgICAgICBibGFkZTogYmxhZGUsXG4gICAgLy8gICAgICAgIG5hdmlnYXRlOiBmdW5jdGlvbiAoYnJlYWRjcnVtYikge1xuICAgIC8vICAgICAgICAgICAgYnJlYWRjcnVtYi5ibGFkZS5kaXNhYmxlT3BlbkFuaW1hdGlvbiA9IHRydWU7XG4gICAgLy8gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShicmVhZGNydW1iLmJsYWRlKTtcbiAgICAvLyAgICAgICAgICAgIGJyZWFkY3J1bWIuYmxhZGUucmVmcmVzaCgpO1xuICAgIC8vICAgICAgICB9XG4gICAgLy8gICAgfTtcbiAgICAvL31cblxuICAgIC8vLy8gdWktZ3JpZFxuICAgIC8vJHNjb3BlLnNldEdyaWRPcHRpb25zID0gZnVuY3Rpb24gKGdyaWRPcHRpb25zKSB7XG4gICAgLy8gICAgdWlHcmlkSGVscGVyLmluaXRpYWxpemUoJHNjb3BlLCBncmlkT3B0aW9ucywgZXh0ZXJuYWxSZWdpc3RlckFwaUNhbGxiYWNrKTtcbiAgICAvLyAgICBibGFkZVV0aWxzLmluaXRpYWxpemVQYWdpbmF0aW9uKCRzY29wZSwgdHJ1ZSk7XG4gICAgLy99O1xuXG4gICAgLy9mdW5jdGlvbiBleHRlcm5hbFJlZ2lzdGVyQXBpQ2FsbGJhY2soZ3JpZEFwaSkge1xuICAgIC8vICAgICRzY29wZS4kd2F0Y2goJ3BhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZScsIGdyaWRBcGkucGFnaW5hdGlvbi5zZWVrKTtcbiAgICAvLyAgICBncmlkQXBpLmdyaWQucmVnaXN0ZXJEYXRhQ2hhbmdlQ2FsbGJhY2soZnVuY3Rpb24gKGdyaWQpIHtcbiAgICAvLyAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICAgICAgICAgXy5lYWNoKCRzY29wZS5pdGVtcywgZnVuY3Rpb24gKHgpIHtcbiAgICAvLyAgICAgICAgICAgICAgICBpZiAoXy5zb21lKCRzY29wZS5vcHRpb25zLnNlbGVjdGVkSXRlbUlkcywgZnVuY3Rpb24gKHkpIHsgcmV0dXJuIHkgPT09IHguaWQ7IH0pKSB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgIGdyaWRBcGkuc2VsZWN0aW9uLnNlbGVjdFJvdyh4KTtcbiAgICAvLyAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICB9KTtcbiAgICAvLyAgICAgICAgfSk7XG4gICAgLy8gICAgfSwgWyRzY29wZS51aUdyaWRDb25zdGFudHMuZGF0YUNoYW5nZS5ST1ddKTtcblxuICAgIC8vICAgIGdyaWRBcGkuc2VsZWN0aW9uLm9uLnJvd1NlbGVjdGlvbkNoYW5nZWQoJHNjb3BlLCBmdW5jdGlvbiAocm93KSB7XG4gICAgLy8gICAgICAgIGlmICgkc2NvcGUub3B0aW9ucy5jaGVja0l0ZW1Gbikge1xuICAgIC8vICAgICAgICAgICAgJHNjb3BlLm9wdGlvbnMuY2hlY2tJdGVtRm4ocm93LmVudGl0eSwgcm93LmlzU2VsZWN0ZWQpO1xuICAgIC8vICAgICAgICB9XG4gICAgLy8gICAgICAgIGlmIChyb3cuaXNTZWxlY3RlZCkge1xuICAgIC8vICAgICAgICAgICAgaWYgKCFfLmNvbnRhaW5zKCRzY29wZS5vcHRpb25zLnNlbGVjdGVkSXRlbUlkcywgcm93LmVudGl0eS5pZCkpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1JZHMucHVzaChyb3cuZW50aXR5LmlkKTtcbiAgICAvLyAgICAgICAgICAgICAgICBibGFkZS5zZWxlY3RlZEl0ZW1zLnB1c2gocm93LmVudGl0eSk7XG4gICAgLy8gICAgICAgICAgICB9XG4gICAgLy8gICAgICAgIH1cbiAgICAvLyAgICAgICAgZWxzZSB7XG4gICAgLy8gICAgICAgICAgICAkc2NvcGUub3B0aW9ucy5zZWxlY3RlZEl0ZW1JZHMgPSBfLndpdGhvdXQoJHNjb3BlLm9wdGlvbnMuc2VsZWN0ZWRJdGVtSWRzLCByb3cuZW50aXR5LmlkKTtcbiAgICAvLyAgICAgICAgICAgIGJsYWRlLnNlbGVjdGVkSXRlbXMgPSBfLmZpbHRlcihibGFkZS5zZWxlY3RlZEl0ZW1zLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCAhPT0gcm93LmVudGl0eS5pZDsgfSk7XG4gICAgLy8gICAgICAgIH1cbiAgICAvLyAgICB9KTtcblxuICAgIC8vICAgIHVpR3JpZEhlbHBlci5iaW5kUmVmcmVzaE9uU29ydENoYW5nZWQoJHNjb3BlKTtcbiAgICAvL31cblxuICAgIC8vZnVuY3Rpb24gaXRlbVRvU2l0ZW1hcEl0ZW0oaXRlbSkge1xuICAgIC8vICAgIHJldHVybiB7XG4gICAgLy8gICAgICAgIHRpdGxlOiBpdGVtLnJlbGF0aXZlVXJsLFxuICAgIC8vICAgICAgICB1cmxUZW1wbGF0ZTogaXRlbS5yZWxhdGl2ZVVybCxcbiAgICAvLyAgICAgICAgb2JqZWN0VHlwZTogaXRlbS50eXBlLnRvTG93ZXJDYXNlKCkgIT09ICdmb2xkZXInID8gJ0NvbnRlbnRJdGVtJyA6IGl0ZW0udHlwZVxuICAgIC8vICAgIH07XG4gICAgLy99XG5cbiAgICAvL2JsYWRlLnJlZnJlc2goKTtcbn1dKTtcbiIsIu+7v2FuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlLmJhc2VVcmxEaWFsb2dDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnLCAnZGlhbG9nJywgZnVuY3Rpb24gKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIGRpYWxvZykge1xuICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwgZGlhbG9nKTtcblxuICAgICRzY29wZS5jb25maXJtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgkc2NvcGUuYmFzZVVybCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG4gICAgfVxufV0pOyIsIu+7v2FuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlJylcbi5mYWN0b3J5KCd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlLnNpdGVtYXBBcGknLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICByZXR1cm4gJHJlc291cmNlKCdhcGkvc2l0ZW1hcHMvOmlkJywge30sIHtcbiAgICAgICAgc2VhcmNoOiB7IG1ldGhvZDogJ1BPU1QnLCB1cmw6ICdhcGkvc2l0ZW1hcHMvc2VhcmNoJyB9LFxuICAgICAgICBhZGRTaXRlbWFwOiB7IG1ldGhvZDogJ1BPU1QnIH0sXG4gICAgICAgIHVwZGF0ZVNpdGVtYXA6IHsgbWV0aG9kOiAnUFVUJyB9LFxuICAgICAgICByZW1vdmVTaXRlbWFwOiB7IG1ldGhvZDogJ0RFTEVURScgfSxcbiAgICAgICAgc2VhcmNoU2l0ZW1hcEl0ZW1zOiB7IG1ldGhvZDogJ1BPU1QnLCB1cmw6ICdhcGkvc2l0ZW1hcHMvaXRlbXMvc2VhcmNoJyB9LFxuICAgICAgICBhZGRTaXRlbWFwSXRlbXM6IHsgbWV0aG9kOiAnUE9TVCcsIHVybDogJ2FwaS9zaXRlbWFwcy86c2l0ZW1hcElkL2l0ZW1zJyB9LFxuICAgICAgICByZW1vdmVTaXRlbWFwSXRlbXM6IHsgbWV0aG9kOiAnREVMRVRFJywgdXJsOiAnYXBpL3NpdGVtYXBzLzpzaXRlbWFwSWQvaXRlbXMnIH0sXG4gICAgICAgIGRvd25sb2FkOiB7IG1ldGhvZDogJ0dFVCcsIHVybDogJ2FwaS9zaXRlbWFwcy9kb3dubG9hZCcgfVxuICAgIH0pO1xufV0pOyIsIu+7v2FuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlLnN0b3JlU2l0ZW1hcHNXaWRnZXRDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UpIHtcbiAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG5cbiAgICAkc2NvcGUub3BlbkJsYWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICBpZDogJ3N0b3JlU2l0ZW1hcHNMaXN0JyxcbiAgICAgICAgICAgIHRpdGxlOiAnc2l0ZW1hcHNNb2R1bGUuYmxhZGVzLnNpdGVtYXBMaXN0LnRpdGxlJyxcbiAgICAgICAgICAgIHN1YnRpdGxlOiAnc2l0ZW1hcHNNb2R1bGUuYmxhZGVzLnNpdGVtYXBMaXN0LnN1YnRpdGxlJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnNpdGVtYXBzTW9kdWxlLnNpdGVtYXBMaXN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLlNpdGVtYXBzKS9TY3JpcHRzL2JsYWRlcy9zaXRlbWFwLWxpc3QudHBsLmh0bWwnLFxuICAgICAgICAgICAgc3RvcmU6IGJsYWRlLmN1cnJlbnRFbnRpdHlcbiAgICAgICAgfTtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICB9XG59XSk7Il0sInNvdXJjZVJvb3QiOiIifQ==