!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){i(1),i(2),i(3),i(4),i(5),i(6),i(7),i(8),i(9),i(10),i(11),i(12),i(13),i(14),i(15),i(16),i(17),i(18),i(19),e.exports=i(20)},function(e,t){null!=AppDependencies&&AppDependencies.push("virtoCommerce.pricingModule"),angular.module("virtoCommerce.pricingModule",["ui.grid.cellNav","ui.grid.edit","ui.grid.validate"]).config(["$stateProvider",function(e){e.state("workspace.pricingModule",{url:"/pricing",templateUrl:"$(Platform)/Scripts/common/templates/home.tpl.html",controller:["$scope","platformWebApp.bladeNavigationService",function(e,t){t.showBlade({id:"pricing",title:"pricing.blades.pricing-main.title",subtitle:"pricing.blades.pricing-main.subtitle",controller:"virtoCommerce.pricingModule.pricingMainController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/pricing-main.tpl.html",isClosingDisabled:!0}),e.moduleName="vc-pricing"}]})}]).run(["$http","$compile","platformWebApp.mainMenuService","platformWebApp.widgetService","$state","platformWebApp.authService","platformWebApp.metaFormsService","virtoCommerce.exportModule.genericViewerItemService",function(e,t,i,r,n,o,c,a){var l={path:"browse/pricing",icon:"fa fa-usd",title:"pricing.main-menu-title",priority:30,action:function(){n.go("workspace.pricingModule")},permission:"pricing:access"};i.addMenuItem(l);var s={isVisible:function(e){return o.checkPermission("pricing:read")},controller:"virtoCommerce.pricingModule.itemPricesWidgetController",size:[2,1],template:"Modules/$(VirtoCommerce.Pricing)/Scripts/widgets/itemPricesWidget.tpl.html"};r.registerWidget(s,"itemDetail"),r.registerWidget({isVisible:function(e){return!e.isNew},controller:"virtoCommerce.pricingModule.pricesWidgetController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/widgets/pricesWidget.tpl.html"},"pricelistDetail"),r.registerWidget({controller:"virtoCommerce.pricingModule.assignmentsWidgetController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/widgets/assignmentsWidget.tpl.html"},"pricelistDetail"),e.get("Modules/$(VirtoCommerce.Pricing)/Scripts/dynamicConditions/templates.html").then((function(e){t(e.data)})),c.registerMetaFields("VirtoCommerce.PricingModule.Data.ExportImport.ExportablePriceExportFilter",[{name:"pricelistSelector",title:"pricing.selectors.titles.price-lists",templateUrl:"Modules/$(VirtoCommerce.Pricing)/Scripts/selectors/pricelist-selector.tpl.html"},{name:"productSelector",title:"pricing.selectors.titles.products",templateUrl:"Modules/$(VirtoCommerce.Pricing)/Scripts/selectors/product-selector.tpl.html"},{name:"modifiedSince",title:"pricing.selectors.titles.modified-since",valueType:"DateTime"}]),c.registerMetaFields("VirtoCommerce.PricingModule.Data.ExportImport.ExportablePricelistExportFilter",[{name:"currencySelector",title:"pricing.selectors.titles.currencies",templateUrl:"Modules/$(VirtoCommerce.Pricing)/Scripts/selectors/currency-selector.tpl.html"}]),c.registerMetaFields("VirtoCommerce.PricingModule.Data.ExportImport.ExportablePricelistFullDataExportFilter",[{name:"currencySelector",title:"pricing.selectors.titles.currencies",templateUrl:"Modules/$(VirtoCommerce.Pricing)/Scripts/selectors/currency-selector.tpl.html"}]),c.registerMetaFields("VirtoCommerce.PricingModule.Data.ExportImport.ExportablePricelistAssignmentExportFilter",[{name:"pricelistAssignmentSelector",title:"pricing.selectors.titles.price-lists",templateUrl:"Modules/$(VirtoCommerce.Pricing)/Scripts/selectors/pricelist-selector.tpl.html"},{name:"catalogSelector",title:"Select Catalog",templateUrl:"Modules/$(VirtoCommerce.Pricing)/Scripts/selectors/catalog-selector.tpl.html"}]),a.registerViewer("Price",(function(e){var t=angular.copy(e);return{id:"itemPrices",itemId:t.productId,priceListId:t.pricelistId,data:{prices:[t]},currency:t.currency,title:"pricing.blades.prices-list.title",titleValues:{name:t.name},subtitle:"pricing.blades.prices-list.subtitle",controller:"virtoCommerce.pricingModule.pricesListController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/prices-list.tpl.html"}})),a.registerViewer("Pricelist",(function(e){var t=angular.copy(e);return{id:"listItemChild",controller:"virtoCommerce.pricingModule.pricelistDetailController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/pricelist-detail.tpl.html",currentEntityId:t.id,title:t.name}})),a.registerViewer("PricelistAssignment",(function(e){var t=angular.copy(e);return{id:"pricelistAssignmentDetail",controller:"virtoCommerce.pricingModule.assignmentDetailController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/assignment-detail.tpl.html",currentEntityId:t.id,title:t.name,subtitle:"pricing.blades.assignment-detail.subtitle"}}))}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.assignmentDetailController",["$scope","virtoCommerce.catalogModule.catalogs","virtoCommerce.pricingModule.pricelists","virtoCommerce.pricingModule.pricelistAssignments","virtoCommerce.storeModule.stores","platformWebApp.bladeNavigationService","virtoCommerce.coreModule.common.dynamicExpressionService","platformWebApp.dialogService",function(e,t,i,r,n,o,c,a){var l=e.blade;function s(t){var i;l.isNew&&(t=angular.extend(l.data,t),l.data.pricelistId=l.pricelistId),t.dynamicExpression&&(_.each(t.dynamicExpression.children,m),i=t.dynamicExpression.children[0],results=_.groupBy(i.availableChildren,"groupName"),i.availableChildren=_.map(results,(function(e,t){return{displayName:t,subitems:e}}))),l.currentEntity=angular.copy(t),l.origEntity=t,l.isLoading=!1,l.isNew||(l.toolbarCommands=[{name:"platform.commands.save",icon:"fas fa-save",executeMethod:e.saveChanges,canExecuteMethod:u,permission:l.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(l.origEntity,l.currentEntity)},canExecuteMethod:d,permission:l.updatePermission}])}function d(){return!angular.equals(l.currentEntity,l.origEntity)&&l.hasUpdatePermission()}function u(){return d()&&e.formScope&&e.formScope.$valid&&p()}function p(){return(!l.currentEntity.storeId||!l.currentEntity.catalogId)&&(l.currentEntity.storeId||l.currentEntity.catalogId)}function m(e){var t=c.expressions[e.id];return t||(t={displayName:"unknown element: "+e.id}),_.extend(e,t),e.children||(e.children=[]),_.each(e.children,m),_.each(e.availableChildren,m),e}function g(e){e.availableChildren=void 0,e.displayName=void 0,e.getValidationError=void 0,e.groupName=void 0,e.newChildLabel=void 0,e.templateURL=void 0,_.each(e.children,g)}l.updatePermission="pricing:update",e.pageSize=20,l.refresh=function(e){l.isNew?r.getNew(s):(r.get({id:l.currentEntityId},s),e&&angular.isFunction(l.parentBlade.refresh)&&l.parentBlade.refresh())},e.setForm=function(t){e.formScope=t},e.cancelChanges=function(){e.bladeClose()},e.saveChanges=function(){if(p())l.isLoading=!0,l.currentEntity.dynamicExpression&&(l.currentEntity.dynamicExpression.availableChildren=void 0,_.each(l.currentEntity.dynamicExpression.children,g)),l.isNew?r.save(l.currentEntity,(function(e){l.isNew=void 0,l.currentEntityId=e.id,l.refresh(!0)}),(function(e){o.setError("Error "+e.status,l)})):r.update(l.currentEntity,(function(e){l.refresh(!0)}),(function(e){o.setError("Error "+e.status,l)}));else{a.showErrorDialog({id:"assignmentSaveValidationError",title:"pricing.dialogs.assignment-save-validation.title",message:"pricing.dialogs.assignment-save-validation.message"})}},l.onClose=function(t){o.showConfirmationIfNeeded(d(),u(),l,e.saveChanges,t,"pricing.dialogs.assignment-save.title","pricing.dialogs.assignment-save.message")},e.datepickers={str:!1,end:!1},e.open=function(t,i){t.preventDefault(),t.stopPropagation(),e.datepickers[i]=!0},e.catalogDataSource=e=>t.search(e),e.pricelistDataSource=e=>i.search(e),e.storeDataSource=e=>n.search(e),l.refresh()}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.assignmentListController",["$scope","virtoCommerce.pricingModule.pricelistAssignments","platformWebApp.dialogService","platformWebApp.uiGridHelper","platformWebApp.bladeUtils","virtoCommerce.catalogModule.catalogs","$localStorage",function(e,t,i,r,n,o,c){e.uiGridConstants=r.uiGridConstants;var a=e.blade,l=n.bladeNavigationService,s={exportTypeName:"VirtoCommerce.PricingModule.Data.ExportImport.ExportablePricelistAssignment",dataQuery:{exportTypeName:"PricelistAssignmentExportDataQuery"}},d=angular.copy(s),u=a.filter=e.filter={};function p(){angular.forEach(a.childrenBlades.slice(),(function(e){l.closeBlade(e)}))}function m(){var t={keyword:u.keyword,sort:r.getSortExpression(e),skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount};return u.current?(t.pricelistIds=u.current.pricelistIds,t.catalogIds=u.current.catalogIds||[]):t.pricelistIds=a.pricelistId?[a.pricelistId]:[],t}function g(e){var t={id:"exportGenericViewerFilter",controller:"virtoCommerce.exportModule.exportGenericViewerFilterController",template:"Modules/$(VirtoCommerce.Export)/Scripts/blades/export-generic-viewer-filter.tpl.html",onBeforeApply:a.resetRequestCustomFilter};angular.extend(t,e),l.showBlade(t,a)}a.refresh=function(){a.isLoading=!0,t.search(m(),(function(t){o.search({take:1e3,responseGroup:"Info"},(function(i){a.isLoading=!1,e.pageSettings.totalItems=t.totalCount;var r=t.results;_.each(r,(function(e){var t=_.findWhere(i.results,{id:e.catalogId});t&&(e.catalog=t.name)})),a.currentEntities=r}))}))},e.selectNode=function(t,i){e.selectedNodeId=t.id;var r={id:"pricelistAssignmentDetail",controller:"virtoCommerce.pricingModule.assignmentDetailController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/assignment-detail.tpl.html"};i?angular.extend(r,{isNew:!0,pricelistId:a.pricelistId,data:t,title:"pricing.blades.assignment-detail.new-title"}):angular.extend(r,{currentEntityId:t.id,title:t.name,subtitle:"pricing.blades.assignment-detail.subtitle"}),l.showBlade(r,a)},e.deleteList=function(e){var r={id:"confirmDeleteItem",title:"pricing.dialogs.assignments-delete.title",message:"pricing.dialogs.assignments-delete.message",callback:function(i){if(i){p();var r=_.pluck(e,"id");t.remove({ids:r},(function(){a.refresh()}),(function(e){l.setError("Error "+e.status,a)}))}}};i.showConfirmationDialog(r)},e.deleteAllFiltered=function(){var e={id:"confirmDeleteItems",callback:function(e){e&&(p(),a.isLoading=!0,t.removeFiltered({pricelistId:a.pricelistId,keyword:u.keyword},(function(){a.refresh()})))}};i.showDialog(e,"Modules/$(VirtoCommerce.Pricing)/Scripts/dialogs/deleteAll-dialog.tpl.html","platformWebApp.confirmDialogController")},a.headIcon="fa fa-anchor",a.subtitle="pricing.blades.pricelist-assignment-list.subtitle",a.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:a.refresh,canExecuteMethod:function(){return!0}},{name:"platform.commands.add",icon:"fas fa-plus",executeMethod:function(){e.selectNode({},!0)},canExecuteMethod:function(){return!0},permission:"pricing:create"},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){e.deleteList(e.gridApi.selection.getSelectedRows())},canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())},permission:"pricing:delete"},{name:"pricing.commands.delete-all-filtered",icon:"fas fa-trash-alt",executeMethod:function(){e.deleteAllFiltered()},canExecuteMethod:function(){return a.currentEntities&&a.currentEntities.length>0},permission:"pricing:delete"},{name:"platform.commands.export",icon:"fa fa-upload",canExecuteMethod:function(){return!0},executeMethod:function(){var t=e.gridApi.selection.getSelectAllState();d.dataQuery.isAllSelected=t;var i=e.gridApi.selection.getSelectedRows();d.dataQuery.objectIds=[],(d.dataQuery.objectIds&&d.dataQuery.objectIds.length||!t)&&(d.dataQuery.objectIds=_.map(i,(function(e){return e.id}))),angular.extend(d.dataQuery,m());var r={id:"priceAssignmentExport",title:"pricing.blades.exporter.priceAssignmentTitle",subtitle:"pricing.blades.exporter.priceAssignmentSubtitle",controller:"virtoCommerce.exportModule.exportSettingsController",template:"Modules/$(VirtoCommerce.Export)/Scripts/blades/export-settings.tpl.html",exportDataRequest:d};l.showBlade(r,a)}}],u.criteriaChanged=function(){e.pageSettings.currentPage>1?(a.refresh(),e.pageSettings.currentPage=1):a.refresh()},e.setGridOptions=function(t){e.gridOptions=t,t.onRegisterApi=function(t){t.core.on.sortChanged(e,(function(){a.isLoading||a.refresh()}))},n.initializePagination(e)},c.exportSearchFilters||(c.exportSearchFilters=[]),c.exportSearchFilters[d.exportTypeName]||(c.exportSearchFilters[d.exportTypeName]=[{name:"export.blades.export-generic-viewer.labels.new-filter"}]),e.exportSearchFilters=c.exportSearchFilters[d.exportTypeName],c.exportSearchFilterIds||(c.exportSearchFilterIds=[]),e.exportSearchFilterId=c.exportSearchFilterIds[d.exportTypeName],e.exportSearchFilterId&&(u.current=_.findWhere(e.exportSearchFilters,{id:e.exportSearchFilterId})),u.change=function(){c.exportSearchFilterId=u.current?u.current.id:null;var e=d.exportTypeName+"ExportFilter";u.current&&!u.current.id?(u.current=null,g({isNew:!0,metafieldsId:e,exportTypeName:d.exportTypeName})):(l.closeBlade({id:"exportGenericViewerFilter"}),u.current||a.resetRequestCustomFilter(),u.criteriaChanged())},u.edit=function(){var e=d.exportTypeName+"ExportFilter",t={data:u.current,metafieldsId:e,exportTypeName:d.exportTypeName};u.current?angular.extend(t,{data:u.current}):angular.extend(t,{isNew:!0}),g(t)},u.criteriaChanged=function(){a.refresh()},u.resetKeyword=function(){u.keyword=void 0,d.dataQuery&&(d.dataQuery.keyword=void 0)},a.resetRequestCustomFilter=function(){angular.copy(d,s)}}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.pricelistDetailController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.pricingModule.pricelists","platformWebApp.settings","virtoCommerce.coreModule.currency.currencyUtils",function(e,t,i,r,n){var o=e.blade;function c(e){o.isNew||(o.title=e.name),o.currentEntity=angular.copy(e),o.origEntity=e,o.isLoading=!1}function a(){return!angular.equals(o.currentEntity,o.origEntity)&&o.hasUpdatePermission()}function l(){return a()&&e.formScope&&e.formScope.$valid}o.updatePermission="pricing:update",o.refresh=function(e){o.isNew?c({productPrices:[],assignments:[]}):i.get({id:o.currentEntityId},(function(t){c(t),e&&o.parentBlade.refresh()}))},e.cancelChanges=function(){angular.copy(o.origEntity,o.currentEntity),e.bladeClose()},e.saveChanges=function(){o.isLoading=!0,o.isNew?i.save({},o.currentEntity,(function(t){angular.copy(o.currentEntity,o.origEntity),e.bladeClose(),o.saveCallback?o.saveCallback(t):o.parentBlade.refresh()})):i.update({},o.currentEntity,(function(e){o.refresh(!0)}))},e.setForm=function(t){e.formScope=t},o.onClose=function(i){t.showConfirmationIfNeeded(a(),l(),o,e.saveChanges,i,"pricing.dialogs.pricelist-save.title","pricing.dialogs.pricelist-save.message")},o.headIcon=o.parentBlade.headIcon,o.isNew||(o.toolbarCommands=[{name:"platform.commands.save",icon:"fas fa-save",executeMethod:e.saveChanges,canExecuteMethod:l,permission:o.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(o.origEntity,o.currentEntity)},canExecuteMethod:a,permission:o.updatePermission}]),o.refresh(!1),e.currencyUtils=n}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.pricelistItemListController",["$scope","virtoCommerce.pricingModule.prices","$filter","platformWebApp.bladeNavigationService","uiGridConstants","platformWebApp.uiGridHelper","platformWebApp.bladeUtils","platformWebApp.dialogService","$translate",function(e,t,i,r,n,o,c,a,l){e.uiGridConstants=n,e.noProductRowName=l.instant("pricing.blades.pricelist-item-list.labels.no-product-row-name");var s=e.blade,d={exportTypeName:"VirtoCommerce.PricingModule.Data.ExportImport.ExportablePrice",dataQuery:{exportTypeName:"PriceExportDataQuery"}};function u(e,i){i.isLoading=!0,t.search({priceListId:s.currentEntityId,productIds:_.pluck(e,"id")},(function(n){var o=_.filter(e,(function(e){return _.all(n.results,(function(t){return t.productId!==e.id}))})),c=_.map(o,(function(e){return{prices:[{productId:e.id,list:0,minQuantity:1,currency:s.currency,priceListId:s.currentEntityId}]}}));t.update(c,(function(){r.closeBlade(i),s.refresh(),s.parentWidgetRefresh()}),(function(e){r.setError("Error "+e.status,s)}))}),(function(e){r.setError("Error "+e.status,s)}))}s.getSearchCriteria=function(){return{groupByProducts:!0,pricelistIds:[s.currentEntityId],keyword:p.keyword,sort:o.getSortExpression(e),skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount}},s.refresh=function(){s.isLoading=!0,t.search(s.getSearchCriteria(),(function(t){s.currentEntities=e.preparePrices(t.results),e.pageSettings.totalItems=t.totalCount,s.totalItems=t.totalCount,s.isLoading=!1}),(function(e){r.setError("Error "+e.status,s)}))},e.preparePrices=function(t){return _.each(t,t=>{t.product||(t.product={name:e.noProductRowName})}),t},e.selectNode=function(t){e.selectedNodeId=t.productId;var i={id:"productItemPrices",itemId:t.productId,priceListId:s.currentEntityId,data:t,currency:s.currency,title:"pricing.blades.prices-list.title",titleValues:{name:t.product.name},subtitle:"pricing.blades.prices-list.subtitle",controller:"virtoCommerce.pricingModule.pricesListController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/prices-list.tpl.html"};r.showBlade(i,s)},e.deleteList=function(e){var i={id:"confirmDeleteItem",title:"pricing.dialogs.pricelist-item-list-delete.title",message:"pricing.dialogs.pricelist-item-list-delete.message",callback:function(i){i&&r.closeChildrenBlades(s,(function(){t.remove({priceListId:s.currentEntityId,productIds:_.pluck(e,"productId")},(function(){s.refresh(),s.parentWidgetRefresh()}),(function(e){r.setError("Error "+e.status,s)}))}))}};a.showConfirmationDialog(i)},s.exportPrices=function(){var t=e.gridApi.selection.getSelectAllState();d.dataQuery.isAllSelected=t;var i=e.gridApi.selection.getSelectedRows();if(d.dataQuery.objectIds=[],!t&&i){var n=_.pluck(_.flatten(_.pluck(i,"prices")),"id");d.dataQuery.objectIds=n}d.dataQuery.productIds=[],(d.dataQuery.productIds&&d.dataQuery.productIds.length||!t)&&(d.dataQuery.productIds=_.map(i,(function(e){return e.productId})));var o=s.getSearchCriteria();(t||o.pricelistIds&&o.pricelistIds.length>0||""!==o.keyword)&&(d.dataQuery.isAnyFilterApplied=!0),angular.extend(d.dataQuery,o);var c={id:"priceExport",title:"pricing.blades.exporter.priceTitle",subtitle:"pricing.blades.exporter.priceSubtitle",controller:"virtoCommerce.exportModule.exportSettingsController",template:"Modules/$(VirtoCommerce.Export)/Scripts/blades/export-settings.tpl.html",exportDataRequest:d};r.showBlade(c,s)},s.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:s.refresh,canExecuteMethod:function(){return!0}},{name:"platform.commands.add",icon:"fas fa-plus",executeMethod:function(){e.selectedNodeId=null;var t=[],i={id:"CatalogItemsSelect",title:"Select items for pricing",controller:"virtoCommerce.catalogModule.catalogItemSelectController",template:"Modules/$(VirtoCommerce.Catalog)/Scripts/blades/common/catalog-items-select.tpl.html",breadcrumbs:[],toolbarCommands:[{name:"pricing.commands.add-selected",icon:"fas fa-plus",executeMethod:function(e){u(t,e)},canExecuteMethod:function(){return t.length>0}}]};i.options={checkItemFn:function(e,r){"category"===e.type?(i.error="Categories are not supported",e.selected=void 0):(r?_.all(t,(function(t){return t.id!==e.id}))&&t.push(e):t=_.reject(t,(function(t){return t.id===e.id})),i.error=void 0)}},r.showBlade(i,s)},canExecuteMethod:function(){return!0},permission:s.updatePermission},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){e.deleteList(e.gridApi.selection.getSelectedRows())},canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())},permission:s.updatePermission},{name:"platform.commands.export",icon:"fa fa-upload",canExecuteMethod:function(){return!0},executeMethod:function(){s.exportPrices()}}],e.getPriceRange=function(e){var t=_.union(_.pluck(e.prices,"list"),_.pluck(e.prices,"sale")),r=i("currency")(_.min(t),"",2),n=i("currency")(_.max(t),"",2);return r===n?r:r+"-"+n};var p=e.filter={};p.criteriaChanged=function(){e.pageSettings.currentPage>1?e.pageSettings.currentPage=1:s.refresh()},e.setGridOptions=function(t){e.gridOptions=t,t.onRegisterApi=function(t){t.core.on.sortChanged(e,(function(){s.isLoading||s.refresh()}))},c.initializePagination(e)}}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.pricelistListController",["$scope","virtoCommerce.pricingModule.pricelists","platformWebApp.dialogService","platformWebApp.uiGridHelper","platformWebApp.bladeUtils","$localStorage",function(e,t,i,r,n,o){var c=e.blade,a=n.bladeNavigationService,l={exportTypeName:"VirtoCommerce.PricingModule.Data.ExportImport.ExportablePricelist",dataQuery:{exportTypeName:"PricelistExportDataQuery"}},s=angular.copy(l),d=c.filter=e.filter={};function u(e){var t={id:"exportGenericViewerFilter",controller:"virtoCommerce.exportModule.exportGenericViewerFilterController",template:"Modules/$(VirtoCommerce.Export)/Scripts/blades/export-generic-viewer-filter.tpl.html",onBeforeApply:c.resetRequestCustomFilter};angular.extend(t,e),a.showBlade(t,c)}function p(){var t={keyword:d.keyword,sort:r.getSortExpression(e),skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount};return d.current&&(t.currencies=d.current.currencies),t}c.refresh=function(i){return c.isLoading=!0,t.search(p(),(function(t){return c.isLoading=!1,c.currentEntities=t.results,e.pageSettings.totalItems=t.totalCount,!0===i&&c.parentRefresh&&c.parentRefresh(),t})).$promise},e.selectNode=function(t,i){e.selectedNodeId=t.id;var r={id:"listItemChild",controller:"virtoCommerce.pricingModule.pricelistDetailController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/pricelist-detail.tpl.html"};i?angular.extend(r,{title:"pricing.blades.pricelist-detail.title-new",isNew:!0,saveCallback:function(e){r.isNew=!1,c.refresh(!0).then((function(){r.currentEntityId=e.id,a.showBlade(r,c)}))}}):angular.extend(r,{currentEntityId:t.id,title:t.name,subtitle:c.subtitle}),a.showBlade(r,c)},e.deleteList=function(e){var r={id:"confirmDeleteItem",title:"pricing.dialogs.pricelists-delete.title",message:"pricing.dialogs.pricelists-delete.message",callback:function(i){i&&a.closeChildrenBlades(c,(function(){t.remove({ids:_.pluck(e,"id")},(function(){return c.refresh(!0)}))}))}};i.showConfirmationDialog(r)},c.headIcon="fa fa-usd",c.subtitle="pricing.blades.pricelist-list.subtitle",c.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:c.refresh,canExecuteMethod:function(){return!0}},{name:"platform.commands.add",icon:"fas fa-plus",executeMethod:function(){e.selectNode({},!0)},canExecuteMethod:function(){return!0},permission:"pricing:create"},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){e.deleteList(e.gridApi.selection.getSelectedRows())},canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())},permission:"pricing:delete"},{name:"platform.commands.export",icon:"fa fa-upload",canExecuteMethod:function(){return!0},executeMethod:function(){var t=e.gridApi.selection.getSelectAllState();s.dataQuery.isAllSelected=t;var i=e.gridApi.selection.getSelectedRows();s.dataQuery.objectIds=[],(s.dataQuery.objectIds&&s.dataQuery.objectIds.length||!t)&&(s.dataQuery.objectIds=_.map(i,(function(e){return e.id}))),s.dataQuery=angular.extend(s.dataQuery,p());var r={id:"pricelistExport",title:"pricing.blades.exporter.priceListTitle",subtitle:"pricing.blades.exporter.pricelistSubtitle",controller:"virtoCommerce.exportModule.exportSettingsController",template:"Modules/$(VirtoCommerce.Export)/Scripts/blades/export-settings.tpl.html",exportDataRequest:s,totalItemsCount:s.dataQuery.objectIds.length||e.pageSettings.totalItems};a.showBlade(r,c)}}],d.criteriaChanged=function(){e.pageSettings.currentPage>1?e.pageSettings.currentPage=1:c.refresh()},e.setGridOptions=function(t){e.gridOptions=t,t.onRegisterApi=function(t){t.core.on.sortChanged(e,(function(){c.isLoading||c.refresh()}))},n.initializePagination(e)},o.exportSearchFilters||(o.exportSearchFilters={}),o.exportSearchFilters[s.exportTypeName]||(o.exportSearchFilters[s.exportTypeName]=[{name:"export.blades.export-generic-viewer.labels.new-filter"}]),e.exportSearchFilters=o.exportSearchFilters[s.exportTypeName],o.exportSearchFilterIds||(o.exportSearchFilterIds={}),e.exportSearchFilterId=o.exportSearchFilterIds[s.exportTypeName],e.exportSearchFilterId&&(d.current=_.findWhere(e.exportSearchFilters,{id:e.exportSearchFilterId})),d.change=function(){o.exportSearchFilterIds[s.exportTypeName]=d.current?d.current.id:null;var e=s.exportTypeName+"ExportFilter";d.current&&!d.current.id?(d.current=null,u({isNew:!0,metafieldsId:e,exportTypeName:s.exportTypeName})):(a.closeBlade({id:"exportGenericViewerFilter"}),d.current||c.resetRequestCustomFilter(),d.criteriaChanged())},d.edit=function(){var e=s.exportTypeName+"ExportFilter",t={data:d.current,metafieldsId:e,exportTypeName:s.exportTypeName};d.current?angular.extend(t,{data:d.current}):angular.extend(t,{isNew:!0}),u(t)},d.criteriaChanged=function(){c.refresh()},d.resetKeyword=function(){d.keyword=void 0,s.dataQuery&&(s.dataQuery.keyword=void 0)},c.resetRequestCustomFilter=function(){angular.copy(s,l)}}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.pricesListController",["$scope","virtoCommerce.pricingModule.prices","platformWebApp.objCompareService","platformWebApp.bladeNavigationService","platformWebApp.uiGridHelper","virtoCommerce.pricingModule.priceValidatorsService","platformWebApp.ui-grid.extension",function(e,t,i,r,n,o,c){e.uiGridConstants=n.uiGridConstants;var a=e.blade;function l(){return a.currentEntities&&!i.equal(a.origEntity,a.currentEntities)&&a.hasUpdatePermission()}function s(){return l()&&e.isValid()}a.updatePermission="pricing:update",a.refresh=function(){a.data.productId=a.itemId,a.data.prices||(a.data.prices=[]),a.currentEntities=angular.copy(a.data.prices),a.origEntity=a.data.prices,a.isLoading=!1,o.setAllPrices(a.currentEntities)},a.onClose=function(t){r.showConfirmationIfNeeded(l(),s(),a,e.saveChanges,t,"pricing.dialogs.prices-save.title","pricing.dialogs.prices-save.message")},e.cancelChanges=function(){e.bladeClose()},e.isValid=function(){return e.formScope&&e.formScope.$valid&&_.all(a.currentEntities,e.isListPriceValid)&&_.all(a.currentEntities,e.isSalePriceValid)&&_.all(a.currentEntities,e.isUniqueQty)&&(0===a.currentEntities.length||_.some(a.currentEntities,(function(e){return 1===e.minQuantity})))},e.saveChanges=function(){a.isLoading=!0,angular.copy(a.currentEntities,a.origEntity),_.any(a.currentEntities)?t.update({id:a.itemId},a.data,(function(t){e.bladeClose(),a.parentBlade.refresh()}),(function(t){r.setError("Error "+t.status,e.blade)})):t.remove({priceListId:a.priceListId,productIds:[a.itemId]},(function(){e.bladeClose(),a.parentBlade.refresh()}),(function(e){r.setError("Error "+e.status,a)}))},e.delete=function(e){e&&a.currentEntities.splice(a.currentEntities.indexOf(e),1)},e.setForm=function(t){e.formScope=t},a.toolbarCommands=[{name:"platform.commands.save",icon:"fas fa-save",executeMethod:e.saveChanges,canExecuteMethod:s,permission:a.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(a.origEntity,a.currentEntities)},canExecuteMethod:l,permission:a.updatePermission},{name:"platform.commands.add",icon:"fas fa-plus",executeMethod:function(){var t,i;t=a.currentEntities,i={productId:a.itemId,list:"",minQuantity:1,currency:a.currency,priceListId:a.priceListId},t.push(i),e.validateGridData()},canExecuteMethod:function(){return!0},permission:a.updatePermission},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){var t=e.gridApi.selection.getSelectedRows();angular.forEach(t,(function(e){a.currentEntities.splice(a.currentEntities.indexOf(e),1)}))},canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())},permission:a.updatePermission}],e.isListPriceValid=o.isListPriceValid,e.isSalePriceValid=o.isSalePriceValid,e.isUniqueQty=o.isUniqueQty,e.setGridOptions=function(t,i){return i.onRegisterApi=function(t){e.gridApi=t,t.edit.on.afterCellEdit(e,(function(){e.validateGridData()})),e.validateGridData()},e.gridOptions=i,c.tryExtendGridOptions(t,i),i},e.validateGridData=function(){e.gridApi&&angular.forEach(a.currentEntities,(function(t){angular.forEach(e.gridOptions.columnDefs,(function(i){e.gridApi.grid.validate.runValidators(t,i,t[i.name],void 0,e.gridApi.grid)}))}))},e.datepickers={},e.open=function(t,i){t.preventDefault(),t.stopPropagation(),e.datepickers[i]=!0},a.refresh()}]).factory("virtoCommerce.pricingModule.priceValidatorsService",[function(){var e={};return{setAllPrices:function(t){e=t},isListPriceValid:function(e){return e.list>=0},isSalePriceValid:function(e){return _.isUndefined(e.sale)||e.list>=e.sale},isUniqueQty:function(t){return!(!t.startDate&&!t.endData)||Math.round(t.minQuantity)>0&&_.all(e,(function(e){return e===t||Math.round(e.minQuantity)!==Math.round(t.minQuantity)||e.startDate||e.EndDate}))},isUniqueQtyForPricelist:function(t){return Math.round(t.minQuantity)>0&&_.filter(e,(function(e){return!(e.pricelistId!==t.pricelistId||e.minQuantity!==t.minQuantity||e.startDate||e.EndDate||t.startDate||t.endDate)})).length<=1}}}]).run(["platformWebApp.ui-grid.extension","virtoCommerce.pricingModule.priceValidatorsService","uiGridValidateService",function(e,t,i){i.setValidator("listValidator",(function(e){return function(e,i,r,n){return _.isUndefined(i)||t.isListPriceValid(r)}}),(function(e){return"List price is invalid "})),i.setValidator("saleValidator",(function(e){return function(e,i,r,n){return t.isSalePriceValid(r)}}),(function(e){return"Sale price should not exceed List price"})),i.setValidator("minQuantityValidator",(function(){return function(e,i,r,n){return t.isUniqueQty(r)}}),(function(){return"Quantity value should be unique"})),i.setValidator("minQuantityForPricelistValidator",(function(){return function(e,i,r,n){return t.isUniqueQtyForPricelist(r)}}),(function(){return"Quantity value should be unique"}))}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.pricingMainController",["$scope","platformWebApp.bladeNavigationService",function(e,t){var i;e.selectedNodeId=null,e.blade.openBlade=function(i){e.selectedNodeId=i.entityName;var r={id:"pricingList",title:i.name,controller:"virtoCommerce.pricingModule."+i.entityName+"ListController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/"+i.entityName+"-list.tpl.html"};t.showBlade(r,e.blade)},e.blade.headIcon="fa fa-usd",i=[{name:"pricing.blades.pricing-main.menu.pricelist-list.title",entityName:"pricelist",icon:"fa fa-usd"},{name:"pricing.blades.pricing-main.menu.pricelist-assignment-list.title",entityName:"assignment",icon:"fa fa-anchor"}],e.blade.currentEntities=i,e.blade.isLoading=!1,e.blade.openBlade(i[0])}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.itemPricelistsListController",["$scope","platformWebApp.bladeNavigationService","uiGridConstants","virtoCommerce.pricingModule.prices","virtoCommerce.catalogModule.catalogs",function(e,t,i,r,n){e.uiGridConstants=i;var o=e.blade;o.refresh=function(){o.isLoading=!0,r.getProductPricelists({id:o.itemId},(function(e){if(n.search({take:1e3,responseGroup:"Info"},(function(t){o.isLoading=!1,o.currentEntities=[],_.each(e,(function(e){if(e.prices.length>0){var i={priority:_.max(e.assignments,(function(e){return e.priority})).priority};angular.extend(i,e),i.assignments=[e.assignment];var r=_.pluck(e.assignments,"catalogId"),n=_.map(r,(function(e){return _.findWhere(t.results,{id:e}).name}));i.catalog=n.join(", "),o.currentEntities.push(i)}}))})),!e.length){var i={id:"newPricelist",controller:"virtoCommerce.pricingModule.pricelistDetailController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/pricelist-detail.tpl.html",title:"pricing.blades.pricelist-detail.title-new",isNew:!0,saveCallback:function(e){o.refresh()}};t.showBlade(i,o)}}))},e.openBlade=function(i){e.selectedNodeId=i.id;var r={id:"itemPrices",itemId:o.itemId,priceListId:i.id,data:i,currency:i.currency,title:i.name,subtitle:"pricing.blades.prices-list.subtitle",controller:"virtoCommerce.pricingModule.pricesListController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/prices-list.tpl.html"};t.showBlade(r,o)},o.headIcon="fa fa-usd",o.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:o.refresh,canExecuteMethod:function(){return!0}}],e.setGridOptions=function(t){e.gridOptions=t},o.refresh()}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.itemPriceListController",["$scope","platformWebApp.bladeNavigationService","uiGridConstants","virtoCommerce.pricingModule.prices","virtoCommerce.catalogModule.catalogs","virtoCommerce.storeModule.stores","platformWebApp.ui-grid.extension","platformWebApp.objCompareService","virtoCommerce.pricingModule.priceValidatorsService","platformWebApp.dialogService",function(e,t,i,r,n,o,c,a,l,s){e.uiGridConstants=i;var d=e.blade;function u(){return d.currentEntities&&!a.equal(d.origEntity,d.currentEntities)&&d.hasUpdatePermission()}function p(){return u()&&e.isValid()}d.updatePermission="pricing:update",d.refresh=function(){d.isLoading=!0,r.getProductPricelists({id:d.itemId},(function(t){n.search({take:1e3,responseGroup:"Info"},(function(i){o.search({take:1e3,responseGroup:"StoreInfo"},(function(r){e.catalogsList=i.results,e.storeList=r.results,d.origEntity=[],d.pricelistList=_.map(t,(function(e){return{id:e.id,code:e.name,currency:e.currency,assignments:e.assignments,displayName:e.name+" - "+e.currency}})),d.selectedPricelist=_.first(d.pricelistList);var n=_.filter(t,(function(e){return e.prices.length>0}));_.each(n,(function(t){var i={name:t.name,currency:t.currency},r=_.pluck(_.filter(t.assignments,(function(e){return e.catalogId})),"catalogId"),n=_.map(r,(function(t){var i=_.findWhere(e.catalogsList,{id:t});return i?i.name:null}));i.catalog=n.join(", ");var o=_.pluck(_.filter(t.assignments,(function(e){return e.storeId})),"storeId"),c=_.map(o,(function(t){var i=_.findWhere(e.storeList,{id:t});return i?i.name:null}));i.store=c.join(", "),_.each(t.prices,(function(e){var t=angular.copy(i);t=angular.extend(e,t),d.origEntity.push(t)}))})),d.currentEntities=angular.copy(d.origEntity),l.setAllPrices(d.currentEntities),d.isLoading=!1}))}))}))},e.createNewPricelist=function(){var e={id:"pricingList",controller:"virtoCommerce.pricingModule.pricelistListController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/pricelist-list.tpl.html",title:"pricing.blades.pricing-main.menu.pricelist-list.title",parentRefresh:d.refresh};t.showBlade(e,d)},e.selectPricelist=function(e){var i={id:"listItemChild",currentEntityId:e.pricelistId,title:e.name,controller:"virtoCommerce.pricingModule.pricelistDetailController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/pricelist-detail.tpl.html"};t.showBlade(i,d)},d.onClose=function(i){t.showConfirmationIfNeeded(u(),p(),d,e.saveChanges,i,"pricing.dialogs.prices-save.title","pricing.dialogs.prices-save.message")},e.isValid=function(){return e.formScope&&e.formScope.$valid&&_.all(d.currentEntities,e.isListPriceValid)&&_.all(d.currentEntities,e.isSalePriceValid)&&_.all(d.currentEntities,e.isUniqueQtyForPricelist)&&(0==d.currentEntities.length||_.some(d.currentEntities,(function(e){return 1==e.minQuantity})))},e.saveChanges=function(){if(d.isLoading=!0,angular.copy(d.currentEntities,d.origEntity),_.any(d.currentEntities)){var i={productId:d.itemId,product:d.item,prices:d.currentEntities};r.update({id:d.itemId},i,(function(e){d.refresh()}),(function(i){t.setError("Error "+i.status,e.blade)}))}},e.setForm=function(t){e.formScope=t},d.toolbarCommands=[{name:"platform.commands.save",icon:"fas fa-save",executeMethod:e.saveChanges,canExecuteMethod:p,permission:d.updatePermission},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){var i=e.gridApi.selection.getSelectedRows(),n=_.map(i,(function(e){return e.id})),o={id:"confirmDeleteItem",title:"pricing.dialogs.item-prices-delete.title",message:"pricing.dialogs.item-prices-delete.message",callback:function(e){e&&r.removePrice({priceIds:n},(function(){angular.forEach(i,(function(e){d.currentEntities.splice(d.currentEntities.indexOf(e),1)}))}),(function(e){t.setError("Error "+e.status,d)}))}};s.showConfirmationDialog(o)},canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())},permission:"pricing:delete"},{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:d.refresh,canExecuteMethod:function(){return!0}}],d.addNewPrice=function(t){l.setAllPrices(d.currentEntities);var i=_.pluck(t.assignments,"catalogId"),r=_.map(i,(function(t){var i=_.findWhere(e.catalogsList,{id:t});return i?i.name:null}));r=_.filter(r,(function(e){return null!==e}));var n=_.pluck(t.assignments,"storeId"),o=_.map(n,(function(t){var i=_.findWhere(e.storeList,{id:t});return i?i.name:null}));o=_.filter(o,(function(e){return null!==e}));var c={productId:d.itemId,list:"",minQuantity:1,currency:t.currency,pricelistId:t.id,name:t.code,catalog:r.join(", "),store:o.join(", ")};d.currentEntities.push(c),e.validateGridData()},e.isListPriceValid=l.isListPriceValid,e.isSalePriceValid=l.isSalePriceValid,e.isUniqueQtyForPricelist=l.isUniqueQtyForPricelist,e.setGridOptions=function(t,i){return i.onRegisterApi=function(t){e.gridApi=t,t.edit.on.afterCellEdit(e,(function(){e.validateGridData()})),e.validateGridData()},e.gridOptions=i,c.tryExtendGridOptions(t,i),i},e.validateGridData=function(){e.gridApi&&angular.forEach(d.currentEntities,(function(t){angular.forEach(e.gridOptions.columnDefs,(function(i){e.gridApi.grid.validate.runValidators(t,i,t[i.name],void 0,e.gridApi.grid)}))}))},e.datepickers={},e.open=function(t,i){t.preventDefault(),t.stopPropagation(),e.datepickers[i]=!0},d.refresh()}])},function(e,t){angular.module("virtoCommerce.pricingModule").factory("virtoCommerce.pricingModule.prices",["$resource",function(e){return e("api/products/:id/prices",{id:"@Id",catalogId:"@catalogId"},{search:{url:"api/catalog/products/prices/search"},getProductPrices:{isArray:!0},getProductPricesForWidget:{url:"api/products/:id/:catalogId/pricesWidget",isArray:!0},getProductPricelists:{url:"api/catalog/products/:id/pricelists",isArray:!0},update:{method:"PUT"},remove:{method:"DELETE",url:"api/pricing/pricelists/:priceListId/products/prices"},removePrice:{method:"DELETE",url:"api/pricing/products/prices"}})}]).factory("virtoCommerce.pricingModule.pricelists",["$resource",function(e){return e("api/pricing/pricelists/:id",{},{search:{url:"api/pricing/pricelists"},update:{method:"PUT"}})}]).factory("virtoCommerce.pricingModule.pricelistAssignments",["$resource",function(e){return e("api/pricing/assignments/:id",{id:"@Id"},{search:{url:"api/pricing/assignments"},getNew:{url:"api/pricing/assignments/new"},update:{method:"PUT"},removeFiltered:{method:"DELETE",url:"api/pricing/filteredAssignments"}})}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.catalogSelectorController",["$scope","virtoCommerce.catalogModule.catalogs",function(e,t){t.search({take:1e3},(function(t){e.catalogs=angular.copy(t.results)}))}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.currencySelectorController",["$scope","virtoCommerce.coreModule.currency.currencyUtils",function(e,t){e.currencies=t.getCurrencies()}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.pricelistSelectorController",["$scope","virtoCommerce.pricingModule.pricelists",function(e,t){t.search({take:1e3},(function(t){e.pricelists=t.results}))}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.productSelectorController",["$scope","platformWebApp.bladeNavigationService",function(e,t){var i=e.blade;e.selectedCount=(i.currentEntity.productIds||[]).length,e.selectProducts=function(){var r=i.currentEntity.productIds||[],n={id:"CatalogItemsSelect",controller:"virtoCommerce.catalogModule.catalogItemSelectController",template:"Modules/$(VirtoCommerce.Catalog)/Scripts/blades/common/catalog-items-select.tpl.html",title:"pricing.selectors.blades.titles.select-products",options:{allowCheckingCategory:!1,selectedItemIds:r,checkItemFn:function(e,t){t?_.find(r,(function(t){return t.id==e.id}))||r.push(e.id):r=_.reject(r,(function(t){return t.id==e.id}))}},breadcrumbs:[],toolbarCommands:[{name:"platform.commands.confirm",icon:"fa fa-check",executeMethod:function(n){i.currentEntity.productIds=_.union(i.currentEntity.productIds,r),e.selectedCount=i.currentEntity.productIds.length,t.closeBlade(n)},canExecuteMethod:function(){return _.any(r)}}]};t.showBlade(n,i)}}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.assignmentsWidgetController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.pricingModule.pricelistAssignments",function(e,t,i){var r=e.widget.blade;e.openBlade=function(){var e={id:"pricelistChild",pricelistId:r.currentEntity.id,currentEntity:r.currentEntity,title:r.title,subtitle:"pricing.blades.pricelist-assignment-list.subtitle",controller:"virtoCommerce.pricingModule.assignmentListController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/assignment-list.tpl.html"};t.showBlade(e,r)},e.$watch("widget.blade.currentEntity",(function(t){!function(t){if(t&&(e.widget.assignmentsCount=t.assignments?t.assignments.length:0,t.id))i.search({priceListId:t.id,take:0},(function(t){e.widget.assignmentsCount=t.totalCount}))}(t)}))}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.itemPricesWidgetController",["$scope","$filter","platformWebApp.bladeNavigationService","virtoCommerce.pricingModule.pricelists","virtoCommerce.pricingModule.prices","$state",function(e,t,i,r,n,o){var c=e.blade;function a(){return e.loading=!0,n.getProductPricesForWidget({id:c.itemId,catalogId:c.catalog.id},(function(i){if(e.loading=!1,i.length){i=_.groupBy(i,"currency"),i=_.max(_.values(i),(function(e){return e.length}));var r=_.union(_.pluck(i,"list"),_.pluck(i,"sale")),n=_.min(r),o=_.max(r),c=_.any(i)?i[0].currency:"";n=t("currency")(n,c),o=t("currency")(o,c),e.priceLabel=n==o?n:n+" - "+o}return i}))}e.openBlade=function(){if(!e.loading){var t={id:"itemPrices",itemId:c.itemId,item:c.item,parentWidgetRefresh:a,title:"pricing.blades.item-prices.title",titleValues:{name:c.item.name},subtitle:"pricing.blades.item-prices.subtitle",controller:"virtoCommerce.pricingModule.itemPriceListController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/item/item-prices.tpl.html"};i.showBlade(t,c)}},e.$watch("widget.blade.catalog.id",(function(e){e&&a()}))}])},function(e,t){angular.module("virtoCommerce.pricingModule").controller("virtoCommerce.pricingModule.pricesWidgetController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.pricingModule.prices",function(e,t,i){var r=e.widget.blade;function n(){e.priceCount="...",i.search({priceListId:r.currentEntityId,take:0},(function(t){e.priceCount=t.totalCount}))}e.openBlade=function(){var e={id:"pricelistChild",currency:r.currentEntity.currency,currentEntity:r.currentEntity,currentEntityId:r.currentEntityId,parentWidgetRefresh:n,title:r.title,subtitle:"pricing.blades.pricelist-item-list.subtitle",controller:"virtoCommerce.pricingModule.pricelistItemListController",template:"Modules/$(VirtoCommerce.Pricing)/Scripts/blades/pricelist-item-list.tpl.html"};t.showBlade(e,r)},n()}])},function(e,t,i){},function(e,t,i){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLlByaWNpbmcvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5QcmljaW5nLy4vU2NyaXB0cy9wcmljaW5nLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuUHJpY2luZy8uL1NjcmlwdHMvYmxhZGVzL2Fzc2lnbm1lbnQtZGV0YWlsLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuUHJpY2luZy8uL1NjcmlwdHMvYmxhZGVzL2Fzc2lnbm1lbnQtbGlzdC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLlByaWNpbmcvLi9TY3JpcHRzL2JsYWRlcy9wcmljZWxpc3QtZGV0YWlsLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuUHJpY2luZy8uL1NjcmlwdHMvYmxhZGVzL3ByaWNlbGlzdC1pdGVtLWxpc3QuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5QcmljaW5nLy4vU2NyaXB0cy9ibGFkZXMvcHJpY2VsaXN0LWxpc3QuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5QcmljaW5nLy4vU2NyaXB0cy9ibGFkZXMvcHJpY2VzLWxpc3QuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5QcmljaW5nLy4vU2NyaXB0cy9ibGFkZXMvcHJpY2luZy1tYWluLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuUHJpY2luZy8uL1NjcmlwdHMvYmxhZGVzL2l0ZW0vaXRlbS1wcmljZWxpc3RzLWxpc3QuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5QcmljaW5nLy4vU2NyaXB0cy9ibGFkZXMvaXRlbS9pdGVtLXByaWNlcy5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLlByaWNpbmcvLi9TY3JpcHRzL3Jlc291cmNlcy9wcmljaW5nLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuUHJpY2luZy8uL1NjcmlwdHMvc2VsZWN0b3JzL2NhdGFsb2ctc2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5QcmljaW5nLy4vU2NyaXB0cy9zZWxlY3RvcnMvY3VycmVuY3ktc2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5QcmljaW5nLy4vU2NyaXB0cy9zZWxlY3RvcnMvcHJpY2VsaXN0LXNlbGVjdG9yLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuUHJpY2luZy8uL1NjcmlwdHMvc2VsZWN0b3JzL3Byb2R1Y3Qtc2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5QcmljaW5nLy4vU2NyaXB0cy93aWRnZXRzL2Fzc2lnbm1lbnRzV2lkZ2V0LmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuUHJpY2luZy8uL1NjcmlwdHMvd2lkZ2V0cy9pdGVtUHJpY2VzV2lkZ2V0LmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuUHJpY2luZy8uL1NjcmlwdHMvd2lkZ2V0cy9wcmljZXNXaWRnZXQuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ1bmRlZmluZWQiLCJBcHBEZXBlbmRlbmNpZXMiLCJwdXNoIiwiYW5ndWxhciIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJibGFkZU5hdmlnYXRpb25TZXJ2aWNlIiwic2hvd0JsYWRlIiwiaWQiLCJ0aXRsZSIsInN1YnRpdGxlIiwidGVtcGxhdGUiLCJpc0Nsb3NpbmdEaXNhYmxlZCIsIm1vZHVsZU5hbWUiLCJydW4iLCIkaHR0cCIsIiRjb21waWxlIiwibWFpbk1lbnVTZXJ2aWNlIiwid2lkZ2V0U2VydmljZSIsIiRzdGF0ZSIsImF1dGhTZXJ2aWNlIiwibWV0YUZvcm1zU2VydmljZSIsImdlbmVyaWNWaWV3ZXJJdGVtU2VydmljZSIsIm1lbnVJdGVtIiwicGF0aCIsImljb24iLCJwcmlvcml0eSIsImFjdGlvbiIsImdvIiwicGVybWlzc2lvbiIsImFkZE1lbnVJdGVtIiwiaXRlbVByaWNlc1dpZGdldCIsImlzVmlzaWJsZSIsImJsYWRlIiwiY2hlY2tQZXJtaXNzaW9uIiwic2l6ZSIsInJlZ2lzdGVyV2lkZ2V0IiwiaXNOZXciLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwicmVnaXN0ZXJNZXRhRmllbGRzIiwidmFsdWVUeXBlIiwicmVnaXN0ZXJWaWV3ZXIiLCJpdGVtIiwiaXRlbUNvcHkiLCJjb3B5IiwiaXRlbUlkIiwicHJvZHVjdElkIiwicHJpY2VMaXN0SWQiLCJwcmljZWxpc3RJZCIsInByaWNlcyIsImN1cnJlbmN5IiwidGl0bGVWYWx1ZXMiLCJjdXJyZW50RW50aXR5SWQiLCJjYXRhbG9ncyIsInByaWNlbGlzdHMiLCJhc3NpZ25tZW50cyIsInN0b3JlcyIsImR5bmFtaWNFeHByZXNzaW9uU2VydmljZSIsImRpYWxvZ1NlcnZpY2UiLCJpbml0aWFsaXplQmxhZGUiLCJleHByZXNzaW9uQmxvY2siLCJleHRlbmQiLCJkeW5hbWljRXhwcmVzc2lvbiIsIl8iLCJlYWNoIiwiY2hpbGRyZW4iLCJleHRlbmRFbGVtZW50QmxvY2siLCJyZXN1bHRzIiwiZ3JvdXBCeSIsImF2YWlsYWJsZUNoaWxkcmVuIiwibWFwIiwiaXRlbXMiLCJkaXNwbGF5TmFtZSIsInN1Yml0ZW1zIiwiY3VycmVudEVudGl0eSIsIm9yaWdFbnRpdHkiLCJpc0xvYWRpbmciLCJ0b29sYmFyQ29tbWFuZHMiLCJleGVjdXRlTWV0aG9kIiwic2F2ZUNoYW5nZXMiLCJjYW5FeGVjdXRlTWV0aG9kIiwiY2FuU2F2ZSIsInVwZGF0ZVBlcm1pc3Npb24iLCJpc0RpcnR5IiwiZXF1YWxzIiwiaGFzVXBkYXRlUGVybWlzc2lvbiIsImZvcm1TY29wZSIsIiR2YWxpZCIsInZhbGlkYXRlQXNzaWdubWVudCIsInN0b3JlSWQiLCJjYXRhbG9nSWQiLCJyZXRWYWwiLCJleHByZXNzaW9ucyIsInN0cmlwT2ZmVWlJbmZvcm1hdGlvbiIsImV4cHJlc3Npb25FbGVtZW50IiwiZ2V0VmFsaWRhdGlvbkVycm9yIiwiZ3JvdXBOYW1lIiwibmV3Q2hpbGRMYWJlbCIsInRlbXBsYXRlVVJMIiwicGFnZVNpemUiLCJyZWZyZXNoIiwicGFyZW50UmVmcmVzaCIsImdldE5ldyIsImlzRnVuY3Rpb24iLCJwYXJlbnRCbGFkZSIsInNldEZvcm0iLCJmb3JtIiwiY2FuY2VsQ2hhbmdlcyIsImJsYWRlQ2xvc2UiLCJzYXZlIiwiZXJyb3IiLCJzZXRFcnJvciIsInN0YXR1cyIsInVwZGF0ZSIsInNob3dFcnJvckRpYWxvZyIsIm1lc3NhZ2UiLCJvbkNsb3NlIiwiY2xvc2VDYWxsYmFjayIsInNob3dDb25maXJtYXRpb25JZk5lZWRlZCIsImRhdGVwaWNrZXJzIiwic3RyIiwiZW5kIiwib3BlbiIsIiRldmVudCIsIndoaWNoIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJjYXRhbG9nRGF0YVNvdXJjZSIsImNyaXRlcmlhIiwic2VhcmNoIiwicHJpY2VsaXN0RGF0YVNvdXJjZSIsInN0b3JlRGF0YVNvdXJjZSIsInVpR3JpZEhlbHBlciIsImJsYWRlVXRpbHMiLCIkbG9jYWxTdG9yYWdlIiwidWlHcmlkQ29uc3RhbnRzIiwiZGVmYXVsdERhdGFSZXF1ZXN0IiwiZXhwb3J0VHlwZU5hbWUiLCJkYXRhUXVlcnkiLCJleHBvcnREYXRhUmVxdWVzdCIsImZpbHRlciIsImNsb3NlQ2hpbGRyZW5CbGFkZXMiLCJmb3JFYWNoIiwiY2hpbGRyZW5CbGFkZXMiLCJzbGljZSIsImNoaWxkIiwiY2xvc2VCbGFkZSIsImdldFNlYXJjaENyaXRlcmlhIiwicmVzdWx0Iiwia2V5d29yZCIsInNvcnQiLCJnZXRTb3J0RXhwcmVzc2lvbiIsInNraXAiLCJwYWdlU2V0dGluZ3MiLCJjdXJyZW50UGFnZSIsIml0ZW1zUGVyUGFnZUNvdW50IiwidGFrZSIsImN1cnJlbnQiLCJwcmljZWxpc3RJZHMiLCJjYXRhbG9nSWRzIiwic2hvd0ZpbHRlckRldGFpbEJsYWRlIiwiYmxhZGVEYXRhIiwibmV3QmxhZGUiLCJvbkJlZm9yZUFwcGx5IiwicmVzZXRSZXF1ZXN0Q3VzdG9tRmlsdGVyIiwicmVzcG9uc2VHcm91cCIsInRvdGFsSXRlbXMiLCJ0b3RhbENvdW50IiwicHJpY2VBc3NpZ25tZW50cyIsIngiLCJjYXRhbG9nIiwiZmluZFdoZXJlIiwiY3VycmVudEVudGl0aWVzIiwic2VsZWN0Tm9kZSIsIm5vZGUiLCJzZWxlY3RlZE5vZGVJZCIsImRlbGV0ZUxpc3QiLCJsaXN0IiwiZGlhbG9nIiwiY2FsbGJhY2siLCJyZW1vdmUiLCJpdGVtSWRzIiwicGx1Y2siLCJpZHMiLCJzaG93Q29uZmlybWF0aW9uRGlhbG9nIiwiZGVsZXRlQWxsRmlsdGVyZWQiLCJjb25maXJtIiwicmVtb3ZlRmlsdGVyZWQiLCJzaG93RGlhbG9nIiwiaGVhZEljb24iLCJncmlkQXBpIiwic2VsZWN0aW9uIiwiZ2V0U2VsZWN0ZWRSb3dzIiwiYW55IiwibGVuZ3RoIiwiaXNBbGxTZWxlY3RlZCIsImdldFNlbGVjdEFsbFN0YXRlIiwic2VsZWN0ZWRSb3dzIiwib2JqZWN0SWRzIiwiY3JpdGVyaWFDaGFuZ2VkIiwic2V0R3JpZE9wdGlvbnMiLCJncmlkT3B0aW9ucyIsIm9uUmVnaXN0ZXJBcGkiLCJjb3JlIiwib24iLCJzb3J0Q2hhbmdlZCIsImluaXRpYWxpemVQYWdpbmF0aW9uIiwiZXhwb3J0U2VhcmNoRmlsdGVycyIsImV4cG9ydFNlYXJjaEZpbHRlcklkcyIsImV4cG9ydFNlYXJjaEZpbHRlcklkIiwiY2hhbmdlIiwibWV0YWZpZWxkc0lkIiwiZWRpdCIsImZpbHRlckRldGFpbHNQYXJhbXMiLCJyZXNldEtleXdvcmQiLCJzZXR0aW5ncyIsImN1cnJlbmN5VXRpbHMiLCJwcm9kdWN0UHJpY2VzIiwic2F2ZUNhbGxiYWNrIiwiJGZpbHRlciIsIiR0cmFuc2xhdGUiLCJub1Byb2R1Y3RSb3dOYW1lIiwiaW5zdGFudCIsImFkZFByb2R1Y3RzVG9QcmljZWxpc3QiLCJwcm9kdWN0cyIsInRoZUJsYWRlIiwicHJvZHVjdElkcyIsIm5ld0l0ZW1zIiwicHJvZHVjdCIsImFsbCIsIm5ld1Byb2R1Y3RQcmljZXMiLCJtaW5RdWFudGl0eSIsInBhcmVudFdpZGdldFJlZnJlc2giLCJncm91cEJ5UHJvZHVjdHMiLCJwcmVwYXJlUHJpY2VzIiwiZXhwb3J0UHJpY2VzIiwicHJpY2VJZHMiLCJmbGF0dGVuIiwic2VhcmNoQ3JpdGVyaWEiLCJpc0FueUZpbHRlckFwcGxpZWQiLCJzZWxlY3RlZFByb2R1Y3RzIiwiYnJlYWRjcnVtYnMiLCJvcHRpb25zIiwiY2hlY2tJdGVtRm4iLCJsaXN0SXRlbSIsImlzU2VsZWN0ZWQiLCJ0eXBlIiwic2VsZWN0ZWQiLCJyZWplY3QiLCJnZXRQcmljZVJhbmdlIiwicHJpY2VHcm91cCIsImFsbFByaWNlcyIsInVuaW9uIiwibWlucHJpY2UiLCJtaW4iLCJtYXhwcmljZSIsIm1heCIsImN1cnJlbmNpZXMiLCIkcHJvbWlzZSIsIm5ld1ByaWNlbGlzdCIsInByaWNlbGlzdCIsInRvdGFsSXRlbXNDb3VudCIsIm9iakNvbXBhcmVTZXJ2aWNlIiwicHJpY2VWYWxpZGF0b3JzU2VydmljZSIsImdyaWRPcHRpb25FeHRlbnNpb24iLCJlcXVhbCIsImlzVmFsaWQiLCJzZXRBbGxQcmljZXMiLCJpc0xpc3RQcmljZVZhbGlkIiwiaXNTYWxlUHJpY2VWYWxpZCIsImlzVW5pcXVlUXR5Iiwic29tZSIsImRlbGV0ZSIsInNwbGljZSIsImluZGV4T2YiLCJ0YXJnZXRMaXN0IiwibmV3RW50aXR5IiwidmFsaWRhdGVHcmlkRGF0YSIsImdyaWRJZCIsImFmdGVyQ2VsbEVkaXQiLCJ0cnlFeHRlbmRHcmlkT3B0aW9ucyIsInJvd0VudGl0eSIsImNvbHVtbkRlZnMiLCJjb2xEZWYiLCJncmlkIiwidmFsaWRhdGUiLCJydW5WYWxpZGF0b3JzIiwiZmFjdG9yeSIsImlzVW5kZWZpbmVkIiwic2FsZSIsInN0YXJ0RGF0ZSIsImVuZERhdGEiLCJNYXRoIiwicm91bmQiLCJFbmREYXRlIiwiaXNVbmlxdWVRdHlGb3JQcmljZWxpc3QiLCJwcmljZSIsImVuZERhdGUiLCJ1aUdyaWRWYWxpZGF0ZVNlcnZpY2UiLCJzZXRWYWxpZGF0b3IiLCJhcmd1bWVudCIsIm9sZFZhbHVlIiwibmV3VmFsdWUiLCJlbnRpdGllcyIsIm9wZW5CbGFkZSIsImVudGl0eU5hbWUiLCJnZXRQcm9kdWN0UHJpY2VsaXN0cyIsImNhdGFsb2dzTGlzdCIsImFzc2lnbm1lbnQiLCJjYXRhbG9nc0lkIiwiY2F0YWxvZ3NOYW1lIiwiam9pbiIsIm5ld1ByaWNlbGlzdEJsYWRlIiwiY2F0YWxvZ0RhdGEiLCJzdG9yZURhdGEiLCJzdG9yZUxpc3QiLCJwcmljZWxpc3RMaXN0IiwiY29kZSIsInNlbGVjdGVkUHJpY2VsaXN0IiwiZmlyc3QiLCJwcmljZWxpc3RzV2l0aFByaWNlcyIsInByaWNlbGlzdFdpdGhQcmljZXMiLCJwcmljZUxpc3REYXRhIiwiYXNzaWduZW1udCIsInN0b3JlSWRzIiwic3RvcmVOYW1lIiwic3RvcmUiLCJwcmljZURhdGEiLCJjcmVhdGVOZXdQcmljZWxpc3QiLCJzZWxlY3RQcmljZWxpc3QiLCJlbnRpdHkiLCJyZW1vdmVQcmljZSIsImFkZE5ld1ByaWNlIiwidGFyZ2V0UHJpY2VsaXN0IiwiY2F0YWxvZ05hbWUiLCJzdG9yZXNJZCIsInN0b3Jlc05hbWUiLCJuZXdQcmljZSIsIiRyZXNvdXJjZSIsImdldFByb2R1Y3RQcmljZXMiLCJpc0FycmF5IiwiZ2V0UHJvZHVjdFByaWNlc0ZvcldpZGdldCIsIm1ldGhvZCIsImdldEN1cnJlbmNpZXMiLCJzZWxlY3RlZENvdW50Iiwic2VsZWN0UHJvZHVjdHMiLCJhbGxvd0NoZWNraW5nQ2F0ZWdvcnkiLCJzZWxlY3RlZEl0ZW1JZHMiLCJmaW5kIiwicGlja2luZ0JsYWRlIiwid2lkZ2V0IiwiJHdhdGNoIiwiYXNzaWdubWVudHNDb3VudCIsImxvYWRpbmciLCJ2YWx1ZXMiLCJwcmljZUxhYmVsIiwicHJvZHVjdFByaWNlbGlzdHNCbGFkZSIsInByaWNlQ291bnQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FB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Z0JBQ3ZCb0wsb0JBQXFCcEksRUFDckI3RixNQUFPd0IsRUFBTXhCLE1BQ2JDLFNBQVUsOENBQ1ZOLFdBQVksMERBQ1pPLFNBQVUsZ0ZBR2RMLEVBQXVCQyxVQUFVNkosRUFBVW5JLElBRy9DcUUsUSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvL0NhbGwgdGhpcyB0byByZWdpc3RlciBvdXIgbW9kdWxlIHRvIG1haW4gYXBwbGljYXRpb25cbnZhciBtb2R1bGVOYW1lID0gXCJ2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGVcIjtcblxuaWYgKEFwcERlcGVuZGVuY2llcyAhPSB1bmRlZmluZWQpIHtcbiAgICBBcHBEZXBlbmRlbmNpZXMucHVzaChtb2R1bGVOYW1lKTtcbn1cblxuYW5ndWxhci5tb2R1bGUobW9kdWxlTmFtZSwgWyd1aS5ncmlkLmNlbGxOYXYnLCAndWkuZ3JpZC5lZGl0JywgJ3VpLmdyaWQudmFsaWRhdGUnXSlcbi5jb25maWcoXG4gIFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgLnN0YXRlKCd3b3Jrc3BhY2UucHJpY2luZ01vZHVsZScsIHtcbiAgICAgICAgICAgICAgdXJsOiAnL3ByaWNpbmcnLFxuICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJyQoUGxhdGZvcm0pL1NjcmlwdHMvY29tbW9uL3RlbXBsYXRlcy9ob21lLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgY29udHJvbGxlcjogW1xuICAgICAgICAgICAgICAgICAgJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xuICAgICAgICAgICAgICAgICAgICAgIHZhciBibGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdwcmljaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdwcmljaW5nLmJsYWRlcy5wcmljaW5nLW1haW4udGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ3ByaWNpbmcuYmxhZGVzLnByaWNpbmctbWFpbi5zdWJ0aXRsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJpY2luZ01haW5Db250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5QcmljaW5nKS9TY3JpcHRzL2JsYWRlcy9wcmljaW5nLW1haW4udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Nsb3NpbmdEaXNhYmxlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUoYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICAgIC8vTmVlZCBmb3IgaXNvbGF0ZSBhbmQgcHJldmVudCBjb25mbGljdCBtb2R1bGUgY3NzIHRvIG90aGVyIG1vZHVsZXMgXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZHVsZU5hbWUgPSBcInZjLXByaWNpbmdcIjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXVxuICAgICAgICAgIH0pO1xuICB9XVxuKVxuLnJ1bihcbiAgWyckaHR0cCcsICckY29tcGlsZScsICdwbGF0Zm9ybVdlYkFwcC5tYWluTWVudVNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAud2lkZ2V0U2VydmljZScsICckc3RhdGUnLCAncGxhdGZvcm1XZWJBcHAuYXV0aFNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAubWV0YUZvcm1zU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZS5nZW5lcmljVmlld2VySXRlbVNlcnZpY2UnLFxuICBmdW5jdGlvbiAoJGh0dHAsICRjb21waWxlLCBtYWluTWVudVNlcnZpY2UsIHdpZGdldFNlcnZpY2UsICRzdGF0ZSwgYXV0aFNlcnZpY2UsIG1ldGFGb3Jtc1NlcnZpY2UsIGdlbmVyaWNWaWV3ZXJJdGVtU2VydmljZSkge1xuICAgICAgLy9SZWdpc3RlciBtb2R1bGUgaW4gbWFpbiBtZW51XG4gICAgICB2YXIgbWVudUl0ZW0gPSB7XG4gICAgICAgICAgcGF0aDogJ2Jyb3dzZS9wcmljaW5nJyxcbiAgICAgICAgICBpY29uOiAnZmEgZmEtdXNkJyxcbiAgICAgICAgICB0aXRsZTogJ3ByaWNpbmcubWFpbi1tZW51LXRpdGxlJyxcbiAgICAgICAgICBwcmlvcml0eTogMzAsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7ICRzdGF0ZS5nbygnd29ya3NwYWNlLnByaWNpbmdNb2R1bGUnKTsgfSxcbiAgICAgICAgICBwZXJtaXNzaW9uOiAncHJpY2luZzphY2Nlc3MnXG4gICAgICB9O1xuICAgICAgbWFpbk1lbnVTZXJ2aWNlLmFkZE1lbnVJdGVtKG1lbnVJdGVtKTtcblxuICAgICAgLy9SZWdpc3RlciBpdGVtIHByaWNlcyB3aWRnZXRcbiAgICAgIHZhciBpdGVtUHJpY2VzV2lkZ2V0ID0ge1xuICAgICAgICAgIGlzVmlzaWJsZTogZnVuY3Rpb24gKGJsYWRlKSB7IHJldHVybiBhdXRoU2VydmljZS5jaGVja1Blcm1pc3Npb24oJ3ByaWNpbmc6cmVhZCcpOyB9LFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUuaXRlbVByaWNlc1dpZGdldENvbnRyb2xsZXInLFxuICAgICAgICAgIHNpemU6IFsyLCAxXSxcbiAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLlByaWNpbmcpL1NjcmlwdHMvd2lkZ2V0cy9pdGVtUHJpY2VzV2lkZ2V0LnRwbC5odG1sJyxcbiAgICAgIH07XG4gICAgICB3aWRnZXRTZXJ2aWNlLnJlZ2lzdGVyV2lkZ2V0KGl0ZW1QcmljZXNXaWRnZXQsICdpdGVtRGV0YWlsJyk7XG5cbiAgICAgIC8vUmVnaXN0ZXIgcHJpY2VsaXN0IHdpZGdldHNcbiAgICAgIHdpZGdldFNlcnZpY2UucmVnaXN0ZXJXaWRnZXQoe1xuICAgICAgICAgIGlzVmlzaWJsZTogZnVuY3Rpb24gKGJsYWRlKSB7IHJldHVybiAhYmxhZGUuaXNOZXc7IH0sXG4gICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljZXNXaWRnZXRDb250cm9sbGVyJyxcbiAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLlByaWNpbmcpL1NjcmlwdHMvd2lkZ2V0cy9wcmljZXNXaWRnZXQudHBsLmh0bWwnLFxuICAgICAgfSwgJ3ByaWNlbGlzdERldGFpbCcpO1xuICAgICAgd2lkZ2V0U2VydmljZS5yZWdpc3RlcldpZGdldCh7XG4gICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5hc3NpZ25tZW50c1dpZGdldENvbnRyb2xsZXInLFxuICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuUHJpY2luZykvU2NyaXB0cy93aWRnZXRzL2Fzc2lnbm1lbnRzV2lkZ2V0LnRwbC5odG1sJyxcbiAgICAgIH0sICdwcmljZWxpc3REZXRhaWwnKTtcblxuICAgICAgJGh0dHAuZ2V0KCdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5QcmljaW5nKS9TY3JpcHRzL2R5bmFtaWNDb25kaXRpb25zL3RlbXBsYXRlcy5odG1sJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAvLyBjb21waWxlIHRoZSByZXNwb25zZSwgd2hpY2ggd2lsbCBwdXQgc3R1ZmYgaW50byB0aGUgY2FjaGVcbiAgICAgICAgICAkY29tcGlsZShyZXNwb25zZS5kYXRhKTtcbiAgICAgIH0pO1xuXG4gICAgICAvL1xuICAgICAgbWV0YUZvcm1zU2VydmljZS5yZWdpc3Rlck1ldGFGaWVsZHMoJ1ZpcnRvQ29tbWVyY2UuUHJpY2luZ01vZHVsZS5EYXRhLkV4cG9ydEltcG9ydC5FeHBvcnRhYmxlUHJpY2UnICsgJ0V4cG9ydEZpbHRlcicsIFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAgIG5hbWU6ICdwcmljZWxpc3RTZWxlY3RvcicsXG4gICAgICAgICAgICAgIHRpdGxlOiBcInByaWNpbmcuc2VsZWN0b3JzLnRpdGxlcy5wcmljZS1saXN0c1wiLFxuICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLlByaWNpbmcpL1NjcmlwdHMvc2VsZWN0b3JzL3ByaWNlbGlzdC1zZWxlY3Rvci50cGwuaHRtbCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAgIG5hbWU6ICdwcm9kdWN0U2VsZWN0b3InLFxuICAgICAgICAgICAgICB0aXRsZTogXCJwcmljaW5nLnNlbGVjdG9ycy50aXRsZXMucHJvZHVjdHNcIixcbiAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5QcmljaW5nKS9TY3JpcHRzL3NlbGVjdG9ycy9wcm9kdWN0LXNlbGVjdG9yLnRwbC5odG1sJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbmFtZTogJ21vZGlmaWVkU2luY2UnLFxuICAgICAgICAgICAgICB0aXRsZTogXCJwcmljaW5nLnNlbGVjdG9ycy50aXRsZXMubW9kaWZpZWQtc2luY2VcIixcbiAgICAgICAgICAgICAgdmFsdWVUeXBlOiBcIkRhdGVUaW1lXCJcbiAgICAgICAgICB9XSk7XG5cbiAgICAgIG1ldGFGb3Jtc1NlcnZpY2UucmVnaXN0ZXJNZXRhRmllbGRzKCdWaXJ0b0NvbW1lcmNlLlByaWNpbmdNb2R1bGUuRGF0YS5FeHBvcnRJbXBvcnQuRXhwb3J0YWJsZVByaWNlbGlzdCcgKyAnRXhwb3J0RmlsdGVyJywgW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbmFtZTogJ2N1cnJlbmN5U2VsZWN0b3InLFxuICAgICAgICAgICAgICB0aXRsZTogXCJwcmljaW5nLnNlbGVjdG9ycy50aXRsZXMuY3VycmVuY2llc1wiLFxuICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLlByaWNpbmcpL1NjcmlwdHMvc2VsZWN0b3JzL2N1cnJlbmN5LXNlbGVjdG9yLnRwbC5odG1sJyxcbiAgICAgICAgICB9XSk7XG5cbiAgICAgIG1ldGFGb3Jtc1NlcnZpY2UucmVnaXN0ZXJNZXRhRmllbGRzKCdWaXJ0b0NvbW1lcmNlLlByaWNpbmdNb2R1bGUuRGF0YS5FeHBvcnRJbXBvcnQuRXhwb3J0YWJsZVByaWNlbGlzdEZ1bGxEYXRhJyArICdFeHBvcnRGaWx0ZXInLCBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgICBuYW1lOiAnY3VycmVuY3lTZWxlY3RvcicsXG4gICAgICAgICAgICAgIHRpdGxlOiBcInByaWNpbmcuc2VsZWN0b3JzLnRpdGxlcy5jdXJyZW5jaWVzXCIsXG4gICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuUHJpY2luZykvU2NyaXB0cy9zZWxlY3RvcnMvY3VycmVuY3ktc2VsZWN0b3IudHBsLmh0bWwnLFxuICAgICAgICAgIH1dKTtcblxuICAgICAgbWV0YUZvcm1zU2VydmljZS5yZWdpc3Rlck1ldGFGaWVsZHMoJ1ZpcnRvQ29tbWVyY2UuUHJpY2luZ01vZHVsZS5EYXRhLkV4cG9ydEltcG9ydC5FeHBvcnRhYmxlUHJpY2VsaXN0QXNzaWdubWVudCcgKyAnRXhwb3J0RmlsdGVyJywgW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbmFtZTogJ3ByaWNlbGlzdEFzc2lnbm1lbnRTZWxlY3RvcicsXG4gICAgICAgICAgICAgIHRpdGxlOiBcInByaWNpbmcuc2VsZWN0b3JzLnRpdGxlcy5wcmljZS1saXN0c1wiLFxuICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLlByaWNpbmcpL1NjcmlwdHMvc2VsZWN0b3JzL3ByaWNlbGlzdC1zZWxlY3Rvci50cGwuaHRtbCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAgIG5hbWU6ICdjYXRhbG9nU2VsZWN0b3InLFxuICAgICAgICAgICAgICB0aXRsZTogXCJTZWxlY3QgQ2F0YWxvZ1wiLFxuICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLlByaWNpbmcpL1NjcmlwdHMvc2VsZWN0b3JzL2NhdGFsb2ctc2VsZWN0b3IudHBsLmh0bWwnLFxuICAgICAgICAgIH1cbiAgICAgICAgICBdKTtcblxuICAgICAgZ2VuZXJpY1ZpZXdlckl0ZW1TZXJ2aWNlLnJlZ2lzdGVyVmlld2VyKCdQcmljZScsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgdmFyIGl0ZW1Db3B5ID0gYW5ndWxhci5jb3B5KGl0ZW0pO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgaWQ6ICdpdGVtUHJpY2VzJyxcbiAgICAgICAgICAgICAgaXRlbUlkOiBpdGVtQ29weS5wcm9kdWN0SWQsXG4gICAgICAgICAgICAgIHByaWNlTGlzdElkOiBpdGVtQ29weS5wcmljZWxpc3RJZCxcbiAgICAgICAgICAgICAgZGF0YTogeyBwcmljZXM6IFtpdGVtQ29weV0gfSxcbiAgICAgICAgICAgICAgY3VycmVuY3k6IGl0ZW1Db3B5LmN1cnJlbmN5LFxuICAgICAgICAgICAgICB0aXRsZTogJ3ByaWNpbmcuYmxhZGVzLnByaWNlcy1saXN0LnRpdGxlJyxcbiAgICAgICAgICAgICAgdGl0bGVWYWx1ZXM6IHsgbmFtZTogaXRlbUNvcHkubmFtZSB9LFxuICAgICAgICAgICAgICBzdWJ0aXRsZTogJ3ByaWNpbmcuYmxhZGVzLnByaWNlcy1saXN0LnN1YnRpdGxlJyxcbiAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljZXNMaXN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuUHJpY2luZykvU2NyaXB0cy9ibGFkZXMvcHJpY2VzLWxpc3QudHBsLmh0bWwnXG4gICAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgICBnZW5lcmljVmlld2VySXRlbVNlcnZpY2UucmVnaXN0ZXJWaWV3ZXIoJ1ByaWNlbGlzdCcsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgdmFyIGl0ZW1Db3B5ID0gYW5ndWxhci5jb3B5KGl0ZW0pO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgaWQ6ICdsaXN0SXRlbUNoaWxkJyxcbiAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljZWxpc3REZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5QcmljaW5nKS9TY3JpcHRzL2JsYWRlcy9wcmljZWxpc3QtZGV0YWlsLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgY3VycmVudEVudGl0eUlkOiBpdGVtQ29weS5pZCxcbiAgICAgICAgICAgICAgdGl0bGU6IGl0ZW1Db3B5Lm5hbWVcbiAgICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIGdlbmVyaWNWaWV3ZXJJdGVtU2VydmljZS5yZWdpc3RlclZpZXdlcignUHJpY2VsaXN0QXNzaWdubWVudCcsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgdmFyIGl0ZW1Db3B5ID0gYW5ndWxhci5jb3B5KGl0ZW0pO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgaWQ6ICdwcmljZWxpc3RBc3NpZ25tZW50RGV0YWlsJyxcbiAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5hc3NpZ25tZW50RGV0YWlsQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuUHJpY2luZykvU2NyaXB0cy9ibGFkZXMvYXNzaWdubWVudC1kZXRhaWwudHBsLmh0bWwnLFxuICAgICAgICAgICAgICBjdXJyZW50RW50aXR5SWQ6IGl0ZW1Db3B5LmlkLFxuICAgICAgICAgICAgICB0aXRsZTogaXRlbUNvcHkubmFtZSxcbiAgICAgICAgICAgICAgc3VidGl0bGU6ICdwcmljaW5nLmJsYWRlcy5hc3NpZ25tZW50LWRldGFpbC5zdWJ0aXRsZSdcbiAgICAgICAgICB9O1xuICAgICAgfSk7XG4gIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUnKVxuICAgIC5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUuYXNzaWdubWVudERldGFpbENvbnRyb2xsZXInLCBbJyRzY29wZScsICd2aXJ0b0NvbW1lcmNlLmNhdGFsb2dNb2R1bGUuY2F0YWxvZ3MnLCAndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLnByaWNlbGlzdHMnLCAndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLnByaWNlbGlzdEFzc2lnbm1lbnRzJywgJ3ZpcnRvQ29tbWVyY2Uuc3RvcmVNb2R1bGUuc3RvcmVzJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5jb3JlTW9kdWxlLmNvbW1vbi5keW5hbWljRXhwcmVzc2lvblNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAuZGlhbG9nU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsIGNhdGFsb2dzLCBwcmljZWxpc3RzLCBhc3NpZ25tZW50cywgc3RvcmVzLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBkeW5hbWljRXhwcmVzc2lvblNlcnZpY2UsIGRpYWxvZ1NlcnZpY2UpIHtcbiAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgYmxhZGUudXBkYXRlUGVybWlzc2lvbiA9ICdwcmljaW5nOnVwZGF0ZSc7XG5cbiAgICAkc2NvcGUucGFnZVNpemUgPSAyMDtcblxuICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAocGFyZW50UmVmcmVzaCkge1xuICAgICAgICBpZiAoYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgICAgIGFzc2lnbm1lbnRzLmdldE5ldyhpbml0aWFsaXplQmxhZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXNzaWdubWVudHMuZ2V0KHsgaWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHlJZCB9LCBpbml0aWFsaXplQmxhZGUpO1xuICAgICAgICAgICAgaWYgKHBhcmVudFJlZnJlc2ggJiYgYW5ndWxhci5pc0Z1bmN0aW9uKGJsYWRlLnBhcmVudEJsYWRlLnJlZnJlc2gpKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemVCbGFkZShkYXRhKSB7XG4gICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICBcdGRhdGEgPSBhbmd1bGFyLmV4dGVuZChibGFkZS5kYXRhLCBkYXRhKTtcbiAgICAgICAgXHRibGFkZS5kYXRhLnByaWNlbGlzdElkID0gYmxhZGUucHJpY2VsaXN0SWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YS5keW5hbWljRXhwcmVzc2lvbikge1xuICAgICAgICAgICAgXy5lYWNoKGRhdGEuZHluYW1pY0V4cHJlc3Npb24uY2hpbGRyZW4sIGV4dGVuZEVsZW1lbnRCbG9jayk7XG4gICAgICAgICAgICBncm91cEF2YWlsYWJsZUNoaWxkcmVuKGRhdGEuZHluYW1pY0V4cHJlc3Npb24uY2hpbGRyZW5bMF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGFuZ3VsYXIuY29weShkYXRhKTtcbiAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGRhdGE7XG4gICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuc2F2ZVwiLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnZmFzIGZhLXNhdmUnLFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiAkc2NvcGUuc2F2ZUNoYW5nZXMsXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGNhblNhdmUsXG4gICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZXNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtdW5kbycsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogaXNEaXJ0eSxcbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0RpcnR5KCkge1xuICAgICAgICByZXR1cm4gIWFuZ3VsYXIuZXF1YWxzKGJsYWRlLmN1cnJlbnRFbnRpdHksIGJsYWRlLm9yaWdFbnRpdHkpICYmIGJsYWRlLmhhc1VwZGF0ZVBlcm1pc3Npb24oKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5TYXZlKCkge1xuICAgICAgICByZXR1cm4gaXNEaXJ0eSgpICYmICRzY29wZS5mb3JtU2NvcGUgJiYgJHNjb3BlLmZvcm1TY29wZS4kdmFsaWQgJiYgdmFsaWRhdGVBc3NpZ25tZW50KCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmFsaWRhdGVBc3NpZ25tZW50KCkge1xuICAgICAgICByZXR1cm4gKCFibGFkZS5jdXJyZW50RW50aXR5LnN0b3JlSWQgfHwgIWJsYWRlLmN1cnJlbnRFbnRpdHkuY2F0YWxvZ0lkKSAmJlxuICAgICAgICAgICAgKGJsYWRlLmN1cnJlbnRFbnRpdHkuc3RvcmVJZCB8fCBibGFkZS5jdXJyZW50RW50aXR5LmNhdGFsb2dJZClcbiAgICB9XG5cbiAgICAkc2NvcGUuc2V0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7ICRzY29wZS5mb3JtU2NvcGUgPSBmb3JtOyB9O1xuXG4gICAgJHNjb3BlLmNhbmNlbENoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5ibGFkZUNsb3NlKCk7XG4gICAgfTtcblxuICAgICRzY29wZS5zYXZlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gY2FuJ3Qgc2V0IGR5bmFtaWMgXCJyZXF1aXJlZFwiIGF0dHJpYnV0ZSBpbiB1aS1zY3JvbGwtZHJvcC1kb3duIHRlbXBsYXRlXG4gICAgICAgIC8vIHNvIGNoZWNrIGlmIGJvdGggXCJzdG9yZUlkXCIgYW5kIFwiY2F0YWxvZ0lkXCIgYXJlIG5vdCBudWxsIGFuZCBvbmx5IG9uZSBvZiB0aGVtIGlzIGZpbGxlZFxuICAgICAgICBpZiAoIXZhbGlkYXRlQXNzaWdubWVudCgpKSB7XG4gICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgICAgIGlkOiBcImFzc2lnbm1lbnRTYXZlVmFsaWRhdGlvbkVycm9yXCIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwicHJpY2luZy5kaWFsb2dzLmFzc2lnbm1lbnQtc2F2ZS12YWxpZGF0aW9uLnRpdGxlXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJwcmljaW5nLmRpYWxvZ3MuYXNzaWdubWVudC1zYXZlLXZhbGlkYXRpb24ubWVzc2FnZVwiLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93RXJyb3JEaWFsb2coZGlhbG9nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgIGlmIChibGFkZS5jdXJyZW50RW50aXR5LmR5bmFtaWNFeHByZXNzaW9uKSB7XG4gICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5LmR5bmFtaWNFeHByZXNzaW9uLmF2YWlsYWJsZUNoaWxkcmVuID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgXy5lYWNoKGJsYWRlLmN1cnJlbnRFbnRpdHkuZHluYW1pY0V4cHJlc3Npb24uY2hpbGRyZW4sIHN0cmlwT2ZmVWlJbmZvcm1hdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgICAgIGFzc2lnbm1lbnRzLnNhdmUoYmxhZGUuY3VycmVudEVudGl0eSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5pc05ldyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5SWQgPSBkYXRhLmlkO1xuICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2godHJ1ZSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFzc2lnbm1lbnRzLnVwZGF0ZShibGFkZS5jdXJyZW50RW50aXR5LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2godHJ1ZSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBibGFkZS5vbkNsb3NlID0gZnVuY3Rpb24gKGNsb3NlQ2FsbGJhY2spIHtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93Q29uZmlybWF0aW9uSWZOZWVkZWQoaXNEaXJ0eSgpLCBjYW5TYXZlKCksIGJsYWRlLCAkc2NvcGUuc2F2ZUNoYW5nZXMsIGNsb3NlQ2FsbGJhY2ssIFwicHJpY2luZy5kaWFsb2dzLmFzc2lnbm1lbnQtc2F2ZS50aXRsZVwiLCBcInByaWNpbmcuZGlhbG9ncy5hc3NpZ25tZW50LXNhdmUubWVzc2FnZVwiKTtcbiAgICB9O1xuXG4gICAgLy8gZGF0ZXBpY2tlclxuICAgICRzY29wZS5kYXRlcGlja2VycyA9IHtcbiAgICAgICAgc3RyOiBmYWxzZSxcbiAgICAgICAgZW5kOiBmYWxzZVxuICAgIH1cblxuICAgICRzY29wZS5vcGVuID0gZnVuY3Rpb24gKCRldmVudCwgd2hpY2gpIHtcbiAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAkc2NvcGUuZGF0ZXBpY2tlcnNbd2hpY2hdID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLy8gRHluYW1pYyBFeHByZXNzaW9uQmxvY2tcbiAgICBmdW5jdGlvbiBleHRlbmRFbGVtZW50QmxvY2soZXhwcmVzc2lvbkJsb2NrKSB7XG4gICAgICAgIHZhciByZXRWYWwgPSBkeW5hbWljRXhwcmVzc2lvblNlcnZpY2UuZXhwcmVzc2lvbnNbZXhwcmVzc2lvbkJsb2NrLmlkXTtcbiAgICAgICAgaWYgKCFyZXRWYWwpIHtcbiAgICAgICAgICAgIHJldFZhbCA9IHsgZGlzcGxheU5hbWU6ICd1bmtub3duIGVsZW1lbnQ6ICcgKyBleHByZXNzaW9uQmxvY2suaWQgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIF8uZXh0ZW5kKGV4cHJlc3Npb25CbG9jaywgcmV0VmFsKTtcblxuICAgICAgICBpZiAoIWV4cHJlc3Npb25CbG9jay5jaGlsZHJlbikge1xuICAgICAgICAgICAgZXhwcmVzc2lvbkJsb2NrLmNoaWxkcmVuID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBfLmVhY2goZXhwcmVzc2lvbkJsb2NrLmNoaWxkcmVuLCBleHRlbmRFbGVtZW50QmxvY2spO1xuICAgICAgICBfLmVhY2goZXhwcmVzc2lvbkJsb2NrLmF2YWlsYWJsZUNoaWxkcmVuLCBleHRlbmRFbGVtZW50QmxvY2spO1xuICAgICAgICByZXR1cm4gZXhwcmVzc2lvbkJsb2NrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdyb3VwQXZhaWxhYmxlQ2hpbGRyZW4oZXhwcmVzc2lvbkJsb2NrKSB7XG4gICAgICAgIHJlc3VsdHMgPSBfLmdyb3VwQnkoZXhwcmVzc2lvbkJsb2NrLmF2YWlsYWJsZUNoaWxkcmVuLCAnZ3JvdXBOYW1lJyk7XG4gICAgICAgIGV4cHJlc3Npb25CbG9jay5hdmFpbGFibGVDaGlsZHJlbiA9IF8ubWFwKHJlc3VsdHMsIGZ1bmN0aW9uIChpdGVtcywga2V5KSB7IHJldHVybiB7IGRpc3BsYXlOYW1lOiBrZXksIHN1Yml0ZW1zOiBpdGVtcyB9OyB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdHJpcE9mZlVpSW5mb3JtYXRpb24oZXhwcmVzc2lvbkVsZW1lbnQpIHtcbiAgICAgICAgZXhwcmVzc2lvbkVsZW1lbnQuYXZhaWxhYmxlQ2hpbGRyZW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIGV4cHJlc3Npb25FbGVtZW50LmRpc3BsYXlOYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICBleHByZXNzaW9uRWxlbWVudC5nZXRWYWxpZGF0aW9uRXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgICAgIGV4cHJlc3Npb25FbGVtZW50Lmdyb3VwTmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgZXhwcmVzc2lvbkVsZW1lbnQubmV3Q2hpbGRMYWJlbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZXhwcmVzc2lvbkVsZW1lbnQudGVtcGxhdGVVUkwgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgXy5lYWNoKGV4cHJlc3Npb25FbGVtZW50LmNoaWxkcmVuLCBzdHJpcE9mZlVpSW5mb3JtYXRpb24pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2F0YWxvZ0RhdGFTb3VyY2UgPSAoY3JpdGVyaWEpID0+IGNhdGFsb2dzLnNlYXJjaChjcml0ZXJpYSk7XG4gICAgJHNjb3BlLnByaWNlbGlzdERhdGFTb3VyY2UgPSAoY3JpdGVyaWEpID0+IHByaWNlbGlzdHMuc2VhcmNoKGNyaXRlcmlhKTtcbiAgICAkc2NvcGUuc3RvcmVEYXRhU291cmNlID0gKGNyaXRlcmlhKSA9PiBzdG9yZXMuc2VhcmNoKGNyaXRlcmlhKTtcblxuICAgIGJsYWRlLnJlZnJlc2goKTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUnKVxuICAgIC5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUuYXNzaWdubWVudExpc3RDb250cm9sbGVyJywgWyckc2NvcGUnLCAndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLnByaWNlbGlzdEFzc2lnbm1lbnRzJywgJ3BsYXRmb3JtV2ViQXBwLmRpYWxvZ1NlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlVXRpbHMnLCAndmlydG9Db21tZXJjZS5jYXRhbG9nTW9kdWxlLmNhdGFsb2dzJywgJyRsb2NhbFN0b3JhZ2UnLFxuICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCBhc3NpZ25tZW50cywgZGlhbG9nU2VydmljZSwgdWlHcmlkSGVscGVyLCBibGFkZVV0aWxzLCBjYXRhbG9ncywgJGxvY2FsU3RvcmFnZSkge1xuICAgICAgICAgICAgJHNjb3BlLnVpR3JpZENvbnN0YW50cyA9IHVpR3JpZEhlbHBlci51aUdyaWRDb25zdGFudHM7XG4gICAgICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgICAgICAgICB2YXIgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSA9IGJsYWRlVXRpbHMuYmxhZGVOYXZpZ2F0aW9uU2VydmljZTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0YVJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0VHlwZU5hbWU6ICdWaXJ0b0NvbW1lcmNlLlByaWNpbmdNb2R1bGUuRGF0YS5FeHBvcnRJbXBvcnQuRXhwb3J0YWJsZVByaWNlbGlzdEFzc2lnbm1lbnQnLFxuICAgICAgICAgICAgICAgIGRhdGFRdWVyeToge1xuICAgICAgICAgICAgICAgICAgICBleHBvcnRUeXBlTmFtZTogJ1ByaWNlbGlzdEFzc2lnbm1lbnRFeHBvcnREYXRhUXVlcnknXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBleHBvcnREYXRhUmVxdWVzdCA9IGFuZ3VsYXIuY29weShkZWZhdWx0RGF0YVJlcXVlc3QpO1xuICAgICAgICAgICAgdmFyIGZpbHRlciA9IGJsYWRlLmZpbHRlciA9ICRzY29wZS5maWx0ZXIgPSB7fTtcblxuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgYXNzaWdubWVudHMuc2VhcmNoKGdldFNlYXJjaENyaXRlcmlhKCksIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vTG9hZGluZyBjYXRhbG9ncyBmb3IgYXNzaWdubWVudHMgYmVjYXVzZSB0aGV5IGRvIG5vdCBjb250YWlucyB0aGVtXG4gICAgICAgICAgICAgICAgICAgIC8vTmVlZCB0byBkaXNwbGF5IG5hbWUgb2YgY2F0YWxvZyBpbiBhc3NpZ25tZW50cyBncmlkXG4gICAgICAgICAgICAgICAgICAgIGNhdGFsb2dzLnNlYXJjaCh7IHRha2U6IDEwMDAsIHJlc3BvbnNlR3JvdXA6ICdJbmZvJyB9LCBmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSBkYXRhLnRvdGFsQ291bnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmljZUFzc2lnbm1lbnRzID0gZGF0YS5yZXN1bHRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHByaWNlQXNzaWdubWVudHMsIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhdGFsb2cgPSBfLmZpbmRXaGVyZShyZXN1bHRzLnJlc3VsdHMsIHsgaWQ6IHguY2F0YWxvZ0lkIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXRhbG9nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguY2F0YWxvZyA9IGNhdGFsb2cubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0aWVzID0gcHJpY2VBc3NpZ25tZW50cztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0Tm9kZSA9IGZ1bmN0aW9uIChub2RlLCBpc05ldykge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IG5vZGUuaWQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAncHJpY2VsaXN0QXNzaWdubWVudERldGFpbCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUuYXNzaWdubWVudERldGFpbENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLlByaWNpbmcpL1NjcmlwdHMvYmxhZGVzL2Fzc2lnbm1lbnQtZGV0YWlsLnRwbC5odG1sJ1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQobmV3QmxhZGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTmV3OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VsaXN0SWQ6IGJsYWRlLnByaWNlbGlzdElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogbm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAncHJpY2luZy5ibGFkZXMuYXNzaWdubWVudC1kZXRhaWwubmV3LXRpdGxlJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChuZXdCbGFkZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVudGl0eUlkOiBub2RlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IG5vZGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAncHJpY2luZy5ibGFkZXMuYXNzaWdubWVudC1kZXRhaWwuc3VidGl0bGUnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBpc0l0ZW1zQ2hlY2tlZCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmdyaWRBcGkgJiYgXy5hbnkoJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZUxpc3QgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBcImNvbmZpcm1EZWxldGVJdGVtXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcInByaWNpbmcuZGlhbG9ncy5hc3NpZ25tZW50cy1kZWxldGUudGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJwcmljaW5nLmRpYWxvZ3MuYXNzaWdubWVudHMtZGVsZXRlLm1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUNoaWxkcmVuQmxhZGVzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbUlkcyA9IF8ucGx1Y2sobGlzdCwgJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudHMucmVtb3ZlKHsgaWRzOiBpdGVtSWRzIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbkRpYWxvZyhkaWFsb2cpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZUFsbEZpbHRlcmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBcImNvbmZpcm1EZWxldGVJdGVtc1wiLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGNvbmZpcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUNoaWxkcmVuQmxhZGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudHMucmVtb3ZlRmlsdGVyZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlbGlzdElkOiBibGFkZS5wcmljZWxpc3RJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkOiBmaWx0ZXIua2V5d29yZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3dEaWFsb2coZGlhbG9nLCAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuUHJpY2luZykvU2NyaXB0cy9kaWFsb2dzL2RlbGV0ZUFsbC1kaWFsb2cudHBsLmh0bWwnLCAncGxhdGZvcm1XZWJBcHAuY29uZmlybURpYWxvZ0NvbnRyb2xsZXInKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsb3NlQ2hpbGRyZW5CbGFkZXMoKSB7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGJsYWRlLmNoaWxkcmVuQmxhZGVzLnNsaWNlKCksIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUoY2hpbGQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1hbmNob3InO1xuICAgICAgICAgICAgYmxhZGUuc3VidGl0bGUgPSAncHJpY2luZy5ibGFkZXMucHJpY2VsaXN0LWFzc2lnbm1lbnQtbGlzdC5zdWJ0aXRsZSc7XG5cbiAgICAgICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucmVmcmVzaFwiLCBpY29uOiAnZmEgZmEtcmVmcmVzaCcsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGJsYWRlLnJlZnJlc2gsXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5hZGRcIiwgaWNvbjogJ2ZhcyBmYS1wbHVzJyxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdE5vZGUoe30sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAncHJpY2luZzpjcmVhdGUnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuZGVsZXRlXCIsIGljb246ICdmYXMgZmEtdHJhc2gtYWx0JyxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZUxpc3QoJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzSXRlbXNDaGVja2VkKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdwcmljaW5nOmRlbGV0ZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwcmljaW5nLmNvbW1hbmRzLmRlbGV0ZS1hbGwtZmlsdGVyZWRcIixcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ZhcyBmYS10cmFzaC1hbHQnLFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlQWxsRmlsdGVyZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJsYWRlLmN1cnJlbnRFbnRpdGllcyAmJiBibGFkZS5jdXJyZW50RW50aXRpZXMubGVuZ3RoID4gMDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ3ByaWNpbmc6ZGVsZXRlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmV4cG9ydFwiLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtdXBsb2FkJyxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0FsbFNlbGVjdGVkID0gJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdEFsbFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkuaXNBbGxTZWxlY3RlZCA9IGlzQWxsU2VsZWN0ZWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvd3MgPSAkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeS5vYmplY3RJZHMgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChleHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkub2JqZWN0SWRzICYmIGV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeS5vYmplY3RJZHMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICghaXNBbGxTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkub2JqZWN0SWRzID0gXy5tYXAoc2VsZWN0ZWRSb3dzLCBmdW5jdGlvbiAocHJpY2VBc3NpZ25tZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJpY2VBc3NpZ25tZW50cy5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5LCBnZXRTZWFyY2hDcml0ZXJpYSgpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAncHJpY2VBc3NpZ25tZW50RXhwb3J0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ3ByaWNpbmcuYmxhZGVzLmV4cG9ydGVyLnByaWNlQXNzaWdubWVudFRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ3ByaWNpbmcuYmxhZGVzLmV4cG9ydGVyLnByaWNlQXNzaWdubWVudFN1YnRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5leHBvcnRNb2R1bGUuZXhwb3J0U2V0dGluZ3NDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLkV4cG9ydCkvU2NyaXB0cy9ibGFkZXMvZXhwb3J0LXNldHRpbmdzLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnREYXRhUmVxdWVzdDogZXhwb3J0RGF0YVJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgZmlsdGVyLmNyaXRlcmlhQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gdWktZ3JpZFxuICAgICAgICAgICAgJHNjb3BlLnNldEdyaWRPcHRpb25zID0gZnVuY3Rpb24gKGdyaWRPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmdyaWRPcHRpb25zID0gZ3JpZE9wdGlvbnM7XG5cbiAgICAgICAgICAgICAgICBncmlkT3B0aW9ucy5vblJlZ2lzdGVyQXBpID0gZnVuY3Rpb24gKGdyaWRBcGkpIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JpZEFwaS5jb3JlLm9uLnNvcnRDaGFuZ2VkKCRzY29wZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFibGFkZS5pc0xvYWRpbmcpIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGJsYWRlVXRpbHMuaW5pdGlhbGl6ZVBhZ2luYXRpb24oJHNjb3BlKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFNlYXJjaENyaXRlcmlhKCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IGZpbHRlci5rZXl3b3JkLFxuICAgICAgICAgICAgICAgICAgICBzb3J0OiB1aUdyaWRIZWxwZXIuZ2V0U29ydEV4cHJlc3Npb24oJHNjb3BlKSxcbiAgICAgICAgICAgICAgICAgICAgc2tpcDogKCRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgLSAxKSAqICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnQsXG4gICAgICAgICAgICAgICAgICAgIHRha2U6ICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHJpY2VsaXN0SWRzID0gZmlsdGVyLmN1cnJlbnQucHJpY2VsaXN0SWRzO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuY2F0YWxvZ0lkcyA9IGZpbHRlci5jdXJyZW50LmNhdGFsb2dJZHMgfHwgW107XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnByaWNlbGlzdElkcyA9IGJsYWRlLnByaWNlbGlzdElkID8gW2JsYWRlLnByaWNlbGlzdElkXSA6IFtdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISRsb2NhbFN0b3JhZ2UuZXhwb3J0U2VhcmNoRmlsdGVycykge1xuICAgICAgICAgICAgICAgICRsb2NhbFN0b3JhZ2UuZXhwb3J0U2VhcmNoRmlsdGVycyA9IFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoISRsb2NhbFN0b3JhZ2UuZXhwb3J0U2VhcmNoRmlsdGVyc1tleHBvcnREYXRhUmVxdWVzdC5leHBvcnRUeXBlTmFtZV0pIHtcbiAgICAgICAgICAgICAgICAkbG9jYWxTdG9yYWdlLmV4cG9ydFNlYXJjaEZpbHRlcnNbZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWVdID0gW3sgbmFtZTogJ2V4cG9ydC5ibGFkZXMuZXhwb3J0LWdlbmVyaWMtdmlld2VyLmxhYmVscy5uZXctZmlsdGVyJyB9XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmV4cG9ydFNlYXJjaEZpbHRlcnMgPSAkbG9jYWxTdG9yYWdlLmV4cG9ydFNlYXJjaEZpbHRlcnNbZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWVdO1xuXG4gICAgICAgICAgICBpZiAoISRsb2NhbFN0b3JhZ2UuZXhwb3J0U2VhcmNoRmlsdGVySWRzKSB7XG4gICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5leHBvcnRTZWFyY2hGaWx0ZXJJZHMgPSBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmV4cG9ydFNlYXJjaEZpbHRlcklkID0gJGxvY2FsU3RvcmFnZS5leHBvcnRTZWFyY2hGaWx0ZXJJZHNbZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWVdO1xuXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmV4cG9ydFNlYXJjaEZpbHRlcklkKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyLmN1cnJlbnQgPSBfLmZpbmRXaGVyZSgkc2NvcGUuZXhwb3J0U2VhcmNoRmlsdGVycywgeyBpZDogJHNjb3BlLmV4cG9ydFNlYXJjaEZpbHRlcklkIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmaWx0ZXIuY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRsb2NhbFN0b3JhZ2UuZXhwb3J0U2VhcmNoRmlsdGVySWQgPSBmaWx0ZXIuY3VycmVudCA/IGZpbHRlci5jdXJyZW50LmlkIDogbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgbWV0YWZpZWxkc0lkID0gZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWUgKyAnRXhwb3J0RmlsdGVyJztcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmN1cnJlbnQgJiYgIWZpbHRlci5jdXJyZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0ZpbHRlckRldGFpbEJsYWRlKHsgaXNOZXc6IHRydWUsIG1ldGFmaWVsZHNJZDogbWV0YWZpZWxkc0lkLCBleHBvcnRUeXBlTmFtZTogZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWUgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKHsgaWQ6ICdleHBvcnRHZW5lcmljVmlld2VyRmlsdGVyJyB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlci5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5yZXNldFJlcXVlc3RDdXN0b21GaWx0ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlci5jcml0ZXJpYUNoYW5nZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmaWx0ZXIuZWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWV0YWZpZWxkc0lkID0gZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWUgKyAnRXhwb3J0RmlsdGVyJztcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyRGV0YWlsc1BhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZmlsdGVyLmN1cnJlbnQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFmaWVsZHNJZDogbWV0YWZpZWxkc0lkLFxuICAgICAgICAgICAgICAgICAgICBleHBvcnRUeXBlTmFtZTogZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWVcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlci5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGZpbHRlckRldGFpbHNQYXJhbXMsIHsgZGF0YTogZmlsdGVyLmN1cnJlbnQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChmaWx0ZXJEZXRhaWxzUGFyYW1zLCB7IGlzTmV3OiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJEZXRhaWxCbGFkZShmaWx0ZXJEZXRhaWxzUGFyYW1zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dGaWx0ZXJEZXRhaWxCbGFkZShibGFkZURhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAnZXhwb3J0R2VuZXJpY1ZpZXdlckZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZS5leHBvcnRHZW5lcmljVmlld2VyRmlsdGVyQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuRXhwb3J0KS9TY3JpcHRzL2JsYWRlcy9leHBvcnQtZ2VuZXJpYy12aWV3ZXItZmlsdGVyLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgb25CZWZvcmVBcHBseTogYmxhZGUucmVzZXRSZXF1ZXN0Q3VzdG9tRmlsdGVyXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChuZXdCbGFkZSwgYmxhZGVEYXRhKTtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmaWx0ZXIuY3JpdGVyaWFDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZpbHRlci5yZXNldEtleXdvcmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyLmtleXdvcmQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeS5rZXl3b3JkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBibGFkZS5yZXNldFJlcXVlc3RDdXN0b21GaWx0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KGV4cG9ydERhdGFSZXF1ZXN0LCBkZWZhdWx0RGF0YVJlcXVlc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYWN0aW9ucyBvbiBsb2FkXG4gICAgICAgICAgICAvL2JsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgfV0pO1xuIiwi77u/YW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZScpXG4gICAgLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljZWxpc3REZXRhaWxDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJpY2VsaXN0cycsICdwbGF0Zm9ybVdlYkFwcC5zZXR0aW5ncycsICd2aXJ0b0NvbW1lcmNlLmNvcmVNb2R1bGUuY3VycmVuY3kuY3VycmVuY3lVdGlscycsXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIHByaWNlbGlzdHMsIHNldHRpbmdzLCBjdXJyZW5jeVV0aWxzKSB7XG4gICAgICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgICAgICAgICBibGFkZS51cGRhdGVQZXJtaXNzaW9uID0gJ3ByaWNpbmc6dXBkYXRlJztcblxuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uIChwYXJlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemVCbGFkZSh7IHByb2R1Y3RQcmljZXM6IFtdLCBhc3NpZ25tZW50czogW10gfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJpY2VsaXN0cy5nZXQoeyBpZDogYmxhZGUuY3VycmVudEVudGl0eUlkIH0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplQmxhZGUoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50UmVmcmVzaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUJsYWRlKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnRpdGxlID0gZGF0YS5uYW1lO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkgPSBhbmd1bGFyLmNvcHkoZGF0YSk7XG4gICAgICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzRGlydHkoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFhbmd1bGFyLmVxdWFscyhibGFkZS5jdXJyZW50RW50aXR5LCBibGFkZS5vcmlnRW50aXR5KSAmJiBibGFkZS5oYXNVcGRhdGVQZXJtaXNzaW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhblNhdmUoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzRGlydHkoKSAmJiAkc2NvcGUuZm9ybVNjb3BlICYmICRzY29wZS5mb3JtU2NvcGUuJHZhbGlkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuY2FuY2VsQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkoYmxhZGUub3JpZ0VudGl0eSwgYmxhZGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJsYWRlQ2xvc2UoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAkc2NvcGUuc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgICAgIFx0cHJpY2VsaXN0cy5zYXZlKHt9LCBibGFkZS5jdXJyZW50RW50aXR5LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIFx0XHRhbmd1bGFyLmNvcHkoYmxhZGUuY3VycmVudEVudGl0eSwgYmxhZGUub3JpZ0VudGl0eSk7XG4gICAgICAgICAgICAgICAgXHRcdCRzY29wZS5ibGFkZUNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmxhZGUuc2F2ZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcdGJsYWRlLnNhdmVDYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgXHRibGFkZS5wYXJlbnRCbGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ICBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJpY2VsaXN0cy51cGRhdGUoe30sIGJsYWRlLmN1cnJlbnRFbnRpdHksIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5yZWZyZXNoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuc2V0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7ICRzY29wZS5mb3JtU2NvcGUgPSBmb3JtOyB9O1xuXG4gICAgICAgICAgICBibGFkZS5vbkNsb3NlID0gZnVuY3Rpb24gKGNsb3NlQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dDb25maXJtYXRpb25JZk5lZWRlZChpc0RpcnR5KCksIGNhblNhdmUoKSwgYmxhZGUsICRzY29wZS5zYXZlQ2hhbmdlcywgY2xvc2VDYWxsYmFjaywgXCJwcmljaW5nLmRpYWxvZ3MucHJpY2VsaXN0LXNhdmUudGl0bGVcIiwgXCJwcmljaW5nLmRpYWxvZ3MucHJpY2VsaXN0LXNhdmUubWVzc2FnZVwiKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGJsYWRlLmhlYWRJY29uID0gYmxhZGUucGFyZW50QmxhZGUuaGVhZEljb247XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVUb29sYmFyKCkge1xuICAgICAgICAgICAgICAgIGlmICghYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuc2F2ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdmYXMgZmEtc2F2ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogJHNjb3BlLnNhdmVDaGFuZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGNhblNhdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnJlc2V0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLXVuZG8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KGJsYWRlLm9yaWdFbnRpdHksIGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogaXNEaXJ0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiBibGFkZS51cGRhdGVQZXJtaXNzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbml0aWFsaXplVG9vbGJhcigpO1xuICAgICAgICAgICAgYmxhZGUucmVmcmVzaChmYWxzZSk7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVuY3lVdGlscyA9IGN1cnJlbmN5VXRpbHM7XG4gICAgICAgIH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlJylcbiAgICAuY29udHJvbGxlcigndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLnByaWNlbGlzdEl0ZW1MaXN0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljZXMnLCAnJGZpbHRlcicsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3VpR3JpZENvbnN0YW50cycsICdwbGF0Zm9ybVdlYkFwcC51aUdyaWRIZWxwZXInLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVVdGlscycsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgJyR0cmFuc2xhdGUnLCBmdW5jdGlvbiAoJHNjb3BlLCBwcmljZXMsICRmaWx0ZXIsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIHVpR3JpZENvbnN0YW50cywgdWlHcmlkSGVscGVyLCBibGFkZVV0aWxzLCBkaWFsb2dTZXJ2aWNlLCAkdHJhbnNsYXRlKSB7XG4gICAgICAgICRzY29wZS51aUdyaWRDb25zdGFudHMgPSB1aUdyaWRDb25zdGFudHM7XG4gICAgICAgICRzY29wZS5ub1Byb2R1Y3RSb3dOYW1lID0gJHRyYW5zbGF0ZS5pbnN0YW50KCdwcmljaW5nLmJsYWRlcy5wcmljZWxpc3QtaXRlbS1saXN0LmxhYmVscy5uby1wcm9kdWN0LXJvdy1uYW1lJyk7XG4gICAgICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICAgICAgdmFyIGV4cG9ydERhdGFSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgZXhwb3J0VHlwZU5hbWU6ICdWaXJ0b0NvbW1lcmNlLlByaWNpbmdNb2R1bGUuRGF0YS5FeHBvcnRJbXBvcnQuRXhwb3J0YWJsZVByaWNlJyxcbiAgICAgICAgICAgIGRhdGFRdWVyeToge1xuICAgICAgICAgICAgICAgIGV4cG9ydFR5cGVOYW1lOiAnUHJpY2VFeHBvcnREYXRhUXVlcnknXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgYmxhZGUuZ2V0U2VhcmNoQ3JpdGVyaWEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgZ3JvdXBCeVByb2R1Y3RzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHByaWNlbGlzdElkczogW2JsYWRlLmN1cnJlbnRFbnRpdHlJZF0sXG4gICAgICAgICAgICAgICAga2V5d29yZDogZmlsdGVyLmtleXdvcmQsXG4gICAgICAgICAgICAgICAgc29ydDogdWlHcmlkSGVscGVyLmdldFNvcnRFeHByZXNzaW9uKCRzY29wZSksXG4gICAgICAgICAgICAgICAgc2tpcDogKCRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgLSAxKSAqICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnQsXG4gICAgICAgICAgICAgICAgdGFrZTogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICBwcmljZXMuc2VhcmNoKGJsYWRlLmdldFNlYXJjaENyaXRlcmlhKCksIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0aWVzID0gJHNjb3BlLnByZXBhcmVQcmljZXMoZGF0YS5yZXN1bHRzKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSBkYXRhLnRvdGFsQ291bnQ7XG4gICAgICAgICAgICAgICAgYmxhZGUudG90YWxJdGVtcyA9IGRhdGEudG90YWxDb3VudDtcblxuICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7IGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTsgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnByZXBhcmVQcmljZXMgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBfLmVhY2goZGF0YSwgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpZighaXRlbS5wcm9kdWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ucHJvZHVjdCA9IHsgbmFtZSA6ICAkc2NvcGUubm9Qcm9kdWN0Um93TmFtZX07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zZWxlY3ROb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IG5vZGUucHJvZHVjdElkO1xuXG4gICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6ICdwcm9kdWN0SXRlbVByaWNlcycsXG4gICAgICAgICAgICAgICAgaXRlbUlkOiBub2RlLnByb2R1Y3RJZCxcbiAgICAgICAgICAgICAgICBwcmljZUxpc3RJZDogYmxhZGUuY3VycmVudEVudGl0eUlkLFxuICAgICAgICAgICAgICAgIGRhdGE6IG5vZGUsXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGJsYWRlLmN1cnJlbmN5LFxuICAgICAgICAgICAgICAgIHRpdGxlOiAncHJpY2luZy5ibGFkZXMucHJpY2VzLWxpc3QudGl0bGUnLFxuICAgICAgICAgICAgICAgIHRpdGxlVmFsdWVzOiB7IG5hbWU6IG5vZGUucHJvZHVjdC5uYW1lIH0sXG4gICAgICAgICAgICAgICAgc3VidGl0bGU6ICdwcmljaW5nLmJsYWRlcy5wcmljZXMtbGlzdC5zdWJ0aXRsZScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljZXNMaXN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5QcmljaW5nKS9TY3JpcHRzL2JsYWRlcy9wcmljZXMtbGlzdC50cGwuaHRtbCdcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlbkFkZEVudGl0eVdpemFyZCgpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IG51bGw7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRQcm9kdWN0cyA9IFtdO1xuICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgIGlkOiBcIkNhdGFsb2dJdGVtc1NlbGVjdFwiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlNlbGVjdCBpdGVtcyBmb3IgcHJpY2luZ1wiLCAvL2NhdGFsb2dJdGVtU2VsZWN0Q29udHJvbGxlcjogaGFyZC1jb2RlZCB0aXRsZVxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNhdGFsb2dNb2R1bGUuY2F0YWxvZ0l0ZW1TZWxlY3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLkNhdGFsb2cpL1NjcmlwdHMvYmxhZGVzL2NvbW1vbi9jYXRhbG9nLWl0ZW1zLXNlbGVjdC50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYnM6IFtdLFxuICAgICAgICAgICAgICAgIHRvb2xiYXJDb21tYW5kczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInByaWNpbmcuY29tbWFuZHMuYWRkLXNlbGVjdGVkXCIsIGljb246ICdmYXMgZmEtcGx1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoYmxhZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRQcm9kdWN0c1RvUHJpY2VsaXN0KHNlbGVjdGVkUHJvZHVjdHMsIGJsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkUHJvZHVjdHMubGVuZ3RoID4gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG5ld0JsYWRlLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgY2hlY2tJdGVtRm46IGZ1bmN0aW9uIChsaXN0SXRlbSwgaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGlzdEl0ZW0udHlwZSA9PT0gJ2NhdGVnb3J5Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3QmxhZGUuZXJyb3IgPSAnQ2F0ZWdvcmllcyBhcmUgbm90IHN1cHBvcnRlZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0SXRlbS5zZWxlY3RlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF8uYWxsKHNlbGVjdGVkUHJvZHVjdHMsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkICE9PSBsaXN0SXRlbS5pZDsgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRQcm9kdWN0cy5wdXNoKGxpc3RJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFByb2R1Y3RzID0gXy5yZWplY3Qoc2VsZWN0ZWRQcm9kdWN0cywgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQgPT09IGxpc3RJdGVtLmlkOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0JsYWRlLmVycm9yID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZFByb2R1Y3RzVG9QcmljZWxpc3QocHJvZHVjdHMsIHRoZUJsYWRlKSB7XG4gICAgICAgICAgICB0aGVCbGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBzZWFyY2ggZm9yIHBvc3NpYmxlIGR1cGxpY2F0aW5nIHByaWNlc1xuICAgICAgICAgICAgcHJpY2VzLnNlYXJjaCh7XG4gICAgICAgICAgICAgICAgcHJpY2VMaXN0SWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHlJZCxcbiAgICAgICAgICAgICAgICBwcm9kdWN0SWRzOiBfLnBsdWNrKHByb2R1Y3RzLCAnaWQnKVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3SXRlbXMgPSBfLmZpbHRlcihwcm9kdWN0cywgZnVuY3Rpb24gKHByb2R1Y3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8uYWxsKGRhdGEucmVzdWx0cywgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4LnByb2R1Y3RJZCAhPT0gcHJvZHVjdC5pZDtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHZhciBuZXdQcm9kdWN0UHJpY2VzID0gXy5tYXAobmV3SXRlbXMsIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwcm9kdWN0SWQ6IHguaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmljZXM6IFt7IHByb2R1Y3RJZDogeC5pZCwgbGlzdDogMCwgbWluUXVhbnRpdHk6IDEsIGN1cnJlbmN5OiBibGFkZS5jdXJyZW5jeSwgcHJpY2VMaXN0SWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHlJZCB9XVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcHJpY2VzLnVwZGF0ZShuZXdQcm9kdWN0UHJpY2VzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VCbGFkZSh0aGVCbGFkZSk7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUucGFyZW50V2lkZ2V0UmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpOyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5kZWxldGVMaXN0ID0gZnVuY3Rpb24gKGxpc3QpIHtcbiAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IFwiY29uZmlybURlbGV0ZUl0ZW1cIixcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJwcmljaW5nLmRpYWxvZ3MucHJpY2VsaXN0LWl0ZW0tbGlzdC1kZWxldGUudGl0bGVcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcInByaWNpbmcuZGlhbG9ncy5wcmljZWxpc3QtaXRlbS1saXN0LWRlbGV0ZS5tZXNzYWdlXCIsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUNoaWxkcmVuQmxhZGVzKGJsYWRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VzLnJlbW92ZSh7IHByaWNlTGlzdElkOiBibGFkZS5jdXJyZW50RW50aXR5SWQsIHByb2R1Y3RJZHM6IF8ucGx1Y2sobGlzdCwgJ3Byb2R1Y3RJZCcpIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5wYXJlbnRXaWRnZXRSZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7IGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbkRpYWxvZyhkaWFsb2cpO1xuICAgICAgICB9XG5cbiAgICAgICAgYmxhZGUuZXhwb3J0UHJpY2VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaXNBbGxTZWxlY3RlZCA9ICRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RBbGxTdGF0ZSgpO1xuICAgICAgICAgICAgZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5LmlzQWxsU2VsZWN0ZWQgPSBpc0FsbFNlbGVjdGVkO1xuXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3dzID0gJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpO1xuXG4gICAgICAgICAgICBleHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkub2JqZWN0SWRzID0gW107XG4gICAgICAgICAgICBpZiAoIWlzQWxsU2VsZWN0ZWQgJiYgc2VsZWN0ZWRSb3dzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByaWNlSWRzID0gXy5wbHVjayhfLmZsYXR0ZW4oXy5wbHVjayhzZWxlY3RlZFJvd3MsICdwcmljZXMnKSksICdpZCcpO1xuICAgICAgICAgICAgICAgIGV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeS5vYmplY3RJZHMgPSBwcmljZUlkcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5LnByb2R1Y3RJZHMgPSBbXTtcblxuICAgICAgICAgICAgaWYgKChleHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkucHJvZHVjdElkcyAmJiBleHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkucHJvZHVjdElkcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgfHwgKCFpc0FsbFNlbGVjdGVkKSkge1xuICAgICAgICAgICAgICAgIGV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeS5wcm9kdWN0SWRzID0gXy5tYXAoc2VsZWN0ZWRSb3dzLCBmdW5jdGlvbiAocHJvZHVjdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvZHVjdC5wcm9kdWN0SWQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzZWFyY2hDcml0ZXJpYSA9IGJsYWRlLmdldFNlYXJjaENyaXRlcmlhKCk7XG5cbiAgICAgICAgICAgIGlmIChpc0FsbFNlbGVjdGVkIHx8IChzZWFyY2hDcml0ZXJpYS5wcmljZWxpc3RJZHMgJiYgc2VhcmNoQ3JpdGVyaWEucHJpY2VsaXN0SWRzLmxlbmd0aCA+IDApIHx8IHNlYXJjaENyaXRlcmlhLmtleXdvcmQgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5LmlzQW55RmlsdGVyQXBwbGllZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeSwgc2VhcmNoQ3JpdGVyaWEpO1xuXG4gICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6ICdwcmljZUV4cG9ydCcsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdwcmljaW5nLmJsYWRlcy5leHBvcnRlci5wcmljZVRpdGxlJyxcbiAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ3ByaWNpbmcuYmxhZGVzLmV4cG9ydGVyLnByaWNlU3VidGl0bGUnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZS5leHBvcnRTZXR0aW5nc0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuRXhwb3J0KS9TY3JpcHRzL2JsYWRlcy9leHBvcnQtc2V0dGluZ3MudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgIGV4cG9ydERhdGFSZXF1ZXN0OiBleHBvcnREYXRhUmVxdWVzdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgICAgIH1cblxuICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZWZyZXNoXCIsIGljb246ICdmYSBmYS1yZWZyZXNoJyxcbiAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBibGFkZS5yZWZyZXNoLFxuICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5hZGRcIiwgaWNvbjogJ2ZhcyBmYS1wbHVzJyxcbiAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBvcGVuQWRkRW50aXR5V2l6YXJkLFxuICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH0sXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmRlbGV0ZVwiLCBpY29uOiAnZmFzIGZhLXRyYXNoLWFsdCcsXG4gICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlTGlzdCgkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmdyaWRBcGkgJiYgXy5hbnkoJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5leHBvcnRcIixcbiAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtdXBsb2FkJyxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5leHBvcnRQcmljZXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG5cbiAgICAgICAgJHNjb3BlLmdldFByaWNlUmFuZ2UgPSBmdW5jdGlvbiAocHJpY2VHcm91cCkge1xuICAgICAgICAgICAgdmFyIHJldFZhbDtcbiAgICAgICAgICAgIHZhciBhbGxQcmljZXMgPSBfLnVuaW9uKF8ucGx1Y2socHJpY2VHcm91cC5wcmljZXMsICdsaXN0JyksIF8ucGx1Y2socHJpY2VHcm91cC5wcmljZXMsICdzYWxlJykpO1xuICAgICAgICAgICAgdmFyIG1pbnByaWNlID0gJGZpbHRlcignY3VycmVuY3knKShfLm1pbihhbGxQcmljZXMpLCAnJywgMik7XG4gICAgICAgICAgICB2YXIgbWF4cHJpY2UgPSAkZmlsdGVyKCdjdXJyZW5jeScpKF8ubWF4KGFsbFByaWNlcyksICcnLCAyKTtcbiAgICAgICAgICAgIHJldFZhbCA9IChtaW5wcmljZSA9PT0gbWF4cHJpY2UgPyBtaW5wcmljZSA6IG1pbnByaWNlICsgJy0nICsgbWF4cHJpY2UpO1xuXG4gICAgICAgICAgICAvL2Vsc2Uge1xuICAgICAgICAgICAgLy8gICAgcmV0VmFsID0gJ05PIFBSSUNFJztcbiAgICAgICAgICAgIC8vfVxuXG4gICAgICAgICAgICByZXR1cm4gcmV0VmFsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZpbHRlciA9ICRzY29wZS5maWx0ZXIgPSB7fTtcbiAgICAgICAgZmlsdGVyLmNyaXRlcmlhQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkc2NvcGUucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID4gMSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gdWktZ3JpZFxuICAgICAgICAkc2NvcGUuc2V0R3JpZE9wdGlvbnMgPSBmdW5jdGlvbiAoZ3JpZE9wdGlvbnMpIHtcbiAgICAgICAgICAgICRzY29wZS5ncmlkT3B0aW9ucyA9IGdyaWRPcHRpb25zO1xuXG4gICAgICAgICAgICBncmlkT3B0aW9ucy5vblJlZ2lzdGVyQXBpID0gZnVuY3Rpb24gKGdyaWRBcGkpIHtcbiAgICAgICAgICAgICAgICBncmlkQXBpLmNvcmUub24uc29ydENoYW5nZWQoJHNjb3BlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYmxhZGUuaXNMb2FkaW5nKSBibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBibGFkZVV0aWxzLmluaXRpYWxpemVQYWdpbmF0aW9uKCRzY29wZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy9ObyBuZWVkIHRvIGNhbGwgdGhpcyBiZWNhdXNlIHBhZ2UgJ3BhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZScgaXMgd2F0Y2hlZCEhISBJdCB3b3VsZCB0cmlnZ2VyIHN1YnNlcXVlbnQgZHVwbGljYXRlZCByZXEuLi5cbiAgICAgICAgLy9ibGFkZS5yZWZyZXNoKCk7XG4gICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZScpXG4gICAgLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljZWxpc3RMaXN0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljZWxpc3RzJywgJ3BsYXRmb3JtV2ViQXBwLmRpYWxvZ1NlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlVXRpbHMnLCAnJGxvY2FsU3RvcmFnZScsXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsIHByaWNlbGlzdHMsIGRpYWxvZ1NlcnZpY2UsIHVpR3JpZEhlbHBlciwgYmxhZGVVdGlscywgJGxvY2FsU3RvcmFnZSkge1xuICAgICAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgICAgICAgICAgdmFyIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UgPSBibGFkZVV0aWxzLmJsYWRlTmF2aWdhdGlvblNlcnZpY2U7XG5cbiAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0YVJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0VHlwZU5hbWU6ICdWaXJ0b0NvbW1lcmNlLlByaWNpbmdNb2R1bGUuRGF0YS5FeHBvcnRJbXBvcnQuRXhwb3J0YWJsZVByaWNlbGlzdCcsXG4gICAgICAgICAgICAgICAgZGF0YVF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydFR5cGVOYW1lOiAnUHJpY2VsaXN0RXhwb3J0RGF0YVF1ZXJ5J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZXhwb3J0RGF0YVJlcXVlc3QgPSBhbmd1bGFyLmNvcHkoZGVmYXVsdERhdGFSZXF1ZXN0KTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBibGFkZS5maWx0ZXIgPSAkc2NvcGUuZmlsdGVyID0ge307XG5cbiAgICAgICAgICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAocGFyZW50UmVmcmVzaCkge1xuICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByaWNlbGlzdHMuc2VhcmNoKGdldFNlYXJjaENyaXRlcmlhKCksIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXRpZXMgPSBkYXRhLnJlc3VsdHM7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MudG90YWxJdGVtcyA9IGRhdGEudG90YWxDb3VudDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50UmVmcmVzaCA9PT0gdHJ1ZSAmJiBibGFkZS5wYXJlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5wYXJlbnRSZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgICAgICB9KS4kcHJvbWlzZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5zZWxlY3ROb2RlID0gZnVuY3Rpb24gKG5vZGUsIGlzTmV3KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkTm9kZUlkID0gbm9kZS5pZDtcblxuICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdsaXN0SXRlbUNoaWxkJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljZWxpc3REZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5QcmljaW5nKS9TY3JpcHRzL2JsYWRlcy9wcmljZWxpc3QtZGV0YWlsLnRwbC5odG1sJ1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQobmV3QmxhZGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAncHJpY2luZy5ibGFkZXMucHJpY2VsaXN0LWRldGFpbC50aXRsZS1uZXcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlQ2FsbGJhY2s6IGZ1bmN0aW9uIChuZXdQcmljZWxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdCbGFkZS5pc05ldyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2godHJ1ZSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0JsYWRlLmN1cnJlbnRFbnRpdHlJZCA9IG5ld1ByaWNlbGlzdC5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uQ2hhbmdlc0NvbmZpcm1lZEZuOiBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQobmV3QmxhZGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbnRpdHlJZDogbm9kZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBub2RlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogYmxhZGUuc3VidGl0bGVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzSXRlbXNDaGVja2VkKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuZ3JpZEFwaSAmJiBfLmFueSgkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuZGVsZXRlTGlzdCA9IGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpYWxvZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IFwiY29uZmlybURlbGV0ZUl0ZW1cIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwicHJpY2luZy5kaWFsb2dzLnByaWNlbGlzdHMtZGVsZXRlLnRpdGxlXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwicHJpY2luZy5kaWFsb2dzLnByaWNlbGlzdHMtZGVsZXRlLm1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VsaXN0cy5yZW1vdmUoeyBpZHM6IF8ucGx1Y2sobGlzdCwgJ2lkJykgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmxhZGUucmVmcmVzaCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbkRpYWxvZyhkaWFsb2cpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS11c2QnO1xuICAgICAgICAgICAgYmxhZGUuc3VidGl0bGUgPSAncHJpY2luZy5ibGFkZXMucHJpY2VsaXN0LWxpc3Quc3VidGl0bGUnO1xuXG4gICAgICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnJlZnJlc2hcIiwgaWNvbjogJ2ZhIGZhLXJlZnJlc2gnLFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBibGFkZS5yZWZyZXNoLFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuYWRkXCIsIGljb246ICdmYXMgZmEtcGx1cycsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3ROb2RlKHt9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdwcmljaW5nOmNyZWF0ZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5kZWxldGVcIiwgaWNvbjogJ2ZhcyBmYS10cmFzaC1hbHQnLFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlTGlzdCgkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBpc0l0ZW1zQ2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ3ByaWNpbmc6ZGVsZXRlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmV4cG9ydFwiLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtdXBsb2FkJyxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0FsbFNlbGVjdGVkID0gJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdEFsbFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkuaXNBbGxTZWxlY3RlZCA9IGlzQWxsU2VsZWN0ZWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvd3MgPSAkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeS5vYmplY3RJZHMgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChleHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkub2JqZWN0SWRzICYmIGV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeS5vYmplY3RJZHMubGVuZ3RoKSB8fCAoIWlzQWxsU2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5Lm9iamVjdElkcyA9IF8ubWFwKHNlbGVjdGVkUm93cywgZnVuY3Rpb24gKHByaWNlbGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJpY2VsaXN0LmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkgPSBhbmd1bGFyLmV4dGVuZChleHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnksIGdldFNlYXJjaENyaXRlcmlhKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdwcmljZWxpc3RFeHBvcnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAncHJpY2luZy5ibGFkZXMuZXhwb3J0ZXIucHJpY2VMaXN0VGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAncHJpY2luZy5ibGFkZXMuZXhwb3J0ZXIucHJpY2VsaXN0U3VidGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZS5leHBvcnRTZXR0aW5nc0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuRXhwb3J0KS9TY3JpcHRzL2JsYWRlcy9leHBvcnQtc2V0dGluZ3MudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydERhdGFSZXF1ZXN0OiBleHBvcnREYXRhUmVxdWVzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEl0ZW1zQ291bnQ6IGV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeS5vYmplY3RJZHMubGVuZ3RoIHx8ICRzY29wZS5wYWdlU2V0dGluZ3MudG90YWxJdGVtc1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIGZpbHRlci5jcml0ZXJpYUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyB1aS1ncmlkXG4gICAgICAgICAgICAkc2NvcGUuc2V0R3JpZE9wdGlvbnMgPSBmdW5jdGlvbiAoZ3JpZE9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ3JpZE9wdGlvbnMgPSBncmlkT3B0aW9ucztcblxuICAgICAgICAgICAgICAgIGdyaWRPcHRpb25zLm9uUmVnaXN0ZXJBcGkgPSBmdW5jdGlvbiAoZ3JpZEFwaSkge1xuICAgICAgICAgICAgICAgICAgICBncmlkQXBpLmNvcmUub24uc29ydENoYW5nZWQoJHNjb3BlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWJsYWRlLmlzTG9hZGluZykgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgYmxhZGVVdGlscy5pbml0aWFsaXplUGFnaW5hdGlvbigkc2NvcGUpO1xuICAgICAgICAgICAgfTtcblxuXG5cbiAgICAgICAgICAgIGlmICghJGxvY2FsU3RvcmFnZS5leHBvcnRTZWFyY2hGaWx0ZXJzKSB7XG4gICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5leHBvcnRTZWFyY2hGaWx0ZXJzID0ge307XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghJGxvY2FsU3RvcmFnZS5leHBvcnRTZWFyY2hGaWx0ZXJzW2V4cG9ydERhdGFSZXF1ZXN0LmV4cG9ydFR5cGVOYW1lXSkge1xuICAgICAgICAgICAgICAgICRsb2NhbFN0b3JhZ2UuZXhwb3J0U2VhcmNoRmlsdGVyc1tleHBvcnREYXRhUmVxdWVzdC5leHBvcnRUeXBlTmFtZV0gPSBbeyBuYW1lOiAnZXhwb3J0LmJsYWRlcy5leHBvcnQtZ2VuZXJpYy12aWV3ZXIubGFiZWxzLm5ldy1maWx0ZXInIH1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuZXhwb3J0U2VhcmNoRmlsdGVycyA9ICRsb2NhbFN0b3JhZ2UuZXhwb3J0U2VhcmNoRmlsdGVyc1tleHBvcnREYXRhUmVxdWVzdC5leHBvcnRUeXBlTmFtZV07XG5cbiAgICAgICAgICAgIGlmICghJGxvY2FsU3RvcmFnZS5leHBvcnRTZWFyY2hGaWx0ZXJJZHMpIHtcbiAgICAgICAgICAgICAgICAkbG9jYWxTdG9yYWdlLmV4cG9ydFNlYXJjaEZpbHRlcklkcyA9IHt9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuZXhwb3J0U2VhcmNoRmlsdGVySWQgPSAkbG9jYWxTdG9yYWdlLmV4cG9ydFNlYXJjaEZpbHRlcklkc1tleHBvcnREYXRhUmVxdWVzdC5leHBvcnRUeXBlTmFtZV07XG5cbiAgICAgICAgICAgIGlmICgkc2NvcGUuZXhwb3J0U2VhcmNoRmlsdGVySWQpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXIuY3VycmVudCA9IF8uZmluZFdoZXJlKCRzY29wZS5leHBvcnRTZWFyY2hGaWx0ZXJzLCB7IGlkOiAkc2NvcGUuZXhwb3J0U2VhcmNoRmlsdGVySWQgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZpbHRlci5jaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5leHBvcnRTZWFyY2hGaWx0ZXJJZHNbZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWVdID0gZmlsdGVyLmN1cnJlbnQgPyBmaWx0ZXIuY3VycmVudC5pZCA6IG51bGw7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWV0YWZpZWxkc0lkID0gZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWUgKyAnRXhwb3J0RmlsdGVyJztcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmN1cnJlbnQgJiYgIWZpbHRlci5jdXJyZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0ZpbHRlckRldGFpbEJsYWRlKHsgaXNOZXc6IHRydWUsIG1ldGFmaWVsZHNJZDogbWV0YWZpZWxkc0lkLCBleHBvcnRUeXBlTmFtZTogZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWUgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKHsgaWQ6ICdleHBvcnRHZW5lcmljVmlld2VyRmlsdGVyJyB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlci5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5yZXNldFJlcXVlc3RDdXN0b21GaWx0ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlci5jcml0ZXJpYUNoYW5nZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmaWx0ZXIuZWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWV0YWZpZWxkc0lkID0gZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWUgKyAnRXhwb3J0RmlsdGVyJztcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyRGV0YWlsc1BhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZmlsdGVyLmN1cnJlbnQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFmaWVsZHNJZDogbWV0YWZpZWxkc0lkLFxuICAgICAgICAgICAgICAgICAgICBleHBvcnRUeXBlTmFtZTogZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWVcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlci5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGZpbHRlckRldGFpbHNQYXJhbXMsIHsgZGF0YTogZmlsdGVyLmN1cnJlbnQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChmaWx0ZXJEZXRhaWxzUGFyYW1zLCB7IGlzTmV3OiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJEZXRhaWxCbGFkZShmaWx0ZXJEZXRhaWxzUGFyYW1zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dGaWx0ZXJEZXRhaWxCbGFkZShibGFkZURhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAnZXhwb3J0R2VuZXJpY1ZpZXdlckZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZS5leHBvcnRHZW5lcmljVmlld2VyRmlsdGVyQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuRXhwb3J0KS9TY3JpcHRzL2JsYWRlcy9leHBvcnQtZ2VuZXJpYy12aWV3ZXItZmlsdGVyLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgb25CZWZvcmVBcHBseTogYmxhZGUucmVzZXRSZXF1ZXN0Q3VzdG9tRmlsdGVyXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChuZXdCbGFkZSwgYmxhZGVEYXRhKTtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmaWx0ZXIuY3JpdGVyaWFDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZpbHRlci5yZXNldEtleXdvcmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyLmtleXdvcmQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeS5rZXl3b3JkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYmxhZGUucmVzZXRSZXF1ZXN0Q3VzdG9tRmlsdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShleHBvcnREYXRhUmVxdWVzdCwgZGVmYXVsdERhdGFSZXF1ZXN0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U2VhcmNoQ3JpdGVyaWEoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAga2V5d29yZDogZmlsdGVyLmtleXdvcmQsXG4gICAgICAgICAgICAgICAgICAgIHNvcnQ6IHVpR3JpZEhlbHBlci5nZXRTb3J0RXhwcmVzc2lvbigkc2NvcGUpLFxuICAgICAgICAgICAgICAgICAgICBza2lwOiAoJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAtIDEpICogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgdGFrZTogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmN1cnJlbmNpZXMgPSBmaWx0ZXIuY3VycmVudC5jdXJyZW5jaWVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBhY3Rpb25zIG9uIGxvYWRcbiAgICAgICAgICAgIC8vYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJpY2VzTGlzdENvbnRyb2xsZXInLCBbJyRzY29wZScsICd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJpY2VzJywgJ3BsYXRmb3JtV2ViQXBwLm9iakNvbXBhcmVTZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJywgJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljZVZhbGlkYXRvcnNTZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLnVpLWdyaWQuZXh0ZW5zaW9uJywgZnVuY3Rpb24gKCRzY29wZSwgcHJpY2VzLCBvYmpDb21wYXJlU2VydmljZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgdWlHcmlkSGVscGVyLCBwcmljZVZhbGlkYXRvcnNTZXJ2aWNlLCBncmlkT3B0aW9uRXh0ZW5zaW9uKSB7XG4gICAgJHNjb3BlLnVpR3JpZENvbnN0YW50cyA9IHVpR3JpZEhlbHBlci51aUdyaWRDb25zdGFudHM7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgIGJsYWRlLnVwZGF0ZVBlcm1pc3Npb24gPSAncHJpY2luZzp1cGRhdGUnO1xuXG4gICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUuZGF0YS5wcm9kdWN0SWQgPSBibGFkZS5pdGVtSWQ7XG4gICAgICAgIGlmICghYmxhZGUuZGF0YS5wcmljZXMpIHtcbiAgICAgICAgICAgIGJsYWRlLmRhdGEucHJpY2VzID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBibGFkZS5jdXJyZW50RW50aXRpZXMgPSBhbmd1bGFyLmNvcHkoYmxhZGUuZGF0YS5wcmljZXMpO1xuICAgICAgICBibGFkZS5vcmlnRW50aXR5ID0gYmxhZGUuZGF0YS5wcmljZXM7XG4gICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICBwcmljZVZhbGlkYXRvcnNTZXJ2aWNlLnNldEFsbFByaWNlcyhibGFkZS5jdXJyZW50RW50aXRpZXMpO1xuICAgIH07XG5cbiAgICBibGFkZS5vbkNsb3NlID0gZnVuY3Rpb24gKGNsb3NlQ2FsbGJhY2spIHtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93Q29uZmlybWF0aW9uSWZOZWVkZWQoaXNEaXJ0eSgpLCBjYW5TYXZlKCksIGJsYWRlLCAkc2NvcGUuc2F2ZUNoYW5nZXMsIGNsb3NlQ2FsbGJhY2ssIFwicHJpY2luZy5kaWFsb2dzLnByaWNlcy1zYXZlLnRpdGxlXCIsIFwicHJpY2luZy5kaWFsb2dzLnByaWNlcy1zYXZlLm1lc3NhZ2VcIik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGlzRGlydHkoKSB7XG4gICAgICAgIHJldHVybiBibGFkZS5jdXJyZW50RW50aXRpZXMgJiYgIW9iakNvbXBhcmVTZXJ2aWNlLmVxdWFsKGJsYWRlLm9yaWdFbnRpdHksIGJsYWRlLmN1cnJlbnRFbnRpdGllcykgJiYgYmxhZGUuaGFzVXBkYXRlUGVybWlzc2lvbigpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuU2F2ZSgpIHtcbiAgICAgICAgcmV0dXJuIGlzRGlydHkoKSAmJiAkc2NvcGUuaXNWYWxpZCgpO1xuICAgIH1cblxuICAgICRzY29wZS5jYW5jZWxDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuYmxhZGVDbG9zZSgpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNWYWxpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICRzY29wZS5mb3JtU2NvcGUgJiYgJHNjb3BlLmZvcm1TY29wZS4kdmFsaWQgJiZcbiAgICAgICAgICAgICBfLmFsbChibGFkZS5jdXJyZW50RW50aXRpZXMsICRzY29wZS5pc0xpc3RQcmljZVZhbGlkKSAmJlxuICAgICAgICAgICAgIF8uYWxsKGJsYWRlLmN1cnJlbnRFbnRpdGllcywgJHNjb3BlLmlzU2FsZVByaWNlVmFsaWQpICYmXG4gICAgICAgICAgICAgXy5hbGwoYmxhZGUuY3VycmVudEVudGl0aWVzLCAkc2NvcGUuaXNVbmlxdWVRdHkpICYmXG4gICAgICAgICAgICAoYmxhZGUuY3VycmVudEVudGl0aWVzLmxlbmd0aCA9PT0gMCB8fCBfLnNvbWUoYmxhZGUuY3VycmVudEVudGl0aWVzLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5taW5RdWFudGl0eSA9PT0gMTsgfSkpO1xuICAgIH1cblxuICAgICRzY29wZS5zYXZlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICBhbmd1bGFyLmNvcHkoYmxhZGUuY3VycmVudEVudGl0aWVzLCBibGFkZS5vcmlnRW50aXR5KTtcbiAgICAgICAgaWYgKF8uYW55KGJsYWRlLmN1cnJlbnRFbnRpdGllcykpIHtcbiAgICAgICAgICAgIHByaWNlcy51cGRhdGUoeyBpZDogYmxhZGUuaXRlbUlkIH0sIGJsYWRlLmRhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJsYWRlQ2xvc2UoKTtcbiAgICAgICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7IGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsICRzY29wZS5ibGFkZSk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcHJpY2VzLnJlbW92ZSh7IHByaWNlTGlzdElkOiBibGFkZS5wcmljZUxpc3RJZCwgcHJvZHVjdElkczogW2JsYWRlLml0ZW1JZF0gfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5ibGFkZUNsb3NlKCk7XG4gICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5kZWxldGUgPSBmdW5jdGlvbiAobGlzdEl0ZW0pIHtcbiAgICAgICAgaWYgKGxpc3RJdGVtKSB7XG4gICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXRpZXMuc3BsaWNlKGJsYWRlLmN1cnJlbnRFbnRpdGllcy5pbmRleE9mKGxpc3RJdGVtKSwgMSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldEZvcm0gPSBmdW5jdGlvbiAoZm9ybSkgeyAkc2NvcGUuZm9ybVNjb3BlID0gZm9ybTsgfTtcblxuICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5zYXZlXCIsIGljb246ICdmYXMgZmEtc2F2ZScsXG4gICAgICAgICAgICBleGVjdXRlTWV0aG9kOiAkc2NvcGUuc2F2ZUNoYW5nZXMsXG4gICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBjYW5TYXZlLFxuICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnJlc2V0XCIsIGljb246ICdmYSBmYS11bmRvJyxcbiAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkoYmxhZGUub3JpZ0VudGl0eSwgYmxhZGUuY3VycmVudEVudGl0aWVzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBpc0RpcnR5LFxuICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmFkZFwiLCBpY29uOiAnZmFzIGZhLXBsdXMnLFxuICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyBhZGROZXdQcmljZShibGFkZS5jdXJyZW50RW50aXRpZXMpOyB9LFxuICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5kZWxldGVcIiwgaWNvbjogJ2ZhcyBmYS10cmFzaC1hbHQnLFxuICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSAkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCk7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHNlbGVjdGlvbiwgZnVuY3Rpb24gKGxpc3RJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdGllcy5zcGxpY2UoYmxhZGUuY3VycmVudEVudGl0aWVzLmluZGV4T2YobGlzdEl0ZW0pLCAxKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5ncmlkQXBpICYmIF8uYW55KCRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICB9XG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGFkZE5ld1ByaWNlKHRhcmdldExpc3QpIHtcbiAgICAgICAgdmFyIG5ld0VudGl0eSA9IHsgcHJvZHVjdElkOiBibGFkZS5pdGVtSWQsIGxpc3Q6ICcnLCBtaW5RdWFudGl0eTogMSwgY3VycmVuY3k6IGJsYWRlLmN1cnJlbmN5LCBwcmljZUxpc3RJZDogYmxhZGUucHJpY2VMaXN0SWQgfTtcbiAgICAgICAgdGFyZ2V0TGlzdC5wdXNoKG5ld0VudGl0eSk7XG4gICAgICAgICRzY29wZS52YWxpZGF0ZUdyaWREYXRhKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmlzTGlzdFByaWNlVmFsaWQgPSBwcmljZVZhbGlkYXRvcnNTZXJ2aWNlLmlzTGlzdFByaWNlVmFsaWQ7XG4gICAgJHNjb3BlLmlzU2FsZVByaWNlVmFsaWQgPSBwcmljZVZhbGlkYXRvcnNTZXJ2aWNlLmlzU2FsZVByaWNlVmFsaWQ7XG4gICAgJHNjb3BlLmlzVW5pcXVlUXR5ID0gcHJpY2VWYWxpZGF0b3JzU2VydmljZS5pc1VuaXF1ZVF0eTtcblxuICAgIC8vIHVpLWdyaWRcbiAgICAkc2NvcGUuc2V0R3JpZE9wdGlvbnMgPSBmdW5jdGlvbiAoZ3JpZElkLCBncmlkT3B0aW9ucykge1xuICAgICAgICBncmlkT3B0aW9ucy5vblJlZ2lzdGVyQXBpID0gZnVuY3Rpb24gKGdyaWRBcGkpIHtcbiAgICAgICAgICAgICRzY29wZS5ncmlkQXBpID0gZ3JpZEFwaTtcblxuICAgICAgICAgICAgZ3JpZEFwaS5lZGl0Lm9uLmFmdGVyQ2VsbEVkaXQoJHNjb3BlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy90byBwcm9jZXNzIHZhbGlkYXRpb24gZm9yIGFsbCByb3dzIGluIGdyaWQuXG4gICAgICAgICAgICAgICAgLy9lLmcuIGlmIHdlIGhhdmUgdHdvIHJvd3Mgd2l0aCB0aGUgc2FtZSBjb3VudCBvZiBtaW4gcXR5LCBib3RoIG9mIHRoaXMgcm93cyB3aWxsIGJlIG1hcmtlZCBhcyBlcnJvci5cbiAgICAgICAgICAgICAgICAvL3doZW4gd2UgY2hhbmdlIGRhdGEgdG8gdmFsaWQgaW4gb25lIHJvdywgYW5vdGhlciBvbmUgc2hvdWxkIGJlY2FtZSB2YWxpZCB0b28uXG4gICAgICAgICAgICAgICAgLy9tb3JlIGluZm8gYWJvdXQgdWktZ3JpZCB2YWxpZGF0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1ncmlkL2lzc3Vlcy80MTUyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZhbGlkYXRlR3JpZERhdGEoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkc2NvcGUudmFsaWRhdGVHcmlkRGF0YSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5ncmlkT3B0aW9ucyA9IGdyaWRPcHRpb25zO1xuICAgICAgICBncmlkT3B0aW9uRXh0ZW5zaW9uLnRyeUV4dGVuZEdyaWRPcHRpb25zKGdyaWRJZCwgZ3JpZE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gZ3JpZE9wdGlvbnM7XG4gICAgfTtcblxuICAgICRzY29wZS52YWxpZGF0ZUdyaWREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJHNjb3BlLmdyaWRBcGkpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChibGFkZS5jdXJyZW50RW50aXRpZXMsIGZ1bmN0aW9uIChyb3dFbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goJHNjb3BlLmdyaWRPcHRpb25zLmNvbHVtbkRlZnMsIGZ1bmN0aW9uIChjb2xEZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdyaWRBcGkuZ3JpZC52YWxpZGF0ZS5ydW5WYWxpZGF0b3JzKHJvd0VudGl0eSwgY29sRGVmLCByb3dFbnRpdHlbY29sRGVmLm5hbWVdLCB1bmRlZmluZWQsICRzY29wZS5ncmlkQXBpLmdyaWQpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkc2NvcGUuZGF0ZXBpY2tlcnMgPSB7fTtcbiAgICAkc2NvcGUub3BlbiA9IGZ1bmN0aW9uICgkZXZlbnQsIHdoaWNoKSB7XG4gICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICRzY29wZS5kYXRlcGlja2Vyc1t3aGljaF0gPSB0cnVlO1xuICAgIH07XG5cbiAgICAvLyBhY3Rpb25zIG9uIGxvYWRcbiAgICBibGFkZS5yZWZyZXNoKCk7XG59XSlcblxuLmZhY3RvcnkoJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljZVZhbGlkYXRvcnNTZXJ2aWNlJywgW2Z1bmN0aW9uICgpIHtcbiAgICB2YXIgYWxsUHJpY2VzID0ge307XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0QWxsUHJpY2VzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgYWxsUHJpY2VzID0gZGF0YTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNMaXN0UHJpY2VWYWxpZDogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhLmxpc3QgPj0gMDtcbiAgICAgICAgfSxcbiAgICAgICAgaXNTYWxlUHJpY2VWYWxpZDogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBfLmlzVW5kZWZpbmVkKGRhdGEuc2FsZSkgfHwgZGF0YS5saXN0ID49IGRhdGEuc2FsZTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNVbmlxdWVRdHk6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAvLyBEaXNhYmxlIHVuaXF1ZSBxdWFudGl0eSB0ZXN0IHdoZW4gdGltZSBmaWx0ZXJpbmcgaXMgdXNlZC5cbiAgICAgICAgICAgIGlmIChkYXRhLnN0YXJ0RGF0ZSB8fCBkYXRhLmVuZERhdGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGRhdGEubWluUXVhbnRpdHkpID4gMCAmJiBfLmFsbChhbGxQcmljZXMsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ID09PSBkYXRhIHx8IE1hdGgucm91bmQoeC5taW5RdWFudGl0eSkgIT09IE1hdGgucm91bmQoZGF0YS5taW5RdWFudGl0eSkgfHwgeC5zdGFydERhdGUgfHwgeC5FbmREYXRlOyB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNVbmlxdWVRdHlGb3JQcmljZWxpc3Q6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAvLyBEaXNhYmxlIHVuaXF1ZSBxdWFudGl0eSB0ZXN0IHdoZW4gdGltZSBmaWx0ZXJpbmcgaXMgdXNlZC5cbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGRhdGEubWluUXVhbnRpdHkpID4gMCAmJiBfLmZpbHRlcihhbGxQcmljZXMsIGZ1bmN0aW9uIChwcmljZSkgeyByZXR1cm4gcHJpY2UucHJpY2VsaXN0SWQgPT09IGRhdGEucHJpY2VsaXN0SWQgJiYgcHJpY2UubWluUXVhbnRpdHkgPT09IGRhdGEubWluUXVhbnRpdHkgJiYgIXByaWNlLnN0YXJ0RGF0ZSAmJiAhcHJpY2UuRW5kRGF0ZSAmJiAhZGF0YS5zdGFydERhdGUgJiYgIWRhdGEuZW5kRGF0ZTsgfSkubGVuZ3RoIDw9IDE7XG4gICAgICAgIH1cbiAgICB9O1xufV0pXG5cbi5ydW4oXG4gIFsncGxhdGZvcm1XZWJBcHAudWktZ3JpZC5leHRlbnNpb24nLCAndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLnByaWNlVmFsaWRhdG9yc1NlcnZpY2UnLCAndWlHcmlkVmFsaWRhdGVTZXJ2aWNlJywgZnVuY3Rpb24gKGdyaWRPcHRpb25FeHRlbnNpb24sIHByaWNlVmFsaWRhdG9yc1NlcnZpY2UsIHVpR3JpZFZhbGlkYXRlU2VydmljZSkge1xuICAgICBcbiAgICAgIHVpR3JpZFZhbGlkYXRlU2VydmljZS5zZXRWYWxpZGF0b3IoJ2xpc3RWYWxpZGF0b3InLCBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9sZFZhbHVlLCBuZXdWYWx1ZSwgcm93RW50aXR5LCBjb2xEZWYpIHtcbiAgICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIG5vdCB0ZXN0IGZvciBleGlzdGVuY2UgaGVyZVxuICAgICAgICAgICAgICByZXR1cm4gXy5pc1VuZGVmaW5lZChuZXdWYWx1ZSkgfHwgcHJpY2VWYWxpZGF0b3JzU2VydmljZS5pc0xpc3RQcmljZVZhbGlkKHJvd0VudGl0eSk7XG4gICAgICAgICAgfTtcbiAgICAgIH0sIGZ1bmN0aW9uIChhcmd1bWVudCkgeyByZXR1cm4gJ0xpc3QgcHJpY2UgaXMgaW52YWxpZCAnOyB9KTtcblxuICAgICAgdWlHcmlkVmFsaWRhdGVTZXJ2aWNlLnNldFZhbGlkYXRvcignc2FsZVZhbGlkYXRvcicsIGZ1bmN0aW9uIChhcmd1bWVudCkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob2xkVmFsdWUsIG5ld1ZhbHVlLCByb3dFbnRpdHksIGNvbERlZikge1xuICAgICAgICAgICAgICByZXR1cm4gcHJpY2VWYWxpZGF0b3JzU2VydmljZS5pc1NhbGVQcmljZVZhbGlkKHJvd0VudGl0eSk7XG4gICAgICAgICAgfTtcbiAgICAgIH0sIGZ1bmN0aW9uIChhcmd1bWVudCkgeyByZXR1cm4gJ1NhbGUgcHJpY2Ugc2hvdWxkIG5vdCBleGNlZWQgTGlzdCBwcmljZSc7IH0pO1xuXG4gICAgICB1aUdyaWRWYWxpZGF0ZVNlcnZpY2Uuc2V0VmFsaWRhdG9yKCdtaW5RdWFudGl0eVZhbGlkYXRvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9sZFZhbHVlLCBuZXdWYWx1ZSwgcm93RW50aXR5LCBjb2xEZWYpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHByaWNlVmFsaWRhdG9yc1NlcnZpY2UuaXNVbmlxdWVRdHkocm93RW50aXR5KTtcbiAgICAgICAgICB9O1xuICAgICAgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gJ1F1YW50aXR5IHZhbHVlIHNob3VsZCBiZSB1bmlxdWUnOyB9KTtcblxuICAgICAgdWlHcmlkVmFsaWRhdGVTZXJ2aWNlLnNldFZhbGlkYXRvcignbWluUXVhbnRpdHlGb3JQcmljZWxpc3RWYWxpZGF0b3InLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvbGRWYWx1ZSwgbmV3VmFsdWUsIHJvd0VudGl0eSwgY29sRGVmKSB7XG4gICAgICAgICAgICAgIHJldHVybiBwcmljZVZhbGlkYXRvcnNTZXJ2aWNlLmlzVW5pcXVlUXR5Rm9yUHJpY2VsaXN0KHJvd0VudGl0eSk7XG4gICAgICAgICAgfTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuICdRdWFudGl0eSB2YWx1ZSBzaG91bGQgYmUgdW5pcXVlJzsgfSk7XG4gIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljaW5nTWFpbkNvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xuICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IG51bGw7XG5cbiAgICBmdW5jdGlvbiBpbml0aWFsaXplQmxhZGUoKSB7XG4gICAgICAgIHZhciBlbnRpdGllcyA9IFtcbiAgICAgICAgICAgIHsgbmFtZTogJ3ByaWNpbmcuYmxhZGVzLnByaWNpbmctbWFpbi5tZW51LnByaWNlbGlzdC1saXN0LnRpdGxlJywgZW50aXR5TmFtZTogJ3ByaWNlbGlzdCcsIGljb246ICdmYSBmYS11c2QnIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdwcmljaW5nLmJsYWRlcy5wcmljaW5nLW1haW4ubWVudS5wcmljZWxpc3QtYXNzaWdubWVudC1saXN0LnRpdGxlJywgZW50aXR5TmFtZTogJ2Fzc2lnbm1lbnQnLCBpY29uOiAnZmEgZmEtYW5jaG9yJyB9XTtcbiAgICAgICAgJHNjb3BlLmJsYWRlLmN1cnJlbnRFbnRpdGllcyA9IGVudGl0aWVzO1xuICAgICAgICAkc2NvcGUuYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgJHNjb3BlLmJsYWRlLm9wZW5CbGFkZShlbnRpdGllc1swXSk7XG4gICAgfTtcblxuICAgICRzY29wZS5ibGFkZS5vcGVuQmxhZGUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBkYXRhLmVudGl0eU5hbWU7XG5cbiAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgaWQ6ICdwcmljaW5nTGlzdCcsXG4gICAgICAgICAgICB0aXRsZTogZGF0YS5uYW1lLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS4nKyBkYXRhLmVudGl0eU5hbWUgKyAnTGlzdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5QcmljaW5nKS9TY3JpcHRzL2JsYWRlcy8nICsgZGF0YS5lbnRpdHlOYW1lICsgJy1saXN0LnRwbC5odG1sJ1xuICAgICAgICB9O1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgJHNjb3BlLmJsYWRlKTtcbiAgICB9XG5cbiAgICAkc2NvcGUuYmxhZGUuaGVhZEljb24gPSAnZmEgZmEtdXNkJztcblxuICAgIGluaXRpYWxpemVCbGFkZSgpO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLml0ZW1QcmljZWxpc3RzTGlzdENvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3VpR3JpZENvbnN0YW50cycsICd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJpY2VzJywgJ3ZpcnRvQ29tbWVyY2UuY2F0YWxvZ01vZHVsZS5jYXRhbG9ncycsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIHVpR3JpZENvbnN0YW50cywgcHJpY2VzLCBjYXRhbG9ncykge1xuICAgICRzY29wZS51aUdyaWRDb25zdGFudHMgPSB1aUdyaWRDb25zdGFudHM7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuXG4gICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICBcdGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgXHRwcmljZXMuZ2V0UHJvZHVjdFByaWNlbGlzdHMoeyBpZDogYmxhZGUuaXRlbUlkIH0sIGZ1bmN0aW9uIChwcmljZWxpc3RzKSB7XG4gICAgXHQgICAgLy9Mb2FkaW5nIGNhdGFsb2dzIGZvciBwcmljZWxpc3RzIGJlY2F1c2UgdGhleSBkbyBub3QgY29udGFpbnMgdGhlbVxuICAgIFx0ICAgIC8vTmVlZCB0byBkaXNwbGF5IG5hbWUgb2YgY2F0YWxvZyBpbiBwcm9kdWN0IGl0ZW0gcHJpY2VsaXN0cyBncmlkXG4gICAgICAgICAgICBjYXRhbG9ncy5zZWFyY2goeyB0YWtlOiAxMDAwLCByZXNwb25zZUdyb3VwOiAnSW5mbycgfSwgZnVuY3Rpb24gKGNhdGFsb2dzTGlzdCkge1xuICAgIFx0ICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICBcdCAgICAgICAgYmxhZGUuY3VycmVudEVudGl0aWVzID0gW107XG4gICAgXHQgICAgICAgIF8uZWFjaChwcmljZWxpc3RzLCBmdW5jdGlvbiAoeCkge1xuICAgIFx0ICAgICAgICAgICAgaWYgKHgucHJpY2VzLmxlbmd0aCA+IDApIHtcbiAgICBcdCAgICAgICAgICAgICAgICB2YXIgcHJpY2VsaXN0ID0ge1xuICAgIFx0ICAgICAgICAgICAgICAgICAgICBwcmlvcml0eTogXy5tYXgoeC5hc3NpZ25tZW50cywgZnVuY3Rpb24gKGFzc2lnbm1lbnQpIHsgcmV0dXJuIGFzc2lnbm1lbnQucHJpb3JpdHk7IH0pLnByaW9yaXR5XG4gICAgXHQgICAgICAgICAgICAgICAgfTtcbiAgICBcdCAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChwcmljZWxpc3QsIHgpO1xuICAgIFx0ICAgICAgICAgICAgICAgIHByaWNlbGlzdC5hc3NpZ25tZW50cyA9IFt4LmFzc2lnbm1lbnRdO1xuXG4gICAgXHQgICAgICAgICAgICAgICAgdmFyIGNhdGFsb2dzSWQgPSBfLnBsdWNrKHguYXNzaWdubWVudHMsICdjYXRhbG9nSWQnKTtcbiAgICBcdCAgICAgICAgICAgICAgICB2YXIgY2F0YWxvZ3NOYW1lID0gXy5tYXAoY2F0YWxvZ3NJZCwgZnVuY3Rpb24gKGNhdGFsb2dJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfLmZpbmRXaGVyZShjYXRhbG9nc0xpc3QucmVzdWx0cywgeyBpZDogY2F0YWxvZ0lkIH0pLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICBcdCAgICAgICAgICAgICAgICBwcmljZWxpc3QuY2F0YWxvZyA9IGNhdGFsb2dzTmFtZS5qb2luKCcsICcpO1xuICAgIFx0ICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdGllcy5wdXNoKHByaWNlbGlzdCk7XG4gICAgXHQgICAgICAgICAgICB9XG4gICAgXHQgICAgICAgIH0pO1xuICAgIFx0ICAgIH0pO1xuXG4gICAgXHRcdGlmICghcHJpY2VsaXN0cy5sZW5ndGgpIHtcbiAgICBcdFx0XHR2YXIgbmV3UHJpY2VsaXN0QmxhZGUgPSB7XG4gICAgXHRcdFx0XHRpZDogJ25ld1ByaWNlbGlzdCcsXG4gICAgXHRcdFx0XHRjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLnByaWNlbGlzdERldGFpbENvbnRyb2xsZXInLFxuICAgIFx0XHRcdFx0dGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5QcmljaW5nKS9TY3JpcHRzL2JsYWRlcy9wcmljZWxpc3QtZGV0YWlsLnRwbC5odG1sJyxcbiAgICBcdFx0XHRcdHRpdGxlOiAncHJpY2luZy5ibGFkZXMucHJpY2VsaXN0LWRldGFpbC50aXRsZS1uZXcnLFxuICAgIFx0XHRcdFx0aXNOZXc6IHRydWUsXG4gICAgXHRcdFx0XHRzYXZlQ2FsbGJhY2s6IGZ1bmN0aW9uIChwcmljZWxpc3QpIHtcbiAgICBcdFx0XHRcdFx0YmxhZGUucmVmcmVzaCgpO1xuICAgIFx0XHRcdFx0fVxuICAgIFx0XHRcdH07XG4gICAgXHRcdFx0YmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3UHJpY2VsaXN0QmxhZGUsIGJsYWRlKTtcbiAgICBcdFx0fVxuICAgIFx0fSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLm9wZW5CbGFkZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IGRhdGEuaWQ7XG5cbiAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgaWQ6IFwiaXRlbVByaWNlc1wiLFxuICAgICAgICAgICAgaXRlbUlkOiBibGFkZS5pdGVtSWQsXG4gICAgICAgICAgICBwcmljZUxpc3RJZDogZGF0YS5pZCxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICBjdXJyZW5jeTogZGF0YS5jdXJyZW5jeSxcbiAgICAgICAgICAgIHRpdGxlOiBkYXRhLm5hbWUsXG4gICAgICAgICAgICBzdWJ0aXRsZTogJ3ByaWNpbmcuYmxhZGVzLnByaWNlcy1saXN0LnN1YnRpdGxlJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJpY2VzTGlzdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5QcmljaW5nKS9TY3JpcHRzL2JsYWRlcy9wcmljZXMtbGlzdC50cGwuaHRtbCdcbiAgICAgICAgfTtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICB9XG5cbiAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS11c2QnO1xuICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZWZyZXNoXCIsIGljb246ICdmYSBmYS1yZWZyZXNoJyxcbiAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGJsYWRlLnJlZnJlc2gsXG4gICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cdFxuICAgIF07XG5cbiAgICAvLyB1aS1ncmlkXG4gICAgJHNjb3BlLnNldEdyaWRPcHRpb25zID0gZnVuY3Rpb24gKGdyaWRPcHRpb25zKSB7XG4gICAgICAgICRzY29wZS5ncmlkT3B0aW9ucyA9IGdyaWRPcHRpb25zO1xuICAgIH07XG5cbiAgICBibGFkZS5yZWZyZXNoKCk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlJylcbiAgICAuY29udHJvbGxlcigndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLml0ZW1QcmljZUxpc3RDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICd1aUdyaWRDb25zdGFudHMnLCAndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLnByaWNlcycsICd2aXJ0b0NvbW1lcmNlLmNhdGFsb2dNb2R1bGUuY2F0YWxvZ3MnLCAndmlydG9Db21tZXJjZS5zdG9yZU1vZHVsZS5zdG9yZXMnLCAncGxhdGZvcm1XZWJBcHAudWktZ3JpZC5leHRlbnNpb24nLCAncGxhdGZvcm1XZWJBcHAub2JqQ29tcGFyZVNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLnByaWNlVmFsaWRhdG9yc1NlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAuZGlhbG9nU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIHVpR3JpZENvbnN0YW50cywgcHJpY2VzLCBjYXRhbG9ncywgc3RvcmVzLCBncmlkT3B0aW9uRXh0ZW5zaW9uLCBvYmpDb21wYXJlU2VydmljZSwgcHJpY2VWYWxpZGF0b3JzU2VydmljZSwgZGlhbG9nU2VydmljZSkge1xuICAgICAgICAkc2NvcGUudWlHcmlkQ29uc3RhbnRzID0gdWlHcmlkQ29uc3RhbnRzO1xuICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgICAgIGJsYWRlLnVwZGF0ZVBlcm1pc3Npb24gPSAncHJpY2luZzp1cGRhdGUnO1xuXG4gICAgICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICBwcmljZXMuZ2V0UHJvZHVjdFByaWNlbGlzdHMoeyBpZDogYmxhZGUuaXRlbUlkIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHByaWNlbGlzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9Mb2FkaW5nIGNhdGFsb2dzIGZvciBhc3NpZ25tZW50cyBiZWNhdXNlIHRoZXkgZG8gbm90IGNvbnRhaW5zIHRoZW1cbiAgICAgICAgICAgICAgICAgICAgLy9OZWVkIHRvIGRpc3BsYXkgbmFtZSBvZiBjYXRhbG9nIGluIGFzc2lnbm1lbnRzIGdyaWRcbiAgICAgICAgICAgICAgICAgICAgY2F0YWxvZ3Muc2VhcmNoKHsgdGFrZTogMTAwMCwgcmVzcG9uc2VHcm91cDogJ0luZm8nIH0sIGZ1bmN0aW9uIChjYXRhbG9nRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVzLnNlYXJjaCh7IHRha2U6IDEwMDAsIHJlc3BvbnNlR3JvdXA6ICdTdG9yZUluZm8nIH0sIGZ1bmN0aW9uIChzdG9yZURhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2F0YWxvZ3NMaXN0ID0gY2F0YWxvZ0RhdGEucmVzdWx0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3RvcmVMaXN0ID0gc3RvcmVEYXRhLnJlc3VsdHM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5vcmlnRW50aXR5ID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0NvbGxlY3QgYWxsIGF2YWlsYWJsZSBwcmljZWxpc3RzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucHJpY2VsaXN0TGlzdCA9IF8ubWFwKHByaWNlbGlzdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChwcmljZWxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHByaWNlbGlzdC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBwcmljZWxpc3QubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeTogcHJpY2VsaXN0LmN1cnJlbmN5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRzOiBwcmljZWxpc3QuYXNzaWdubWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHByaWNlbGlzdC5uYW1lICsgJyAtICcgKyBwcmljZWxpc3QuY3VycmVuY3lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnNlbGVjdGVkUHJpY2VsaXN0ID0gXy5maXJzdChibGFkZS5wcmljZWxpc3RMaXN0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmljZWxpc3RzV2l0aFByaWNlcyA9IF8uZmlsdGVyKHByaWNlbGlzdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChwcmljZWxpc3QpIHsgcmV0dXJuIHByaWNlbGlzdC5wcmljZXMubGVuZ3RoID4gMDsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHByaWNlbGlzdHNXaXRoUHJpY2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAocHJpY2VsaXN0V2l0aFByaWNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByaWNlTGlzdERhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcHJpY2VsaXN0V2l0aFByaWNlcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBwcmljZWxpc3RXaXRoUHJpY2VzLmN1cnJlbmN5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2F0YWxvZ3NJZCA9IF8ucGx1Y2soXy5maWx0ZXIocHJpY2VsaXN0V2l0aFByaWNlcy5hc3NpZ25tZW50cywgZnVuY3Rpb24gKGFzc2lnbmVtbnQpIHsgcmV0dXJuIGFzc2lnbmVtbnQuY2F0YWxvZ0lkIH0pLCAnY2F0YWxvZ0lkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2F0YWxvZ3NOYW1lID0gXy5tYXAoY2F0YWxvZ3NJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoY2F0YWxvZ0lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXRhbG9nID0gXy5maW5kV2hlcmUoJHNjb3BlLmNhdGFsb2dzTGlzdCwgeyBpZDogY2F0YWxvZ0lkIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2F0YWxvZyA/IGNhdGFsb2cubmFtZSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZUxpc3REYXRhLmNhdGFsb2cgPSBjYXRhbG9nc05hbWUuam9pbignLCAnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlSWRzID0gXy5wbHVjayhfLmZpbHRlcihwcmljZWxpc3RXaXRoUHJpY2VzLmFzc2lnbm1lbnRzLCBmdW5jdGlvbiAoYXNzaWduZW1udCkgeyByZXR1cm4gYXNzaWduZW1udC5zdG9yZUlkIH0pLCAnc3RvcmVJZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlTmFtZSA9IF8ubWFwKHN0b3JlSWRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChzdG9yZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IF8uZmluZFdoZXJlKCRzY29wZS5zdG9yZUxpc3QsIHsgaWQ6IHN0b3JlSWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZSA/IHN0b3JlLm5hbWUgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VMaXN0RGF0YS5zdG9yZSA9IHN0b3JlTmFtZS5qb2luKCcsICcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmVhY2gocHJpY2VsaXN0V2l0aFByaWNlcy5wcmljZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHByaWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmljZURhdGEgPSBhbmd1bGFyLmNvcHkocHJpY2VMaXN0RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlRGF0YSA9IGFuZ3VsYXIuZXh0ZW5kKHByaWNlLCBwcmljZURhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5vcmlnRW50aXR5LnB1c2gocHJpY2VEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXRpZXMgPSBhbmd1bGFyLmNvcHkoYmxhZGUub3JpZ0VudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VWYWxpZGF0b3JzU2VydmljZS5zZXRBbGxQcmljZXMoYmxhZGUuY3VycmVudEVudGl0aWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5jcmVhdGVOZXdQcmljZWxpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6ICdwcmljaW5nTGlzdCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljZWxpc3RMaXN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5QcmljaW5nKS9TY3JpcHRzL2JsYWRlcy9wcmljZWxpc3QtbGlzdC50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdwcmljaW5nLmJsYWRlcy5wcmljaW5nLW1haW4ubWVudS5wcmljZWxpc3QtbGlzdC50aXRsZScsXG4gICAgICAgICAgICAgICAgcGFyZW50UmVmcmVzaDogYmxhZGUucmVmcmVzaFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2VsZWN0UHJpY2VsaXN0ID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgIGlkOiAnbGlzdEl0ZW1DaGlsZCcsXG4gICAgICAgICAgICAgICAgY3VycmVudEVudGl0eUlkOiBlbnRpdHkucHJpY2VsaXN0SWQsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGVudGl0eS5uYW1lLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJpY2VsaXN0RGV0YWlsQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5QcmljaW5nKS9TY3JpcHRzL2JsYWRlcy9wcmljZWxpc3QtZGV0YWlsLnRwbC5odG1sJ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBibGFkZS5vbkNsb3NlID0gZnVuY3Rpb24gKGNsb3NlQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbklmTmVlZGVkKGlzRGlydHkoKSwgY2FuU2F2ZSgpLCBibGFkZSwgJHNjb3BlLnNhdmVDaGFuZ2VzLCBjbG9zZUNhbGxiYWNrLCBcInByaWNpbmcuZGlhbG9ncy5wcmljZXMtc2F2ZS50aXRsZVwiLCBcInByaWNpbmcuZGlhbG9ncy5wcmljZXMtc2F2ZS5tZXNzYWdlXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzRGlydHkoKSB7XG4gICAgICAgICAgICByZXR1cm4gYmxhZGUuY3VycmVudEVudGl0aWVzICYmICFvYmpDb21wYXJlU2VydmljZS5lcXVhbChibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXRpZXMpICYmIGJsYWRlLmhhc1VwZGF0ZVBlcm1pc3Npb24oKVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2FuU2F2ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0RpcnR5KCkgJiYgJHNjb3BlLmlzVmFsaWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5pc1ZhbGlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRzY29wZS5mb3JtU2NvcGUgJiYgJHNjb3BlLmZvcm1TY29wZS4kdmFsaWQgJiZcbiAgICAgICAgICAgICAgICAgXy5hbGwoYmxhZGUuY3VycmVudEVudGl0aWVzLCAkc2NvcGUuaXNMaXN0UHJpY2VWYWxpZCkgJiZcbiAgICAgICAgICAgICAgICAgXy5hbGwoYmxhZGUuY3VycmVudEVudGl0aWVzLCAkc2NvcGUuaXNTYWxlUHJpY2VWYWxpZCkgJiZcbiAgICAgICAgICAgICAgICAgXy5hbGwoYmxhZGUuY3VycmVudEVudGl0aWVzLCAkc2NvcGUuaXNVbmlxdWVRdHlGb3JQcmljZWxpc3QpICYmXG4gICAgICAgICAgICAgICAgKGJsYWRlLmN1cnJlbnRFbnRpdGllcy5sZW5ndGggPT0gMCB8fCBfLnNvbWUoYmxhZGUuY3VycmVudEVudGl0aWVzLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5taW5RdWFudGl0eSA9PSAxOyB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmNvcHkoYmxhZGUuY3VycmVudEVudGl0aWVzLCBibGFkZS5vcmlnRW50aXR5KTtcbiAgICAgICAgICAgIGlmIChfLmFueShibGFkZS5jdXJyZW50RW50aXRpZXMpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RQcmljZXMgPSAge1xuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0SWQ6IGJsYWRlLml0ZW1JZCxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogYmxhZGUuaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgcHJpY2VzOiBibGFkZS5jdXJyZW50RW50aXRpZXNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHByaWNlcy51cGRhdGUoeyBpZDogYmxhZGUuaXRlbUlkIH0sIHByb2R1Y3RQcmljZXMsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCAkc2NvcGUuYmxhZGUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7ICRzY29wZS5mb3JtU2NvcGUgPSBmb3JtOyB9XG5cbiAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuc2F2ZVwiLFxuICAgICAgICAgICAgICAgIGljb246ICdmYXMgZmEtc2F2ZScsXG4gICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogJHNjb3BlLnNhdmVDaGFuZ2VzLFxuICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGNhblNhdmUsXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmRlbGV0ZVwiLFxuICAgICAgICAgICAgICAgIGljb246ICdmYXMgZmEtdHJhc2gtYWx0JyxcbiAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSAkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZHMgPSBfLm1hcChzZWxlY3Rpb24sIGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpdGVtLmlkOyB9KTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiY29uZmlybURlbGV0ZUl0ZW1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcInByaWNpbmcuZGlhbG9ncy5pdGVtLXByaWNlcy1kZWxldGUudGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwicHJpY2luZy5kaWFsb2dzLml0ZW0tcHJpY2VzLWRlbGV0ZS5tZXNzYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VzLnJlbW92ZVByaWNlKHsgcHJpY2VJZHM6IGlkcyB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2JsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzZWxlY3Rpb24sIGZ1bmN0aW9uIChsaXN0SXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdGllcy5zcGxpY2UoYmxhZGUuY3VycmVudEVudGl0aWVzLmluZGV4T2YobGlzdEl0ZW0pLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbkRpYWxvZyhkaWFsb2cpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmdyaWRBcGkgJiYgXy5hbnkoJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdwcmljaW5nOmRlbGV0ZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZWZyZXNoXCIsXG4gICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLXJlZnJlc2gnLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGJsYWRlLnJlZnJlc2gsXG4gICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIGJsYWRlLmFkZE5ld1ByaWNlID0gZnVuY3Rpb24gKHRhcmdldFByaWNlbGlzdCkge1xuICAgICAgICAgICAgLy9wb3B1bGF0ZSBwcmljZXMgZGF0YSBmb3IgY29ycmVjdCB3b3JrIG9mIHZhbGlkYXRpb24gc2VydmljZVxuICAgICAgICAgICAgcHJpY2VWYWxpZGF0b3JzU2VydmljZS5zZXRBbGxQcmljZXMoYmxhZGUuY3VycmVudEVudGl0aWVzKTtcblxuICAgICAgICAgICAgdmFyIGNhdGFsb2dzSWQgPSBfLnBsdWNrKHRhcmdldFByaWNlbGlzdC5hc3NpZ25tZW50cywgJ2NhdGFsb2dJZCcpO1xuICAgICAgICAgICAgdmFyIGNhdGFsb2dzTmFtZSA9IF8ubWFwKGNhdGFsb2dzSWQsIGZ1bmN0aW9uIChjYXRhbG9nSWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2F0YWxvZyA9IF8uZmluZFdoZXJlKCRzY29wZS5jYXRhbG9nc0xpc3QsIHsgaWQ6IGNhdGFsb2dJZCB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2F0YWxvZyA/IGNhdGFsb2cubmFtZSA6IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhdGFsb2dzTmFtZSA9IF8uZmlsdGVyKGNhdGFsb2dzTmFtZSwgZnVuY3Rpb24gKGNhdGFsb2dOYW1lKSB7IHJldHVybiBjYXRhbG9nTmFtZSAhPT0gbnVsbDsgfSk7XG5cbiAgICAgICAgICAgIHZhciBzdG9yZXNJZCA9IF8ucGx1Y2sodGFyZ2V0UHJpY2VsaXN0LmFzc2lnbm1lbnRzLCAnc3RvcmVJZCcpO1xuICAgICAgICAgICAgdmFyIHN0b3Jlc05hbWUgPSBfLm1hcChzdG9yZXNJZCwgZnVuY3Rpb24gKHN0b3JlSWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSBfLmZpbmRXaGVyZSgkc2NvcGUuc3RvcmVMaXN0LCB7IGlkOiBzdG9yZUlkIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZSA/IHN0b3JlLm5hbWUgOiBudWxsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdG9yZXNOYW1lID0gXy5maWx0ZXIoc3RvcmVzTmFtZSwgZnVuY3Rpb24gKHN0b3JlTmFtZSkgeyByZXR1cm4gc3RvcmVOYW1lICE9PSBudWxsOyB9KTtcblxuICAgICAgICAgICAgdmFyIG5ld1ByaWNlID0ge1xuICAgICAgICAgICAgICAgIHByb2R1Y3RJZDogYmxhZGUuaXRlbUlkLFxuICAgICAgICAgICAgICAgIGxpc3Q6ICcnLFxuICAgICAgICAgICAgICAgIG1pblF1YW50aXR5OiAxLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiB0YXJnZXRQcmljZWxpc3QuY3VycmVuY3ksXG4gICAgICAgICAgICAgICAgcHJpY2VsaXN0SWQ6IHRhcmdldFByaWNlbGlzdC5pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiB0YXJnZXRQcmljZWxpc3QuY29kZSxcbiAgICAgICAgICAgICAgICBjYXRhbG9nOiBjYXRhbG9nc05hbWUuam9pbignLCAnKSxcbiAgICAgICAgICAgICAgICBzdG9yZTogc3RvcmVzTmFtZS5qb2luKCcsICcpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0aWVzLnB1c2gobmV3UHJpY2UpO1xuICAgICAgICAgICAgJHNjb3BlLnZhbGlkYXRlR3JpZERhdGEoKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5pc0xpc3RQcmljZVZhbGlkID0gcHJpY2VWYWxpZGF0b3JzU2VydmljZS5pc0xpc3RQcmljZVZhbGlkO1xuICAgICAgICAkc2NvcGUuaXNTYWxlUHJpY2VWYWxpZCA9IHByaWNlVmFsaWRhdG9yc1NlcnZpY2UuaXNTYWxlUHJpY2VWYWxpZDtcbiAgICAgICAgJHNjb3BlLmlzVW5pcXVlUXR5Rm9yUHJpY2VsaXN0ID0gcHJpY2VWYWxpZGF0b3JzU2VydmljZS5pc1VuaXF1ZVF0eUZvclByaWNlbGlzdDtcblxuICAgICAgICAvLyB1aS1ncmlkXG4gICAgICAgICRzY29wZS5zZXRHcmlkT3B0aW9ucyA9IGZ1bmN0aW9uIChncmlkSWQsIGdyaWRPcHRpb25zKSB7XG4gICAgICAgICAgICBncmlkT3B0aW9ucy5vblJlZ2lzdGVyQXBpID0gZnVuY3Rpb24gKGdyaWRBcGkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ3JpZEFwaSA9IGdyaWRBcGk7XG5cbiAgICAgICAgICAgICAgICBncmlkQXBpLmVkaXQub24uYWZ0ZXJDZWxsRWRpdCgkc2NvcGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy90byBwcm9jZXNzIHZhbGlkYXRpb24gZm9yIGFsbCByb3dzIGluIGdyaWQuXG4gICAgICAgICAgICAgICAgICAgIC8vZS5nLiBpZiB3ZSBoYXZlIHR3byByb3dzIHdpdGggdGhlIHNhbWUgY291bnQgb2YgbWluIHF0eSwgYm90aCBvZiB0aGlzIHJvd3Mgd2lsbCBiZSBtYXJrZWQgYXMgZXJyb3IuXG4gICAgICAgICAgICAgICAgICAgIC8vd2hlbiB3ZSBjaGFuZ2UgZGF0YSB0byB2YWxpZCBpbiBvbmUgcm93LCBhbm90aGVyIG9uZSBzaG91bGQgYmVjYW1lIHZhbGlkIHRvby5cbiAgICAgICAgICAgICAgICAgICAgLy9tb3JlIGluZm8gYWJvdXQgdWktZ3JpZCB2YWxpZGF0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1ncmlkL2lzc3Vlcy80MTUyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS52YWxpZGF0ZUdyaWREYXRhKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUudmFsaWRhdGVHcmlkRGF0YSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLmdyaWRPcHRpb25zID0gZ3JpZE9wdGlvbnM7XG4gICAgICAgICAgICBncmlkT3B0aW9uRXh0ZW5zaW9uLnRyeUV4dGVuZEdyaWRPcHRpb25zKGdyaWRJZCwgZ3JpZE9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIGdyaWRPcHRpb25zO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS52YWxpZGF0ZUdyaWREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5ncmlkQXBpKSB7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGJsYWRlLmN1cnJlbnRFbnRpdGllcywgZnVuY3Rpb24gKHJvd0VudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goJHNjb3BlLmdyaWRPcHRpb25zLmNvbHVtbkRlZnMsIGZ1bmN0aW9uIChjb2xEZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5ncmlkQXBpLmdyaWQudmFsaWRhdGUucnVuVmFsaWRhdG9ycyhyb3dFbnRpdHksIGNvbERlZiwgcm93RW50aXR5W2NvbERlZi5uYW1lXSwgdW5kZWZpbmVkLCAkc2NvcGUuZ3JpZEFwaS5ncmlkKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZGF0ZXBpY2tlcnMgPSB7fTtcbiAgICAgICAgJHNjb3BlLm9wZW4gPSBmdW5jdGlvbiAoJGV2ZW50LCB3aGljaCkge1xuICAgICAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAkc2NvcGUuZGF0ZXBpY2tlcnNbd2hpY2hdID0gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICBibGFkZS5yZWZyZXNoKCk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlJylcbiAgICAuZmFjdG9yeSgndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLnByaWNlcycsIFsnJHJlc291cmNlJywgZnVuY3Rpb24gKCRyZXNvdXJjZSkge1xuICAgICAgICByZXR1cm4gJHJlc291cmNlKCdhcGkvcHJvZHVjdHMvOmlkL3ByaWNlcycsIHsgaWQ6ICdASWQnLCBjYXRhbG9nSWQ6ICdAY2F0YWxvZ0lkJyB9LCB7XG4gICAgICAgICAgICBzZWFyY2g6IHsgdXJsOiAnYXBpL2NhdGFsb2cvcHJvZHVjdHMvcHJpY2VzL3NlYXJjaCcgfSxcbiAgICAgICAgICAgIGdldFByb2R1Y3RQcmljZXM6IHsgaXNBcnJheTogdHJ1ZSB9LCAvLyBpcyBhbHNvIHVzZWQgaW4gb3RoZXIgbW9kdWxlc1xuICAgICAgICAgICAgZ2V0UHJvZHVjdFByaWNlc0ZvcldpZGdldDogeyB1cmw6ICdhcGkvcHJvZHVjdHMvOmlkLzpjYXRhbG9nSWQvcHJpY2VzV2lkZ2V0JywgaXNBcnJheTogdHJ1ZSB9LFxuICAgICAgICAgICAgZ2V0UHJvZHVjdFByaWNlbGlzdHM6IHsgdXJsOiAnYXBpL2NhdGFsb2cvcHJvZHVjdHMvOmlkL3ByaWNlbGlzdHMnLCBpc0FycmF5OiB0cnVlIH0sXG4gICAgICAgICAgICB1cGRhdGU6IHsgbWV0aG9kOiAnUFVUJyB9LFxuICAgICAgICAgICAgcmVtb3ZlOiB7IG1ldGhvZDogJ0RFTEVURScsIHVybDogJ2FwaS9wcmljaW5nL3ByaWNlbGlzdHMvOnByaWNlTGlzdElkL3Byb2R1Y3RzL3ByaWNlcycgfSxcbiAgICAgICAgICAgIHJlbW92ZVByaWNlOiB7IG1ldGhvZDogJ0RFTEVURScsIHVybDogJ2FwaS9wcmljaW5nL3Byb2R1Y3RzL3ByaWNlcycgfVxuICAgICAgICB9KTtcbiAgICB9XSlcbiAgICAuZmFjdG9yeSgndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLnByaWNlbGlzdHMnLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgnYXBpL3ByaWNpbmcvcHJpY2VsaXN0cy86aWQnLCB7fSwge1xuICAgICAgICAgICAgc2VhcmNoOiB7IHVybDogJ2FwaS9wcmljaW5nL3ByaWNlbGlzdHMnIH0sXG4gICAgICAgICAgICB1cGRhdGU6IHsgbWV0aG9kOiAnUFVUJyB9XG4gICAgICAgIH0pO1xuICAgIH1dKVxuICAgIC5mYWN0b3J5KCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJpY2VsaXN0QXNzaWdubWVudHMnLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgnYXBpL3ByaWNpbmcvYXNzaWdubWVudHMvOmlkJywgeyBpZDogJ0BJZCcgfSwge1xuICAgICAgICAgICAgc2VhcmNoOiB7IHVybDogJ2FwaS9wcmljaW5nL2Fzc2lnbm1lbnRzJyB9LFxuICAgICAgICAgICAgZ2V0TmV3OiB7IHVybDogJ2FwaS9wcmljaW5nL2Fzc2lnbm1lbnRzL25ldycgfSxcbiAgICAgICAgICAgIHVwZGF0ZTogeyBtZXRob2Q6ICdQVVQnIH0sXG4gICAgICAgICAgICByZW1vdmVGaWx0ZXJlZDogeyBtZXRob2Q6ICdERUxFVEUnLCB1cmw6ICdhcGkvcHJpY2luZy9maWx0ZXJlZEFzc2lnbm1lbnRzJyB9XG4gICAgICAgIH0pO1xuICAgIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUnKVxuICAgIC5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUuY2F0YWxvZ1NlbGVjdG9yQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3ZpcnRvQ29tbWVyY2UuY2F0YWxvZ01vZHVsZS5jYXRhbG9ncycsIGZ1bmN0aW9uICgkc2NvcGUsIGNhdGFsb2dzKSB7XG4gICAgICAgIGNhdGFsb2dzLnNlYXJjaCh7IHRha2U6IDEwMDAgfSwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgJHNjb3BlLmNhdGFsb2dzID0gYW5ndWxhci5jb3B5KHJlc3VsdC5yZXN1bHRzKTtcbiAgICAgICAgfSk7XG4gICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZScpXG4gICAgLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5jdXJyZW5jeVNlbGVjdG9yQ29udHJvbGxlcicsXG4gICAgICAgIFtcbiAgICAgICAgICAgICckc2NvcGUnLCAndmlydG9Db21tZXJjZS5jb3JlTW9kdWxlLmN1cnJlbmN5LmN1cnJlbmN5VXRpbHMnLFxuICAgICAgICAgICAgZnVuY3Rpb24oJHNjb3BlLCBjdXJyZW5jeVV0aWxzKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbmNpZXMgPSBjdXJyZW5jeVV0aWxzLmdldEN1cnJlbmNpZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJpY2VsaXN0U2VsZWN0b3JDb250cm9sbGVyJywgWyckc2NvcGUnLCAndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLnByaWNlbGlzdHMnLCBmdW5jdGlvbiAoJHNjb3BlLCBwcmljZWxpc3RzKSB7XG4gICAgcHJpY2VsaXN0cy5zZWFyY2goeyB0YWtlOiAxMDAwIH0sIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICBcdCRzY29wZS5wcmljZWxpc3RzID0gcmVzdWx0LnJlc3VsdHM7XG4gICAgfSk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJvZHVjdFNlbGVjdG9yQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuXG4gICAgJHNjb3BlLnNlbGVjdGVkQ291bnQgPSAoYmxhZGUuY3VycmVudEVudGl0eS5wcm9kdWN0SWRzIHx8IFtdKS5sZW5ndGg7XG4gICAgXG4gICAgJHNjb3BlLnNlbGVjdFByb2R1Y3RzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZWN0aW9uID0gYmxhZGUuY3VycmVudEVudGl0eS5wcm9kdWN0SWRzIHx8IFtdO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGFsbG93Q2hlY2tpbmdDYXRlZ29yeTogZmFsc2UsXG4gICAgICAgICAgICBzZWxlY3RlZEl0ZW1JZHM6IHNlbGVjdGlvbixcbiAgICAgICAgICAgIGNoZWNrSXRlbUZuOiBmdW5jdGlvbiAobGlzdEl0ZW0sIGlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV8uZmluZChzZWxlY3Rpb24sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkID09IGxpc3RJdGVtLmlkOyB9KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uLnB1c2gobGlzdEl0ZW0uaWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb24gPSBfLnJlamVjdChzZWxlY3Rpb24sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkID09IGxpc3RJdGVtLmlkOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgIGlkOiBcIkNhdGFsb2dJdGVtc1NlbGVjdFwiLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuY2F0YWxvZ01vZHVsZS5jYXRhbG9nSXRlbVNlbGVjdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5DYXRhbG9nKS9TY3JpcHRzL2JsYWRlcy9jb21tb24vY2F0YWxvZy1pdGVtcy1zZWxlY3QudHBsLmh0bWwnLFxuICAgICAgICAgICAgdGl0bGU6ICdwcmljaW5nLnNlbGVjdG9ycy5ibGFkZXMudGl0bGVzLnNlbGVjdC1wcm9kdWN0cycsXG4gICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgICAgICAgYnJlYWRjcnVtYnM6IFtdLFxuICAgICAgICAgICAgdG9vbGJhckNvbW1hbmRzOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuY29uZmlybVwiLCBpY29uOiAnZmEgZmEtY2hlY2snLFxuICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKHBpY2tpbmdCbGFkZSkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5LnByb2R1Y3RJZHMgPSBfLnVuaW9uKGJsYWRlLmN1cnJlbnRFbnRpdHkucHJvZHVjdElkcywgc2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ291bnQgPSBibGFkZS5jdXJyZW50RW50aXR5LnByb2R1Y3RJZHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUocGlja2luZ0JsYWRlKTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLmFueShzZWxlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XVxuICAgICAgICB9O1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgIH1cbn1dKTtcbiIsIu+7v2FuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5hc3NpZ25tZW50c1dpZGdldENvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5wcmljZWxpc3RBc3NpZ25tZW50cycsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIGFzc2lnbm1lbnRzKSB7XG5cdHZhciBibGFkZSA9ICRzY29wZS53aWRnZXQuYmxhZGU7XG5cdGZ1bmN0aW9uIHJlZnJlc2gocHJpY2VsaXN0KSB7XG5cdFx0aWYgKHByaWNlbGlzdCkge1xuXHRcdFx0JHNjb3BlLndpZGdldC5hc3NpZ25tZW50c0NvdW50ID0gcHJpY2VsaXN0LmFzc2lnbm1lbnRzID8gcHJpY2VsaXN0LmFzc2lnbm1lbnRzLmxlbmd0aCA6IDA7XG5cdFx0XHRpZiAocHJpY2VsaXN0LmlkKSB7XG5cdFx0XHRcdHJldHVybiBhc3NpZ25tZW50cy5zZWFyY2goe1xuXHRcdFx0XHRcdHByaWNlTGlzdElkOiBwcmljZWxpc3QuaWQsXG5cdFx0XHRcdFx0dGFrZTogMFxuXHRcdFx0XHR9LCBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRcdCRzY29wZS53aWRnZXQuYXNzaWdubWVudHNDb3VudCA9IGRhdGEudG90YWxDb3VudDtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cbiAgICAkc2NvcGUub3BlbkJsYWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICBpZDogXCJwcmljZWxpc3RDaGlsZFwiLFxuICAgICAgICAgICAgcHJpY2VsaXN0SWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHkuaWQsXG4gICAgICAgICAgICBjdXJyZW50RW50aXR5OiBibGFkZS5jdXJyZW50RW50aXR5LFxuICAgICAgICAgICAgdGl0bGU6IGJsYWRlLnRpdGxlLFxuICAgICAgICAgICAgc3VidGl0bGU6ICdwcmljaW5nLmJsYWRlcy5wcmljZWxpc3QtYXNzaWdubWVudC1saXN0LnN1YnRpdGxlJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUuYXNzaWdubWVudExpc3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuUHJpY2luZykvU2NyaXB0cy9ibGFkZXMvYXNzaWdubWVudC1saXN0LnRwbC5odG1sJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgfTtcblxuICAgICRzY29wZS4kd2F0Y2goXCJ3aWRnZXQuYmxhZGUuY3VycmVudEVudGl0eVwiLCBmdW5jdGlvbiAocHJpY2VsaXN0KSB7XG4gICAgXHRyZWZyZXNoKHByaWNlbGlzdCk7XG4gICAgfSk7XG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UucHJpY2luZ01vZHVsZS5pdGVtUHJpY2VzV2lkZ2V0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRmaWx0ZXInLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJpY2VsaXN0cycsICd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJpY2VzJywgJyRzdGF0ZScsIGZ1bmN0aW9uICgkc2NvcGUsICRmaWx0ZXIsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIHByaWNlbGlzdHMsIHByaWNlcywgJHN0YXRlKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuXG4gICAgZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICByZXR1cm4gcHJpY2VzLmdldFByb2R1Y3RQcmljZXNGb3JXaWRnZXQoeyBpZDogYmxhZGUuaXRlbUlkLCBjYXRhbG9nSWQ6IGJsYWRlLmNhdGFsb2cuaWQgfSwgZnVuY3Rpb24gKHByb2R1Y3RQcmljZXMpIHtcbiAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAocHJvZHVjdFByaWNlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBwcm9kdWN0UHJpY2VzID0gXy5ncm91cEJ5KHByb2R1Y3RQcmljZXMsICdjdXJyZW5jeScpO1xuICAgICAgICAgICAgICAgIHByb2R1Y3RQcmljZXMgPSBfLm1heChfLnZhbHVlcyhwcm9kdWN0UHJpY2VzKSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgubGVuZ3RoOyB9KTtcbiAgICAgICAgICAgICAgICB2YXIgYWxsUHJpY2VzID0gXy51bmlvbihfLnBsdWNrKHByb2R1Y3RQcmljZXMsICdsaXN0JyksIF8ucGx1Y2socHJvZHVjdFByaWNlcywgJ3NhbGUnKSk7XG4gICAgICAgICAgICAgICAgdmFyIG1pbnByaWNlID0gXy5taW4oYWxsUHJpY2VzKTtcbiAgICAgICAgICAgICAgICB2YXIgbWF4cHJpY2UgPSBfLm1heChhbGxQcmljZXMpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW5jeSA9IF8uYW55KHByb2R1Y3RQcmljZXMpID8gcHJvZHVjdFByaWNlc1swXS5jdXJyZW5jeSA6ICcnO1xuICAgICAgICAgICAgICAgIG1pbnByaWNlID0gJGZpbHRlcignY3VycmVuY3knKShtaW5wcmljZSwgY3VycmVuY3kpO1xuICAgICAgICAgICAgICAgIG1heHByaWNlID0gJGZpbHRlcignY3VycmVuY3knKShtYXhwcmljZSwgY3VycmVuY3kpO1xuICAgICAgICAgICAgICAgICRzY29wZS5wcmljZUxhYmVsID0gKG1pbnByaWNlID09IG1heHByaWNlID8gbWlucHJpY2UgOiBtaW5wcmljZSArICcgLSAnICsgbWF4cHJpY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByb2R1Y3RQcmljZXM7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICRzY29wZS5vcGVuQmxhZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkc2NvcGUubG9hZGluZylcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB2YXIgcHJvZHVjdFByaWNlbGlzdHNCbGFkZSA9IHtcbiAgICAgICAgICBpZDogXCJpdGVtUHJpY2VzXCIsXG4gICAgICAgICAgaXRlbUlkOiBibGFkZS5pdGVtSWQsXG4gICAgICAgICAgaXRlbTogYmxhZGUuaXRlbSxcbiAgICAgICAgICBwYXJlbnRXaWRnZXRSZWZyZXNoOiByZWZyZXNoLFxuICAgICAgICAgIHRpdGxlOiAncHJpY2luZy5ibGFkZXMuaXRlbS1wcmljZXMudGl0bGUnLFxuICAgICAgICAgIHRpdGxlVmFsdWVzOiB7IG5hbWU6IGJsYWRlLml0ZW0ubmFtZSB9LFxuICAgICAgICAgIHN1YnRpdGxlOiAncHJpY2luZy5ibGFkZXMuaXRlbS1wcmljZXMuc3VidGl0bGUnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUuaXRlbVByaWNlTGlzdENvbnRyb2xsZXInLFxuICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuUHJpY2luZykvU2NyaXB0cy9ibGFkZXMvaXRlbS9pdGVtLXByaWNlcy50cGwuaHRtbCdcbiAgICAgICAgfTtcbiAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUocHJvZHVjdFByaWNlbGlzdHNCbGFkZSwgYmxhZGUpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuJHdhdGNoKFwid2lkZ2V0LmJsYWRlLmNhdGFsb2cuaWRcIiwgZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIGlmIChpZCkgcmVmcmVzaCgpO1xuICAgIH0pO1xuXG59XSk7XG4iLCLvu79hbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJpY2VzV2lkZ2V0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5wcmljaW5nTW9kdWxlLnByaWNlcycsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIHByaWNlcykge1xuICAgIHZhciBibGFkZSA9ICRzY29wZS53aWRnZXQuYmxhZGU7XG5cbiAgICBmdW5jdGlvbiByZWZyZXNoKCkge1xuICAgICAgICAkc2NvcGUucHJpY2VDb3VudCA9ICcuLi4nO1xuXG4gICAgICAgIHByaWNlcy5zZWFyY2goe1xuICAgICAgICAgICAgcHJpY2VMaXN0SWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHlJZCxcbiAgICAgICAgICAgIHRha2U6IDBcbiAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5wcmljZUNvdW50ID0gZGF0YS50b3RhbENvdW50O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUub3BlbkJsYWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICBpZDogXCJwcmljZWxpc3RDaGlsZFwiLFxuICAgICAgICAgICAgY3VycmVuY3k6IGJsYWRlLmN1cnJlbnRFbnRpdHkuY3VycmVuY3ksXG4gICAgICAgICAgICBjdXJyZW50RW50aXR5OiBibGFkZS5jdXJyZW50RW50aXR5LFxuICAgICAgICAgICAgY3VycmVudEVudGl0eUlkOiBibGFkZS5jdXJyZW50RW50aXR5SWQsXG4gICAgICAgICAgICBwYXJlbnRXaWRnZXRSZWZyZXNoOiByZWZyZXNoLFxuICAgICAgICAgICAgdGl0bGU6IGJsYWRlLnRpdGxlLFxuICAgICAgICAgICAgc3VidGl0bGU6ICdwcmljaW5nLmJsYWRlcy5wcmljZWxpc3QtaXRlbS1saXN0LnN1YnRpdGxlJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLnByaWNpbmdNb2R1bGUucHJpY2VsaXN0SXRlbUxpc3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuUHJpY2luZykvU2NyaXB0cy9ibGFkZXMvcHJpY2VsaXN0LWl0ZW0tbGlzdC50cGwuaHRtbCdcbiAgICAgICAgfTtcblxuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgIH07XG5cbiAgICByZWZyZXNoKCk7XG59XSk7Il0sInNvdXJjZVJvb3QiOiIifQ==