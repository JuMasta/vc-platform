!function(e){var t={};function r(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(o,a,function(t){return e[t]}.bind(null,a));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){r(1),r(2),r(3),r(4),r(5),r(6),r(7),r(8),r(9),e.exports=r(10)},function(e,t){void 0!==AppDependencies&&AppDependencies.push("virtoCommerce.exportModule"),angular.module("virtoCommerce.exportModule",["ui.grid.cellNav","ui.grid.edit","ui.grid.validate"]).config(["$stateProvider",function(e){e.state("workspace.exportModule",{url:"/generic-export",templateUrl:"$(Platform)/Scripts/common/templates/home.tpl.html",controller:["$scope","platformWebApp.bladeNavigationService",function(e,t){t.showBlade({id:"exportSettings",title:"export.blades.export-settings.title",subtitle:"export.blades.export-settings.subtitle",controller:"virtoCommerce.exportModule.exportSettingsController",template:"Modules/$(VirtoCommerce.Export)/Scripts/blades/export-settings.tpl.html",exportDataRequest:{},isClosingDisabled:!0})}]})}]).run(["$http","$compile","platformWebApp.mainMenuService","platformWebApp.widgetService","$state","platformWebApp.authService",function(e,t,r,o,a,i){var n={path:"configuration/generic-export",icon:"fa fa-database",title:"export.main-menu-title",priority:30,action:function(){a.go("workspace.exportModule")},permission:"export:access"};r.addMenuItem(n)}])},function(e,t){angular.module("virtoCommerce.exportModule").controller("virtoCommerce.exportModule.exportGenericViewerFilterController",["$scope","$localStorage","platformWebApp.metaFormsService","$translate",function(e,t,r,o){var a,i=e.blade;function n(e){i.currentEntity=angular.copy(e),i.origEntity=e,i.isLoading=!1,i.title=i.isNew?"export.blades.generic-filter.new-title":e.name,i.subtitle=i.isNew?"export.blades.generic-filter.new-subtitle":"export.blades.generic-filter.subtitle"}i.exportTypeName=i.exportTypeName||"NotSpecified",i.metaFields=r.getMetaFields(i.metafieldsId)||[],e.apply=function(e){if(i.onBeforeApply&&i.onBeforeApply(),angular.copy(i.currentEntity,i.origEntity),e){t.exportSearchFilterIds[i.exportTypeName]=i.origEntity.id;var r=_.findIndex(t.exportSearchFilters[i.exportTypeName],{id:i.origEntity.id});-1!==r?t.exportSearchFilters[i.exportTypeName][r]=i.origEntity:t.exportSearchFilters[i.exportTypeName].push(i.origEntity)}i.isNew&&(e||(t.exportSearchFilterIds[i.exportTypeName]=void 0),i.parentBlade.filter.current=i.origEntity,i.isNew=!1),n(i.origEntity),i.parentBlade.filter.current.objectIds=[],i.parentBlade.filter.criteriaChanged()},e.setForm=function(e){a=e},i.headIcon="fa fa-filter",i.toolbarCommands=[{name:"export.blades.generic-filter.commands.apply",icon:"fa fa-filter",executeMethod:function(){e.apply(!1)},canExecuteMethod:function(){return!(i.origEntity&&i.origEntity.id&&t.exportSearchFilterIds[i.exportTypeName]===i.origEntity.id)}},{name:"core.commands.apply-filter",icon:"fa fa-filter",executeMethod:function(){e.apply(!0)},canExecuteMethod:function(){return a&&a.$valid}},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(i.origEntity,i.currentEntity)},canExecuteMethod:function(){return!angular.equals(i.currentEntity,i.origEntity)}},{name:"platform.commands.delete",icon:"fas fa-trash-alt",executeMethod:function(){i.parentBlade.filter.current=null,t.exportSearchFilters[i.exportTypeName].splice(t.exportSearchFilters[i.exportTypeName].indexOf(i.origEntity),1),t.exportSearchFilterIds[i.exportTypeName]=void 0,i.parentBlade.refresh(),e.bladeClose()},canExecuteMethod:function(){return!i.isNew}}],i.isNew?n({id:(new Date).getTime()}):(i.data.id||angular.extend(i.data,{id:(new Date).getTime()}),n(i.data))}])},function(e,t){angular.module("virtoCommerce.exportModule").controller("virtoCommerce.exportModule.exportGenericViewerController",["$localStorage","$timeout","$scope","platformWebApp.bladeUtils","platformWebApp.uiGridHelper","virtoCommerce.exportModule.exportModuleApi","virtoCommerce.exportModule.genericViewerItemService",function(e,t,r,o,a,i,n){r.uiGridConstants=a.uiGridConstants,r.hasMore=!0,r.items=[],r.blade.headIcon="fa fa-upload",r.exportSearchFilters=[],r.exportSearchFilterIds=[];var l=r.blade,p=o.bladeNavigationService;l.isLoading=!0,l.isExpanded=!0;var s=l.filter=r.filter={};function c(e){l.isLoading=!0;var o=u(),a={skip:(r.pageSettings.currentPage-1)*r.pageSettings.itemsPerPageCount,take:r.pageSettings.itemsPerPageCount},n={dataQuery:a,exportTypeName:l.exportDataRequest.exportTypeName};delete o.skip,delete o.take,angular.extend(a,o),i.getData(n,(function(o){l.isLoading=!1,r.pageSettings.totalItems=o.totalCount,r.items=r.items.concat(o.results),r.hasMore=o.results.length===r.pageSettings.itemsPerPageCount,t((function(){r.gridApi&&(a.objectIds&&a.objectIds.length?_.each(a.objectIds,(function(e){var t=_.findWhere(r.items,{id:e});r.gridApi.selection.selectRow(t)})):a.isAllSelected&&r.gridApi.selection.selectAllRows())})),e&&e()}))}function d(){r.hasMore&&(++r.pageSettings.currentPage,r.gridApi.infiniteScroll.saveScrollPercentage(),c((function(){r.gridApi.infiniteScroll.dataLoaded(),t((function(){r.gridApi.selection.getSelectAllState()&&r.gridApi.selection.selectAllRows()}))})))}function u(){var e=x();return angular.extend(e,function(){var e={},t=!!s.current||s.keyword;e.isAnyFilterApplied=t,angular.extend(e,s.current);var r=l.exportDataRequest.dataQuery;r.objectIds&&r.length&&angular.extend(e,{objectIds:r.objectIds});s.keyword&&angular.extend(e,{keyword:s.keyword});return e}()),e}function x(){return{IsPreview:!0,exportTypeName:l.exportDataRequest.dataQuery.exportTypeName,includedProperties:l.exportDataRequest.dataQuery.includedProperties,sort:a.getSortExpression(r)}}(l.exportDataRequest=l.exportDataRequest?angular.copy(l.exportDataRequest):{exportTypeName:"NotSpecified"},l.exportDataRequest.dataQuery&&l.exportDataRequest.dataQuery.keyword&&(s.keyword=l.exportDataRequest.dataQuery.keyword),r.$localStorage=e,l.refresh=function(){r.items=[],1!==r.pageSettings.currentPage&&(r.pageSettings.currentPage=1),c(),r.gridApi&&(r.items=[],r.gridApi.selection.clearSelectedRows(),r.gridApi.infiniteScroll.resetScroll(!0,!0),r.gridApi.infiniteScroll.dataLoaded())},l.resetFiltering=function(){s.resetKeyword(),l.resetRequestCustomFilter()},l.resetRequestCustomFilter=function(){l.exportDataRequest.dataQuery=x()},l.setSelectedItem=function(e){r.selectedNodeId=e.id},r.selectItem=function(e,t){l.setSelectedItem(t);var r=n.getViewer(t.type);r&&p.showBlade(r(t),l)},e.exportSearchFilters||(e.exportSearchFilters={}),e.exportSearchFilters[l.exportDataRequest.exportTypeName]||(e.exportSearchFilters[l.exportDataRequest.exportTypeName]=[{name:"export.blades.export-generic-viewer.labels.new-filter"}]),r.exportSearchFilters=e.exportSearchFilters[l.exportDataRequest.exportTypeName],e.exportSearchFilterIds||(e.exportSearchFilterIds={}),r.exportSearchFilterId=e.exportSearchFilterIds[l.exportDataRequest.exportTypeName],r.exportSearchFilterId&&(s.current=_.findWhere(r.exportSearchFilters,{id:r.exportSearchFilterId})),l.exportDataRequest.dataQuery)&&(l.exportDataRequest.dataQuery.name&&(s.current||(s.current={}),angular.extend(s.current,l.exportDataRequest.dataQuery)));function m(e){var t={id:"exportGenericViewerFilter",controller:"virtoCommerce.exportModule.exportGenericViewerFilterController",template:"Modules/$(VirtoCommerce.Export)/Scripts/blades/export-generic-viewer-filter.tpl.html",onBeforeApply:l.resetRequestCustomFilter};angular.extend(t,e),p.showBlade(t,l)}s.change=function(){var t=s.current?s.current.id:null,r=l.exportDataRequest.exportTypeName+"ExportFilter";e.exportSearchFilterIds[l.exportDataRequest.exportTypeName]=t,s.current&&!s.current.id?(s.current=null,m({isNew:!0,metafieldsId:r,exportTypeName:l.exportDataRequest.exportTypeName})):(p.closeBlade({id:"exportGenericViewerFilter"}),s.current||l.resetRequestCustomFilter(),s.criteriaChanged())},s.edit=function(){var e=l.exportDataRequest.exportTypeName+"ExportFilter",t={data:s.current,metafieldsId:e,exportTypeName:l.exportDataRequest.exportTypeName};s.current?angular.extend(t,{data:s.current}):angular.extend(t,{isNew:!0}),m(t)},s.criteriaChanged=function(){l.refresh()},s.resetKeyword=function(){s.keyword=void 0,s.current&&(s.current.keyword=void 0),l.exportDataRequest.dataQuery&&(l.exportDataRequest.dataQuery.keyword=void 0)},l.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:function(){l.resetFiltering(),l.refresh()},canExecuteMethod:function(){return!0}}],r.setGridOptions=function(e){o.initializePagination(r,!0),r.pageSettings.itemsPerPageCount=20,e.enableRowSelection=e.enableSelectAll=!l.exportDataRequest.restrictDataSelectivity,e.isRowSelectable=function(e){return!l.exportDataRequest.restrictDataSelectivity},a.initialize(r,e,(function(e){r.gridApi=e,a.bindRefreshOnSortChanged(r),r.gridApi.infiniteScroll.on.needLoadMoreData(r,d)})),t((function(){l.refresh()}))},r.cancelChanges=function(){p.closeBlade(l)},r.isValid=function(){return r.items&&r.items.length},r.saveChanges=function(){var e=u(),t=r.gridApi.selection.getSelectAllState(),o=_.map(r.gridApi.selection.getSelectedRows(),(function(e){return e.id}));e.isAllSelected=t,(l.exportDataRequest.dataQuery.objectIds&&l.exportDataRequest.dataQuery.objectIds.length||!t)&&(o.length?e.objectIds=o:e.objectIds=[]),l.onCompleted&&l.onCompleted(e),p.closeBlade(l)}}])},function(e,t){angular.module("virtoCommerce.exportModule").controller("virtoCommerce.exportModule.exportProgressController",["$scope","platformWebApp.bladeNavigationService","virtoCommerce.exportModule.exportModuleApi",function(e,t,r){var o=e.blade;o.isLoading=!0,e.blade.headIcon="fa fa-upload",e.$on("new-notification-event",(function(e,r){o.notification&&r.id===o.notification.id&&(angular.copy(r,o.notification),r.errorCount>0&&t.setError("Export error",o),o.notification.finished&&o.onCompleted&&o.onCompleted())}));var a={name:"platform.commands.cancel",icon:"fa fa-times",canExecuteMethod:function(){return o.notification&&!o.notification.finished},executeMethod:function(){r.cancel({jobId:o.notification.jobId},(function(e){}))}};o.toolbarCommands=[a],o.isLoading=!1,r.runExport(o.exportDataRequest,(function(e){o.notification=e}))}])},function(e,t){angular.module("virtoCommerce.exportModule").controller("virtoCommerce.exportModule.exportPropertiesSelectorController",["$scope","platformWebApp.bladeNavigationService",function(e,t){var r=e.blade;r.isLoading=!0,e.selectAllInGroup=function(e){r.selectedEntities[e]=r.allEntities[e]},e.clearAllInGroup=function(e){r.selectedEntities[e]=[]},e.sortSelected=function(e){r.selectedEntities[e]=_.sortBy(r.selectedEntities[e],"name")},e.cancelChanges=function(){t.closeBlade(r)},e.isValid=function(){return _.some(r.selectedEntities,(function(e){return e.length}))},e.saveChanges=function(){var e=_.flatten(_.map(r.selectedEntities,_.values));r.onSelected&&(r.onSelected(e),t.closeBlade(r))},function(){r.title="export.blades.export-settings.labels.exported-properties",r.headIcon="fa fa-folder";var e=angular.copy(r.allPropertiesOfType);e=_.sortBy(e,"group","name");var t=angular.copy(r.exportDataRequest.dataQuery.includedProperties);t=_.sortBy(t,"name"),r.allEntities=_.groupBy(e,"group"),r.selectedEntities=_.groupBy(t,"group"),r.isLoading=!1}()}])},function(e,t){angular.module("virtoCommerce.exportModule").controller("virtoCommerce.exportModule.exportSettingsController",["$scope","$translate","platformWebApp.bladeNavigationService","virtoCommerce.exportModule.exportModuleApi","$localStorage",function(e,t,r,o,a){var i=e.blade;function n(){i.allPropertiesOfType=i.selectedProvider&&i.selectedType?i.selectedProvider.isTabular&&i.selectedType.tabularMetaData?i.selectedType.tabularMetaData.propertyInfos:i.selectedType.metaData.propertyInfos:[],i.exportDataRequest.dataQuery.includedProperties=i.allPropertiesOfType,i.isTabularExportSupported=i.selectedType.isTabularExportSupported,i.isExportedTypeSelected=void 0!==i.exportDataRequest.exportTypeName,i.propertySelected=i.allPropertiesOfType.length,i.propertyTotal=i.propertySelected}function l(){if(i.allProviders){var e=i.exportDataRequest.exportTypeName&&!i.isTabularExportSupported,r=i.allProviders;e&&(r=_.filter(r,(function(e){return!e.isTabular}))),i.providers=_.map(r,(function(e){return{id:e.typeName,name:t.instant("export.provider-names."+e.typeName),isTabular:e.isTabular}})),i.selectedProvider&&-1===_.findIndex(i.providers,(function(e){return e.id===i.selectedProvider.id}))&&(i.selectedProvider=void 0)}}function p(e){var t={exportTypeName:i.exportDataRequest.dataQuery.exportTypeName,includedProperties:[],skip:0,take:0};o.getData({exportTypeName:i.exportDataRequest.exportTypeName,dataQuery:t},(function(t){i.dataTotal=t.totalCount,e&&e(t)}))}function s(){var e=angular.copy(i.exportDataRequest.dataQuery);e.includedProperties=[],e.isAllSelected||e.objectIds&&e.objectIds.length||e.isAnyFilterApplied?o.getData({exportTypeName:i.exportDataRequest.exportTypeName,dataQuery:e},(function(e){i.dataSelected=e.totalCount})):i.dataSelected=0}i.canStartProcess=!1,i.isLoading=!0,i.exportDataRequest=i.exportDataRequest||{},i.allPropertiesOfType=[],i.dataSelected=0,i.dataTotal=0,i.propertySelected=0,i.propertyTotal=0,i.defaultProvider=a.defaultExportProvider||"JsonExportProvider",i.isExportedTypeSelected=void 0!==i.exportDataRequest.exportTypeName,i.isTabularExportSupported=i.exportDataRequest.isTabularExportSupported||!1,e.providerChanged=function(){a.defaultExportProvider=i.selectedProvider.id,i.isExportedTypeSelected&&n()},e.startExport=function(){if(e.validateExportParameters()){i.exportDataRequest.providerName=i.selectedProvider.id,delete i.exportDataRequest.dataQuery.skip,delete i.exportDataRequest.dataQuery.take,delete i.exportDataRequest.dataQuery.IsPreview,i.isExporting=!0;var t={id:"exportProgress",title:"export.blades.export-progress.title",controller:"virtoCommerce.exportModule.exportProgressController",template:"Modules/$(VirtoCommerce.Export)/Scripts/blades/export-progress.tpl.html",exportDataRequest:i.exportDataRequest,onCompleted:function(){i.isExporting=!1}};r.showBlade(t,i)}},e.selectExportedType=function(){var e={id:"exportedTypeSelector",title:"export.blades.export-type-selector.title",subtitle:"export.blades.export-type-selector.subtitle",controller:"virtoCommerce.exportModule.exportTypeSelectorController",template:"Modules/$(VirtoCommerce.Export)/Scripts/blades/export-type-selector.tpl.html",isClosingDisabled:!1,knownTypes:i.knownTypes,exportDataRequest:i.exportDataRequest,selectedProvider:i.selectedProvider,onSelected:function(e){i.selectedType&&i.selectedType.name==e.selectedType.name||(i.exportDataRequest=angular.extend(i.exportDataRequest,e.exportDataRequest),i.exportDataRequest.dataQuery=angular.copy(e.exportDataRequest.dataQuery),i.selectedType=e.selectedType,n(),l(),p((function(e){i.dataSelected=e.totalCount})))}};r.showBlade(e,i)},e.selectExportedProperties=function(){var e={id:"exportedPropertiesSelector",controller:"virtoCommerce.exportModule.exportPropertiesSelectorController",template:"Modules/$(VirtoCommerce.Export)/Scripts/blades/export-properties-selector.tpl.html",isClosingDisabled:!1,exportDataRequest:i.exportDataRequest,allPropertiesOfType:i.allPropertiesOfType,onSelected:function(e){i.exportDataRequest.dataQuery.includedProperties=e,i.propertySelected=e.length}};r.showBlade(e,i)},e.selectExportedData=function(){var e={id:"exportedDataSelector",title:"export.blades.export-generic-viewer.title",subtitle:"export.blades.export-generic-viewer.subtitle",controller:"virtoCommerce.exportModule.exportGenericViewerController",template:"Modules/$(VirtoCommerce.Export)/Scripts/blades/export-generic-viewer.tpl.html",isClosingDisabled:!1,exportDataRequest:i.exportDataRequest,onCompleted:function(e){i.exportDataRequest.dataQuery=e,s()}};r.showBlade(e,i)},e.validateExportParameters=function(){return!i.isExporting&&i.exportDataRequest&&i.exportDataRequest.exportTypeName&&i.selectedProvider&&i.exportDataRequest.dataQuery&&i.dataSelected},e.blade.headIcon="fa fa-upload",o.getProviders((function(e){var r;e&&e.length&&(i.allProviders=e,l(),i.selectedProvider=_.find(i.providers,(function(e){return e.id===i.defaultProvider})),i.isExportedTypeSelected&&(r=l,o.getKnownTypes((function(e){i.knownTypes=e;var o=_.find(e,(function(e){return e.typeName===i.exportDataRequest.exportTypeName}));o&&(i.selectedType=o,i.selectedType.localizedName=t.instant("export.types."+i.exportDataRequest.exportTypeName+".name"),n(),p(),s()),angular.isFunction(r)&&r()}))))})),i.isLoading=!1}])},function(e,t){angular.module("virtoCommerce.exportModule").controller("virtoCommerce.exportModule.exportTypeSelectorController",["$scope","$translate","platformWebApp.bladeNavigationService","virtoCommerce.exportModule.exportModuleApi",function(e,t,r,o){var a,i=e.blade;function n(r){if(i.breadcrumbs.splice(1,i.breadcrumbs.length-1),r.groupName){var o="",n=a,l=r.groupName.split("|");_.each(l,(function(r){n=n[r].children;var a={id:(o+="|"+r).substring(1),name:t.instant("export.groups."+r+".name"),children:n,navigate:function(){e.selectNode({groupName:this.id,children:this.children})}};i.breadcrumbs.push(a)}))}}i.title="export.blades.export-settings.labels.exported-type",i.headIcon="fa fa-folder",i.knownTypesTree={},i.refresh=function(e){i.isLoading=!0,i.knownTypes?(i.knownTypesTree=angular.copy(i.knownTypes),i.prepareTypes()):o.getKnownTypes((function(e){i.knownTypesTree=e,i.prepareTypes()}),(function(e){r.setError("Error "+e.status,i)}))},e.selectNode=function(t,o){r.closeChildrenBlades(i,(function(){if(e.selectedNodeId=t.groupName,t.children)i.searchText=null,i.currentEntities=t.children,n(t);else{var o=_.filter(i.allGroups,(function(e){return e.groupName===t.groupName||"General"===t.groupName&&!e.groupName}))[0],a={exportDataRequest:{exportTypeName:o.typeName,dataQuery:{exportTypeName:o.exportDataQueryType,isAllSelected:!0},restrictDataSelectivity:o.restrictDataSelectivity},selectedType:o};i.onSelected&&(i.onSelected(a),r.closeBlade(i))}}))},i.prepareTypes=function(){if(_.each(i.knownTypesTree,(function(e){e.localizedName=t.instant("export.types."+e.typeName+".name"),e.localizedNameDescription=t.instant("export.types."+e.typeName+".description"),e.localizedGroup=t.instant("export.groups."+e.group+".name"),e.localizedGroupDescription=t.instant("export.groups."+e.group+".description"),e.groupName=e.group+"|"+e.typeName,e.localizedGroupName=e.localizedGroup+"|"+e.localizedName;var r=e.typeName.lastIndexOf(".");e.name=e.typeName.substring(r+1)})),i.allGroups=i.knownTypesTree,a={},_.each(i.knownTypesTree,(function(e){var t=(e.groupName?e.groupName:"General").split("|"),r=a,o="";_.each(t,(function(a,n){if(o+="|"+a,!r[a]){var l=a.lastIndexOf("."),p={name:a.substring(l+1),localizedName:e.localizedName,localizedDescription:e.localizedNameDescription,groupName:o.substring(1)};r[a]=p,e.groupName&&_.all(i.allGroups,(function(e){return e.groupName!==p.groupName}))&&(p.localizedName=e.localizedGroup,p.localizedDescription=e.localizedGroupDescription,i.allGroups.push(p))}n<t.length-1&&(r[a].children||(r[a].children={}),r=r[a].children)}))})),i.isLoading=!1,i.searchText)i.currentEntities=a;else{for(var r=a,o=1;o<i.breadcrumbs.length;o++)r=r[i.breadcrumbs[o].name].children;i.currentEntities=r}e.selectedNodeId&&e.selectNode({groupName:e.selectedNodeId},disableOpenAnimation)},i.breadcrumbs=[{id:null,name:"export.blades.export-type-selector.bread-crumb-top",navigate:function(){e.selectNode({groupName:null,children:a})}}],e.$watch("blade.searchText",(function(e){e&&(i.currentEntities=a,n({groupName:null}))})),i.refresh()}])},function(e,t){angular.module("virtoCommerce.exportModule").factory("virtoCommerce.exportModule.exportModuleApi",["$resource",function(e){return e("",null,{getProviders:{method:"GET",isArray:!0,url:"api/export/providers"},getKnownTypes:{method:"GET",isArray:!0,url:"api/export/knowntypes"},runExport:{method:"POST",url:"api/export/run"},getData:{method:"POST",url:"api/export/data"},cancel:{method:"POST",url:"api/export/task/cancel"}})}])},function(e,t){angular.module("virtoCommerce.exportModule").factory("virtoCommerce.exportModule.genericViewerItemService",(function(){var e={};return this.registerViewer=function(t,r){e[t]=r},this.getViewer=function(t){return e[t]},this}))},function(e,t,r){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkV4cG9ydC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkV4cG9ydC8uL1NjcmlwdHMvZXhwb3J0LmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuRXhwb3J0Ly4vU2NyaXB0cy9ibGFkZXMvZXhwb3J0LWdlbmVyaWMtdmlld2VyLWZpbHRlci5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkV4cG9ydC8uL1NjcmlwdHMvYmxhZGVzL2V4cG9ydC1nZW5lcmljLXZpZXdlci5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkV4cG9ydC8uL1NjcmlwdHMvYmxhZGVzL2V4cG9ydC1wcm9ncmVzcy5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkV4cG9ydC8uL1NjcmlwdHMvYmxhZGVzL2V4cG9ydC1wcm9wZXJ0aWVzLXNlbGVjdG9yLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuRXhwb3J0Ly4vU2NyaXB0cy9ibGFkZXMvZXhwb3J0LXNldHRpbmdzLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuRXhwb3J0Ly4vU2NyaXB0cy9ibGFkZXMvZXhwb3J0LXR5cGUtc2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5FeHBvcnQvLi9TY3JpcHRzL3Jlc291cmNlcy9leHBvcnRBcGkuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5FeHBvcnQvLi9TY3JpcHRzL3NlcnZpY2VzL2dlbmVyaWMtdmlld2VyLWl0ZW0tc2VydmljZS5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInVuZGVmaW5lZCIsIkFwcERlcGVuZGVuY2llcyIsInB1c2giLCJhbmd1bGFyIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIiRzY29wZSIsImJsYWRlTmF2aWdhdGlvblNlcnZpY2UiLCJzaG93QmxhZGUiLCJpZCIsInRpdGxlIiwic3VidGl0bGUiLCJ0ZW1wbGF0ZSIsImV4cG9ydERhdGFSZXF1ZXN0IiwiaXNDbG9zaW5nRGlzYWJsZWQiLCJydW4iLCIkaHR0cCIsIiRjb21waWxlIiwibWFpbk1lbnVTZXJ2aWNlIiwid2lkZ2V0U2VydmljZSIsIiRzdGF0ZSIsImF1dGhTZXJ2aWNlIiwibWVudUl0ZW0iLCJwYXRoIiwiaWNvbiIsInByaW9yaXR5IiwiYWN0aW9uIiwiZ28iLCJwZXJtaXNzaW9uIiwiYWRkTWVudUl0ZW0iLCIkbG9jYWxTdG9yYWdlIiwibWV0YUZvcm1zU2VydmljZSIsIiR0cmFuc2xhdGUiLCJmb3JtU2NvcGUiLCJibGFkZSIsImluaXRpYWxpemVCbGFkZSIsImRhdGEiLCJjdXJyZW50RW50aXR5IiwiY29weSIsIm9yaWdFbnRpdHkiLCJpc0xvYWRpbmciLCJpc05ldyIsImV4cG9ydFR5cGVOYW1lIiwibWV0YUZpZWxkcyIsImdldE1ldGFGaWVsZHMiLCJtZXRhZmllbGRzSWQiLCJhcHBseSIsIm5lZWRTYXZlIiwib25CZWZvcmVBcHBseSIsImV4cG9ydFNlYXJjaEZpbHRlcklkcyIsInNhdmVkRmlsdGVySW5kZXgiLCJfIiwiZmluZEluZGV4IiwiZXhwb3J0U2VhcmNoRmlsdGVycyIsInBhcmVudEJsYWRlIiwiZmlsdGVyIiwiY3VycmVudCIsIm9iamVjdElkcyIsImNyaXRlcmlhQ2hhbmdlZCIsInNldEZvcm0iLCJmb3JtIiwiaGVhZEljb24iLCJ0b29sYmFyQ29tbWFuZHMiLCJleGVjdXRlTWV0aG9kIiwiY2FuRXhlY3V0ZU1ldGhvZCIsIiR2YWxpZCIsImVxdWFscyIsInNwbGljZSIsImluZGV4T2YiLCJyZWZyZXNoIiwiYmxhZGVDbG9zZSIsIkRhdGUiLCJnZXRUaW1lIiwiZXh0ZW5kIiwiJHRpbWVvdXQiLCJibGFkZVV0aWxzIiwidWlHcmlkSGVscGVyIiwiZXhwb3J0TW9kdWxlQXBpIiwiZ2VuZXJpY1ZpZXdlckl0ZW1TZXJ2aWNlIiwidWlHcmlkQ29uc3RhbnRzIiwiaGFzTW9yZSIsIml0ZW1zIiwiaXNFeHBhbmRlZCIsImxvYWREYXRhIiwiY2FsbGJhY2siLCJkYXRhUXVlcnkiLCJidWlsZERhdGFRdWVyeSIsInBhZ2VkRGF0YVF1ZXJ5Iiwic2tpcCIsInBhZ2VTZXR0aW5ncyIsImN1cnJlbnRQYWdlIiwiaXRlbXNQZXJQYWdlQ291bnQiLCJ0YWtlIiwiZ2V0RGF0YSIsInRvdGFsSXRlbXMiLCJ0b3RhbENvdW50IiwiY29uY2F0IiwicmVzdWx0cyIsImxlbmd0aCIsImdyaWRBcGkiLCJlYWNoIiwib2JqZWN0SWQiLCJkYXRhSXRlbSIsImZpbmRXaGVyZSIsInNlbGVjdGlvbiIsInNlbGVjdFJvdyIsImlzQWxsU2VsZWN0ZWQiLCJzZWxlY3RBbGxSb3dzIiwic2hvd01vcmUiLCJpbmZpbml0ZVNjcm9sbCIsInNhdmVTY3JvbGxQZXJjZW50YWdlIiwiZGF0YUxvYWRlZCIsImdldFNlbGVjdEFsbFN0YXRlIiwiZ2V0RW1wdHlEYXRhUXVlcnkiLCJyZXN1bHQiLCJpc0FueUZpbHRlckFwcGxpZWQiLCJrZXl3b3JkIiwiZ2V0RmlsdGVyQ29uZGl0aW9ucyIsIklzUHJldmlldyIsImluY2x1ZGVkUHJvcGVydGllcyIsInNvcnQiLCJnZXRTb3J0RXhwcmVzc2lvbiIsImNsZWFyU2VsZWN0ZWRSb3dzIiwicmVzZXRTY3JvbGwiLCJyZXNldEZpbHRlcmluZyIsInJlc2V0S2V5d29yZCIsInJlc2V0UmVxdWVzdEN1c3RvbUZpbHRlciIsInNldFNlbGVjdGVkSXRlbSIsImxpc3RJdGVtIiwic2VsZWN0ZWROb2RlSWQiLCJzZWxlY3RJdGVtIiwiZSIsInZpZXdlckZ1bmMiLCJnZXRWaWV3ZXIiLCJ0eXBlIiwiZXhwb3J0U2VhcmNoRmlsdGVySWQiLCJzaG93RmlsdGVyRGV0YWlsQmxhZGUiLCJibGFkZURhdGEiLCJuZXdCbGFkZSIsImNoYW5nZSIsImNsb3NlQmxhZGUiLCJlZGl0IiwiZmlsdGVyRGV0YWlsc1BhcmFtcyIsInNldEdyaWRPcHRpb25zIiwiZ3JpZE9wdGlvbnMiLCJpbml0aWFsaXplUGFnaW5hdGlvbiIsImVuYWJsZVJvd1NlbGVjdGlvbiIsImVuYWJsZVNlbGVjdEFsbCIsInJlc3RyaWN0RGF0YVNlbGVjdGl2aXR5IiwiaXNSb3dTZWxlY3RhYmxlIiwicm93IiwiaW5pdGlhbGl6ZSIsImJpbmRSZWZyZXNoT25Tb3J0Q2hhbmdlZCIsIm9uIiwibmVlZExvYWRNb3JlRGF0YSIsImNhbmNlbENoYW5nZXMiLCJpc1ZhbGlkIiwic2F2ZUNoYW5nZXMiLCJzZWxlY3RlZElkcyIsIm1hcCIsImdldFNlbGVjdGVkUm93cyIsIml0ZW0iLCJvbkNvbXBsZXRlZCIsImV4cG9ydEFwaSIsIiRvbiIsImV2ZW50Iiwibm90aWZpY2F0aW9uIiwiZXJyb3JDb3VudCIsInNldEVycm9yIiwiZmluaXNoZWQiLCJjb21tYW5kQ2FuY2VsIiwiY2FuY2VsIiwiam9iSWQiLCJydW5FeHBvcnQiLCJzZWxlY3RBbGxJbkdyb3VwIiwiZ3JvdXBLZXkiLCJzZWxlY3RlZEVudGl0aWVzIiwiYWxsRW50aXRpZXMiLCJjbGVhckFsbEluR3JvdXAiLCJzb3J0U2VsZWN0ZWQiLCJzb3J0QnkiLCJzb21lIiwiZmxhdHRlbiIsInZhbHVlcyIsIm9uU2VsZWN0ZWQiLCJhbGxQcm9wZXJ0aWVzIiwiYWxsUHJvcGVydGllc09mVHlwZSIsInNlbGVjdGVkUHJvcGVydGllcyIsImdyb3VwQnkiLCJyZXNldFByb3BlcnR5SW5mbyIsInNlbGVjdGVkUHJvdmlkZXIiLCJzZWxlY3RlZFR5cGUiLCJpc1RhYnVsYXIiLCJ0YWJ1bGFyTWV0YURhdGEiLCJwcm9wZXJ0eUluZm9zIiwibWV0YURhdGEiLCJpc1RhYnVsYXJFeHBvcnRTdXBwb3J0ZWQiLCJpc0V4cG9ydGVkVHlwZVNlbGVjdGVkIiwicHJvcGVydHlTZWxlY3RlZCIsInByb3BlcnR5VG90YWwiLCJmaWxsUHJvdmlkZXJzIiwiYWxsUHJvdmlkZXJzIiwiZmlsdGVyTm9uVGFidWxhciIsInByb3ZpZGVycyIsInR5cGVOYW1lIiwiaW5zdGFudCIsImdldERhdGFUb3RhbENvdW50IiwiZm5TdWNjZXNzQ2FsbGJhY2siLCJkYXRhVG90YWwiLCJnZXREYXRhU2VsZWN0ZWRDb3VudCIsImRhdGFTZWxlY3RlZCIsImNhblN0YXJ0UHJvY2VzcyIsImRlZmF1bHRQcm92aWRlciIsImRlZmF1bHRFeHBvcnRQcm92aWRlciIsInByb3ZpZGVyQ2hhbmdlZCIsInN0YXJ0RXhwb3J0IiwidmFsaWRhdGVFeHBvcnRQYXJhbWV0ZXJzIiwicHJvdmlkZXJOYW1lIiwiaXNFeHBvcnRpbmciLCJwcm9ncmVzc0JsYWRlIiwic2VsZWN0RXhwb3J0ZWRUeXBlIiwiZXhwb3J0ZWRUeXBlYmxhZGUiLCJrbm93blR5cGVzIiwic2VsZWN0ZWRUeXBlRGF0YSIsInNlbGVjdEV4cG9ydGVkUHJvcGVydGllcyIsImV4cG9ydGVkUHJvcGVydGllc2JsYWRlIiwic2VsZWN0RXhwb3J0ZWREYXRhIiwiZXhwb3J0ZWREYXRhYmxhZGUiLCJnZXRQcm92aWRlcnMiLCJmaW5kIiwiZ2V0S25vd25UeXBlcyIsIngiLCJsb2NhbGl6ZWROYW1lIiwiaXNGdW5jdGlvbiIsInR5cGVUcmVlIiwic2V0QnJlYWRjcnVtYnMiLCJub2RlIiwiYnJlYWRjcnVtYnMiLCJncm91cE5hbWUiLCJsYXN0UGFyZW50SWQiLCJsYXN0Y2hpbGRyZW4iLCJwYXRocyIsInNwbGl0IiwiY2hpbGRyZW4iLCJicmVhZENydW1iIiwic3Vic3RyaW5nIiwibmF2aWdhdGUiLCJzZWxlY3ROb2RlIiwidGhpcyIsImtub3duVHlwZXNUcmVlIiwiZGlzYWJsZU9wZW5BbmltYXRpb24iLCJwcmVwYXJlVHlwZXMiLCJlcnJvciIsInN0YXR1cyIsImNsb3NlQ2hpbGRyZW5CbGFkZXMiLCJzZWFyY2hUZXh0IiwiY3VycmVudEVudGl0aWVzIiwiYWxsR3JvdXBzIiwiZXhwb3J0RGF0YVF1ZXJ5VHlwZSIsImxvY2FsaXplZE5hbWVEZXNjcmlwdGlvbiIsImxvY2FsaXplZEdyb3VwIiwiZ3JvdXAiLCJsb2NhbGl6ZWRHcm91cERlc2NyaXB0aW9uIiwibG9jYWxpemVkR3JvdXBOYW1lIiwibGFzdEluZGV4IiwibGFzdEluZGV4T2YiLCJleHBvcnRlZFR5cGUiLCJsYXN0UGFyZW50IiwidHJlZU5vZGUiLCJsb2NhbGl6ZWREZXNjcmlwdGlvbiIsImFsbCIsIiR3YXRjaCIsIm5ld1ZhbCIsImZhY3RvcnkiLCIkcmVzb3VyY2UiLCJtZXRob2QiLCJpc0FycmF5Iiwidmlld2VycyIsInJlZ2lzdGVyVmlld2VyIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJ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bW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvL0NhbGwgdGhpcyB0byByZWdpc3RlciBvdXIgbW9kdWxlIHRvIG1haW4gYXBwbGljYXRpb25cbnZhciBtb2R1bGVOYW1lID0gXCJ2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZVwiO1xuXG5pZiAoQXBwRGVwZW5kZW5jaWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICBBcHBEZXBlbmRlbmNpZXMucHVzaChtb2R1bGVOYW1lKTtcbn1cblxuYW5ndWxhci5tb2R1bGUobW9kdWxlTmFtZSwgWyd1aS5ncmlkLmNlbGxOYXYnLCAndWkuZ3JpZC5lZGl0JywgJ3VpLmdyaWQudmFsaWRhdGUnXSlcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3dvcmtzcGFjZS5leHBvcnRNb2R1bGUnLCB7XG4gICAgICAgICAgICB1cmw6ICcvZ2VuZXJpYy1leHBvcnQnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICckKFBsYXRmb3JtKS9TY3JpcHRzL2NvbW1vbi90ZW1wbGF0ZXMvaG9tZS50cGwuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdleHBvcnRTZXR0aW5ncycsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnZXhwb3J0LmJsYWRlcy5leHBvcnQtc2V0dGluZ3MudGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ2V4cG9ydC5ibGFkZXMuZXhwb3J0LXNldHRpbmdzLnN1YnRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuZXhwb3J0TW9kdWxlLmV4cG9ydFNldHRpbmdzQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuRXhwb3J0KS9TY3JpcHRzL2JsYWRlcy9leHBvcnQtc2V0dGluZ3MudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICBleHBvcnREYXRhUmVxdWVzdDoge30sXG4gICAgICAgICAgICAgICAgICAgIGlzQ2xvc2luZ0Rpc2FibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSk7XG4gICAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICB9XSlcbiAgICAucnVuKFxuICAgICAgICBbJyRodHRwJywgJyRjb21waWxlJywgJ3BsYXRmb3JtV2ViQXBwLm1haW5NZW51U2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC53aWRnZXRTZXJ2aWNlJywgJyRzdGF0ZScsICdwbGF0Zm9ybVdlYkFwcC5hdXRoU2VydmljZSdcbiAgICAgICAgICAgICwgZnVuY3Rpb24gKCRodHRwLCAkY29tcGlsZSwgbWFpbk1lbnVTZXJ2aWNlLCB3aWRnZXRTZXJ2aWNlLCAkc3RhdGUsIGF1dGhTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgLy9SZWdpc3RlciBtb2R1bGUgaW4gbWFpbiBtZW51XG4gICAgICAgICAgICAgICAgdmFyIG1lbnVJdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiAnY29uZmlndXJhdGlvbi9nZW5lcmljLWV4cG9ydCcsXG4gICAgICAgICAgICAgICAgICAgIGljb246ICdmYSBmYS1kYXRhYmFzZScsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnZXhwb3J0Lm1haW4tbWVudS10aXRsZScsXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiAzMCxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7ICRzdGF0ZS5nbygnd29ya3NwYWNlLmV4cG9ydE1vZHVsZScpOyB9LFxuICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnZXhwb3J0OmFjY2VzcydcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG1haW5NZW51U2VydmljZS5hZGRNZW51SXRlbShtZW51SXRlbSk7XG4gICAgICAgICAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5leHBvcnRNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UuZXhwb3J0TW9kdWxlLmV4cG9ydEdlbmVyaWNWaWV3ZXJGaWx0ZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2FsU3RvcmFnZScsICdwbGF0Zm9ybVdlYkFwcC5tZXRhRm9ybXNTZXJ2aWNlJywgJyR0cmFuc2xhdGUnLCBcbiAgICBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYWxTdG9yYWdlLCBtZXRhRm9ybXNTZXJ2aWNlLCAkdHJhbnNsYXRlKSB7XG4gICAgICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICAgICAgYmxhZGUuZXhwb3J0VHlwZU5hbWUgPSBibGFkZS5leHBvcnRUeXBlTmFtZSB8fCBcIk5vdFNwZWNpZmllZFwiO1xuXG4gICAgICAgIGJsYWRlLm1ldGFGaWVsZHMgPSBtZXRhRm9ybXNTZXJ2aWNlLmdldE1ldGFGaWVsZHMoYmxhZGUubWV0YWZpZWxkc0lkKSB8fCBbXTtcblxuICAgICAgICAkc2NvcGUuYXBwbHkgPSBmdW5jdGlvbiAobmVlZFNhdmUpIHtcbiAgICAgICAgICAgIGlmIChibGFkZS5vbkJlZm9yZUFwcGx5KSB7XG4gICAgICAgICAgICAgICAgYmxhZGUub25CZWZvcmVBcHBseSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhbmd1bGFyLmNvcHkoYmxhZGUuY3VycmVudEVudGl0eSwgYmxhZGUub3JpZ0VudGl0eSk7XG5cbiAgICAgICAgICAgIGlmIChuZWVkU2F2ZSkge1xuICAgICAgICAgICAgICAgICRsb2NhbFN0b3JhZ2UuZXhwb3J0U2VhcmNoRmlsdGVySWRzW2JsYWRlLmV4cG9ydFR5cGVOYW1lXSA9IGJsYWRlLm9yaWdFbnRpdHkuaWQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2F2ZWRGaWx0ZXJJbmRleCA9IF8uZmluZEluZGV4KCRsb2NhbFN0b3JhZ2UuZXhwb3J0U2VhcmNoRmlsdGVyc1tibGFkZS5leHBvcnRUeXBlTmFtZV0sIHsgaWQ6IGJsYWRlLm9yaWdFbnRpdHkuaWQgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2F2ZWRGaWx0ZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5leHBvcnRTZWFyY2hGaWx0ZXJzW2JsYWRlLmV4cG9ydFR5cGVOYW1lXVtzYXZlZEZpbHRlckluZGV4XSA9IGJsYWRlLm9yaWdFbnRpdHk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5leHBvcnRTZWFyY2hGaWx0ZXJzW2JsYWRlLmV4cG9ydFR5cGVOYW1lXS5wdXNoKGJsYWRlLm9yaWdFbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgICAgIGlmICghbmVlZFNhdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5leHBvcnRTZWFyY2hGaWx0ZXJJZHNbYmxhZGUuZXhwb3J0VHlwZU5hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmZpbHRlci5jdXJyZW50ID0gYmxhZGUub3JpZ0VudGl0eTtcbiAgICAgICAgICAgICAgICBibGFkZS5pc05ldyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbml0aWFsaXplQmxhZGUoYmxhZGUub3JpZ0VudGl0eSk7XG4gICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5maWx0ZXIuY3VycmVudC5vYmplY3RJZHMgPSBbXTsgLy8gUmVzZXQgb2JqZWN0IGlkc1xuICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUuZmlsdGVyLmNyaXRlcmlhQ2hhbmdlZCgpO1xuICAgICAgICAgICAgLy8gJHNjb3BlLmJsYWRlQ2xvc2UoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplQmxhZGUoZGF0YSkge1xuICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGFuZ3VsYXIuY29weShkYXRhKTtcbiAgICAgICAgICAgIGJsYWRlLm9yaWdFbnRpdHkgPSBkYXRhO1xuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGJsYWRlLnRpdGxlID0gYmxhZGUuaXNOZXcgPyAnZXhwb3J0LmJsYWRlcy5nZW5lcmljLWZpbHRlci5uZXctdGl0bGUnIDogZGF0YS5uYW1lO1xuICAgICAgICAgICAgYmxhZGUuc3VidGl0bGUgPSBibGFkZS5pc05ldyA/ICdleHBvcnQuYmxhZGVzLmdlbmVyaWMtZmlsdGVyLm5ldy1zdWJ0aXRsZScgOiAnZXhwb3J0LmJsYWRlcy5nZW5lcmljLWZpbHRlci5zdWJ0aXRsZSc7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGZvcm1TY29wZTtcbiAgICAgICAgJHNjb3BlLnNldEZvcm0gPSBmdW5jdGlvbiAoZm9ybSkgeyBmb3JtU2NvcGUgPSBmb3JtOyB9XG5cbiAgICAgICAgZnVuY3Rpb24gaXNEaXJ0eSgpIHtcbiAgICAgICAgICAgIHJldHVybiAhYW5ndWxhci5lcXVhbHMoYmxhZGUuY3VycmVudEVudGl0eSwgYmxhZGUub3JpZ0VudGl0eSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYmxhZGUuaGVhZEljb24gPSAnZmEgZmEtZmlsdGVyJztcblxuICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcImV4cG9ydC5ibGFkZXMuZ2VuZXJpYy1maWx0ZXIuY29tbWFuZHMuYXBwbHlcIiwgaWNvbjogJ2ZhIGZhLWZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHBseShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8vIEFwcGx5IHNob3VsZCBub3QgYmUgYXZhYWlsYWJsZSB3aGVuIGVkaXRpbmcgc2F2ZWQgZmlsdGVyXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhKGJsYWRlLm9yaWdFbnRpdHkgJiYgYmxhZGUub3JpZ0VudGl0eS5pZCAmJiAkbG9jYWxTdG9yYWdlLmV4cG9ydFNlYXJjaEZpbHRlcklkc1tibGFkZS5leHBvcnRUeXBlTmFtZV0gPT09IGJsYWRlLm9yaWdFbnRpdHkuaWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiY29yZS5jb21tYW5kcy5hcHBseS1maWx0ZXJcIiwgaWNvbjogJ2ZhIGZhLWZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHBseSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1TY29wZSAmJiBmb3JtU2NvcGUuJHZhbGlkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucmVzZXRcIiwgaWNvbjogJ2ZhIGZhLXVuZG8nLFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkoYmxhZGUub3JpZ0VudGl0eSwgYmxhZGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGlzRGlydHlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5kZWxldGVcIiwgaWNvbjogJ2ZhcyBmYS10cmFzaC1hbHQnLFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBkZWxldGVFbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFibGFkZS5pc05ldztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgXTtcblxuICAgICAgICBmdW5jdGlvbiBkZWxldGVFbnRyeSgpIHtcbiAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLmZpbHRlci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICRsb2NhbFN0b3JhZ2UuZXhwb3J0U2VhcmNoRmlsdGVyc1tibGFkZS5leHBvcnRUeXBlTmFtZV0uc3BsaWNlKCRsb2NhbFN0b3JhZ2UuZXhwb3J0U2VhcmNoRmlsdGVyc1tibGFkZS5leHBvcnRUeXBlTmFtZV0uaW5kZXhPZihibGFkZS5vcmlnRW50aXR5KSwgMSk7XG4gICAgICAgICAgICAkbG9jYWxTdG9yYWdlLmV4cG9ydFNlYXJjaEZpbHRlcklkc1tibGFkZS5leHBvcnRUeXBlTmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAkc2NvcGUuYmxhZGVDbG9zZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWN0aW9ucyBvbiBsb2FkXG4gICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgaW5pdGlhbGl6ZUJsYWRlKHsgaWQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWJsYWRlLmRhdGEuaWQpIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChibGFkZS5kYXRhLCB7IGlkOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5pdGlhbGl6ZUJsYWRlKGJsYWRlLmRhdGEpO1xuICAgICAgICB9XG4gICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UuZXhwb3J0TW9kdWxlJylcbiAgICAuY29udHJvbGxlcigndmlydG9Db21tZXJjZS5leHBvcnRNb2R1bGUuZXhwb3J0R2VuZXJpY1ZpZXdlckNvbnRyb2xsZXInLCBbJyRsb2NhbFN0b3JhZ2UnLCAnJHRpbWVvdXQnLCAnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlVXRpbHMnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJywgJ3ZpcnRvQ29tbWVyY2UuZXhwb3J0TW9kdWxlLmV4cG9ydE1vZHVsZUFwaScsICd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZS5nZW5lcmljVmlld2VySXRlbVNlcnZpY2UnLFxuICAgICAgICBmdW5jdGlvbiAoJGxvY2FsU3RvcmFnZSwgJHRpbWVvdXQsICRzY29wZSwgYmxhZGVVdGlscywgdWlHcmlkSGVscGVyLCBleHBvcnRNb2R1bGVBcGksIGdlbmVyaWNWaWV3ZXJJdGVtU2VydmljZSkge1xuICAgICAgICAgICAgJHNjb3BlLnVpR3JpZENvbnN0YW50cyA9IHVpR3JpZEhlbHBlci51aUdyaWRDb25zdGFudHM7XG4gICAgICAgICAgICAkc2NvcGUuaGFzTW9yZSA9IHRydWU7XG4gICAgICAgICAgICAkc2NvcGUuaXRlbXMgPSBbXTtcbiAgICAgICAgICAgICRzY29wZS5ibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS11cGxvYWQnO1xuICAgICAgICAgICAgJHNjb3BlLmV4cG9ydFNlYXJjaEZpbHRlcnMgPSBbXTtcbiAgICAgICAgICAgICRzY29wZS5leHBvcnRTZWFyY2hGaWx0ZXJJZHMgPSBbXTtcblxuICAgICAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgICAgICAgICAgdmFyIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UgPSBibGFkZVV0aWxzLmJsYWRlTmF2aWdhdGlvblNlcnZpY2U7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgYmxhZGUuaXNFeHBhbmRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBibGFkZS5maWx0ZXIgPSAkc2NvcGUuZmlsdGVyID0ge307XG4gICAgICAgICAgICBibGFkZS5leHBvcnREYXRhUmVxdWVzdCA9IGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0ID8gYW5ndWxhci5jb3B5KGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0KSA6IHsgZXhwb3J0VHlwZU5hbWU6IFwiTm90U3BlY2lmaWVkXCIgfTtcblxuICAgICAgICAgICAgaWYgKGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeSAmJiBibGFkZS5leHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkua2V5d29yZCkge1xuICAgICAgICAgICAgICAgIGZpbHRlci5rZXl3b3JkID0gYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5LmtleXdvcmQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS4kbG9jYWxTdG9yYWdlID0gJGxvY2FsU3RvcmFnZTtcblxuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbXMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSAxO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxvYWREYXRhKCk7XG5cbiAgICAgICAgICAgICAgICByZXNldFN0YXRlR3JpZCgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gbG9hZERhdGEoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgdmFyIGRhdGFRdWVyeSA9IGJ1aWxkRGF0YVF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgdmFyIHBhZ2VkRGF0YVF1ZXJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICBza2lwOiAoJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAtIDEpICogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgdGFrZTogJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZXhwb3J0RGF0YVJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFRdWVyeTogcGFnZWREYXRhUXVlcnksXG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydFR5cGVOYW1lOiBibGFkZS5leHBvcnREYXRhUmVxdWVzdC5leHBvcnRUeXBlTmFtZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWxldGUgZGF0YVF1ZXJ5LnNraXA7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGRhdGFRdWVyeS50YWtlO1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHBhZ2VkRGF0YVF1ZXJ5LCBkYXRhUXVlcnkpO1xuXG4gICAgICAgICAgICAgICAgZXhwb3J0TW9kdWxlQXBpLmdldERhdGEoXG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydERhdGFSZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSBkYXRhLnRvdGFsQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbXMgPSAkc2NvcGUuaXRlbXMuY29uY2F0KGRhdGEucmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaGFzTW9yZSA9IGRhdGEucmVzdWx0cy5sZW5ndGggPT09ICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmdyaWRBcGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VkRGF0YVF1ZXJ5Lm9iamVjdElkcyAmJiBwYWdlZERhdGFRdWVyeS5vYmplY3RJZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmVhY2gocGFnZWREYXRhUXVlcnkub2JqZWN0SWRzLCBmdW5jdGlvbiAob2JqZWN0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YUl0ZW0gPSBfLmZpbmRXaGVyZSgkc2NvcGUuaXRlbXMsIHsgaWQ6IG9iamVjdElkIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5zZWxlY3RSb3coZGF0YUl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFnZWREYXRhUXVlcnkuaXNBbGxTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLnNlbGVjdEFsbFJvd3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gc2hvd01vcmUoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5oYXNNb3JlKSB7XG4gICAgICAgICAgICAgICAgICAgICsrJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdyaWRBcGkuaW5maW5pdGVTY3JvbGwuc2F2ZVNjcm9sbFBlcmNlbnRhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgbG9hZERhdGEoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdyaWRBcGkuaW5maW5pdGVTY3JvbGwuZGF0YUxvYWRlZCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2FpdCBmb3IgZ3JpZCB0byBpbmdlc3QgZGF0YSBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RBbGxTdGF0ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5zZWxlY3RBbGxSb3dzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYmxhZGUucmVzZXRGaWx0ZXJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyLnJlc2V0S2V5d29yZCgpO1xuICAgICAgICAgICAgICAgIGJsYWRlLnJlc2V0UmVxdWVzdEN1c3RvbUZpbHRlcigpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYmxhZGUucmVzZXRSZXF1ZXN0Q3VzdG9tRmlsdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeSA9IGdldEVtcHR5RGF0YVF1ZXJ5KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkRGF0YVF1ZXJ5KCkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhUXVlcnkgPSBnZXRFbXB0eURhdGFRdWVyeSgpO1xuXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoZGF0YVF1ZXJ5LCBnZXRGaWx0ZXJDb25kaXRpb25zKCkpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFRdWVyeTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RW1wdHlEYXRhUXVlcnkoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFRdWVyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgSXNQcmV2aWV3OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBleHBvcnRUeXBlTmFtZTogYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5LmV4cG9ydFR5cGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZFByb3BlcnRpZXM6IGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeS5pbmNsdWRlZFByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgICAgIHNvcnQ6IHVpR3JpZEhlbHBlci5nZXRTb3J0RXhwcmVzc2lvbigkc2NvcGUpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVF1ZXJ5O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRGaWx0ZXJDb25kaXRpb25zKCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgaXNBbnlGaWx0ZXJBcHBsaWVkID0gISFmaWx0ZXIuY3VycmVudCB8fCBmaWx0ZXIua2V5d29yZDtcblxuICAgICAgICAgICAgICAgIHJlc3VsdC5pc0FueUZpbHRlckFwcGxpZWQgPSBpc0FueUZpbHRlckFwcGxpZWQ7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQocmVzdWx0LCBmaWx0ZXIuY3VycmVudCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF0YVF1ZXJ5ID0gYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5O1xuICAgICAgICAgICAgICAgIGlmIChkYXRhUXVlcnkub2JqZWN0SWRzICYmIGRhdGFRdWVyeS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQocmVzdWx0LCB7IG9iamVjdElkczogZGF0YVF1ZXJ5Lm9iamVjdElkcyB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmtleXdvcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQocmVzdWx0LCB7IGtleXdvcmQ6IGZpbHRlci5rZXl3b3JkIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0U3RhdGVHcmlkKCkge1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZ3JpZEFwaSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmNsZWFyU2VsZWN0ZWRSb3dzKCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5ncmlkQXBpLmluZmluaXRlU2Nyb2xsLnJlc2V0U2Nyb2xsKHRydWUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ3JpZEFwaS5pbmZpbml0ZVNjcm9sbC5kYXRhTG9hZGVkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBibGFkZS5zZXRTZWxlY3RlZEl0ZW0gPSBmdW5jdGlvbiAobGlzdEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBsaXN0SXRlbS5pZDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RJdGVtID0gZnVuY3Rpb24gKGUsIGxpc3RJdGVtKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuc2V0U2VsZWN0ZWRJdGVtKGxpc3RJdGVtKTtcblxuICAgICAgICAgICAgICAgIHZhciB2aWV3ZXJGdW5jID0gZ2VuZXJpY1ZpZXdlckl0ZW1TZXJ2aWNlLmdldFZpZXdlcihsaXN0SXRlbS50eXBlKTtcblxuICAgICAgICAgICAgICAgIGlmICh2aWV3ZXJGdW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKHZpZXdlckZ1bmMobGlzdEl0ZW0pLCBibGFkZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKCEkbG9jYWxTdG9yYWdlLmV4cG9ydFNlYXJjaEZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICAkbG9jYWxTdG9yYWdlLmV4cG9ydFNlYXJjaEZpbHRlcnMgPSB7fTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEkbG9jYWxTdG9yYWdlLmV4cG9ydFNlYXJjaEZpbHRlcnNbYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWVdKSB7XG4gICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5leHBvcnRTZWFyY2hGaWx0ZXJzW2JsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmV4cG9ydFR5cGVOYW1lXSA9IFt7IG5hbWU6ICdleHBvcnQuYmxhZGVzLmV4cG9ydC1nZW5lcmljLXZpZXdlci5sYWJlbHMubmV3LWZpbHRlcicgfV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5leHBvcnRTZWFyY2hGaWx0ZXJzID0gJGxvY2FsU3RvcmFnZS5leHBvcnRTZWFyY2hGaWx0ZXJzW2JsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmV4cG9ydFR5cGVOYW1lXTtcblxuICAgICAgICAgICAgaWYgKCEkbG9jYWxTdG9yYWdlLmV4cG9ydFNlYXJjaEZpbHRlcklkcykge1xuICAgICAgICAgICAgICAgICRsb2NhbFN0b3JhZ2UuZXhwb3J0U2VhcmNoRmlsdGVySWRzID0ge307XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5leHBvcnRTZWFyY2hGaWx0ZXJJZCA9ICRsb2NhbFN0b3JhZ2UuZXhwb3J0U2VhcmNoRmlsdGVySWRzW2JsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmV4cG9ydFR5cGVOYW1lXTtcblxuICAgICAgICAgICAgaWYgKCRzY29wZS5leHBvcnRTZWFyY2hGaWx0ZXJJZCkge1xuICAgICAgICAgICAgICAgIGZpbHRlci5jdXJyZW50ID0gXy5maW5kV2hlcmUoJHNjb3BlLmV4cG9ydFNlYXJjaEZpbHRlcnMsIHsgaWQ6ICRzY29wZS5leHBvcnRTZWFyY2hGaWx0ZXJJZCB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeSkge1xuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgSlMgbG9vcCBxdWVyeSBjaGFuZ2luZyBiZWZvcmUgc3RhdGUgY2hlY2tpbmdcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyTmFtZSA9IGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeS5uYW1lO1xuXG4gICAgICAgICAgICAgICAgaWYgKCEhZmlsdGVyTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlci5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXIuY3VycmVudCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGZpbHRlci5jdXJyZW50LCBibGFkZS5leHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlsdGVyLmNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXhwb3J0U2VhcmNoRmlsdGVySWQgPSBmaWx0ZXIuY3VycmVudCA/IGZpbHRlci5jdXJyZW50LmlkIDogbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgbWV0YWZpZWxkc0lkID0gYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWUgKyAnRXhwb3J0RmlsdGVyJztcbiAgICAgICAgICAgICAgICAkbG9jYWxTdG9yYWdlLmV4cG9ydFNlYXJjaEZpbHRlcklkc1tibGFkZS5leHBvcnREYXRhUmVxdWVzdC5leHBvcnRUeXBlTmFtZV0gPSBleHBvcnRTZWFyY2hGaWx0ZXJJZDtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmN1cnJlbnQgJiYgIWZpbHRlci5jdXJyZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0ZpbHRlckRldGFpbEJsYWRlKHsgaXNOZXc6IHRydWUsIG1ldGFmaWVsZHNJZDogbWV0YWZpZWxkc0lkLCBleHBvcnRUeXBlTmFtZTogYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWUgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKHsgaWQ6ICdleHBvcnRHZW5lcmljVmlld2VyRmlsdGVyJyB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlci5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5yZXNldFJlcXVlc3RDdXN0b21GaWx0ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlci5jcml0ZXJpYUNoYW5nZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmaWx0ZXIuZWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWV0YWZpZWxkc0lkID0gYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWUgKyAnRXhwb3J0RmlsdGVyJztcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyRGV0YWlsc1BhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZmlsdGVyLmN1cnJlbnQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFmaWVsZHNJZDogbWV0YWZpZWxkc0lkLFxuICAgICAgICAgICAgICAgICAgICBleHBvcnRUeXBlTmFtZTogYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWVcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlci5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGZpbHRlckRldGFpbHNQYXJhbXMsIHsgZGF0YTogZmlsdGVyLmN1cnJlbnQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChmaWx0ZXJEZXRhaWxzUGFyYW1zLCB7IGlzTmV3OiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJEZXRhaWxCbGFkZShmaWx0ZXJEZXRhaWxzUGFyYW1zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dGaWx0ZXJEZXRhaWxCbGFkZShibGFkZURhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAnZXhwb3J0R2VuZXJpY1ZpZXdlckZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZS5leHBvcnRHZW5lcmljVmlld2VyRmlsdGVyQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuRXhwb3J0KS9TY3JpcHRzL2JsYWRlcy9leHBvcnQtZ2VuZXJpYy12aWV3ZXItZmlsdGVyLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgb25CZWZvcmVBcHBseTogYmxhZGUucmVzZXRSZXF1ZXN0Q3VzdG9tRmlsdGVyXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChuZXdCbGFkZSwgYmxhZGVEYXRhKTtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmaWx0ZXIuY3JpdGVyaWFDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZpbHRlci5yZXNldEtleXdvcmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyLmtleXdvcmQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyLmN1cnJlbnQua2V5d29yZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeS5rZXl3b3JkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW3tcbiAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnJlZnJlc2hcIixcbiAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtcmVmcmVzaCcsXG4gICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5yZXNldEZpbHRlcmluZygpO1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1dO1xuXG4gICAgICAgICAgICAkc2NvcGUuc2V0R3JpZE9wdGlvbnMgPSBmdW5jdGlvbiAoZ3JpZE9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBibGFkZVV0aWxzLmluaXRpYWxpemVQYWdpbmF0aW9uKCRzY29wZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2VTZXR0aW5ncy5pdGVtc1BlclBhZ2VDb3VudCA9IDIwO1xuICAgICAgICAgICAgICAgIGdyaWRPcHRpb25zLmVuYWJsZVJvd1NlbGVjdGlvbiA9IGdyaWRPcHRpb25zLmVuYWJsZVNlbGVjdEFsbCA9ICFibGFkZS5leHBvcnREYXRhUmVxdWVzdC5yZXN0cmljdERhdGFTZWxlY3Rpdml0eTtcblxuICAgICAgICAgICAgICAgIGdyaWRPcHRpb25zLmlzUm93U2VsZWN0YWJsZSA9IGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFibGFkZS5leHBvcnREYXRhUmVxdWVzdC5yZXN0cmljdERhdGFTZWxlY3Rpdml0eTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB1aUdyaWRIZWxwZXIuaW5pdGlhbGl6ZSgkc2NvcGUsIGdyaWRPcHRpb25zLCBmdW5jdGlvbiAoZ3JpZEFwaSkge1xuICAgICAgICAgICAgICAgICAgICAvL3VwZGF0ZSBncmlkQXBpIGZvciBjdXJyZW50IGdyaWRcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdyaWRBcGkgPSBncmlkQXBpO1xuXG4gICAgICAgICAgICAgICAgICAgIHVpR3JpZEhlbHBlci5iaW5kUmVmcmVzaE9uU29ydENoYW5nZWQoJHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdyaWRBcGkuaW5maW5pdGVTY3JvbGwub24ubmVlZExvYWRNb3JlRGF0YSgkc2NvcGUsIHNob3dNb3JlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIG5lZWQgdG8gY2FsbCByZWZyZXNoIGFmdGVyIGRpZ2VzdCBjeWNsZSBhcyB3ZSBkbyBub3QgXCIkd2F0Y2hcIiBmb3IgJHNjb3BlLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZVxuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLmNhbmNlbENoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKGJsYWRlKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5pc1ZhbGlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoJHNjb3BlLml0ZW1zICYmICRzY29wZS5pdGVtcy5sZW5ndGgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhUXVlcnkgPSBidWlsZERhdGFRdWVyeSgpO1xuICAgICAgICAgICAgICAgIHZhciBpc0FsbFNlbGVjdGVkID0gJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdEFsbFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkSWRzID0gXy5tYXAoJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpLCBmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbS5pZDsgfSk7XG5cbiAgICAgICAgICAgICAgICBkYXRhUXVlcnkuaXNBbGxTZWxlY3RlZCA9IGlzQWxsU2VsZWN0ZWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoKGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeS5vYmplY3RJZHMgJiYgYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5Lm9iamVjdElkcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHx8ICghaXNBbGxTZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkSWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVF1ZXJ5Lm9iamVjdElkcyA9IHNlbGVjdGVkSWRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVF1ZXJ5Lm9iamVjdElkcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGJsYWRlLm9uQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLm9uQ29tcGxldGVkKGRhdGFRdWVyeSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKGJsYWRlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZScpXG4gICAgLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UuZXhwb3J0TW9kdWxlLmV4cG9ydFByb2dyZXNzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5leHBvcnRNb2R1bGUuZXhwb3J0TW9kdWxlQXBpJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgZXhwb3J0QXBpKSB7XG4gICAgICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLXVwbG9hZCc7XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUJsYWRlKCkge1xuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBleHBvcnRBcGkucnVuRXhwb3J0KGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLm5vdGlmaWNhdGlvbiA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuJG9uKFwibmV3LW5vdGlmaWNhdGlvbi1ldmVudFwiLCBmdW5jdGlvbiAoZXZlbnQsIG5vdGlmaWNhdGlvbikge1xuICAgICAgICAgICAgaWYgKGJsYWRlLm5vdGlmaWNhdGlvbiAmJiBub3RpZmljYXRpb24uaWQgPT09IGJsYWRlLm5vdGlmaWNhdGlvbi5pZCkge1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShub3RpZmljYXRpb24sIGJsYWRlLm5vdGlmaWNhdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKG5vdGlmaWNhdGlvbi5lcnJvckNvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFeHBvcnQgZXJyb3InLCBibGFkZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChibGFkZS5ub3RpZmljYXRpb24uZmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsYWRlLm9uQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY29tbWFuZENhbmNlbCA9IHtcbiAgICAgICAgICAgIG5hbWU6ICdwbGF0Zm9ybS5jb21tYW5kcy5jYW5jZWwnLFxuICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLXRpbWVzJyxcbiAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmxhZGUubm90aWZpY2F0aW9uICYmICFibGFkZS5ub3RpZmljYXRpb24uZmluaXNoZWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGV4cG9ydEFwaS5jYW5jZWwoeyBqb2JJZDogYmxhZGUubm90aWZpY2F0aW9uLmpvYklkIH0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW2NvbW1hbmRDYW5jZWxdO1xuICAgICAgICBpbml0aWFsaXplQmxhZGUoKTtcbiAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5leHBvcnRNb2R1bGUnKVxuICAgIC5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZS5leHBvcnRQcm9wZXJ0aWVzU2VsZWN0b3JDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UpIHtcbiAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuXG4gICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUJsYWRlKCkge1xuICAgICAgICAgICAgYmxhZGUudGl0bGUgPSAnZXhwb3J0LmJsYWRlcy5leHBvcnQtc2V0dGluZ3MubGFiZWxzLmV4cG9ydGVkLXByb3BlcnRpZXMnO1xuICAgICAgICAgICAgYmxhZGUuaGVhZEljb24gPSAnZmEgZmEtZm9sZGVyJztcblxuICAgICAgICAgICAgdmFyIGFsbFByb3BlcnRpZXMgPSBhbmd1bGFyLmNvcHkoYmxhZGUuYWxsUHJvcGVydGllc09mVHlwZSk7XG4gICAgICAgICAgICBhbGxQcm9wZXJ0aWVzID0gXy5zb3J0QnkoYWxsUHJvcGVydGllcywgJ2dyb3VwJywgJ25hbWUnKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFByb3BlcnRpZXMgPSBhbmd1bGFyLmNvcHkoYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5LmluY2x1ZGVkUHJvcGVydGllcyk7XG4gICAgICAgICAgICBzZWxlY3RlZFByb3BlcnRpZXMgPSBfLnNvcnRCeShzZWxlY3RlZFByb3BlcnRpZXMsICduYW1lJyk7XG4gICAgICAgICAgICBibGFkZS5hbGxFbnRpdGllcyA9IF8uZ3JvdXBCeShhbGxQcm9wZXJ0aWVzLCAnZ3JvdXAnKTtcbiAgICAgICAgICAgIGJsYWRlLnNlbGVjdGVkRW50aXRpZXMgPSBfLmdyb3VwQnkoc2VsZWN0ZWRQcm9wZXJ0aWVzLCAnZ3JvdXAnKTtcbiAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNlbGVjdEFsbEluR3JvdXAgPSBmdW5jdGlvbiAoZ3JvdXBLZXkpIHtcbiAgICAgICAgICAgIGJsYWRlLnNlbGVjdGVkRW50aXRpZXNbZ3JvdXBLZXldID0gYmxhZGUuYWxsRW50aXRpZXNbZ3JvdXBLZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmNsZWFyQWxsSW5Hcm91cCA9IGZ1bmN0aW9uIChncm91cEtleSkge1xuICAgICAgICAgICAgYmxhZGUuc2VsZWN0ZWRFbnRpdGllc1tncm91cEtleV0gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zb3J0U2VsZWN0ZWQgPSBmdW5jdGlvbiAoZ3JvdXBLZXkpIHtcbiAgICAgICAgICAgIGJsYWRlLnNlbGVjdGVkRW50aXRpZXNbZ3JvdXBLZXldID0gXy5zb3J0QnkoYmxhZGUuc2VsZWN0ZWRFbnRpdGllc1tncm91cEtleV0sICduYW1lJyk7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuY2FuY2VsQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VCbGFkZShibGFkZSk7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuaXNWYWxpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfLnNvbWUoYmxhZGUuc2VsZWN0ZWRFbnRpdGllcywgZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0ubGVuZ3RoOyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zYXZlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbmNsdWRlZFByb3BlcnRpZXMgPSBfLmZsYXR0ZW4oXy5tYXAoYmxhZGUuc2VsZWN0ZWRFbnRpdGllcywgXy52YWx1ZXMpKTtcbiAgICAgICAgICAgIGlmIChibGFkZS5vblNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUub25TZWxlY3RlZChpbmNsdWRlZFByb3BlcnRpZXMpO1xuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VCbGFkZShibGFkZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaW5pdGlhbGl6ZUJsYWRlKCk7XG5cbiAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5leHBvcnRNb2R1bGUnKVxuICAgIC5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZS5leHBvcnRTZXR0aW5nc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckdHJhbnNsYXRlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5leHBvcnRNb2R1bGUuZXhwb3J0TW9kdWxlQXBpJywgJyRsb2NhbFN0b3JhZ2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkdHJhbnNsYXRlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBleHBvcnRBcGksICRsb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgICAgICBibGFkZS5jYW5TdGFydFByb2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QgPSBibGFkZS5leHBvcnREYXRhUmVxdWVzdCB8fCB7fTtcbiAgICAgICAgYmxhZGUuYWxsUHJvcGVydGllc09mVHlwZSA9IFtdO1xuICAgICAgICBibGFkZS5kYXRhU2VsZWN0ZWQgPSAwO1xuICAgICAgICBibGFkZS5kYXRhVG90YWwgPSAwO1xuICAgICAgICBibGFkZS5wcm9wZXJ0eVNlbGVjdGVkID0gMDtcbiAgICAgICAgYmxhZGUucHJvcGVydHlUb3RhbCA9IDA7XG4gICAgICAgIGJsYWRlLmRlZmF1bHRQcm92aWRlciA9ICRsb2NhbFN0b3JhZ2UuZGVmYXVsdEV4cG9ydFByb3ZpZGVyIHx8ICdKc29uRXhwb3J0UHJvdmlkZXInO1xuICAgICAgICBibGFkZS5pc0V4cG9ydGVkVHlwZVNlbGVjdGVkID0gdHlwZW9mIChibGFkZS5leHBvcnREYXRhUmVxdWVzdC5leHBvcnRUeXBlTmFtZSkgIT09ICd1bmRlZmluZWQnO1xuICAgICAgICBibGFkZS5pc1RhYnVsYXJFeHBvcnRTdXBwb3J0ZWQgPSBibGFkZS5leHBvcnREYXRhUmVxdWVzdC5pc1RhYnVsYXJFeHBvcnRTdXBwb3J0ZWQgfHwgZmFsc2U7XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUJsYWRlKCkge1xuICAgICAgICAgICAgZXhwb3J0QXBpLmdldFByb3ZpZGVycyhmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmFsbFByb3ZpZGVycyA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgZmlsbFByb3ZpZGVycygpO1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5zZWxlY3RlZFByb3ZpZGVyID0gXy5maW5kKGJsYWRlLnByb3ZpZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpdGVtLmlkID09PSBibGFkZS5kZWZhdWx0UHJvdmlkZXIgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsYWRlLmlzRXhwb3J0ZWRUeXBlU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldEtub3duVHlwZXMoZmlsbFByb3ZpZGVycyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRLbm93blR5cGVzKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBleHBvcnRBcGkuZ2V0S25vd25UeXBlcyhmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGJsYWRlLmtub3duVHlwZXMgPSByZXN1bHRzO1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFR5cGUgPSBfLmZpbmQocmVzdWx0cyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudHlwZU5hbWUgPT09IGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmV4cG9ydFR5cGVOYW1lOyB9KTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnNlbGVjdGVkVHlwZSA9IHNlbGVjdGVkVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuc2VsZWN0ZWRUeXBlLmxvY2FsaXplZE5hbWUgPSAkdHJhbnNsYXRlLmluc3RhbnQoJ2V4cG9ydC50eXBlcy4nICsgYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWUgKyAnLm5hbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRQcm9wZXJ0eUluZm8oKTtcbiAgICAgICAgICAgICAgICAgICAgZ2V0RGF0YVRvdGFsQ291bnQoKTtcbiAgICAgICAgICAgICAgICAgICAgZ2V0RGF0YVNlbGVjdGVkQ291bnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlc2V0UHJvcGVydHlJbmZvKCkge1xuICAgICAgICAgICAgYmxhZGUuYWxsUHJvcGVydGllc09mVHlwZSA9IGJsYWRlLnNlbGVjdGVkUHJvdmlkZXIgJiYgYmxhZGUuc2VsZWN0ZWRUeXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYmxhZGUuc2VsZWN0ZWRQcm92aWRlci5pc1RhYnVsYXIgJiYgYmxhZGUuc2VsZWN0ZWRUeXBlLnRhYnVsYXJNZXRhRGF0YSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYmxhZGUuc2VsZWN0ZWRUeXBlLnRhYnVsYXJNZXRhRGF0YS5wcm9wZXJ0eUluZm9zIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBibGFkZS5zZWxlY3RlZFR5cGUubWV0YURhdGEucHJvcGVydHlJbmZvc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICAgICAgYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5LmluY2x1ZGVkUHJvcGVydGllcyA9IGJsYWRlLmFsbFByb3BlcnRpZXNPZlR5cGU7XG4gICAgICAgICAgICBibGFkZS5pc1RhYnVsYXJFeHBvcnRTdXBwb3J0ZWQgPSBibGFkZS5zZWxlY3RlZFR5cGUuaXNUYWJ1bGFyRXhwb3J0U3VwcG9ydGVkO1xuICAgICAgICAgICAgYmxhZGUuaXNFeHBvcnRlZFR5cGVTZWxlY3RlZCA9IHR5cGVvZiAoYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZXhwb3J0VHlwZU5hbWUpICE9PSAndW5kZWZpbmVkJztcbiAgICAgICAgICAgIGJsYWRlLnByb3BlcnR5U2VsZWN0ZWQgPSBibGFkZS5hbGxQcm9wZXJ0aWVzT2ZUeXBlLmxlbmd0aDtcbiAgICAgICAgICAgIGJsYWRlLnByb3BlcnR5VG90YWwgPSBibGFkZS5wcm9wZXJ0eVNlbGVjdGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZmlsbFByb3ZpZGVycygpIHtcbiAgICAgICAgICAgIGlmIChibGFkZS5hbGxQcm92aWRlcnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyTm9uVGFidWxhciA9IGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmV4cG9ydFR5cGVOYW1lICYmICFibGFkZS5pc1RhYnVsYXJFeHBvcnRTdXBwb3J0ZWQ7XG4gICAgICAgICAgICAgICAgdmFyIHByb3ZpZGVycyA9IGJsYWRlLmFsbFByb3ZpZGVycztcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyTm9uVGFidWxhcikge1xuICAgICAgICAgICAgICAgICAgICBwcm92aWRlcnMgPSBfLmZpbHRlcihwcm92aWRlcnMsIGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiAhaXRlbS5pc1RhYnVsYXIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJsYWRlLnByb3ZpZGVycyA9IF8ubWFwKHByb3ZpZGVycywgZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIHsgaWQ6IGl0ZW0udHlwZU5hbWUsIG5hbWU6ICR0cmFuc2xhdGUuaW5zdGFudCgnZXhwb3J0LnByb3ZpZGVyLW5hbWVzLicgKyBpdGVtLnR5cGVOYW1lKSwgaXNUYWJ1bGFyOiBpdGVtLmlzVGFidWxhciB9IH0pO1xuICAgICAgICAgICAgICAgIGlmIChibGFkZS5zZWxlY3RlZFByb3ZpZGVyICYmIF8uZmluZEluZGV4KGJsYWRlLnByb3ZpZGVycywgZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0uaWQgPT09IGJsYWRlLnNlbGVjdGVkUHJvdmlkZXIuaWQ7IH0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5zZWxlY3RlZFByb3ZpZGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldERhdGFUb3RhbENvdW50KGZuU3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgZGF0YVF1ZXJ5ID0ge1xuICAgICAgICAgICAgICAgIGV4cG9ydFR5cGVOYW1lOiBibGFkZS5leHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkuZXhwb3J0VHlwZU5hbWUsXG4gICAgICAgICAgICAgICAgaW5jbHVkZWRQcm9wZXJ0aWVzOiBbXSxcbiAgICAgICAgICAgICAgICBza2lwOiAwLFxuICAgICAgICAgICAgICAgIHRha2U6IDBcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGV4cG9ydEFwaS5nZXREYXRhKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwb3J0VHlwZU5hbWU6IGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmV4cG9ydFR5cGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICBkYXRhUXVlcnk6IGRhdGFRdWVyeVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmRhdGFUb3RhbCA9IGRhdGEudG90YWxDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZuU3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmblN1Y2Nlc3NDYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RGF0YVNlbGVjdGVkQ291bnQoKSB7XG4gICAgICAgICAgICB2YXIgZGF0YVF1ZXJ5ID0gYW5ndWxhci5jb3B5KGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeSk7XG4gICAgICAgICAgICBkYXRhUXVlcnkuaW5jbHVkZWRQcm9wZXJ0aWVzID0gW107XG5cbiAgICAgICAgICAgIGlmICghZGF0YVF1ZXJ5LmlzQWxsU2VsZWN0ZWQgJiYgIShkYXRhUXVlcnkub2JqZWN0SWRzICYmIGRhdGFRdWVyeS5vYmplY3RJZHMubGVuZ3RoKSAmJiAhZGF0YVF1ZXJ5LmlzQW55RmlsdGVyQXBwbGllZCkge1xuICAgICAgICAgICAgICAgIGJsYWRlLmRhdGFTZWxlY3RlZCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBleHBvcnRBcGkuZ2V0RGF0YShcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydFR5cGVOYW1lOiBibGFkZS5leHBvcnREYXRhUmVxdWVzdC5leHBvcnRUeXBlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVF1ZXJ5OiBkYXRhUXVlcnlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5kYXRhU2VsZWN0ZWQgPSBkYXRhLnRvdGFsQ291bnQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUucHJvdmlkZXJDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5kZWZhdWx0RXhwb3J0UHJvdmlkZXIgPSBibGFkZS5zZWxlY3RlZFByb3ZpZGVyLmlkO1xuICAgICAgICAgICAgaWYgKGJsYWRlLmlzRXhwb3J0ZWRUeXBlU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXNldFByb3BlcnR5SW5mbygpOyAvLyBCZWFjdXNlIHRhYnVsYXItPm5vbnRhYnVsYXIgb3IgdmljZS12ZXJzYVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zdGFydEV4cG9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghJHNjb3BlLnZhbGlkYXRlRXhwb3J0UGFyYW1ldGVycygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXHJcbiAgICAgICAgICAgIGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LnByb3ZpZGVyTmFtZSA9IGJsYWRlLnNlbGVjdGVkUHJvdmlkZXIuaWQ7XG4gICAgICAgICAgICBkZWxldGUgYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5LnNraXA7XG4gICAgICAgICAgICBkZWxldGUgYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5LnRha2U7XG4gICAgICAgICAgICBkZWxldGUgYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5LklzUHJldmlldztcbiAgICAgICAgICAgIGJsYWRlLmlzRXhwb3J0aW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgdmFyIHByb2dyZXNzQmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6ICdleHBvcnRQcm9ncmVzcycsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdleHBvcnQuYmxhZGVzLmV4cG9ydC1wcm9ncmVzcy50aXRsZScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuZXhwb3J0TW9kdWxlLmV4cG9ydFByb2dyZXNzQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5FeHBvcnQpL1NjcmlwdHMvYmxhZGVzL2V4cG9ydC1wcm9ncmVzcy50cGwuaHRtbCcsXG4gICAgICAgICAgICAgICAgZXhwb3J0RGF0YVJlcXVlc3Q6IGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzRXhwb3J0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUocHJvZ3Jlc3NCbGFkZSwgYmxhZGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZWxlY3RFeHBvcnRlZFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZXhwb3J0ZWRUeXBlYmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6ICdleHBvcnRlZFR5cGVTZWxlY3RvcicsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdleHBvcnQuYmxhZGVzLmV4cG9ydC10eXBlLXNlbGVjdG9yLnRpdGxlJyxcbiAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ2V4cG9ydC5ibGFkZXMuZXhwb3J0LXR5cGUtc2VsZWN0b3Iuc3VidGl0bGUnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZS5leHBvcnRUeXBlU2VsZWN0b3JDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLkV4cG9ydCkvU2NyaXB0cy9ibGFkZXMvZXhwb3J0LXR5cGUtc2VsZWN0b3IudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgIGlzQ2xvc2luZ0Rpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBrbm93blR5cGVzOiBibGFkZS5rbm93blR5cGVzLFxuICAgICAgICAgICAgICAgIGV4cG9ydERhdGFSZXF1ZXN0OiBibGFkZS5leHBvcnREYXRhUmVxdWVzdCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFByb3ZpZGVyOiBibGFkZS5zZWxlY3RlZFByb3ZpZGVyLFxuICAgICAgICAgICAgICAgIG9uU2VsZWN0ZWQ6IGZ1bmN0aW9uIChzZWxlY3RlZFR5cGVEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYmxhZGUuc2VsZWN0ZWRUeXBlIHx8IGJsYWRlLnNlbGVjdGVkVHlwZS5uYW1lICE9IHNlbGVjdGVkVHlwZURhdGEuc2VsZWN0ZWRUeXBlLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0ID0gYW5ndWxhci5leHRlbmQoYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QsIHNlbGVjdGVkVHlwZURhdGEuZXhwb3J0RGF0YVJlcXVlc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5ID0gYW5ndWxhci5jb3B5KHNlbGVjdGVkVHlwZURhdGEuZXhwb3J0RGF0YVJlcXVlc3QuZGF0YVF1ZXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnNlbGVjdGVkVHlwZSA9IHNlbGVjdGVkVHlwZURhdGEuc2VsZWN0ZWRUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRQcm9wZXJ0eUluZm8oKTsgLy8gUHJvcGVydHkgc2V0IGNoYW5nZWQgZHVlIHRvIGNoYW5naW5nIGV4cG9ydCB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsUHJvdmlkZXJzKCk7IC8vIFJlZmlsbCBwcm92aWRlcnMgY29tYm8gZm9yIG5ldyB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXREYXRhVG90YWxDb3VudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5kYXRhU2VsZWN0ZWQgPSBkYXRhLnRvdGFsQ291bnQ7IC8vIERyb3AgZGF0YSBzZWxlY3Rpb24gKHNlbGVjdGVkIGFsbCBpbW1lZGlhdGVseSBhZnRlciBleHBvcnRlZCB0eXBlIHNlbGVjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsgLy8gUmVjYWxjIHRvdGFsIGF2YWlsYWJsZSByZWNvcmRzXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKGV4cG9ydGVkVHlwZWJsYWRlLCBibGFkZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNlbGVjdEV4cG9ydGVkUHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBleHBvcnRlZFByb3BlcnRpZXNibGFkZSA9IHtcbiAgICAgICAgICAgICAgICBpZDogJ2V4cG9ydGVkUHJvcGVydGllc1NlbGVjdG9yJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5leHBvcnRNb2R1bGUuZXhwb3J0UHJvcGVydGllc1NlbGVjdG9yQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5FeHBvcnQpL1NjcmlwdHMvYmxhZGVzL2V4cG9ydC1wcm9wZXJ0aWVzLXNlbGVjdG9yLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICBpc0Nsb3NpbmdEaXNhYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXhwb3J0RGF0YVJlcXVlc3Q6IGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIGFsbFByb3BlcnRpZXNPZlR5cGU6IGJsYWRlLmFsbFByb3BlcnRpZXNPZlR5cGUsXG4gICAgICAgICAgICAgICAgb25TZWxlY3RlZDogZnVuY3Rpb24gKGluY2x1ZGVkUHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5leHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkuaW5jbHVkZWRQcm9wZXJ0aWVzID0gaW5jbHVkZWRQcm9wZXJ0aWVzO1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5wcm9wZXJ0eVNlbGVjdGVkID0gaW5jbHVkZWRQcm9wZXJ0aWVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShleHBvcnRlZFByb3BlcnRpZXNibGFkZSwgYmxhZGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZWxlY3RFeHBvcnRlZERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZXhwb3J0ZWREYXRhYmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6ICdleHBvcnRlZERhdGFTZWxlY3RvcicsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdleHBvcnQuYmxhZGVzLmV4cG9ydC1nZW5lcmljLXZpZXdlci50aXRsZScsXG4gICAgICAgICAgICAgICAgc3VidGl0bGU6ICdleHBvcnQuYmxhZGVzLmV4cG9ydC1nZW5lcmljLXZpZXdlci5zdWJ0aXRsZScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuZXhwb3J0TW9kdWxlLmV4cG9ydEdlbmVyaWNWaWV3ZXJDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLkV4cG9ydCkvU2NyaXB0cy9ibGFkZXMvZXhwb3J0LWdlbmVyaWMtdmlld2VyLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICBpc0Nsb3NpbmdEaXNhYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXhwb3J0RGF0YVJlcXVlc3Q6IGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGVkOiBmdW5jdGlvbiAoZGF0YVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmV4cG9ydERhdGFSZXF1ZXN0LmRhdGFRdWVyeSA9IGRhdGFRdWVyeTtcbiAgICAgICAgICAgICAgICAgICAgZ2V0RGF0YVNlbGVjdGVkQ291bnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShleHBvcnRlZERhdGFibGFkZSwgYmxhZGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS52YWxpZGF0ZUV4cG9ydFBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gIWJsYWRlLmlzRXhwb3J0aW5nICYmXG4gICAgICAgICAgICAgICAgYmxhZGUuZXhwb3J0RGF0YVJlcXVlc3QgJiZcbiAgICAgICAgICAgICAgICBibGFkZS5leHBvcnREYXRhUmVxdWVzdC5leHBvcnRUeXBlTmFtZSAmJlxuICAgICAgICAgICAgICAgIGJsYWRlLnNlbGVjdGVkUHJvdmlkZXIgJiZcbiAgICAgICAgICAgICAgICBibGFkZS5leHBvcnREYXRhUmVxdWVzdC5kYXRhUXVlcnkgJiZcbiAgICAgICAgICAgICAgICBibGFkZS5kYXRhU2VsZWN0ZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLXVwbG9hZCc7XG4gICAgICAgIGluaXRpYWxpemVCbGFkZSgpO1xuICAgIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZScpXG4gICAgLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UuZXhwb3J0TW9kdWxlLmV4cG9ydFR5cGVTZWxlY3RvckNvbnRyb2xsZXInLCBbJyRzY29wZScsICckdHJhbnNsYXRlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAndmlydG9Db21tZXJjZS5leHBvcnRNb2R1bGUuZXhwb3J0TW9kdWxlQXBpJywgZnVuY3Rpb24gKCRzY29wZSwgJHRyYW5zbGF0ZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgZXhwb3J0QXBpKSB7XG4gICAgICAgIHZhciB0eXBlVHJlZTtcbiAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgICAgICBibGFkZS50aXRsZSA9ICdleHBvcnQuYmxhZGVzLmV4cG9ydC1zZXR0aW5ncy5sYWJlbHMuZXhwb3J0ZWQtdHlwZSc7XG4gICAgICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLWZvbGRlcic7XG4gICAgICAgIGJsYWRlLmtub3duVHlwZXNUcmVlID0ge307XG5cbiAgICAgICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uIChkaXNhYmxlT3BlbkFuaW1hdGlvbikge1xuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKGJsYWRlLmtub3duVHlwZXMpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5rbm93blR5cGVzVHJlZSA9IGFuZ3VsYXIuY29weShibGFkZS5rbm93blR5cGVzKTtcbiAgICAgICAgICAgICAgICBibGFkZS5wcmVwYXJlVHlwZXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0QXBpLmdldEtub3duVHlwZXMoXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5rbm93blR5cGVzVHJlZSA9IHJlc3VsdHM7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5wcmVwYXJlVHlwZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7IGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAobm9kZSwgZGlzYWJsZU9wZW5BbmltYXRpb24pIHtcbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VDaGlsZHJlbkJsYWRlcyhibGFkZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IG5vZGUuZ3JvdXBOYW1lO1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnNlYXJjaFRleHQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXRpZXMgPSBub2RlLmNoaWxkcmVuO1xuXG4gICAgICAgICAgICAgICAgICAgIHNldEJyZWFkY3J1bWJzKG5vZGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFR5cGVzID0gXy5maWx0ZXIoYmxhZGUuYWxsR3JvdXBzLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5ncm91cE5hbWUgPT09IG5vZGUuZ3JvdXBOYW1lIHx8IChub2RlLmdyb3VwTmFtZSA9PT0gJ0dlbmVyYWwnICYmICF4Lmdyb3VwTmFtZSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRUeXBlID0gc2VsZWN0ZWRUeXBlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkVHlwZURhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBvcnREYXRhUmVxdWVzdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydFR5cGVOYW1lOiBzZWxlY3RlZFR5cGUudHlwZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydFR5cGVOYW1lOiBzZWxlY3RlZFR5cGUuZXhwb3J0RGF0YVF1ZXJ5VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBbGxTZWxlY3RlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdHJpY3REYXRhU2VsZWN0aXZpdHk6IHNlbGVjdGVkVHlwZS5yZXN0cmljdERhdGFTZWxlY3Rpdml0eVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkVHlwZTpzZWxlY3RlZFR5cGVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsYWRlLm9uU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLm9uU2VsZWN0ZWQoc2VsZWN0ZWRUeXBlRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUoYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYmxhZGUucHJlcGFyZVR5cGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgXy5lYWNoKGJsYWRlLmtub3duVHlwZXNUcmVlLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIGl0ZW0ubG9jYWxpemVkTmFtZSA9ICR0cmFuc2xhdGUuaW5zdGFudCgnZXhwb3J0LnR5cGVzLicgKyBpdGVtLnR5cGVOYW1lICsgJy5uYW1lJyk7XG4gICAgICAgICAgICAgICAgaXRlbS5sb2NhbGl6ZWROYW1lRGVzY3JpcHRpb24gPSAkdHJhbnNsYXRlLmluc3RhbnQoJ2V4cG9ydC50eXBlcy4nICsgaXRlbS50eXBlTmFtZSArICcuZGVzY3JpcHRpb24nKTtcbiAgICAgICAgICAgICAgICBpdGVtLmxvY2FsaXplZEdyb3VwID0gJHRyYW5zbGF0ZS5pbnN0YW50KCdleHBvcnQuZ3JvdXBzLicgKyBpdGVtLmdyb3VwICsgJy5uYW1lJyk7XG4gICAgICAgICAgICAgICAgaXRlbS5sb2NhbGl6ZWRHcm91cERlc2NyaXB0aW9uID0gJHRyYW5zbGF0ZS5pbnN0YW50KCdleHBvcnQuZ3JvdXBzLicgKyBpdGVtLmdyb3VwICsgJy5kZXNjcmlwdGlvbicpO1xuICAgICAgICAgICAgICAgIGl0ZW0uZ3JvdXBOYW1lID0gaXRlbS5ncm91cCArICd8JyArIGl0ZW0udHlwZU5hbWU7XG4gICAgICAgICAgICAgICAgaXRlbS5sb2NhbGl6ZWRHcm91cE5hbWUgPSBpdGVtLmxvY2FsaXplZEdyb3VwICsgJ3wnICsgaXRlbS5sb2NhbGl6ZWROYW1lO1xuICAgICAgICAgICAgICAgIHZhciBsYXN0SW5kZXggPSBpdGVtLnR5cGVOYW1lLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICAgICAgICAgICAgaXRlbS5uYW1lID0gaXRlbS50eXBlTmFtZS5zdWJzdHJpbmcobGFzdEluZGV4ICsgMSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJsYWRlLmFsbEdyb3VwcyA9IGJsYWRlLmtub3duVHlwZXNUcmVlO1xuICAgICAgICAgICAgdHlwZVRyZWUgPSB7fTtcbiAgICAgICAgICAgIF8uZWFjaChibGFkZS5rbm93blR5cGVzVHJlZSwgZnVuY3Rpb24gKGV4cG9ydGVkVHlwZSkge1xuICAgICAgICAgICAgICAgIHZhciBwYXRocyA9IChleHBvcnRlZFR5cGUuZ3JvdXBOYW1lID8gZXhwb3J0ZWRUeXBlLmdyb3VwTmFtZSA6ICdHZW5lcmFsJykuc3BsaXQoJ3wnKTtcbiAgICAgICAgICAgICAgICB2YXIgbGFzdFBhcmVudCA9IHR5cGVUcmVlO1xuICAgICAgICAgICAgICAgIHZhciBsYXN0UGFyZW50SWQgPSAnJztcbiAgICAgICAgICAgICAgICBfLmVhY2gocGF0aHMsIGZ1bmN0aW9uIChwYXRoLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RQYXJlbnRJZCArPSAnfCcgKyBwYXRoO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3RQYXJlbnRbcGF0aF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYXN0SW5kZXggPSBwYXRoLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJlZU5vZGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcGF0aC5zdWJzdHJpbmcobGFzdEluZGV4ICsgMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsaXplZE5hbWU6IGV4cG9ydGVkVHlwZS5sb2NhbGl6ZWROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGl6ZWREZXNjcmlwdGlvbjogZXhwb3J0ZWRUeXBlLmxvY2FsaXplZE5hbWVEZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBOYW1lOiBsYXN0UGFyZW50SWQuc3Vic3RyaW5nKDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBhcmVudFtwYXRoXSA9IHRyZWVOb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydGVkVHlwZS5ncm91cE5hbWUgJiYgXy5hbGwoYmxhZGUuYWxsR3JvdXBzLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5ncm91cE5hbWUgIT09IHRyZWVOb2RlLmdyb3VwTmFtZTsgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmVlTm9kZS5sb2NhbGl6ZWROYW1lID0gZXhwb3J0ZWRUeXBlLmxvY2FsaXplZEdyb3VwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWVOb2RlLmxvY2FsaXplZERlc2NyaXB0aW9uID0gZXhwb3J0ZWRUeXBlLmxvY2FsaXplZEdyb3VwRGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuYWxsR3JvdXBzLnB1c2godHJlZU5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBwYXRocy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3RQYXJlbnRbcGF0aF0uY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UGFyZW50W3BhdGhdLmNoaWxkcmVuID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UGFyZW50ID0gbGFzdFBhcmVudFtwYXRoXS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyByZXN0b3JlIHByZXZpb3VzIHNlbGVjdGlvblxuICAgICAgICAgICAgaWYgKGJsYWRlLnNlYXJjaFRleHQpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXRpZXMgPSB0eXBlVHJlZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gcmVjb25zdHJ1Y3QgdHJlZSBieSBicmVhZENydW1ic1xuICAgICAgICAgICAgICAgIHZhciBsYXN0Y2hpbGRyZW4gPSB0eXBlVHJlZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGJsYWRlLmJyZWFkY3J1bWJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RjaGlsZHJlbiA9IGxhc3RjaGlsZHJlbltibGFkZS5icmVhZGNydW1ic1tpXS5uYW1lXS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0aWVzID0gbGFzdGNoaWxkcmVuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBvcGVuIHByZXZpb3VzIHNldHRpbmdzIGRldGFpbCBibGFkZSBpZiBwb3NzaWJsZVxuICAgICAgICAgICAgaWYgKCRzY29wZS5zZWxlY3RlZE5vZGVJZCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3ROb2RlKHsgZ3JvdXBOYW1lOiAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgfSwgZGlzYWJsZU9wZW5BbmltYXRpb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICAvL0JyZWFkY3J1bWJzXG4gICAgICAgIGZ1bmN0aW9uIHNldEJyZWFkY3J1bWJzKG5vZGUpIHtcbiAgICAgICAgICAgIGJsYWRlLmJyZWFkY3J1bWJzLnNwbGljZSgxLCBibGFkZS5icmVhZGNydW1icy5sZW5ndGggLSAxKTtcblxuICAgICAgICAgICAgaWYgKG5vZGUuZ3JvdXBOYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxhc3RQYXJlbnRJZCA9ICcnO1xuICAgICAgICAgICAgICAgIHZhciBsYXN0Y2hpbGRyZW4gPSB0eXBlVHJlZTtcbiAgICAgICAgICAgICAgICB2YXIgcGF0aHMgPSBub2RlLmdyb3VwTmFtZS5zcGxpdCgnfCcpO1xuICAgICAgICAgICAgICAgIF8uZWFjaChwYXRocywgZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdGNoaWxkcmVuID0gbGFzdGNoaWxkcmVuW3BhdGhdLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBsYXN0UGFyZW50SWQgKz0gJ3wnICsgcGF0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJyZWFkQ3J1bWIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogbGFzdFBhcmVudElkLnN1YnN0cmluZygxKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICR0cmFuc2xhdGUuaW5zdGFudCgnZXhwb3J0Lmdyb3Vwcy4nICsgcGF0aCArICcubmFtZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IGxhc3RjaGlsZHJlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdE5vZGUoeyBncm91cE5hbWU6IHRoaXMuaWQsIGNoaWxkcmVuOiB0aGlzLmNoaWxkcmVuIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmJyZWFkY3J1bWJzLnB1c2goYnJlYWRDcnVtYik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBibGFkZS5icmVhZGNydW1icyA9IFt7XG4gICAgICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgICAgIG5hbWU6IFwiZXhwb3J0LmJsYWRlcy5leHBvcnQtdHlwZS1zZWxlY3Rvci5icmVhZC1jcnVtYi10b3BcIixcbiAgICAgICAgICAgIG5hdmlnYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdE5vZGUoeyBncm91cE5hbWU6IG51bGwsIGNoaWxkcmVuOiB0eXBlVHJlZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfV07XG5cbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnYmxhZGUuc2VhcmNoVGV4dCcsIGZ1bmN0aW9uIChuZXdWYWwpIHtcbiAgICAgICAgICAgIGlmIChuZXdWYWwpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXRpZXMgPSB0eXBlVHJlZTtcbiAgICAgICAgICAgICAgICBzZXRCcmVhZGNydW1icyh7IGdyb3VwTmFtZTogbnVsbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gYWN0aW9ucyBvbiBsb2FkXG4gICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5leHBvcnRNb2R1bGUnKVxuICAgIC5mYWN0b3J5KCd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZS5leHBvcnRNb2R1bGVBcGknLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgnJywgbnVsbCwge1xuICAgICAgICAgICAgZ2V0UHJvdmlkZXJzOiB7IG1ldGhvZDogJ0dFVCcsIGlzQXJyYXk6IHRydWUsIHVybDogJ2FwaS9leHBvcnQvcHJvdmlkZXJzJ30sXG4gICAgICAgICAgICBnZXRLbm93blR5cGVzOiB7IG1ldGhvZDogJ0dFVCcsIGlzQXJyYXk6IHRydWUgLHVybDogJ2FwaS9leHBvcnQva25vd250eXBlcycgfSxcbiAgICAgICAgICAgIHJ1bkV4cG9ydDoge21ldGhvZDogJ1BPU1QnLCB1cmw6ICdhcGkvZXhwb3J0L3J1bid9LFxuICAgICAgICAgICAgZ2V0RGF0YTogeyBtZXRob2Q6ICdQT1NUJywgdXJsOiAnYXBpL2V4cG9ydC9kYXRhJyB9LFxuICAgICAgICAgICAgY2FuY2VsOiB7IG1ldGhvZDogJ1BPU1QnLCB1cmw6ICdhcGkvZXhwb3J0L3Rhc2svY2FuY2VsJyB9XG4gICAgICAgIH0pO1xuICAgIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLmV4cG9ydE1vZHVsZScpXG4uZmFjdG9yeSgndmlydG9Db21tZXJjZS5leHBvcnRNb2R1bGUuZ2VuZXJpY1ZpZXdlckl0ZW1TZXJ2aWNlJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciB2aWV3ZXJzID0ge307XG4gICAgXG4gICAgdGhpcy5yZWdpc3RlclZpZXdlciA9IGZ1bmN0aW9uICh0eXBlTmFtZSwgYmxhZGUpIHtcbiAgICAgICAgdmlld2Vyc1t0eXBlTmFtZV0gPSBibGFkZTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5nZXRWaWV3ZXIgPSBmdW5jdGlvbiAodHlwZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHZpZXdlcnNbdHlwZU5hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xufSlcbiJdLCJzb3VyY2VSb290IjoiIn0=