!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(1),n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21),n(22),n(23),n(24),e.exports=n(25)},function(e,t){null!=AppDependencies&&AppDependencies.push("virtoCommerce.contentModule"),angular.module("virtoCommerce.contentModule",[]).run(["platformWebApp.authService","platformWebApp.mainMenuService","platformWebApp.widgetService","$state","platformWebApp.bladeNavigationService","platformWebApp.permissionScopeResolver","virtoCommerce.storeModule.stores","virtoCommerce.contentModule.menuLinkList-associationTypesService",function(e,t,n,o,r,i,a,s){var l={path:"browse/content",icon:"fa fa-code",title:"content.main-menu-title",priority:111,action:function(){o.go("workspace.content")},permission:"content:access"};t.addMenuItem(l),n.registerWidget({size:[2,1],controller:"virtoCommerce.contentModule.storeCMSWidgetController",template:"Modules/$(VirtoCommerce.Content)/Scripts/widgets/storeCMSWidget.tpl.html",permission:"content:read"},"storeDetail");var c={type:"ContentSelectedStoreScope",title:"Only for selected stores",selectFn:function(e,t){var n={id:"store-pick",title:"content.blades.scope-value-pick-from-simple-list.title",subtitle:"content.blades.scope-value-pick-from-simple-list.subtitle",currentEntity:this,onChangesConfirmedFn:t,dataService:a,controller:"platformWebApp.security.scopeValuePickFromSimpleListController",template:"$(Platform)/Scripts/app/security/blades/common/scope-value-pick-from-simple-list.tpl.html"};r.showBlade(n,e)}};i.register(c),s.registerType({id:"product",name:"Product",openSelectWizard:function(e,t){var n=[],o={id:"CatalogEntrySelect",title:"content.blades.catalog-items-select.title-product",controller:"virtoCommerce.catalogModule.catalogItemSelectController",template:"Modules/$(VirtoCommerce.Catalog)/Scripts/blades/common/catalog-items-select.tpl.html",breadcrumbs:[],toolbarCommands:[{name:"platform.commands.pick-selected",icon:"fa fa-plus",executeMethod:function(t){e.associatedObjectId=n[0].id,e.associatedObjectName=n[0].name,r.closeBlade(t)},canExecuteMethod:function(){return 1==n.length}}]};o.options={showCheckingMultiple:!1,checkItemFn:function(e,t){"category"==e.type?(o.error="Must select Product",e.selected=void 0):(t?_.all(n,(function(t){return t.id!=e.id}))&&n.push(e):n=_.reject(n,(function(t){return t.id==e.id})),o.error=void 0)}},r.showBlade(o,t)}}),s.registerType({id:"category",name:"Category",openSelectWizard:function(t,n){if(e.checkPermission("content:update")){var o=[],i={id:"CatalogCategorySelect",title:"content.blades.catalog-items-select.title-category",controller:"virtoCommerce.catalogModule.catalogItemSelectController",template:"Modules/$(VirtoCommerce.Catalog)/Scripts/blades/common/catalog-items-select.tpl.html",breadcrumbs:[],toolbarCommands:[{name:"platform.commands.pick-selected",icon:"fa fa-plus",executeMethod:function(e){t.associatedObjectId=o[0].id,t.associatedObjectName=o[0].name,r.closeBlade(e)},canExecuteMethod:function(){return 1==o.length}}]};i.options={showCheckingMultiple:!1,allowCheckingItem:!1,allowCheckingCategory:!0,checkItemFn:function(e,t){"category"!=e.type?(i.error="Must select Category",e.selected=void 0):(t?_.all(o,(function(t){return t.id!=e.id}))&&o.push(e):o=_.reject(o,(function(t){return t.id==e.id})),i.error=void 0)}},r.showBlade(i,n)}}})}]).config(["$stateProvider",function(e){e.state("workspace.content",{url:"/content?storeId",templateUrl:"$(Platform)/Scripts/common/templates/home.tpl.html",controller:["$scope","platformWebApp.bladeNavigationService",function(e,t){t.showBlade({id:"content",title:"content.blades.content-main.title",subtitle:"content.blades.content-main.subtitle",controller:"virtoCommerce.contentModule.contentMainController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/content-main.tpl.html",isClosingDisabled:!0})}]})}]).factory("virtoCommerce.contentModule.menuLinkList-associationTypesService",[function(){return{objects:[],registerType:function(e){e.templateURL||(e.templateURL="linkListSelectObject.tpl"),this.objects.push(e)}}}]).filter("fallbackTranslate",["$translate",function(e){return function(t,n){var o=e.instant(t);return o===t?n:o}}]).filter("localizeDynamicPropertyName",(function(){return function(e,t){var n=e.name,o=_.find(e.displayNames,(function(e){return e&&e.locale.startsWith(t)}));return o&&o.name&&(n+=" ("+o.name+")"),n}}))},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.contentMainController",["$scope","$state","$stateParams","virtoCommerce.contentModule.menus","virtoCommerce.contentModule.contentApi","virtoCommerce.storeModule.stores","platformWebApp.bladeNavigationService","platformWebApp.dialogService","platformWebApp.widgetService",function(e,t,n,o,r,i,a,s,l){var c=e.blade;c.initialize=function(){c.isLoading=!0,c.currentEntities=[],n.storeId&&i.get({id:n.storeId},c.openThemes),i.query(null,(function(e){var t=2*e.length,n=function(){c.isLoading=--t};c.isLoading=_.any(e),_.each(e,(function(e){c.currentEntities.push({storeId:e.id,store:e,themesCount:"...",pagesCount:"...",blogsCount:"...",listLinksCount:"..."}),c.refresh(e.id,"stats").finally(n),c.refresh(e.id,"menus").finally(n)}))})),e.thereIsWidgetToShow=_.any(l.widgetsMap.contentMainListItem,(function(e){return!angular.isFunction(e.isVisible)||e.isVisible(c)}))},c.refresh=function(e,t,n){var i=_.findWhere(c.currentEntities,{storeId:e});switch(t){case"menus":return o.get({storeId:e},(function(e){i.listLinksCount=e.length}),(function(e){a.setError("Error "+e.status,c)})).$promise;case"stats":return r.getStatistics({storeId:e},(function(e){angular.extend(i,e)}),(function(e){a.setError("Error "+e.status,c)})).$promise;case"defaultTheme":i.activeThemeName=n}},e.$on("cms-menus-changed",(function(e,t){c.refresh(t,"menus")})),e.$on("cms-statistics-changed",(function(e,t){c.refresh(t,"stats")})),c.openThemes=function(e){var t={id:"themesListBlade",storeId:e.id,title:"content.blades.themes-list.title",titleValues:{name:e.name},subtitle:"content.blades.themes-list.subtitle",controller:"virtoCommerce.contentModule.themesListController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/themes/themes-list.tpl.html"};a.showBlade(t,c)},c.openPages=function(e){var t={id:"pagesList",contentType:"pages",storeId:e.storeId,storeUrl:e.store.url,languages:e.store.languages,currentEntity:e,title:e.store.name,subtitle:"content.blades.pages-list.subtitle-pages",controller:"virtoCommerce.contentModule.pagesListController",template:"Modules/$(VirtoCommerce.Assets)/Scripts/blades/asset-list.tpl.html"};a.showBlade(t,c)},c.openLinkLists=function(e){var t={id:"linkListBlade",storeId:e.storeId,title:"content.blades.link-lists.title",subtitle:"content.blades.link-lists.subtitle",subtitleValues:{name:e.store.name},controller:"virtoCommerce.contentModule.linkListsController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/menu/link-lists.tpl.html"};a.showBlade(t,c)},c.openBlogs=function(e){var t={id:"blogsListBlade",contentType:"blogs",storeId:e.storeId,storeUrl:e.store.url,languages:e.store.languages,currentEntity:e,title:e.store.name,subtitle:"content.blades.pages-list.subtitle-blogs",controller:"virtoCommerce.contentModule.pagesListController",template:"Modules/$(VirtoCommerce.Assets)/Scripts/blades/asset-list.tpl.html"};a.showBlade(t,c)},c.addNewTheme=function(e){var t={id:"addTheme",isNew:!0,isActivateAfterSave:!e.themesCount,store:e.store,storeId:e.storeId,controller:"virtoCommerce.contentModule.themeDetailController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/themes/theme-detail.tpl.html"};a.showBlade(t,c)},c.addNewPage=function(e){var t={id:"addPage",contentType:"pages",storeId:e.storeId,languages:e.store.languages,currentEntity:{},isNew:!0,title:"content.blades.edit-page.title-new",subtitle:"content.blades.edit-page.subtitle-new",controller:"virtoCommerce.contentModule.pageDetailController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/pages/page-detail.tpl.html"};a.showBlade(t,c)},c.addNewLinkList=function(e){var t={id:"addMenuLinkListBlade",storeId:e.storeId,isNew:!0,title:"content.blades.menu-link-list.title-new",subtitle:"content.blades.menu-link-list.subtitle-new",controller:"virtoCommerce.contentModule.menuLinkListController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/menu/menu-link-list.tpl.html"};a.showBlade(t,c)},c.addBlog=function(e){var t={id:"newBlog",contentType:"blogs",storeId:e.storeId,currentEntity:{},isNew:!0,title:"content.blades.edit-blog.title-new",subtitle:"content.blades.edit-blog.subtitle-new",controller:"virtoCommerce.contentModule.editBlogController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/pages/edit-blog.tpl.html"};a.showBlade(t,c)},c.openTheme=function(e){var t={id:"themeAssetListBlade",contentType:"themes",storeId:e.storeId,currentEntity:{name:e.activeThemeName,url:e.activeThemeURL},subtitle:"content.blades.asset-list.subtitle",controller:"virtoCommerce.contentModule.assetListController",template:"Modules/$(VirtoCommerce.Assets)/Scripts/blades/asset-list.tpl.html"};a.showBlade(t,c)},c.previewTheme=function(e){if(e.store.url)window.open(e.store.url+"?previewtheme="+e.activeThemeName,"_blank");else{s.showNotificationDialog({id:"noUrlInStore",title:"content.dialogs.set-store-url.title",message:"content.dialogs.set-store-url.message"})}},e.openStoresModule=function(){t.go("workspace.storeModule")},c.headIcon="fa fa-code",c.initialize()}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.linkListsController",["$rootScope","$scope","virtoCommerce.contentModule.menus","virtoCommerce.storeModule.stores","platformWebApp.bladeNavigationService","platformWebApp.dialogService","uiGridConstants","platformWebApp.uiGridHelper",function(e,t,n,o,r,i,a,s){t.uiGridConstants=a;var l=t.blade;l.refresh=function(){l.isLoading=!0,n.get({storeId:l.storeId},(function(e){l.currentEntities=e,l.isLoading=!1,l.parentBlade.refresh(l.storeId,"menus")}),(function(e){r.setError("Error "+e.status,l)}))},l.selectNode=function(e,n){t.selectedNodeId=e.id;var o={id:"menuLinkListBlade",storeId:l.storeId,parentRefresh:l.refresh,controller:"virtoCommerce.contentModule.menuLinkListController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/menu/menu-link-list.tpl.html"};n?angular.extend(o,{isNew:!0,title:"content.blades.menu-link-list.title-new",subtitle:"content.blades.menu-link-list.subtitle-new"}):angular.extend(o,{listId:e.id,title:"content.blades.menu-link-list.title",titleValues:{name:e.name},subtitle:"content.blades.menu-link-list.subtitle"}),r.showBlade(o,l)},l.deleteList=function(t){r.closeChildrenBlades(l,(function(){var o={id:"confirmDelete",title:"content.dialogs.link-list-delete.title",message:"content.dialogs.link-list-delete.message",callback:function(o){if(o){l.isLoading=!0;var i=_.pluck(t,"id");n.delete({storeId:l.storeId,listIds:i},(function(){l.refresh(),e.$broadcast("cms-menus-changed",l.storeId)}),(function(e){r.setError("Error "+e.status,l)}))}}};i.showConfirmationDialog(o)}))},l.headIcon="fa fa-list-ol",l.toolbarCommands=[{name:"platform.commands.add",icon:"fa fa-plus",executeMethod:function(){l.selectNode({},!0)},canExecuteMethod:function(){return!0},permission:"content:create"},{name:"platform.commands.delete",icon:"fa fa-trash-o",executeMethod:function(){l.deleteList(t.gridApi.selection.getSelectedRows())},canExecuteMethod:function(){return t.gridApi&&_.any(t.gridApi.selection.getSelectedRows())},permission:"content:delete"}],t.setGridOptions=function(e){s.initialize(t,e)},l.refresh()}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.menuLinkListController",["$rootScope","$scope","virtoCommerce.contentModule.menus","virtoCommerce.storeModule.stores","platformWebApp.bladeNavigationService","platformWebApp.dialogService","virtoCommerce.contentModule.menuLinkList-associationTypesService","uiGridConstants","platformWebApp.uiGridHelper",function(e,t,n,o,r,i,a,s,l){var c=t.blade;function d(){return!angular.equals(c.currentEntity,c.origEntity)&&c.hasUpdatePermission()}function u(){if(!c.currentEntity)return!1;var e=c.currentEntity.name,t=_.all(c.currentEntity.menuLinks,(function(e){return e.title&&e.url&&(!e.associatedObjectType||e.associatedObjectId)}));return d()&&e&&t&&_.any(c.currentEntity.menuLinks)}c.updatePermission=c.isNew?"content:create":"content:update",t.uiGridConstants=s,c.initialize=function(){c.isNew?(c.currentEntity={storeId:c.storeId,menuLinks:[{priority:0}]},c.isLoading=!1):n.getList({storeId:c.storeId,listId:c.listId},(function(e){_.each(e.menuLinks,(function(e){e.associatedObjectType&&(e.associatedObject=_.findWhere(t.associatedObjectTypes,{id:e.associatedObjectType}))})),e.menuLinks=_.sortBy(e.menuLinks,"priority").reverse(),c.origEntity=e,c.currentEntity=angular.copy(e),c.isLoading=!1}),(function(e){r.setError("Error "+e.status,c)})),c.toolbarCommands=c.isNew?[]:[{name:"platform.commands.save",icon:"fa fa-save",executeMethod:t.saveChanges,canExecuteMethod:u,permission:c.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(c.origEntity,c.currentEntity)},canExecuteMethod:function(){return!angular.equals(c.origEntity,c.currentEntity)&&c.hasUpdatePermission()},permission:c.updatePermission}],c.toolbarCommands.splice(c.toolbarCommands.length,0,{name:"content.commands.add-link",icon:"fa fa-plus",executeMethod:function(){c.currentEntity.menuLinks.push({priority:0,menuLinkListId:c.listId}),c.recalculatePriority()},canExecuteMethod:function(){return!0},permission:c.updatePermission},{name:"content.commands.delete-links",icon:"fa fa-trash-o",executeMethod:function(){t.deleteRows(t.gridApi.selection.getSelectedRows())},canExecuteMethod:function(){return t.gridApi&&_.any(t.gridApi.selection.getSelectedRows())},permission:c.updatePermission})},t.saveChanges=function(){c.isLoading=!0,n.checkList({storeId:c.storeId,id:c.currentEntity.id,name:c.currentEntity.name,language:c.currentEntity.language},(function(o){if(Boolean(o.result))n.update({storeId:c.storeId},c.currentEntity,(function(n){c.isNew?t.bladeClose():(c.isLoading=!1,c.origEntity=angular.copy(c.currentEntity)),c.parentRefresh&&c.parentRefresh(),e.$broadcast("cms-menus-changed",c.storeId)}),(function(e){r.setError("Error "+e.status,c)}));else{c.isLoading=!1;i.showNotificationDialog({id:"errorInName",title:"content.dialogs.name-must-unique.title",message:"content.dialogs.name-must-unique.message"})}}),(function(e){r.setError("Error "+e.status,c)}))},t.isValid=function(){return u()},t.deleteRows=function(e){var t={id:"confirmDelete",title:"content.dialogs.links-delete.title",message:"content.dialogs.links-delete.message",callback:function(t){t&&_.each(e,(function(e){c.currentEntity.menuLinks.splice(c.currentEntity.menuLinks.indexOf(e),1)}))}};i.showConfirmationDialog(t)},c.onClose=function(e){r.showConfirmationIfNeeded(d()&&!c.isNew,u(),c,t.saveChanges,e,"content.dialogs.link-list-save.title","content.dialogs.link-list-save.message")},c.recalculatePriority=function(){for(var e=0;e<c.currentEntity.menuLinks.length;e++)c.currentEntity.menuLinks[e].priority=10*(c.currentEntity.menuLinks.length-1-e)},c.headIcon="fa fa-list-ol",t.setGridOptions=function(e){l.initialize(t,e,(function(e){e.draggableRows.on.rowFinishDrag(t,c.recalculatePriority)}))},t.associatedObjectTypes=a.objects,c.initialize(),o.get({id:c.storeId},(function(e){c.languages=e.languages}),(function(e){r.setError("Error "+e.status,c)}))}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.editBlogController",["$rootScope","$scope","virtoCommerce.contentModule.contentApi","platformWebApp.dynamicProperties.api","platformWebApp.bladeNavigationService","platformWebApp.dialogService","platformWebApp.dynamicProperties.dictionaryItemsApi","platformWebApp.settings",function(e,t,n,o,r,i,a,s){var l=t.blade;l.updatePermission="content:update";const c=".md";function d(e){o.search({objectType:"VirtoCommerce.ContentModule.Core.Model.FrontMatterHeaders"},(function(t){u(e.metadata,t.results),l.origEntity=angular.copy(l.currentEntity),l.isLoading=!1}),(function(e){r.setError("Error "+e.status,l)}))}function u(e,t){_.each(t,(function(t){t.displayNames=void 0;var n=_.findWhere(e,{name:t.name});n&&t.isMultilingual&&!t.isDictionary&&(n.values=_.pluck(n.values,"value")),t.values=n?n.values:[]})),l.currentEntity.dynamicProperties=t}function m(){return l.currentEntity.name+"/"+l.currentEntity.name+c}function p(){return!angular.equals(l.currentEntity,l.origEntity)&&l.hasUpdatePermission()}function f(){return p()&&g&&g.$valid}var g,h;l.initialize=function(){l.isNew?d({}):n.getWithMetadata({contentType:l.contentType,storeId:l.storeId,relativeUrl:m()},d,(function(e){r.setError("Error "+e.status,l)}))},t.isNameCanBeUsed=e=>!l.isNew&&!l.origEntity||(!(!l.origEntity||e!==l.origEntity.name)||!(l.existedBlogsName&&l.existedBlogsName.includes(e))),t.validateName=e=>{return!/[^0-9a-z -]/.test(e)},t.saveWithMetadata=function(){n.saveWithMetadata({contentType:l.contentType,storeId:l.storeId,folderUrl:l.currentEntity.name},{dynamicProperties:l.currentEntity.dynamicProperties,content:"",name:m()},(function(n){l.isLoading=!1,l.origEntity=angular.copy(l.currentEntity),l.isNew&&(t.bladeClose(),e.$broadcast("cms-statistics-changed",l.storeId)),l.parentBlade.refresh()}),(function(e){r.setError("Error "+e.status,t.blade),l.isLoading=!1}))},t.saveChanges=async function(){l.isLoading=!0;const e=l.currentEntity.url,o=l.currentEntity.name;if(e)if(l.origEntity.name!==l.currentEntity.name){let r=[],i=l.origEntity.name+c;r.push(l.currentEntity.parentUrl+o+"/"+i),r.push(e),await n.createFolder({contentType:l.contentType,storeId:l.storeId},{name:o,parentUrl:l.currentEntity.parentUrl}).$promise,t.saveWithMetadata(),await n.copy({srcPath:e,destPath:l.currentEntity.parentUrl+o}).$promise,await n.delete({contentType:l.contentType,storeId:l.storeId,urls:r}).$promise,l.parentBlade.refresh()}else t.saveWithMetadata();else n.createFolder({contentType:l.contentType,storeId:l.storeId},{name:o,parentUrl:e},t.saveWithMetadata)},l.deleteBlog=function(){n.delete({contentType:l.contentType,storeId:l.storeId,urls:[l.currentEntity.url]},(function(){t.bladeClose(),l.parentBlade.refresh()}),(function(e){r.setError("Error "+e.status,t.blade),l.isLoading=!1}))},l.isNew||(l.toolbarCommands=[{name:"platform.commands.save",icon:"fa fa-save",executeMethod:t.saveChanges,canExecuteMethod:f,permission:l.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(l.origEntity,l.currentEntity)},canExecuteMethod:p,permission:l.updatePermission}]),l.toolbarCommands=l.toolbarCommands||[],l.toolbarCommands.push({name:"content.commands.manage-metadata",icon:"fa fa-edit",executeMethod:function(){var e={id:"dynamicPropertyList",objectType:"VirtoCommerce.ContentModule.Core.Model.FrontMatterHeaders",parentRefresh:function(e){u(l.currentEntity.dynamicProperties,e)},controller:"platformWebApp.dynamicPropertyListController",template:"$(Platform)/Scripts/app/dynamicProperties/blades/dynamicProperty-list.tpl.html"};r.showBlade(e,l)},canExecuteMethod:function(){return!0}}),l.onClose=function(e){r.showConfirmationIfNeeded(p(),f(),l,t.saveChanges,e,"content.dialogs.blog-save.title","content.dialogs.blog-save.message")},t.setForm=function(e){t.formScope=g=e},t.editDictionary=function(e){var t={id:"propertyDictionary",isApiSave:!0,currentEntity:e,controller:"platformWebApp.propertyDictionaryController",template:"$(Platform)/Scripts/app/dynamicProperties/blades/property-dictionary.tpl.html",onChangesConfirmedFn:function(){a.query({id:e.objectType,propertyId:e.id},h)}};r.showBlade(t,l)},t.getDictionaryValues=function(e,t){h=t,a.query({id:e.objectType,propertyId:e.id},t)},t.languages=s.getValues({id:"VirtoCommerce.Core.General.Languages"}),l.headIcon="fa fa-inbox",l.initialize()}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.pageDetailController",["$rootScope","$scope","platformWebApp.validators","platformWebApp.dialogService","virtoCommerce.contentModule.contentApi","$timeout","platformWebApp.bladeNavigationService","platformWebApp.dynamicProperties.api","platformWebApp.settings","FileUploader","platformWebApp.dynamicProperties.dictionaryItemsApi","platformWebApp.i18n",function(e,t,n,o,r,i,a,s,l,c,d,u){var m=t.blade;m.currentLanguage=u.getLanguage(),m.frontMatterHeaders="VirtoCommerce.ContentModule.Core.Model.FrontMatterHeaders",m.dynamicPropertiesTotalCount=0,m.currentEntity.dynamicProperties=[],t.validators=n;var p,f,g=m.contentType.substr(0,1).toUpperCase()+m.contentType.substr(1,m.contentType.length-1);function h(e){var n=m.currentEntity.name||"",o=n.lastIndexOf(".");o>=0&&(o=(n=n.substring(0,o)).lastIndexOf("."))>=0&&(m.currentEntity.language=n.substring(o+1)),m.currentEntity.content=e.content,t.metadata=e.metadata,y()}function y(e,n){m.isLoading=!0,s.search({objectType:"VirtoCommerce.ContentModule.Core.Model.FrontMatterHeaders",take:e||20,skip:n||0},(function(e){b(t.metadata,e.results),t.dynamicPropertiesTotalCount=e.totalCount,t.$broadcast("resetContent",{body:m.currentEntity.content}),t.$broadcast("scrollCompleted"),i((function(){m.origEntity=angular.copy(m.currentEntity)})),m.isLoading=!1}),(function(e){a.setError("Error "+e.status,m)}))}function b(e,t){_.each(t,(function(t){var n=_.findWhere(e,{name:t.name});n&&t.isMultilingual&&!t.isDictionary&&(n.values=_.pluck(n.values,"value")),t.values=n?n.values:[]})),t&&(m.currentEntity.dynamicProperties=m.currentEntity.dynamicProperties.concat(t))}function v(){return!angular.equals(m.currentEntity,m.origEntity)&&m.hasUpdatePermission()}t.fileUploader=new c({url:"api/assets?folderUrl=cms-content/"+g+"/"+m.storeId+"/assets",headers:{Accept:"application/json"},autoUpload:!0,removeAfterUpload:!0,onBeforeUploadItem:function(e){m.isLoading=!0},onSuccessItem:function(e,n,o,r){t.$broadcast("filesUploaded",{items:n})},onErrorItem:function(e,t,n,o){a.setError(e._file.name+" failed: "+(t.message?t.message:n),m)},onCompleteAll:function(){m.isLoading=!1}}),m.editAsMarkdown=!0,m.editAsHtml=!1,m.initializeBlade=function(){m.isNew?h({}):r.getWithMetadata({contentType:m.contentType,storeId:m.storeId,relativeUrl:m.currentEntity.relativeUrl},h,(function(e){a.setError("Error "+e.status,m)}))},t.scrolled=()=>{t.dynamicPropertiesTotalCount>m.currentEntity.dynamicProperties.length&&y(20,m.currentEntity.dynamicProperties.length)},t.saveChanges=function(){m.isLoading=!0,r.saveWithMetadata({contentType:m.contentType,storeId:m.storeId,folderUrl:m.folderUrl||""},m.currentEntity,(function(){m.isLoading=!1,m.origEntity=angular.copy(m.currentEntity),m.isNew&&(t.bladeClose(),e.$broadcast("cms-statistics-changed",m.storeId)),m.parentBlade.refresh()}),(function(e){a.setError("Error "+e.status,m)}))},m.deleteEntry=function(){var e={id:"confirmDelete",title:"content.dialogs.page-delete.title",message:"content.dialogs.page-delete.message",callback:function(e){e&&(m.isLoading=!0,r.delete({contentType:m.contentType,storeId:m.storeId,urls:[m.currentEntity.url]},(function(){m.currentEntity=m.origEntity,t.bladeClose(),m.parentBlade.refresh()})))}};o.showConfirmationDialog(e)},m.isNew||(m.toolbarCommands=[{name:"platform.commands.save",icon:"fa fa-save",executeMethod:t.saveChanges,canExecuteMethod:function(){return v()&&p&&p.$valid},permission:m.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(m.origEntity,m.currentEntity),t.$broadcast("resetContent",{body:m.currentEntity.content})},canExecuteMethod:v,permission:m.updatePermission},{name:"content.commands.edit-as-markdown",icon:"fa fa-code",executeMethod:function(){m.editAsMarkdown=!0,m.editAsHtml=!1,t.$broadcast("changeEditType",{editAsMarkdown:!0,editAsHtml:!1})},canExecuteMethod:function(){return!m.editAsMarkdown},permission:m.updatePermission},{name:"content.commands.edit-as-html",icon:"fa fa-code",executeMethod:function(){m.editAsHtml=!0,m.editAsMarkdown=!1,t.$broadcast("changeEditType",{editAsHtml:!0,editAsMarkdown:!1})},canExecuteMethod:function(){return!m.editAsHtml},permission:m.updatePermission},{name:"content.commands.preview-page",icon:"fa fa-eye",executeMethod:function(){const e={id:"storeUrlList",storeId:m.storeId,contentType:m.contentType,relativeUrl:m.currentEntity.relativeUrl,headIcon:"fa-plus-square-o",controller:"virtoCommerce.contentModule.storeUrlListController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/pages/store-url-list.tpl.html"};a.showBlade(e,m)},canExecuteMethod:function(){return!0}}]),m.toolbarCommands=m.toolbarCommands||[],m.toolbarCommands.push({name:"content.commands.manage-metadata",icon:"fa fa-edit",executeMethod:function(){var e={id:"dynamicPropertyList",objectType:"VirtoCommerce.ContentModule.Core.Model.FrontMatterHeaders",parentRefresh:function(e){b(m.currentEntity.dynamicProperties,e)},controller:"platformWebApp.dynamicPropertyListController",template:"$(Platform)/Scripts/app/dynamicProperties/blades/dynamicProperty-list.tpl.html"};a.showBlade(e,m)},canExecuteMethod:function(){return!0}}),t.setForm=function(e){p=e},m.onClose=function(e){a.showConfirmationIfNeeded(v(),m.currentEntity&&m.currentEntity.name&&(v()&&!m.isNew||m.currentEntity.content&&m.isNew),m,t.saveChanges,e,"content.dialogs.page-save.title","content.dialogs.page-save.message")},t.editDictionary=function(e){var t={id:"propertyDictionary",isApiSave:!0,currentEntity:e,controller:"platformWebApp.propertyDictionaryController",template:"$(Platform)/Scripts/app/dynamicProperties/blades/property-dictionary.tpl.html",onChangesConfirmedFn:function(){d.query({id:e.objectType,propertyId:e.id},f)}};a.showBlade(t,m)},t.getDictionaryValues=function(e,t){f=t,d.query({id:e.objectType,propertyId:e.id},t)},t.languages=l.getValues({id:"VirtoCommerce.Core.General.Languages"}),m.headIcon="fa fa-file-o",m.initializeBlade()}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.pagesListController",["$rootScope","$scope","$translate","virtoCommerce.contentModule.contentApi","platformWebApp.bladeNavigationService","platformWebApp.dialogService","platformWebApp.uiGridHelper","platformWebApp.bladeUtils","platformWebApp.validators",function(e,t,n,o,r,i,a,s,l){var c=t.blade;function d(e,t){if(t||e.isOpenable){var n={id:"pageDetail",contentType:c.contentType,storeId:c.storeId,storeUrl:c.storeUrl,languages:c.languages,folderUrl:c.currentEntity.url,currentEntity:e,isNew:t,title:e.name,controller:"virtoCommerce.contentModule.pageDetailController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/pages/page-detail.tpl.html"};p()?t?angular.extend(n,{title:"content.blades.edit-page.title-new-post",subtitle:"content.blades.edit-page.subtitle-new-post"}):angular.extend(n,{subtitle:"content.blades.edit-page.subtitle-post"}):t?angular.extend(n,{title:"content.blades.edit-page.title-new",subtitle:"content.blades.edit-page.subtitle-new"}):angular.extend(n,{subtitle:"content.blades.edit-page.subtitle"}),r.showBlade(n,c)}}function u(e,n){var o={id:"blogDetail",contentType:c.contentType,storeId:c.storeId,currentEntity:e,existedBlogsName:t.listEntries.map(e=>e.name),isNew:n,title:e.name,subtitle:"content.blades.edit-blog.subtitle",controller:"virtoCommerce.contentModule.editBlogController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/pages/edit-blog.tpl.html"};n&&angular.extend(o,{title:"content.blades.edit-blog.title-new",subtitle:"content.blades.edit-blog.subtitle-new"}),r.showBlade(o,c)}function m(t){r.closeChildrenBlades(c,(function(){var n={id:"confirmDeleteItem",title:"platform.dialogs.folders-delete.title",message:"platform.dialogs.folders-delete.message",callback:function(n){if(n){var i=_.pluck(t,"url");o.delete({contentType:c.contentType,storeId:c.storeId,urls:i},(function(){c.refresh(),e.$broadcast("cms-statistics-changed",c.storeId)}),(function(e){r.setError("Error "+e.status,c)}))}}};p()&&!c.currentEntity.type&&angular.extend(n,{title:"content.dialogs.blog-delete.title",message:"content.dialogs.blog-delete.message"}),i.showConfirmationDialog(n)}))}function p(){return"blogs"===c.contentType}function f(e,t){return{id:e,name:t,blade:c,navigate:function(e){r.closeBlade(c,(function(){c.disableOpenAnimation=!0,r.showBlade(c,c.parentBlade)}))}}}c.updatePermission="content:update",t.selectedNodeId=null,c.refresh=function(){c.isLoading=!0,o.query({contentType:c.contentType,storeId:c.storeId,keyword:c.searchKeyword,folderUrl:c.currentEntity.url},(function(e){t.pageSettings.totalItems=e.length,_.each(e,(function(e){e.isImage=e.mimeType&&e.mimeType.startsWith("image/"),e.isOpenable=e.mimeType&&(e.mimeType.startsWith("application/j")||e.mimeType.startsWith("text/"))})),t.listEntries=e,c.isLoading=!1,function(){if(c.breadcrumbs){var e=c.breadcrumbs.slice(0);if(c.currentEntity.url&&_.all(e,(function(e){return e.id!==c.currentEntity.url}))){var t=f(c.currentEntity.url,c.currentEntity.name);e.push(t)}c.breadcrumbs=e}else c.breadcrumbs=[f(c.currentEntity.url,"all")]}()}),(function(e){r.setError("Error "+e.status,c)}))},t.rename=function(e){var t=prompt("Enter new name",e.name);if(t)if(l.webSafeFileNameValidator(t))o.move({contentType:c.contentType,storeId:c.storeId,oldUrl:e.url,newUrl:e.url.substring(0,e.url.length-e.name.length)+t},c.refresh,(function(e){r.setError("Error "+e.status,c)}));else{var i=n.instant("content.blades.edit-asset.validations.name-invalid");alert(i)}},t.copyUrl=function(e){window.prompt("Copy to clipboard: Ctrl+C, Enter",e.url)},t.downloadUrl=function(e){window.open(e.url,"_blank")},t.selectNode=function(e){if("folder"===e.type){var t={id:c.id,contentType:c.contentType,storeId:c.storeId,storeUrl:c.storeUrl,languages:c.languages,currentEntity:e,breadcrumbs:c.breadcrumbs,title:c.title,subtitle:c.subtitle,controller:c.controller,template:c.template,disableOpenAnimation:!0,isClosingDisabled:c.isClosingDisabled};r.showBlade(t,c.parentBlade)}else c.selectedNodeId=e.url,d(e,!1)},t.delete=function(e){m([e])},c.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:c.refresh,canExecuteMethod:function(){return!0}},{name:"platform.commands.upload",icon:"fa fa-upload",executeMethod:function(){var e={id:"assetUpload",contentType:c.contentType,storeId:c.storeId,currentEntityId:c.currentEntity.url,title:"platform.blades.asset-upload.title",controller:"virtoCommerce.contentModule.assetUploadController",template:"Modules/$(VirtoCommerce.Assets)/Scripts/blades/asset-upload.tpl.html"};r.showBlade(e,c)},canExecuteMethod:function(){return!0},permission:"content:create"}],"pages"===c.contentType?c.toolbarCommands.splice(1,0,{name:"platform.commands.new-folder",icon:"fa fa-folder-o",executeMethod:function(){var e,t;e=n.instant("platform.dialogs.create-folder.title"),null!=(t=prompt(e+"\n\nEnter folder name:"))&&o.createFolder({contentType:c.contentType,storeId:c.storeId},{name:t,parentUrl:c.currentEntity.url},c.refresh)},canExecuteMethod:function(){return!0},permission:"content:create"},{name:"platform.commands.add",icon:"fa fa-plus",executeMethod:function(){d({},!0)},canExecuteMethod:function(){return!0},permission:"content:create"}):p()&&(c.currentEntity.type&&"folder"===c.currentEntity.type?c.toolbarCommands.splice(1,0,{name:"content.commands.add-post",icon:"fa fa-plus",executeMethod:function(){d({},!0)},canExecuteMethod:function(){return!0},permission:"content:create"}):c.toolbarCommands.splice(1,0,{name:"content.commands.add-blog",icon:"fa fa-plus",executeMethod:function(){u({},!0)},canExecuteMethod:function(){return!0},permission:"content:create"})),c.toolbarCommands.push({name:"platform.commands.delete",icon:"fa fa-trash-o",executeMethod:function(){m(t.gridApi.selection.getSelectedRows())},canExecuteMethod:function(){return t.gridApi&&_.any(t.gridApi.selection.getSelectedRows())},permission:"content:delete"}),p()&&!c.currentEntity.type&&(c.contextMenuItems=[{name:"platform.commands.manage",icon:"fa fa-edit",action:function(e){u(e)},permission:c.updatePermission}]),t.setGridOptions=function(e){a.initialize(t,e,(function(e){t.$watch("pageSettings.currentPage",e.pagination.seek)}))},s.initializePagination(t,!0),c.headIcon=p()?"fa fa-inbox":"fa fa-folder-o",c.refresh()}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.storeUrlListController",["$scope","platformWebApp.bladeNavigationService","$localStorage","platformWebApp.validators",function(e,t,n,o){const r=e.blade;r.headIcon="fas fa-key";const i="storeUrlList-"+r.storeId;r.refresh=function(){n[i]?r.currentEntities=n[i]:r.currentEntities=[],r.isLoading=!1},e.selectNode=function(t){e.selectNodeId=t,function(e){const t=r.relativeUrl.split("."),n=_.first(t);let o="";_.size(t)>2&&(o="/"+t[1]);const i="/"+r.contentType;window.open(e.replace(/\/$/,"")+o+i+n,"_blank")}(t)},r.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:r.refresh,canExecuteMethod:function(){return!0}},{name:"platform.commands.manage",icon:"fa fa-edit",executeMethod:function(){const e={id:"editRedirectUris",updatePermission:"platform:security:update",data:r.currentEntities,validator:o.uriWithoutQuery,headIcon:"fa-plus-square-o",controller:"platformWebApp.editArrayController",template:"$(Platform)/Scripts/common/blades/edit-array.tpl.html",onChangesConfirmedFn:function(e){n[i]=angular.copy(e),r.refresh()}};t.showBlade(e,r)},canExecuteMethod:function(){return!0}}],r.refresh()}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.assetDetailController",["$scope","platformWebApp.validators","platformWebApp.dialogService","virtoCommerce.contentModule.contentApi","$timeout","platformWebApp.bladeNavigationService","$http",function(e,t,n,o,r,i,a){var s,l=e.blade;function c(){return!angular.equals(l.currentEntity,l.origEntity)&&(l.isNew||l.hasUpdatePermission())}l.updatePermission="content:update",e.validators=t,e.setForm=function(t){e.formScope=t},l.initializeBlade=function(){l.isNew?l.isLoading=!1:(o.get({contentType:l.contentType,storeId:l.storeId,relativeUrl:l.currentEntity.relativeUrl},(function(e){l.isLoading=!1,l.currentEntity.content=e.data,l.origEntity=angular.copy(l.currentEntity),r((function(){s&&(s.refresh(),s.focus(),l.toolbarCommands.push({name:"platform.commands.undo",icon:"fa fa-rotate-left",executeMethod:function(){s.undo()},canExecuteMethod:function(){return s.historySize().undo>1}}),l.toolbarCommands.push({name:"platform.commands.redo",icon:"fa fa-rotate-right",executeMethod:function(){s.redo()},canExecuteMethod:function(){return s.historySize().redo>0}})),l.origEntity=angular.copy(l.currentEntity)}),1)}),(function(e){i.setError("Error "+e.status,l)})),l.toolbarCommands=[{name:"platform.commands.save",icon:"fa fa-save",executeMethod:e.saveChanges,canExecuteMethod:function(){return c()},permission:l.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(l.origEntity,l.currentEntity)},canExecuteMethod:c,permission:l.updatePermission}])},e.saveChanges=function(){l.isLoading=!0,o.saveMultipartContent({contentType:l.contentType,storeId:l.storeId,folderUrl:l.folderUrl},l.currentEntity,(function(){l.isLoading=!1,l.origEntity=angular.copy(l.currentEntity),l.isNew&&e.bladeClose(),l.parentBlade.refresh()}),(function(e){i.setError("Error "+e.status,l)}))},l.onClose=function(t){i.showConfirmationIfNeeded(c(),l.currentEntity&&l.currentEntity.name&&(c()&&!l.isNew||l.currentEntity.content&&l.isNew),l,e.saveChanges,t,"content.dialogs.asset-save.title","content.dialogs.asset-save.message")},e.editorOptions={lineWrapping:!0,lineNumbers:!0,parserfile:"liquid.js",extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],onLoad:function(e){s=e},mode:function(){if(!l.isNew){if(l.currentEntity.url.endsWith(".json"))return{name:"javascript",json:!0};if(l.currentEntity.url.endsWith(".js"))return"javascript";if(l.currentEntity.url.endsWith(".js.liquid"))return"liquid-javascript";if(l.currentEntity.url.endsWith(".css.liquid"))return"liquid-css";if(l.currentEntity.url.endsWith(".css"))return"css";if(l.currentEntity.url.endsWith(".scss.liquid"))return"liquid-css";if(l.currentEntity.url.endsWith(".liquid"))return"liquid-html"}return"htmlmixed"}()},l.headIcon="fa fa-file-o",l.initializeBlade()}])},function(e,t){angular.module("platformWebApp").controller("virtoCommerce.contentModule.assetListController",["$scope","$translate","virtoCommerce.contentModule.contentApi","platformWebApp.bladeNavigationService","platformWebApp.dialogService","platformWebApp.uiGridHelper","platformWebApp.bladeUtils","platformWebApp.validators",function(e,t,n,o,r,i,a,s){var l=e.blade;function c(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())}function d(e){o.closeChildrenBlades(l,(function(){var t={id:"confirmDeleteItem",title:"platform.dialogs.folders-delete.title",message:"platform.dialogs.folders-delete.message",callback:function(t){if(t){var r=_.pluck(e,"url");n.delete({contentType:l.contentType,storeId:l.storeId,urls:r},l.refresh,(function(e){o.setError("Error "+e.status,l)}))}}};r.showConfirmationDialog(t)}))}function u(e,t){if(t||e.isOpenable){var n={id:"assetDetail",contentType:l.contentType,storeId:l.storeId,themeId:l.themeId,currentEntity:e,isNew:t,isExpandable:!0,controller:"virtoCommerce.contentModule.assetDetailController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/themes/asset-detail.tpl.html"};t?angular.extend(n,{folderUrl:l.currentEntity.url,title:"content.blades.edit-asset.title-new",subtitle:"content.blades.edit-asset.subtitle-new"}):angular.extend(n,{folderUrl:e.url.substring(0,e.url.length-e.name.length-1),title:e.name,subtitle:"content.blades.edit-asset.subtitle"}),o.showBlade(n,l)}}function m(e,t){return{id:e,name:t,blade:l,navigate:function(e){o.closeBlade(l,(function(){l.disableOpenAnimation=!0,o.showBlade(l,l.parentBlade)}))}}}l.refresh=function(){l.isLoading=!0,n.query({contentType:l.contentType,storeId:l.storeId,keyword:l.searchKeyword,folderUrl:l.currentEntity.url},(function(t){e.pageSettings.totalItems=t.length,_.each(t,(function(e){e.isImage=e.mimeType&&e.mimeType.startsWith("image/"),e.isOpenable=e.mimeType&&(e.mimeType.startsWith("application/j")||e.mimeType.startsWith("text/"))})),e.listEntries=t,l.isLoading=!1,function(){if(l.breadcrumbs){var e=l.breadcrumbs.slice(0);if(l.currentEntity.url&&_.all(e,(function(e){return e.id!==l.currentEntity.url}))){var t=m(l.currentEntity.url,l.currentEntity.name);e.push(t)}l.breadcrumbs=e}else l.breadcrumbs=[m(l.currentEntity.url,"all")]}()}),(function(e){o.setError("Error "+e.status,l)}))},e.copyUrl=function(e){window.prompt("Copy to clipboard: Ctrl+C, Enter",e.url)},e.downloadUrl=function(e){window.open(e.url,"_blank")},e.rename=function(e){var r=/\/$/.test(e.url),i=prompt("Enter new name",e.name),a=r?e.name.length+1:e.name.length;if(i)if(s.webSafeFileNameValidator(i))n.move({contentType:l.contentType,storeId:l.storeId,oldUrl:e.url,newUrl:e.url.substring(0,e.url.length-a)+i},l.refresh,(function(e){o.setError("Error "+e.status,l)}));else{var c=t.instant("content.blades.edit-asset.validations.name-invalid");alert(c)}},e.delete=function(e){d([e])},e.selectNode=function(e){if("folder"===e.type){var t={id:l.id,contentType:l.contentType,storeId:l.storeId,themeId:l.themeId,currentEntity:e,breadcrumbs:l.breadcrumbs,controller:l.controller,template:l.template,disableOpenAnimation:!0,isClosingDisabled:l.isClosingDisabled};o.showBlade(t,l.parentBlade)}else l.selectedNodeId=e.url,u(e,!1)},l.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:l.refresh,canExecuteMethod:function(){return!0}},{name:"platform.commands.new-folder",icon:"fa fa-folder-o",executeMethod:function(){var e,o;e=t.instant("platform.dialogs.create-folder.title"),null!=(o=prompt(e+"\n\nEnter folder name:"))&&n.createFolder({contentType:l.contentType,storeId:l.storeId},{name:o,parentUrl:l.currentEntity.url},l.refresh)},canExecuteMethod:function(){return!0},permission:"content:create"},{name:"platform.commands.add",icon:"fa fa-plus",executeMethod:function(){u({},!0)},canExecuteMethod:function(){return!0},permission:"content:create"},{name:"platform.commands.upload",icon:"fa fa-upload",executeMethod:function(){var e={id:"assetUpload",contentType:l.contentType,storeId:l.storeId,currentEntityId:l.currentEntity.url,title:"platform.blades.asset-upload.title",controller:"virtoCommerce.contentModule.assetUploadController",template:"Modules/$(VirtoCommerce.Assets)/Scripts/blades/asset-upload.tpl.html"};o.showBlade(e,l)},canExecuteMethod:function(){return!0},permission:"content:create"},{name:"platform.commands.delete",icon:"fa fa-trash-o",executeMethod:function(){d(e.gridApi.selection.getSelectedRows())},canExecuteMethod:c,permission:"content:delete"}],e.setGridOptions=function(t){i.initialize(e,t,(function(t){e.$watch("pageSettings.currentPage",t.pagination.seek)}))},a.initializePagination(e,!0),l.headIcon="fa fa-folder-o",l.title=l.currentEntity.name,l.refresh()}])},function(e,t){angular.module("platformWebApp").controller("virtoCommerce.contentModule.assetUploadController",["$scope","virtoCommerce.contentModule.contentApi","platformWebApp.bladeNavigationService","FileUploader",function(e,t,n,o){var r,i=e.blade;e.addImageFromUrl=function(){i.newExternalImageUrl&&(i.uploadCompleted=!1,t.uploadFromUrl({contentType:i.contentType,storeId:i.storeId,folderUrl:i.currentEntityId,url:i.newExternalImageUrl},(function(){i.parentBlade.refresh(),i.newExternalImageUrl=void 0,i.uploadCompleted=!0})))},i.headIcon="fa fa-file-o",(r=e.uploader=new o({scope:e,headers:{Accept:"application/json"},url:"api/content/"+i.contentType+"/"+i.storeId+"?folderUrl="+(i.currentEntityId||""),method:"POST",autoUpload:!0,removeAfterUpload:!0})).onErrorItem=function(e,t,o,r){n.setError(e._file.name+" failed: "+(t.message?t.message:o),i)},r.onSuccessItem=function(){i.parentBlade.refresh(),i.uploadCompleted=!0},i.isLoading=!1}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.themeDetailController",["$rootScope","$scope","platformWebApp.bladeNavigationService","virtoCommerce.contentModule.contentApi",function(e,t,n,o){var r=t.blade;function i(e){r.isNew?(r.title="content.blades.theme-detail.title-new",r.subtitle="content.blades.theme-detail.subtitle-new"):(r.title=e.name,r.subtitle="content.blades.theme-detail.subtitle"),r.currentEntity=angular.copy(e),r.origEntity=e,r.isLoading=!1}function a(){return!angular.equals(r.currentEntity,r.origEntity)&&r.hasUpdatePermission()}function s(){return a()&&t.formScope&&t.formScope.$valid}function l(){if(r.isActivateAfterSave){var e=_.findWhere(r.store.dynamicProperties,{name:"DefaultThemeName"});e&&(e.values=[{value:r.currentEntity.name}]),r.store.$update(c,(function(e){n.setError("Error "+e.status,r)}))}else c()}function c(){angular.copy(r.currentEntity,r.origEntity),t.bladeClose(),r.parentBlade.refresh(),e.$broadcast("cms-statistics-changed",r.storeId)}r.refresh=function(e){r.isNew?i({}):(i(r.data),e&&r.parentBlade.refresh())},t.saveChanges=function(){if(r.isLoading=!0,r.isNew)r.currentEntity.defaultTheme?o.copy({srcPath:"Themes/"+r.currentEntity.defaultTheme,destPath:"Themes/"+r.storeId+"/"+r.currentEntity.name},l,(function(e){n.setError("Error "+e.status,r)})):o.createFolder({contentType:"themes",storeId:r.storeId},r.currentEntity,l,(function(e){n.setError("Error "+e.status,r)}));else{var e=r.origEntity.parentUrl.replace("%20"," ")+"/"+r.currentEntity.name+"/";o.move({contentType:"themes",storeId:r.storeId,oldUrl:r.origEntity.url,newUrl:e},(function(t){r.currentEntity.url=e,r.data=r.currentEntity,r.refresh(!0)}),(function(e){n.setError("Error "+e.status,r)}))}},t.setForm=function(e){t.formScope=e},r.onClose=function(e){n.showConfirmationIfNeeded(a(),s(),r,t.saveChanges,e,"content.dialogs.theme-save.title","content.dialogs.theme-save.message")},r.isNew||(r.toolbarCommands=[{name:"platform.commands.save",icon:"fa fa-save",executeMethod:t.saveChanges,canExecuteMethod:s,permission:r.updatePermission},{name:"platform.commands.reset",icon:"fa fa-undo",executeMethod:function(){angular.copy(r.origEntity,r.currentEntity)},canExecuteMethod:a,permission:r.updatePermission}]),r.refresh(!1)}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.themeUploadController",["$rootScope","$scope","platformWebApp.dialogService","virtoCommerce.contentModule.contentApi","FileUploader","platformWebApp.bladeNavigationService",function(e,t,n,o,r,i){var a=t.blade,s=t.uploader=new r({scope:t,headers:{Accept:"application/json"},url:"api/content/themes/"+a.storeId+"?folderUrl=",queueLimit:1,autoUpload:!1,removeAfterUpload:!1});function l(){t.bladeClose(),a.parentBlade.refresh(),e.$broadcast("cms-statistics-changed",a.storeId)}s.filters.push({name:"zipFilter",fn:function(e,t){return e.name.toLowerCase().endsWith(".zip")}}),s.onWhenAddingFileFailed=function(e,t,n){"queueLimit"===t.name&&(s.clearQueue(),s.addToQueue(e))},s.onAfterAddingFile=function(e){if(t.themeName=e.file.name.substring(0,e.file.name.lastIndexOf(".")),a.currentEntities&&a.currentEntities.length>0&&_.any(a.currentEntities,(function(e){return e.name===t.themeName}))){var o={id:"confirmUploadTheme",title:"content.dialogs.theme-upload-confirmation.title",message:"content.dialogs.theme-upload-confirmation.message",callback:function(e){e&&s.uploadAll()}};n.showConfirmationDialog(o)}else s.uploadAll()},s.onSuccessItem=function(e,n){o.unpack({contentType:"themes",storeId:a.storeId,archivepath:n[0].name,destPath:t.themeName},(function(e){if(a.isActivateAfterSave){var n=_.findWhere(a.store.dynamicProperties,{name:"DefaultThemeName"});n&&(n.values=[{value:t.themeName}]),a.store.$update(l,(function(e){i.setError("Error "+e.status,a)}))}else l()}),(function(e){s.clearQueue(),i.setError("Error "+e.status,t.blade)}))},s.onErrorItem=function(e,t,n,o){i.setError(e._file.name+" failed: "+(t.message?t.message:n),a)},a.title="content.blades.theme-upload.title",a.isLoading=!1}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.themesListController",["$rootScope","$scope","virtoCommerce.contentModule.themes","virtoCommerce.contentModule.contentApi","virtoCommerce.storeModule.stores","platformWebApp.bladeNavigationService","platformWebApp.dialogService","platformWebApp.uiGridHelper","platformWebApp.dynamicProperties.api",function(e,t,n,o,r,i,a,s,l){t.uiGridConstants=s.uiGridConstants;var c=t.blade;c.updatePermission="content:update",c.contentType="themes",c.defaultThemeName=void 0,c.refresh=function(){c.isLoading=!0,t.selectedNodeId=void 0,o.query({contentType:c.contentType,storeId:c.storeId},(function(e){c.currentEntities=e,r.get({id:c.storeId},(function(e){c.store=e,l.search({objectType:c.store.objectType,objectId:c.store.id},(function(e){var t=e.results;_.each(t,(function(e){e.values=[];var t=_.find(c.store.dynamicProperties,(function(t){return t.id===e.id}));t&&(e.values=t.values)})),c.store.dynamicProperties=t;var n=_.findWhere(c.store.dynamicProperties,{name:"DefaultThemeName"});c.defaultThemeName=n&&_.any(n.values)&&n.values[0].value,c.isLoading=!1}))}),(function(e){i.setError("Error "+e.status,c)}))}),(function(e){i.setError("Error "+e.status,c)}))},t.openBladeNew=function(){t.openDetailsBlade()},t.openDetailsBlade=function(e){t.selectedNodeId=e&&e.name;var n={id:"themeDetail",isNew:!e,isActivateAfterSave:!_.any(c.currentEntities),store:c.store,data:e,storeId:c.storeId,controller:"virtoCommerce.contentModule.themeDetailController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/themes/theme-detail.tpl.html"};i.showBlade(n,c)},t.clone=function(e){t.selectedNodeId=e.name;var o={id:"confirm",title:"content.dialogs.theme-clone.title",message:"content.dialogs.theme-clone.message",callback:function(t){t&&(c.isLoading=!0,n.cloneTheme({storeId:c.storeId,themeName:e.name},c.refresh,(function(e){i.setError("Error "+e.status,c)})))}};a.showConfirmationDialog(o)},t.preview=function(e){if(t.selectedNodeId=e.name,c.store.url)window.open(c.store.url+"?previewtheme="+e.name,"_blank");else{a.showNotificationDialog({id:"noUrlInStore",title:"content.dialogs.set-store-url.title",message:"content.dialogs.set-store-url.message",callback:function(){}})}},t.setActive=function(e){t.selectedNodeId=e.name,c.isLoading=!0,_.findWhere(c.store.dynamicProperties,{name:"DefaultThemeName"}).values=[{value:e.name}],c.store.$update((function(){c.refresh(),c.parentBlade.refresh(c.storeId,"defaultTheme",e.name)}),(function(e){i.setError("Error "+e.status,c)}))},t.delete=function(n){t.selectedNodeId=n.name,i.closeChildrenBlades(c,(function(){var t={id:"confirmDelete",title:"content.dialogs.theme-delete.title",message:c.currentEntities.length>1?"content.dialogs.theme-delete.message":"content.dialogs.theme-delete.message-last-one",messageValues:{name:n.name},callback:function(t){t&&(c.isLoading=!0,o.delete({contentType:c.contentType,storeId:c.storeId,urls:[n.url]},(function(){n.name===c.defaultThemeName?(_.findWhere(c.store.dynamicProperties,{name:"DefaultThemeName"}).values=[{value:""}],c.store.$update((function(){c.refresh(),e.$broadcast("cms-statistics-changed",c.storeId)}),(function(e){i.setError("Error "+e.status,c)}))):(c.refresh(),e.$broadcast("cms-statistics-changed",c.storeId))}),(function(e){i.setError("Error "+e.status,c)})))}};a.showConfirmationDialog(t)}))},c.toolbarCommands=[{name:"platform.commands.add",icon:"fa fa-plus",executeMethod:t.openBladeNew,canExecuteMethod:function(){return!0},permission:"content:create"},{name:"platform.commands.upload",icon:"fa fa-upload",executeMethod:function(){var e={id:"themeUpload",isActivateAfterSave:!_.any(c.currentEntities),currentEntities:c.currentEntities,store:c.store,storeId:c.storeId,controller:"virtoCommerce.contentModule.themeUploadController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/themes/theme-upload.tpl.html"};i.showBlade(e,c)},canExecuteMethod:function(){return!0},permission:"content:create"}],c.selectNode=function(e){t.selectedNodeId=e.name;var n={id:"themeAssetListBlade",contentType:c.contentType,storeId:c.storeId,currentEntity:e,themeId:e.name,subtitle:"content.blades.asset-list.subtitle",controller:"virtoCommerce.contentModule.assetListController",template:"Modules/$(VirtoCommerce.Assets)/Scripts/blades/asset-list.tpl.html"};i.showBlade(n,c)},t.setGridOptions=function(e){s.initialize(t,e)},c.refresh()}])},function(e,t){angular.module("virtoCommerce.contentModule").factory("virtoCommerce.contentModule.menus",["$resource",function(e){return e("api/cms/:storeId/menu/",{},{get:{url:"api/cms/:storeId/menu/",method:"GET",isArray:!0},getList:{url:"api/cms/:storeId/menu/:listId",method:"GET"},checkList:{url:"api/cms/:storeId/menu/checkname",method:"GET"},update:{url:"api/cms/:storeId/menu/",method:"POST"},delete:{url:"api/cms/:storeId/menu/",method:"DELETE"}})}]).factory("virtoCommerce.contentModule.themes",["$resource",function(e){return e(null,null,{cloneTheme:{url:"api/content/themes/:storeId/cloneTheme",method:"POST"}})}]).factory("virtoCommerce.contentModule.contentApi",["$resource","moment",function(e,t){return e("api/content/:contentType/:storeId",null,{getStatistics:{url:"api/content/:storeId/stats"},query:{url:"api/content/:contentType/:storeId/search",isArray:!0},get:{transformResponse:function(e){return{data:e}}},saveMultipartContent:{method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;return t.append(e.name,e.content),t},isArray:!0},uploadFromUrl:{method:"POST",params:{contentType:"@contentType",storeId:"@storeId",folderUrl:"@folderUrl",url:"@url"},isArray:!0},getWithMetadata:{transformResponse:function(e){var t={},n=e.split("---");if(n.length>2){t.content=n[2].trim();var o=YAML.parse(n[1].trim());t.metadata=_.map(o,(function(e,t){return _.isArray(e)||(e=[e]),{name:t,values:_.map(e,(function(e){return{value:e}}))}}))}else t.content=e;return t}},saveWithMetadata:{method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var n={},o=_.filter(e.dynamicProperties,(function(e){return _.any(e.values,(function(t){return t.value||"Boolean"==e.valueType}))}));_.each(o,(function(e){var o,r=e.isArray;if(e.isMultilingual&&!e.isDictionary){r=!0;var i=_.filter(e.values,(function(e){return e.value}));o=_.map(i,(function(e){return{locale:e.locale,value:e.value}}))}else o=_.pluck(e.values,"value"),"DateTime"==e.valueType?o=_.map(o,(function(e){return t(e).format().substring(0,10)})):e.isDictionary&&(o=_.map(o,(function(t){var n={id:t.id,name:t.name};return e.isMultilingual&&(n.displayNames=_.map(t.displayNames,(function(e){return{locale:e.locale,name:e.name}}))),n})));n[e.name]=r?o:o[0]}));var r="---\n"+YAML.stringify(n)+"\n---\n"+(e.content||"").trim(),i=e.name,a=".md",s=i.lastIndexOf(".");s>=0&&(a=i.substring(s),(s=(i=i.substring(0,s)).lastIndexOf("."))>=0&&(i=i.substring(0,s))),e.language&&(i+="."+e.language);var l=new FormData;return l.append(i+a,r),l},isArray:!0},unpack:{url:"api/content/:contentType/:storeId/unpack"},createFolder:{url:"api/content/:contentType/:storeId/folder",method:"POST"},copy:{url:"api/content/copy"},move:{url:"api/content/:contentType/:storeId/move"},delete:{url:"api/content/:contentType/:storeId",method:"DELETE"}})}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.blogsWidgetController",["$scope","platformWebApp.bladeNavigationService",function(e,t){}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.linkListsWidgetController",["$scope","platformWebApp.bladeNavigationService",function(e,t){}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.mainContentItemWidgetController",["$state","$scope","platformWebApp.bladeNavigationService",function(e,t,n){}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.menuWidgetController",["$injector","$rootScope","$scope","virtoCommerce.contentModule.menus","platformWebApp.bladeNavigationService",function(e,t,n,o,r){var i=n.widget.blade;n.widget.initialize=function(){return n.meniLinkListsCount="...",o.query({storeId:i.currentEntityId},(function(e){n.meniLinkListsCount=e.length}),(function(e){}))},n.openBlade=function(){var e={id:"linkListBlade",storeId:i.currentEntityId,parentWidget:n.widget,title:i.title,subtitle:"content.widgets.menu.blade-subtitle",controller:"virtoCommerce.contentModule.linkListsController",template:"Modules/$(VirtoCommerce.Content)/Scripts/blades/menu/link-lists.tpl.html"};r.showBlade(e,i)},n.widget.initialize()}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.pagesWidgetController",["$scope","platformWebApp.bladeNavigationService",function(e,t){}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.storeCMSWidgetController",["$state","$scope","virtoCommerce.contentModule.contentApi","platformWebApp.bladeNavigationService",function(e,t,n,o){var r=t.widget.blade;t.openBlade=function(){e.go("workspace.content",{storeId:r.currentEntityId})},t.statistics={activeThemeName:"...",themesCount:"...",pagesCount:"...",blogsCount:"...",listLinksCount:"..."},n.getStatistics({storeId:r.currentEntityId},(function(e){angular.extend(t.statistics,e)}))}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.storeWidgetController",["$state","$scope","platformWebApp.bladeNavigationService",function(e,t,n){}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.themeActiveWidgetController",["$state","$scope","platformWebApp.bladeNavigationService",function(e,t,n){}])},function(e,t){angular.module("virtoCommerce.contentModule").controller("virtoCommerce.contentModule.themesWidgetController",["$state","$scope","platformWebApp.bladeNavigationService",function(e,t,n){}])},function(e,t,n){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkNvbnRlbnRNb2R1bGUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Db250ZW50TW9kdWxlLy4vU2NyaXB0cy9jb250ZW50LmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuQ29udGVudE1vZHVsZS8uL1NjcmlwdHMvYmxhZGVzL2NvbnRlbnQtbWFpbi5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkNvbnRlbnRNb2R1bGUvLi9TY3JpcHRzL2JsYWRlcy9tZW51L2xpbmstbGlzdHMuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Db250ZW50TW9kdWxlLy4vU2NyaXB0cy9ibGFkZXMvbWVudS9tZW51LWxpbmstbGlzdC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkNvbnRlbnRNb2R1bGUvLi9TY3JpcHRzL2JsYWRlcy9wYWdlcy9lZGl0LWJsb2cuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Db250ZW50TW9kdWxlLy4vU2NyaXB0cy9ibGFkZXMvcGFnZXMvcGFnZS1kZXRhaWwuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Db250ZW50TW9kdWxlLy4vU2NyaXB0cy9ibGFkZXMvcGFnZXMvcGFnZXMtbGlzdC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkNvbnRlbnRNb2R1bGUvLi9TY3JpcHRzL2JsYWRlcy9wYWdlcy9zdG9yZS11cmwtbGlzdC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkNvbnRlbnRNb2R1bGUvLi9TY3JpcHRzL2JsYWRlcy90aGVtZXMvYXNzZXQtZGV0YWlsLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuQ29udGVudE1vZHVsZS8uL1NjcmlwdHMvYmxhZGVzL3RoZW1lcy9hc3NldC1saXN0LmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuQ29udGVudE1vZHVsZS8uL1NjcmlwdHMvYmxhZGVzL3RoZW1lcy9hc3NldC11cGxvYWQuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Db250ZW50TW9kdWxlLy4vU2NyaXB0cy9ibGFkZXMvdGhlbWVzL3RoZW1lLWRldGFpbC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkNvbnRlbnRNb2R1bGUvLi9TY3JpcHRzL2JsYWRlcy90aGVtZXMvdGhlbWUtdXBsb2FkLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuQ29udGVudE1vZHVsZS8uL1NjcmlwdHMvYmxhZGVzL3RoZW1lcy90aGVtZXMtbGlzdC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkNvbnRlbnRNb2R1bGUvLi9TY3JpcHRzL3Jlc291cmNlcy9jb250ZW50UmVzb3VyY2UuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Db250ZW50TW9kdWxlLy4vU2NyaXB0cy93aWRnZXRzL2Jsb2dzV2lkZ2V0LmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuQ29udGVudE1vZHVsZS8uL1NjcmlwdHMvd2lkZ2V0cy9saW5rTGlzdHNXaWRnZXQuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Db250ZW50TW9kdWxlLy4vU2NyaXB0cy93aWRnZXRzL21haW5Db250ZW50SXRlbVdpZGdldC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkNvbnRlbnRNb2R1bGUvLi9TY3JpcHRzL3dpZGdldHMvbWVudVdpZGdldC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkNvbnRlbnRNb2R1bGUvLi9TY3JpcHRzL3dpZGdldHMvcGFnZXNXaWRnZXQuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Db250ZW50TW9kdWxlLy4vU2NyaXB0cy93aWRnZXRzL3N0b3JlQ01TV2lkZ2V0LmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuQ29udGVudE1vZHVsZS8uL1NjcmlwdHMvd2lkZ2V0cy9zdG9yZVdpZGdldC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkNvbnRlbnRNb2R1bGUvLi9TY3JpcHRzL3dpZGdldHMvdGhlbWVBY3RpdmVXaWRnZXQuanMiLCJ3ZWJwYWNrOi8vVmlydG9Db21tZXJjZS5Db250ZW50TW9kdWxlLy4vU2NyaXB0cy93aWRnZXRzL3RoZW1lc1dpZGdldC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInVuZGVmaW5lZCIsIkFwcERlcGVuZGVuY2llcyIsInB1c2giLCJhbmd1bGFyIiwicnVuIiwiYXV0aFNlcnZpY2UiLCJtYWluTWVudVNlcnZpY2UiLCJ3aWRnZXRTZXJ2aWNlIiwiJHN0YXRlIiwiYmxhZGVOYXZpZ2F0aW9uU2VydmljZSIsInNjb3BlUmVzb2x2ZXIiLCJzdG9yZXMiLCJhc3NvY2lhdGlvblR5cGVzU2VydmljZSIsIm1lbnVJdGVtIiwicGF0aCIsImljb24iLCJ0aXRsZSIsInByaW9yaXR5IiwiYWN0aW9uIiwiZ28iLCJwZXJtaXNzaW9uIiwiYWRkTWVudUl0ZW0iLCJyZWdpc3RlcldpZGdldCIsInNpemUiLCJjb250cm9sbGVyIiwidGVtcGxhdGUiLCJzZWxlY3RlZFN0b3JlU2NvcGUiLCJ0eXBlIiwic2VsZWN0Rm4iLCJibGFkZSIsImNhbGxiYWNrIiwibmV3QmxhZGUiLCJpZCIsInN1YnRpdGxlIiwiY3VycmVudEVudGl0eSIsInRoaXMiLCJvbkNoYW5nZXNDb25maXJtZWRGbiIsImRhdGFTZXJ2aWNlIiwic2hvd0JsYWRlIiwicmVnaXN0ZXIiLCJyZWdpc3RlclR5cGUiLCJvcGVuU2VsZWN0V2l6YXJkIiwicGFyZW50RWxlbWVudCIsInNlbGVjdGVkTGlzdEVudHJpZXMiLCJicmVhZGNydW1icyIsInRvb2xiYXJDb21tYW5kcyIsImV4ZWN1dGVNZXRob2QiLCJhc3NvY2lhdGVkT2JqZWN0SWQiLCJhc3NvY2lhdGVkT2JqZWN0TmFtZSIsImNsb3NlQmxhZGUiLCJjYW5FeGVjdXRlTWV0aG9kIiwibGVuZ3RoIiwib3B0aW9ucyIsInNob3dDaGVja2luZ011bHRpcGxlIiwiY2hlY2tJdGVtRm4iLCJsaXN0SXRlbSIsImlzU2VsZWN0ZWQiLCJlcnJvciIsInNlbGVjdGVkIiwiXyIsImFsbCIsIngiLCJyZWplY3QiLCJjaGVja1Blcm1pc3Npb24iLCJhbGxvd0NoZWNraW5nSXRlbSIsImFsbG93Q2hlY2tpbmdDYXRlZ29yeSIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsIiRzY29wZSIsImlzQ2xvc2luZ0Rpc2FibGVkIiwiZmFjdG9yeSIsIm9iamVjdHMiLCJlbnRyeSIsInRlbXBsYXRlVVJMIiwiZmlsdGVyIiwiJHRyYW5zbGF0ZSIsInRyYW5zbGF0ZUtleSIsImZhbGxiYWNrVmFsdWUiLCJyZXN1bHQiLCJpbnN0YW50IiwiaW5wdXQiLCJsYW5nIiwicmV0VmFsIiwiZGlzcGxheU5hbWUiLCJmaW5kIiwiZGlzcGxheU5hbWVzIiwib2JqIiwibG9jYWxlIiwic3RhcnRzV2l0aCIsIiRzdGF0ZVBhcmFtcyIsIm1lbnVzIiwiY29udGVudEFwaSIsImRpYWxvZ1NlcnZpY2UiLCJpbml0aWFsaXplIiwiaXNMb2FkaW5nIiwiY3VycmVudEVudGl0aWVzIiwic3RvcmVJZCIsIm9wZW5UaGVtZXMiLCJxdWVyeSIsInN0b3Jlc1Jlc3VsdCIsImxvYWRDb3VudGVyIiwiZmlubmFseUZ1bmN0aW9uIiwiYW55IiwiZWFjaCIsInN0b3JlIiwidGhlbWVzQ291bnQiLCJwYWdlc0NvdW50IiwiYmxvZ3NDb3VudCIsImxpc3RMaW5rc0NvdW50IiwicmVmcmVzaCIsImZpbmFsbHkiLCJ0aGVyZUlzV2lkZ2V0VG9TaG93Iiwid2lkZ2V0c01hcCIsInciLCJpc0Z1bmN0aW9uIiwiaXNWaXNpYmxlIiwicmVxdWVzdFR5cGUiLCJkYXRhIiwiZW50aXR5IiwiZmluZFdoZXJlIiwic2V0RXJyb3IiLCJzdGF0dXMiLCIkcHJvbWlzZSIsImdldFN0YXRpc3RpY3MiLCJleHRlbmQiLCJhY3RpdmVUaGVtZU5hbWUiLCIkb24iLCJldmVudCIsInRpdGxlVmFsdWVzIiwib3BlblBhZ2VzIiwiY29udGVudFR5cGUiLCJzdG9yZVVybCIsImxhbmd1YWdlcyIsIm9wZW5MaW5rTGlzdHMiLCJzdWJ0aXRsZVZhbHVlcyIsIm9wZW5CbG9ncyIsImFkZE5ld1RoZW1lIiwiaXNOZXciLCJpc0FjdGl2YXRlQWZ0ZXJTYXZlIiwiYWRkTmV3UGFnZSIsImFkZE5ld0xpbmtMaXN0IiwiYWRkQmxvZyIsIm9wZW5UaGVtZSIsImFjdGl2ZVRoZW1lVVJMIiwicHJldmlld1RoZW1lIiwid2luZG93Iiwib3BlbiIsInNob3dOb3RpZmljYXRpb25EaWFsb2ciLCJtZXNzYWdlIiwib3BlblN0b3Jlc01vZHVsZSIsImhlYWRJY29uIiwiJHJvb3RTY29wZSIsInVpR3JpZENvbnN0YW50cyIsInVpR3JpZEhlbHBlciIsInBhcmVudEJsYWRlIiwic2VsZWN0Tm9kZSIsInNlbGVjdGVkTm9kZUlkIiwicGFyZW50UmVmcmVzaCIsImxpc3RJZCIsImRlbGV0ZUxpc3QiLCJzZWxlY3Rpb24iLCJjbG9zZUNoaWxkcmVuQmxhZGVzIiwiZGlhbG9nIiwicmVtb3ZlIiwibGlzdEVudHJ5SWRzIiwicGx1Y2siLCJkZWxldGUiLCJsaXN0SWRzIiwiJGJyb2FkY2FzdCIsInNob3dDb25maXJtYXRpb25EaWFsb2ciLCJncmlkQXBpIiwiZ2V0U2VsZWN0ZWRSb3dzIiwic2V0R3JpZE9wdGlvbnMiLCJncmlkT3B0aW9ucyIsImlzRGlydHkiLCJlcXVhbHMiLCJvcmlnRW50aXR5IiwiaGFzVXBkYXRlUGVybWlzc2lvbiIsImNhblNhdmUiLCJsaXN0TmFtZUlzUmlnaHQiLCJsaW5rc0FyZVJpZ2h0IiwibWVudUxpbmtzIiwiYXNzb2NpYXRlZE9iamVjdFR5cGUiLCJ1cGRhdGVQZXJtaXNzaW9uIiwiZ2V0TGlzdCIsImFzc29jaWF0ZWRPYmplY3QiLCJhc3NvY2lhdGVkT2JqZWN0VHlwZXMiLCJzb3J0QnkiLCJyZXZlcnNlIiwiY29weSIsInNhdmVDaGFuZ2VzIiwic3BsaWNlIiwibWVudUxpbmtMaXN0SWQiLCJyZWNhbGN1bGF0ZVByaW9yaXR5IiwiZGVsZXRlUm93cyIsImNoZWNrTGlzdCIsImxhbmd1YWdlIiwiQm9vbGVhbiIsInVwZGF0ZSIsImJsYWRlQ2xvc2UiLCJpc1ZhbGlkIiwicm93cyIsInJvdyIsImluZGV4T2YiLCJvbkNsb3NlIiwiY2xvc2VDYWxsYmFjayIsInNob3dDb25maXJtYXRpb25JZk5lZWRlZCIsImRyYWdnYWJsZVJvd3MiLCJvbiIsInJvd0ZpbmlzaERyYWciLCJkeW5hbWljUHJvcGVydGllc0FwaSIsImRpY3Rpb25hcnlJdGVtc0FwaSIsInNldHRpbmdzIiwibWRGaWxlRXh0ZW5zaW9uIiwiZmlsbE1ldGFkYXRhIiwic2VhcmNoIiwib2JqZWN0VHlwZSIsInJlc3VsdHMiLCJmaWxsRHluYW1pY1Byb3BlcnRpZXMiLCJtZXRhZGF0YSIsInByb3BzIiwibWV0YWRhdGFSZWNvcmQiLCJpc011bHRpbGluZ3VhbCIsImlzRGljdGlvbmFyeSIsInZhbHVlcyIsImR5bmFtaWNQcm9wZXJ0aWVzIiwiZ2V0QmxvZ0Jsb2JOYW1lIiwiZm9ybVNjb3BlIiwiJHZhbGlkIiwiZ2V0RGljdGlvbmFyeVZhbHVlc0NhbGxiYWNrIiwiZ2V0V2l0aE1ldGFkYXRhIiwicmVsYXRpdmVVcmwiLCJpc05hbWVDYW5CZVVzZWQiLCJleGlzdGVkQmxvZ3NOYW1lIiwiaW5jbHVkZXMiLCJ2YWxpZGF0ZU5hbWUiLCJ0ZXN0Iiwic2F2ZVdpdGhNZXRhZGF0YSIsImZvbGRlclVybCIsImNvbnRlbnQiLCJhc3luYyIsInBhcmVudFVybCIsImZvbGRlck5hbWUiLCJ1cmxzVG9EZWxldGUiLCJvbGRGaWxlbmFtZSIsImNyZWF0ZUZvbGRlciIsInNyY1BhdGgiLCJkZXN0UGF0aCIsInVybHMiLCJkZWxldGVCbG9nIiwic2V0Rm9ybSIsImZvcm0iLCJlZGl0RGljdGlvbmFyeSIsImlzQXBpU2F2ZSIsInByb3BlcnR5SWQiLCJnZXREaWN0aW9uYXJ5VmFsdWVzIiwiZ2V0VmFsdWVzIiwidmFsaWRhdG9ycyIsIiR0aW1lb3V0IiwiRmlsZVVwbG9hZGVyIiwiaTE4biIsImN1cnJlbnRMYW5ndWFnZSIsImdldExhbmd1YWdlIiwiZnJvbnRNYXR0ZXJIZWFkZXJzIiwiZHluYW1pY1Byb3BlcnRpZXNUb3RhbENvdW50Iiwic3Vic3RyIiwidG9VcHBlckNhc2UiLCJibG9iTmFtZSIsImlkeCIsImxhc3RJbmRleE9mIiwic3Vic3RyaW5nIiwiZ2V0RHluYW1pY1Byb3BlcnRpZXMiLCJ0YWtlIiwic2tpcCIsInRvdGFsQ291bnQiLCJib2R5IiwiY29uY2F0IiwiZmlsZVVwbG9hZGVyIiwiaGVhZGVycyIsIkFjY2VwdCIsImF1dG9VcGxvYWQiLCJyZW1vdmVBZnRlclVwbG9hZCIsIm9uQmVmb3JlVXBsb2FkSXRlbSIsImZpbGVJdGVtIiwib25TdWNjZXNzSXRlbSIsInJlc3BvbnNlIiwiaXRlbXMiLCJvbkVycm9ySXRlbSIsIl9maWxlIiwib25Db21wbGV0ZUFsbCIsImVkaXRBc01hcmtkb3duIiwiZWRpdEFzSHRtbCIsImluaXRpYWxpemVCbGFkZSIsInNjcm9sbGVkIiwiZGVsZXRlRW50cnkiLCJ1cmxMaXN0QmxhZGUiLCJibGFkZVV0aWxzIiwib3BlbkRldGFpbHNCbGFkZSIsImlzT3BlbmFibGUiLCJpc0Jsb2dzIiwib3BlbkJsb2dEZXRhaWxzQmxhZGUiLCJsaXN0RW50cmllcyIsIm1hcCIsImJsb2ciLCJnZW5lcmF0ZUJyZWFkY3J1bWIiLCJuYXZpZ2F0ZSIsImJyZWFkY3J1bWIiLCJkaXNhYmxlT3BlbkFuaW1hdGlvbiIsImtleXdvcmQiLCJzZWFyY2hLZXl3b3JkIiwicGFnZVNldHRpbmdzIiwidG90YWxJdGVtcyIsImlzSW1hZ2UiLCJtaW1lVHlwZSIsInNsaWNlIiwiYnJlYWRDcnVtYiIsInNldEJyZWFkY3J1bWJzIiwicmVuYW1lIiwicHJvbXB0Iiwid2ViU2FmZUZpbGVOYW1lVmFsaWRhdG9yIiwibW92ZSIsIm9sZFVybCIsIm5ld1VybCIsImVycm9yTWVzc2FnZSIsImFsZXJ0IiwiY29weVVybCIsImRvd25sb2FkVXJsIiwiY3VycmVudEVudGl0eUlkIiwidG9vbHRpcCIsImNvbnRleHRNZW51SXRlbXMiLCIkd2F0Y2giLCJwYWdpbmF0aW9uIiwic2VlayIsImluaXRpYWxpemVQYWdpbmF0aW9uIiwiJGxvY2FsU3RvcmFnZSIsIm5hbWVTdG9yZVVybExpc3QiLCJzZWxlY3ROb2RlSWQiLCJmaWxlTmFtZUFycmF5Iiwic3BsaXQiLCJmaWxlTmFtZSIsImZpcnN0IiwicmVwbGFjZSIsIm9wZW5VcmxGb3JQcmV2aWV3IiwidmFsaWRhdG9yIiwidXJpV2l0aG91dFF1ZXJ5IiwiJGh0dHAiLCJjb2RlbWlycm9yRWRpdG9yIiwiZm9jdXMiLCJ1bmRvIiwiaGlzdG9yeVNpemUiLCJyZWRvIiwic2F2ZU11bHRpcGFydENvbnRlbnQiLCJlZGl0b3JPcHRpb25zIiwibGluZVdyYXBwaW5nIiwibGluZU51bWJlcnMiLCJwYXJzZXJmaWxlIiwiZXh0cmFLZXlzIiwiY20iLCJmb2xkQ29kZSIsImdldEN1cnNvciIsImZvbGRHdXR0ZXIiLCJndXR0ZXJzIiwib25Mb2FkIiwiX2VkaXRvciIsImVuZHNXaXRoIiwianNvbiIsImdldEVkaXRvck1vZGUiLCJpc0l0ZW1zQ2hlY2tlZCIsInRoZW1lSWQiLCJpc0V4cGFuZGFibGUiLCJpc0ZvbGRlciIsInN1YnN0ck5hbWVMZW5naHQiLCJ1cGxvYWRlciIsImFkZEltYWdlRnJvbVVybCIsIm5ld0V4dGVybmFsSW1hZ2VVcmwiLCJ1cGxvYWRDb21wbGV0ZWQiLCJ1cGxvYWRGcm9tVXJsIiwic2NvcGUiLCJtZXRob2QiLCJpdGVtIiwib25BZnRlclRoZW1lQ3JlYXRlZCIsInByb3AiLCIkdXBkYXRlIiwicmVmcmVzaFBhcmVudEFuZENsb3NlIiwiZGVmYXVsdFRoZW1lIiwicXVldWVMaW1pdCIsImZpbHRlcnMiLCJmbiIsInRvTG93ZXJDYXNlIiwib25XaGVuQWRkaW5nRmlsZUZhaWxlZCIsImNsZWFyUXVldWUiLCJhZGRUb1F1ZXVlIiwib25BZnRlckFkZGluZ0ZpbGUiLCJ0aGVtZU5hbWUiLCJmaWxlIiwidGhlbWUiLCJ1cGxvYWQiLCJ1cGxvYWRBbGwiLCJmaWxlcyIsInVucGFjayIsImFyY2hpdmVwYXRoIiwidGhlbWVzIiwiZGVmYXVsdFRoZW1lTmFtZSIsIm9iamVjdElkIiwicmF3UHJvcGVydGllcyIsImZpbHRlcmVkUHJvcGVydHkiLCJvcGVuQmxhZGVOZXciLCJub2RlIiwiY2xvbmUiLCJ1c2VyRm9uZmlybWVkIiwiY2xvbmVUaGVtZSIsInByZXZpZXciLCJzZXRBY3RpdmUiLCJtZXNzYWdlVmFsdWVzIiwiJHJlc291cmNlIiwiaXNBcnJheSIsIm1vbWVudCIsInRyYW5zZm9ybVJlc3BvbnNlIiwicmF3RGF0YSIsInRyYW5zZm9ybVJlcXVlc3QiLCJmZCIsIkZvcm1EYXRhIiwiYXBwZW5kIiwicGFyYW1zIiwicGFydHMiLCJ0cmltIiwicGFyc2VkWUFNTCIsIllBTUwiLCJwYXJzZSIsInZhbCIsInYiLCJub25FbXB0eVByb3BlcnRpZXMiLCJ2YWx1ZVR5cGUiLCJub25FbXB0eU11bHRpbGluZ3VhbHMiLCJmb3JtYXQiLCJkYXRhVG9TYXZlIiwic3RyaW5naWZ5IiwiYmxvYk5hbWVFeHRlbnNpb24iLCIkaW5qZWN0b3IiLCJ3aWRnZXQiLCJtZW5pTGlua0xpc3RzQ291bnQiLCJvcGVuQmxhZGUiLCJwYXJlbnRXaWRnZXQiLCJzdGF0aXN0aWNzIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixH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QixjQzFCZDdGLFFBQVFwQyxPQUFPLCtCQUNmeUQsV0FBVyxvREFBcUQsQ0FBQyxTQUFVLHdDQUF5QyxTQUFVK0MsRUFBUTlELFEsY0NEdElOLFFBQVFwQyxPQUFPLCtCQUNmeUQsV0FBVyx1REFBd0QsQ0FBQyxTQUFVLFNBQVUseUNBQTBDLHdDQUF5QyxTQUFVaEIsRUFBUStELEVBQVF1QixFQUFZckYsR0FDOU0sSUFBSW9CLEVBQVEwQyxFQUFPbVgsT0FBTzdaLE1BZTFCMEMsRUFBT3FYLFVBQVksV0FDZnBiLEVBQU9XLEdBQUcsb0JBQXFCLENBQUVnRixRQUFTdEUsRUFBTTZTLG1CQWJoRG5RLEVBQU91WCxXQUFhLENBQ2hCOVQsZ0JBQWlCLE1BQ2pCcEIsWUFBYSxNQUNiQyxXQUFZLE1BQ1pDLFdBQVksTUFDWkMsZUFBZ0IsT0FFcEJqQixFQUFXZ0MsY0FBYyxDQUFFM0IsUUFBU3RFLEVBQU02UyxrQkFBbUIsU0FBVWxOLEdBQ25FckgsUUFBUTRILE9BQU94RCxFQUFPdVgsV0FBWXRVLFUsY0NiN0NySCxRQUFRcEMsT0FBTywrQkFDZnlELFdBQVcsb0RBQXFELENBQUMsU0FBVSxTQUFVLHdDQUF5QyxTQUFVaEIsRUFBUStELEVBQVE5RCxRLGNDRHhKTixRQUFRcEMsT0FBTywrQkFDZnlELFdBQVcsMERBQTJELENBQUMsU0FBVSxTQUFVLHdDQUF5QyxTQUFVaEIsRUFBUStELEVBQVE5RCxRLGNDRDlKTixRQUFRcEMsT0FBTywrQkFDZnlELFdBQVcscURBQXNELENBQUMsU0FBVSxTQUFVLHdDQUF5QyxTQUFVaEIsRUFBUStELEVBQVE5RCxRIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8vQ2FsbCB0aGlzIHRvIHJlZ2lzdGVyIG91ciBtb2R1bGUgdG8gbWFpbiBhcHBsaWNhdGlvblxudmFyIG1vZHVsZU5hbWUgPSBcInZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZVwiO1xuXG5pZiAoQXBwRGVwZW5kZW5jaWVzICE9IHVuZGVmaW5lZCkge1xuICAgIEFwcERlcGVuZGVuY2llcy5wdXNoKG1vZHVsZU5hbWUpO1xufVxuXG5hbmd1bGFyLm1vZHVsZShtb2R1bGVOYW1lLCBbXSlcbiAgICAucnVuKFsncGxhdGZvcm1XZWJBcHAuYXV0aFNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAubWFpbk1lbnVTZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLndpZGdldFNlcnZpY2UnLCAnJHN0YXRlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAucGVybWlzc2lvblNjb3BlUmVzb2x2ZXInLCAndmlydG9Db21tZXJjZS5zdG9yZU1vZHVsZS5zdG9yZXMnLCAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLm1lbnVMaW5rTGlzdC1hc3NvY2lhdGlvblR5cGVzU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uIChhdXRoU2VydmljZSwgbWFpbk1lbnVTZXJ2aWNlLCB3aWRnZXRTZXJ2aWNlLCAkc3RhdGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIHNjb3BlUmVzb2x2ZXIsIHN0b3JlcywgYXNzb2NpYXRpb25UeXBlc1NlcnZpY2UpIHtcblxuICAgICAgICAgICAgdmFyIG1lbnVJdGVtID0ge1xuICAgICAgICAgICAgICAgIHBhdGg6ICdicm93c2UvY29udGVudCcsXG4gICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLWNvZGUnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnY29udGVudC5tYWluLW1lbnUtdGl0bGUnLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiAxMTEsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoKSB7ICRzdGF0ZS5nbygnd29ya3NwYWNlLmNvbnRlbnQnKTsgfSxcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnY29udGVudDphY2Nlc3MnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbWFpbk1lbnVTZXJ2aWNlLmFkZE1lbnVJdGVtKG1lbnVJdGVtKTtcblxuXG4gICAgICAgICAgICAvLyB0aGVtZXMgd2lkZ2V0IGluIFNUT1JFIGRldGFpbHNcbiAgICAgICAgICAgIHdpZGdldFNlcnZpY2UucmVnaXN0ZXJXaWRnZXQoe1xuICAgICAgICAgICAgICAgIHNpemU6IFsyLCAxXSxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLnN0b3JlQ01TV2lkZ2V0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5Db250ZW50KS9TY3JpcHRzL3dpZGdldHMvc3RvcmVDTVNXaWRnZXQudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdjb250ZW50OnJlYWQnXG4gICAgICAgICAgICB9LCAnc3RvcmVEZXRhaWwnKTtcblxuICAgICAgICAgICAgLy9SZWdpc3RlciBwZXJtaXNzaW9uIHNjb3BlcyB0ZW1wbGF0ZXMgdXNlZCBmb3Igc2NvcGUgYm91bmRlZCBkZWZpbml0aW9uIGluIHJvbGUgbWFuYWdlbWVudCB1aVxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkU3RvcmVTY29wZSA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnQ29udGVudFNlbGVjdGVkU3RvcmVTY29wZScsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdPbmx5IGZvciBzZWxlY3RlZCBzdG9yZXMnLFxuICAgICAgICAgICAgICAgIHNlbGVjdEZuOiBmdW5jdGlvbiAoYmxhZGUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnc3RvcmUtcGljaycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ2NvbnRlbnQuYmxhZGVzLnNjb3BlLXZhbHVlLXBpY2stZnJvbS1zaW1wbGUtbGlzdC50aXRsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ2NvbnRlbnQuYmxhZGVzLnNjb3BlLXZhbHVlLXBpY2stZnJvbS1zaW1wbGUtbGlzdC5zdWJ0aXRsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW50aXR5OiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VzQ29uZmlybWVkRm46IGNhbGxiYWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNlcnZpY2U6IHN0b3JlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdwbGF0Zm9ybVdlYkFwcC5zZWN1cml0eS5zY29wZVZhbHVlUGlja0Zyb21TaW1wbGVMaXN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJyQoUGxhdGZvcm0pL1NjcmlwdHMvYXBwL3NlY3VyaXR5L2JsYWRlcy9jb21tb24vc2NvcGUtdmFsdWUtcGljay1mcm9tLXNpbXBsZS1saXN0LnRwbC5odG1sJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzY29wZVJlc29sdmVyLnJlZ2lzdGVyKHNlbGVjdGVkU3RvcmVTY29wZSk7XG5cbiAgICAgICAgICAgIC8vIHJlZ2lzdGVyIGF2YWlsYWJsZSB0eXBlcyBvZiBsaW5rcyBpbiBsaW5rZWQgbGlzdHNcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9wZW5JdGVtU2VsZWN0V2l6YXJkKHBhcmVudEVsZW1lbnQsIGJsYWRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkTGlzdEVudHJpZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBcIkNhdGFsb2dFbnRyeVNlbGVjdFwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJjb250ZW50LmJsYWRlcy5jYXRhbG9nLWl0ZW1zLXNlbGVjdC50aXRsZS1wcm9kdWN0XCIsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNhdGFsb2dNb2R1bGUuY2F0YWxvZ0l0ZW1TZWxlY3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5DYXRhbG9nKS9TY3JpcHRzL2JsYWRlcy9jb21tb24vY2F0YWxvZy1pdGVtcy1zZWxlY3QudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1iczogW10sXG4gICAgICAgICAgICAgICAgICAgIHRvb2xiYXJDb21tYW5kczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucGljay1zZWxlY3RlZFwiLCBpY29uOiAnZmEgZmEtcGx1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKGJsYWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuYXNzb2NpYXRlZE9iamVjdElkID0gc2VsZWN0ZWRMaXN0RW50cmllc1swXS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5hc3NvY2lhdGVkT2JqZWN0TmFtZSA9IHNlbGVjdGVkTGlzdEVudHJpZXNbMF0ubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKGJsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkTGlzdEVudHJpZXMubGVuZ3RoID09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgbmV3QmxhZGUub3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NoZWNraW5nTXVsdGlwbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjaGVja0l0ZW1GbjogZnVuY3Rpb24gKGxpc3RJdGVtLCBpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlzdEl0ZW0udHlwZSA9PSAnY2F0ZWdvcnknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QmxhZGUuZXJyb3IgPSAnTXVzdCBzZWxlY3QgUHJvZHVjdCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uc2VsZWN0ZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfLmFsbChzZWxlY3RlZExpc3RFbnRyaWVzLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCAhPSBsaXN0SXRlbS5pZDsgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGlzdEVudHJpZXMucHVzaChsaXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGlzdEVudHJpZXMgPSBfLnJlamVjdChzZWxlY3RlZExpc3RFbnRyaWVzLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCA9PSBsaXN0SXRlbS5pZDsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0JsYWRlLmVycm9yID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9wZW5DYXRlZ29yeVNlbGVjdFdpemFyZChwYXJlbnRFbGVtZW50LCBibGFkZSkge1xuICAgICAgICAgICAgICAgIGlmICghYXV0aFNlcnZpY2UuY2hlY2tQZXJtaXNzaW9uKCdjb250ZW50OnVwZGF0ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRMaXN0RW50cmllcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IFwiQ2F0YWxvZ0NhdGVnb3J5U2VsZWN0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcImNvbnRlbnQuYmxhZGVzLmNhdGFsb2ctaXRlbXMtc2VsZWN0LnRpdGxlLWNhdGVnb3J5XCIsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNhdGFsb2dNb2R1bGUuY2F0YWxvZ0l0ZW1TZWxlY3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5DYXRhbG9nKS9TY3JpcHRzL2JsYWRlcy9jb21tb24vY2F0YWxvZy1pdGVtcy1zZWxlY3QudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1iczogW10sXG4gICAgICAgICAgICAgICAgICAgIHRvb2xiYXJDb21tYW5kczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucGljay1zZWxlY3RlZFwiLCBpY29uOiAnZmEgZmEtcGx1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKGJsYWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuYXNzb2NpYXRlZE9iamVjdElkID0gc2VsZWN0ZWRMaXN0RW50cmllc1swXS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5hc3NvY2lhdGVkT2JqZWN0TmFtZSA9IHNlbGVjdGVkTGlzdEVudHJpZXNbMF0ubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKGJsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkTGlzdEVudHJpZXMubGVuZ3RoID09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgbmV3QmxhZGUub3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NoZWNraW5nTXVsdGlwbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBhbGxvd0NoZWNraW5nSXRlbTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGFsbG93Q2hlY2tpbmdDYXRlZ29yeTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tJdGVtRm46IGZ1bmN0aW9uIChsaXN0SXRlbSwgaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RJdGVtLnR5cGUgIT0gJ2NhdGVnb3J5Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0JsYWRlLmVycm9yID0gJ011c3Qgc2VsZWN0IENhdGVnb3J5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0SXRlbS5zZWxlY3RlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF8uYWxsKHNlbGVjdGVkTGlzdEVudHJpZXMsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkICE9IGxpc3RJdGVtLmlkOyB9KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMaXN0RW50cmllcy5wdXNoKGxpc3RJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMaXN0RW50cmllcyA9IF8ucmVqZWN0KHNlbGVjdGVkTGlzdEVudHJpZXMsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkID09IGxpc3RJdGVtLmlkOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QmxhZGUuZXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXNzb2NpYXRpb25UeXBlc1NlcnZpY2UucmVnaXN0ZXJUeXBlKHsgaWQ6ICdwcm9kdWN0JywgbmFtZTogJ1Byb2R1Y3QnLCBvcGVuU2VsZWN0V2l6YXJkOiBvcGVuSXRlbVNlbGVjdFdpemFyZCB9KTtcbiAgICAgICAgICAgIGFzc29jaWF0aW9uVHlwZXNTZXJ2aWNlLnJlZ2lzdGVyVHlwZSh7IGlkOiAnY2F0ZWdvcnknLCBuYW1lOiAnQ2F0ZWdvcnknLCBvcGVuU2VsZWN0V2l6YXJkOiBvcGVuQ2F0ZWdvcnlTZWxlY3RXaXphcmQgfSk7XG5cbiAgICAgICAgfV0pXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ3dvcmtzcGFjZS5jb250ZW50Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy9jb250ZW50P3N0b3JlSWQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnJChQbGF0Zm9ybSkvU2NyaXB0cy9jb21tb24vdGVtcGxhdGVzL2hvbWUudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFtcbiAgICAgICAgICAgICAgICAgICAgJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnY29udGVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdjb250ZW50LmJsYWRlcy5jb250ZW50LW1haW4udGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnY29udGVudC5ibGFkZXMuY29udGVudC1tYWluLnN1YnRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLmNvbnRlbnRNYWluQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5Db250ZW50KS9TY3JpcHRzL2JsYWRlcy9jb250ZW50LW1haW4udHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ2xvc2luZ0Rpc2FibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUoYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG4gICAgfV0pXG4gICAgLy8gc2VydmljZSBmb3IgbWFuYWdpbmcgYXNzb2NpYXRpb24gVHlwZXMgZm9yIG1lbnVMaW5rTGlzdCBpdGVtcyAobGlua3MpXG4gICAgLmZhY3RvcnkoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5tZW51TGlua0xpc3QtYXNzb2NpYXRpb25UeXBlc1NlcnZpY2UnLCBbZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2JqZWN0czogW10sXG4gICAgICAgICAgICByZWdpc3RlclR5cGU6IGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgICAgIGlmICghZW50cnkudGVtcGxhdGVVUkwpIHtcbiAgICAgICAgICAgICAgICAgICAgZW50cnkudGVtcGxhdGVVUkwgPSAnbGlua0xpc3RTZWxlY3RPYmplY3QudHBsJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdHMucHVzaChlbnRyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pXG4gICAgLy8gdHJhbnNsYXRpb24gd2l0aCBmYWxsYmFjayB2YWx1ZSBpZiBrZXkgbm90IGZvdW5kXG4gICAgLy9EdXBsaWNhdGVzIHRoZSBuZXh0IHZlcnNpb24gYWZ0ZXIgcGxhdGZvcm0gMi4xMy4xNCBhbmQgc2hvdWxkIGJlIHJlbW92ZWQgd2hlbiB0aGlzIG1vZHVsZSBnZXRzIHBsYXRmb3JtVmVyc2lvbiBkZXBlbmRlbmN5IGhpZ2hlciFcbiAgICAuZmlsdGVyKCdmYWxsYmFja1RyYW5zbGF0ZScsIFsnJHRyYW5zbGF0ZScsIGZ1bmN0aW9uICgkdHJhbnNsYXRlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodHJhbnNsYXRlS2V5LCBmYWxsYmFja1ZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gJHRyYW5zbGF0ZS5pbnN0YW50KHRyYW5zbGF0ZUtleSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0ID09PSB0cmFuc2xhdGVLZXkgPyBmYWxsYmFja1ZhbHVlIDogcmVzdWx0O1xuICAgICAgICB9O1xuICAgIH1dKVxuICAgIC8vRHVwbGljYXRlcyB0aGUgbmV4dCB2ZXJzaW9uIGFmdGVyIHBsYXRmb3JtIDIuMTMuMTQgYW5kIHNob3VsZCBiZSByZW1vdmVkIHdoZW4gdGhpcyBtb2R1bGUgZ2V0cyBwbGF0Zm9ybVZlcnNpb24gZGVwZW5kZW5jeSBoaWdoZXIhXG4gICAgLmZpbHRlcignbG9jYWxpemVEeW5hbWljUHJvcGVydHlOYW1lJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0LCBsYW5nKSB7XG4gICAgICAgICAgICB2YXIgcmV0VmFsID0gaW5wdXQubmFtZTtcbiAgICAgICAgICAgIHZhciBkaXNwbGF5TmFtZSA9IF8uZmluZChpbnB1dC5kaXNwbGF5TmFtZXMsIGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmoubG9jYWxlLnN0YXJ0c1dpdGgobGFuZyk7IH0pO1xuICAgICAgICAgICAgaWYgKGRpc3BsYXlOYW1lICYmIGRpc3BsYXlOYW1lLm5hbWUpXG4gICAgICAgICAgICAgICAgcmV0VmFsICs9ICcgKCcgKyBkaXNwbGF5TmFtZS5uYW1lICsgJyknO1xuXG4gICAgICAgICAgICByZXR1cm4gcmV0VmFsO1xuICAgICAgICB9XG4gICAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUuY29udGVudE1haW5Db250cm9sbGVyJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUubWVudXMnLCAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLmNvbnRlbnRBcGknLCAndmlydG9Db21tZXJjZS5zdG9yZU1vZHVsZS5zdG9yZXMnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLndpZGdldFNlcnZpY2UnLFxuXHRmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgbWVudXMsIGNvbnRlbnRBcGksIHN0b3JlcywgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgZGlhbG9nU2VydmljZSwgd2lkZ2V0U2VydmljZSkge1xuXHQgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuXG5cdCAgICBibGFkZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG5cdCAgICAgICAgYmxhZGUuY3VycmVudEVudGl0aWVzID0gW107XG5cblx0ICAgICAgICBpZiAoJHN0YXRlUGFyYW1zLnN0b3JlSWQpIHtcblx0ICAgICAgICAgICAgc3RvcmVzLmdldCh7IGlkOiAkc3RhdGVQYXJhbXMuc3RvcmVJZCB9LCBibGFkZS5vcGVuVGhlbWVzKTtcblx0ICAgICAgICB9O1xuXG5cdCAgICAgICAgc3RvcmVzLnF1ZXJ5KG51bGwsIGZ1bmN0aW9uIChzdG9yZXNSZXN1bHQpIHtcblx0ICAgICAgICAgICAgdmFyIGxvYWRDb3VudGVyID0gc3RvcmVzUmVzdWx0Lmxlbmd0aCAqIDI7XG5cblx0ICAgICAgICAgICAgdmFyIGZpbm5hbHlGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IC0tbG9hZENvdW50ZXI7XG5cdCAgICAgICAgICAgIH07XG5cblx0ICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gXy5hbnkoc3RvcmVzUmVzdWx0KTtcblxuXHQgICAgICAgICAgICBfLmVhY2goc3RvcmVzUmVzdWx0LCBmdW5jdGlvbiAoeCkge1xuXHQgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0aWVzLnB1c2goe1xuXHQgICAgICAgICAgICAgICAgICAgIHN0b3JlSWQ6IHguaWQsXG5cdCAgICAgICAgICAgICAgICAgICAgc3RvcmU6IHgsXG5cdCAgICAgICAgICAgICAgICAgICAgdGhlbWVzQ291bnQ6ICcuLi4nLFxuXHQgICAgICAgICAgICAgICAgICAgIHBhZ2VzQ291bnQ6ICcuLi4nLFxuXHQgICAgICAgICAgICAgICAgICAgIGJsb2dzQ291bnQ6ICcuLi4nLFxuXHQgICAgICAgICAgICAgICAgICAgIGxpc3RMaW5rc0NvdW50OiAnLi4uJ1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goeC5pZCwgJ3N0YXRzJykuZmluYWxseShmaW5uYWx5RnVuY3Rpb24pO1xuXHQgICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCh4LmlkLCAnbWVudXMnKS5maW5hbGx5KGZpbm5hbHlGdW5jdGlvbik7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgJHNjb3BlLnRoZXJlSXNXaWRnZXRUb1Nob3cgPSBfLmFueSh3aWRnZXRTZXJ2aWNlLndpZGdldHNNYXBbJ2NvbnRlbnRNYWluTGlzdEl0ZW0nXSwgZnVuY3Rpb24gKHcpIHsgcmV0dXJuICFhbmd1bGFyLmlzRnVuY3Rpb24ody5pc1Zpc2libGUpIHx8IHcuaXNWaXNpYmxlKGJsYWRlKTsgfSk7XG5cdCAgICB9O1xuXG5cblx0ICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAoc3RvcmVJZCwgcmVxdWVzdFR5cGUsIGRhdGEpIHtcblx0ICAgICAgICB2YXIgZW50aXR5ID0gXy5maW5kV2hlcmUoYmxhZGUuY3VycmVudEVudGl0aWVzLCB7IHN0b3JlSWQ6IHN0b3JlSWQgfSk7XG5cblx0ICAgICAgICBzd2l0Y2ggKHJlcXVlc3RUeXBlKSB7XG5cdCAgICAgICAgICAgIGNhc2UgJ21lbnVzJzpcblx0ICAgICAgICAgICAgICAgIHJldHVybiBtZW51cy5nZXQoeyBzdG9yZUlkOiBzdG9yZUlkIH0sIGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZW50aXR5Lmxpc3RMaW5rc0NvdW50ID0gZGF0YS5sZW5ndGg7XG5cdCAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpOyB9KS4kcHJvbWlzZTtcblx0ICAgICAgICAgICAgY2FzZSAnc3RhdHMnOlxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnRBcGkuZ2V0U3RhdGlzdGljcyh7IHN0b3JlSWQ6IHN0b3JlSWQgfSwgZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChlbnRpdHksIGRhdGEpO1xuXHQgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7IGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTsgfSkuJHByb21pc2U7XG5cdCAgICAgICAgICAgIGNhc2UgJ2RlZmF1bHRUaGVtZSc6XG5cdCAgICAgICAgICAgICAgICBlbnRpdHkuYWN0aXZlVGhlbWVOYW1lID0gZGF0YTtcblx0ICAgICAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cblx0ICAgICRzY29wZS4kb24oXCJjbXMtbWVudXMtY2hhbmdlZFwiLCBmdW5jdGlvbiAoZXZlbnQsIHN0b3JlSWQpIHtcblx0ICAgICAgICBibGFkZS5yZWZyZXNoKHN0b3JlSWQsICdtZW51cycpO1xuXHQgICAgfSk7XG5cblx0ICAgICRzY29wZS4kb24oXCJjbXMtc3RhdGlzdGljcy1jaGFuZ2VkXCIsIGZ1bmN0aW9uIChldmVudCwgc3RvcmVJZCkge1xuXHQgICAgICAgIGJsYWRlLnJlZnJlc2goc3RvcmVJZCwgJ3N0YXRzJyk7XG5cdCAgICB9KTtcblxuXHQgICAgYmxhZGUub3BlblRoZW1lcyA9IGZ1bmN0aW9uIChzdG9yZSkge1xuXHQgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcblx0ICAgICAgICAgICAgaWQ6IFwidGhlbWVzTGlzdEJsYWRlXCIsXG5cdCAgICAgICAgICAgIHN0b3JlSWQ6IHN0b3JlLmlkLFxuXHQgICAgICAgICAgICB0aXRsZTogJ2NvbnRlbnQuYmxhZGVzLnRoZW1lcy1saXN0LnRpdGxlJyxcblx0ICAgICAgICAgICAgdGl0bGVWYWx1ZXM6IHsgbmFtZTogc3RvcmUubmFtZSB9LFxuXHQgICAgICAgICAgICBzdWJ0aXRsZTogJ2NvbnRlbnQuYmxhZGVzLnRoZW1lcy1saXN0LnN1YnRpdGxlJyxcblx0ICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS50aGVtZXNMaXN0Q29udHJvbGxlcicsXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuQ29udGVudCkvU2NyaXB0cy9ibGFkZXMvdGhlbWVzL3RoZW1lcy1saXN0LnRwbC5odG1sJyxcblx0ICAgICAgICB9O1xuXHQgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG5cdCAgICB9O1xuXG5cdCAgICBibGFkZS5vcGVuUGFnZXMgPSBmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcblx0ICAgICAgICAgICAgaWQ6IFwicGFnZXNMaXN0XCIsXG5cdCAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAncGFnZXMnLFxuXHQgICAgICAgICAgICBzdG9yZUlkOiBkYXRhLnN0b3JlSWQsXG5cdCAgICAgICAgICAgIHN0b3JlVXJsOiBkYXRhLnN0b3JlLnVybCxcblx0ICAgICAgICAgICAgbGFuZ3VhZ2VzOiBkYXRhLnN0b3JlLmxhbmd1YWdlcyxcblx0ICAgICAgICAgICAgY3VycmVudEVudGl0eTogZGF0YSxcblx0ICAgICAgICAgICAgdGl0bGU6IGRhdGEuc3RvcmUubmFtZSxcblx0ICAgICAgICAgICAgc3VidGl0bGU6ICdjb250ZW50LmJsYWRlcy5wYWdlcy1saXN0LnN1YnRpdGxlLXBhZ2VzJyxcblx0ICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5wYWdlc0xpc3RDb250cm9sbGVyJyxcblx0ICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5Bc3NldHMpL1NjcmlwdHMvYmxhZGVzL2Fzc2V0LWxpc3QudHBsLmh0bWwnXG5cdCAgICAgICAgfTtcblx0ICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuXHQgICAgfTtcblxuXHQgICAgYmxhZGUub3BlbkxpbmtMaXN0cyA9IGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuXHQgICAgICAgICAgICBpZDogXCJsaW5rTGlzdEJsYWRlXCIsXG5cdCAgICAgICAgICAgIHN0b3JlSWQ6IGRhdGEuc3RvcmVJZCxcblx0ICAgICAgICAgICAgdGl0bGU6ICdjb250ZW50LmJsYWRlcy5saW5rLWxpc3RzLnRpdGxlJyxcblx0ICAgICAgICAgICAgc3VidGl0bGU6ICdjb250ZW50LmJsYWRlcy5saW5rLWxpc3RzLnN1YnRpdGxlJyxcblx0ICAgICAgICAgICAgc3VidGl0bGVWYWx1ZXM6IHsgbmFtZTogZGF0YS5zdG9yZS5uYW1lIH0sXG5cdCAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUubGlua0xpc3RzQ29udHJvbGxlcicsXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuQ29udGVudCkvU2NyaXB0cy9ibGFkZXMvbWVudS9saW5rLWxpc3RzLnRwbC5odG1sJyxcblx0ICAgICAgICB9O1xuXHQgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG5cdCAgICB9O1xuXG5cdCAgICBibGFkZS5vcGVuQmxvZ3MgPSBmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcblx0ICAgICAgICAgICAgaWQ6IFwiYmxvZ3NMaXN0QmxhZGVcIixcblx0ICAgICAgICAgICAgY29udGVudFR5cGU6ICdibG9ncycsXG5cdCAgICAgICAgICAgIHN0b3JlSWQ6IGRhdGEuc3RvcmVJZCxcblx0ICAgICAgICAgICAgc3RvcmVVcmw6IGRhdGEuc3RvcmUudXJsLFxuXHQgICAgICAgICAgICBsYW5ndWFnZXM6IGRhdGEuc3RvcmUubGFuZ3VhZ2VzLFxuXHQgICAgICAgICAgICBjdXJyZW50RW50aXR5OiBkYXRhLFxuXHQgICAgICAgICAgICB0aXRsZTogZGF0YS5zdG9yZS5uYW1lLFxuXHQgICAgICAgICAgICBzdWJ0aXRsZTogJ2NvbnRlbnQuYmxhZGVzLnBhZ2VzLWxpc3Quc3VidGl0bGUtYmxvZ3MnLFxuXHQgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLnBhZ2VzTGlzdENvbnRyb2xsZXInLFxuXHQgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLkFzc2V0cykvU2NyaXB0cy9ibGFkZXMvYXNzZXQtbGlzdC50cGwuaHRtbCdcblx0ICAgICAgICB9O1xuXHQgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG5cdCAgICB9O1xuXG5cdCAgICBibGFkZS5hZGROZXdUaGVtZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuXHQgICAgICAgICAgICBpZDogJ2FkZFRoZW1lJyxcblx0ICAgICAgICAgICAgaXNOZXc6IHRydWUsXG5cdCAgICAgICAgICAgIGlzQWN0aXZhdGVBZnRlclNhdmU6ICFkYXRhLnRoZW1lc0NvdW50LFxuXHQgICAgICAgICAgICBzdG9yZTogZGF0YS5zdG9yZSxcblx0ICAgICAgICAgICAgc3RvcmVJZDogZGF0YS5zdG9yZUlkLFxuXHQgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLnRoZW1lRGV0YWlsQ29udHJvbGxlcicsXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuQ29udGVudCkvU2NyaXB0cy9ibGFkZXMvdGhlbWVzL3RoZW1lLWRldGFpbC50cGwuaHRtbCcsXG5cdCAgICAgICAgfTtcblx0ICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuXHQgICAgfTtcblxuXHQgICAgYmxhZGUuYWRkTmV3UGFnZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuXHQgICAgICAgICAgICBpZDogJ2FkZFBhZ2UnLFxuXHQgICAgICAgICAgICBjb250ZW50VHlwZTogJ3BhZ2VzJyxcblx0ICAgICAgICAgICAgc3RvcmVJZDogZGF0YS5zdG9yZUlkLFxuXHQgICAgICAgICAgICBsYW5ndWFnZXM6IGRhdGEuc3RvcmUubGFuZ3VhZ2VzLFxuXHQgICAgICAgICAgICBjdXJyZW50RW50aXR5OiB7fSxcblx0ICAgICAgICAgICAgaXNOZXc6IHRydWUsXG5cdCAgICAgICAgICAgIHRpdGxlOiAnY29udGVudC5ibGFkZXMuZWRpdC1wYWdlLnRpdGxlLW5ldycsXG5cdCAgICAgICAgICAgIHN1YnRpdGxlOiAnY29udGVudC5ibGFkZXMuZWRpdC1wYWdlLnN1YnRpdGxlLW5ldycsXG5cdCAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUucGFnZURldGFpbENvbnRyb2xsZXInLFxuXHQgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLkNvbnRlbnQpL1NjcmlwdHMvYmxhZGVzL3BhZ2VzL3BhZ2UtZGV0YWlsLnRwbC5odG1sJyxcblx0ICAgICAgICB9O1xuXHQgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG5cdCAgICB9O1xuXG5cdCAgICBibGFkZS5hZGROZXdMaW5rTGlzdCA9IGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuXHQgICAgICAgICAgICBpZDogJ2FkZE1lbnVMaW5rTGlzdEJsYWRlJyxcblx0ICAgICAgICAgICAgc3RvcmVJZDogZGF0YS5zdG9yZUlkLFxuXHQgICAgICAgICAgICBpc05ldzogdHJ1ZSxcblx0ICAgICAgICAgICAgdGl0bGU6ICdjb250ZW50LmJsYWRlcy5tZW51LWxpbmstbGlzdC50aXRsZS1uZXcnLFxuXHQgICAgICAgICAgICBzdWJ0aXRsZTogJ2NvbnRlbnQuYmxhZGVzLm1lbnUtbGluay1saXN0LnN1YnRpdGxlLW5ldycsXG5cdCAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUubWVudUxpbmtMaXN0Q29udHJvbGxlcicsXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuQ29udGVudCkvU2NyaXB0cy9ibGFkZXMvbWVudS9tZW51LWxpbmstbGlzdC50cGwuaHRtbCcsXG5cdCAgICAgICAgfTtcblx0ICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuXHQgICAgfTtcblxuXHQgICAgYmxhZGUuYWRkQmxvZyA9IGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuXHQgICAgICAgICAgICBpZDogJ25ld0Jsb2cnLFxuXHQgICAgICAgICAgICBjb250ZW50VHlwZTogJ2Jsb2dzJyxcblx0ICAgICAgICAgICAgc3RvcmVJZDogZGF0YS5zdG9yZUlkLFxuXHQgICAgICAgICAgICBjdXJyZW50RW50aXR5OiB7fSxcblx0ICAgICAgICAgICAgaXNOZXc6IHRydWUsXG5cdCAgICAgICAgICAgIHRpdGxlOiAnY29udGVudC5ibGFkZXMuZWRpdC1ibG9nLnRpdGxlLW5ldycsXG5cdCAgICAgICAgICAgIHN1YnRpdGxlOiAnY29udGVudC5ibGFkZXMuZWRpdC1ibG9nLnN1YnRpdGxlLW5ldycsXG5cdCAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUuZWRpdEJsb2dDb250cm9sbGVyJyxcblx0ICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5Db250ZW50KS9TY3JpcHRzL2JsYWRlcy9wYWdlcy9lZGl0LWJsb2cudHBsLmh0bWwnLFxuXHQgICAgICAgIH07XG5cdCAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcblx0ICAgIH07XG5cblx0ICAgIGJsYWRlLm9wZW5UaGVtZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuXHQgICAgICAgICAgICBpZDogJ3RoZW1lQXNzZXRMaXN0QmxhZGUnLFxuXHQgICAgICAgICAgICBjb250ZW50VHlwZTogJ3RoZW1lcycsXG5cdCAgICAgICAgICAgIHN0b3JlSWQ6IGRhdGEuc3RvcmVJZCxcblx0ICAgICAgICAgICAgY3VycmVudEVudGl0eTogeyBuYW1lOiBkYXRhLmFjdGl2ZVRoZW1lTmFtZSwgdXJsOiBkYXRhLmFjdGl2ZVRoZW1lVVJMIH0sXG5cdCAgICAgICAgICAgIHN1YnRpdGxlOiAnY29udGVudC5ibGFkZXMuYXNzZXQtbGlzdC5zdWJ0aXRsZScsXG5cdCAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUuYXNzZXRMaXN0Q29udHJvbGxlcicsXG5cdCAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuQXNzZXRzKS9TY3JpcHRzL2JsYWRlcy9hc3NldC1saXN0LnRwbC5odG1sJ1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcblx0ICAgIH07XG5cblx0ICAgIGJsYWRlLnByZXZpZXdUaGVtZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgaWYgKGRhdGEuc3RvcmUudXJsKSB7XG5cdCAgICAgICAgICAgIHdpbmRvdy5vcGVuKGRhdGEuc3RvcmUudXJsICsgJz9wcmV2aWV3dGhlbWU9JyArIGRhdGEuYWN0aXZlVGhlbWVOYW1lLCAnX2JsYW5rJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuXHQgICAgICAgICAgICAgICAgaWQ6IFwibm9VcmxJblN0b3JlXCIsXG5cdCAgICAgICAgICAgICAgICB0aXRsZTogXCJjb250ZW50LmRpYWxvZ3Muc2V0LXN0b3JlLXVybC50aXRsZVwiLFxuXHQgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJjb250ZW50LmRpYWxvZ3Muc2V0LXN0b3JlLXVybC5tZXNzYWdlXCJcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3dOb3RpZmljYXRpb25EaWFsb2coZGlhbG9nKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cblx0ICAgICRzY29wZS5vcGVuU3RvcmVzTW9kdWxlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICRzdGF0ZS5nbygnd29ya3NwYWNlLnN0b3JlTW9kdWxlJyk7XG5cdCAgICB9O1xuXG5cdCAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1jb2RlJztcblxuXHQgICAgYmxhZGUuaW5pdGlhbGl6ZSgpO1xuXHR9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUubGlua0xpc3RzQ29udHJvbGxlcicsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLm1lbnVzJywgJ3ZpcnRvQ29tbWVyY2Uuc3RvcmVNb2R1bGUuc3RvcmVzJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAuZGlhbG9nU2VydmljZScsICd1aUdyaWRDb25zdGFudHMnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJyxcbiAgICBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlLCBtZW51cywgc3RvcmVzLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBkaWFsb2dTZXJ2aWNlLCB1aUdyaWRDb25zdGFudHMsIHVpR3JpZEhlbHBlcikge1xuICAgICAgICAkc2NvcGUudWlHcmlkQ29uc3RhbnRzID0gdWlHcmlkQ29uc3RhbnRzO1xuICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG5cbiAgICAgICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICBtZW51cy5nZXQoeyBzdG9yZUlkOiBibGFkZS5zdG9yZUlkIH0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0aWVzID0gZGF0YTtcbiAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5yZWZyZXNoKGJsYWRlLnN0b3JlSWQsICdtZW51cycpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGJsYWRlLnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAobGlzdEl0ZW0sIGlzTmV3KSB7XG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBsaXN0SXRlbS5pZDtcblxuICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgIGlkOiAnbWVudUxpbmtMaXN0QmxhZGUnLFxuICAgICAgICAgICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgICAgICAgICAgICAgcGFyZW50UmVmcmVzaDogYmxhZGUucmVmcmVzaCxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLm1lbnVMaW5rTGlzdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuQ29udGVudCkvU2NyaXB0cy9ibGFkZXMvbWVudS9tZW51LWxpbmstbGlzdC50cGwuaHRtbCdcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChpc05ldykge1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKG5ld0JsYWRlLCB7XG4gICAgICAgICAgICAgICAgICAgIGlzTmV3OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ2NvbnRlbnQuYmxhZGVzLm1lbnUtbGluay1saXN0LnRpdGxlLW5ldycsXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnY29udGVudC5ibGFkZXMubWVudS1saW5rLWxpc3Quc3VidGl0bGUtbmV3J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChuZXdCbGFkZSwge1xuICAgICAgICAgICAgICAgICAgICBsaXN0SWQ6IGxpc3RJdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ2NvbnRlbnQuYmxhZGVzLm1lbnUtbGluay1saXN0LnRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGVWYWx1ZXM6IHsgbmFtZTogbGlzdEl0ZW0ubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ2NvbnRlbnQuYmxhZGVzLm1lbnUtbGluay1saXN0LnN1YnRpdGxlJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJsYWRlLmRlbGV0ZUxpc3QgPSBmdW5jdGlvbiAoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogXCJjb25maXJtRGVsZXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcImNvbnRlbnQuZGlhbG9ncy5saW5rLWxpc3QtZGVsZXRlLnRpdGxlXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiY29udGVudC5kaWFsb2dzLmxpbmstbGlzdC1kZWxldGUubWVzc2FnZVwiLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdEVudHJ5SWRzID0gXy5wbHVjayhzZWxlY3Rpb24sICdpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVzLmRlbGV0ZSh7IHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsIGxpc3RJZHM6IGxpc3RFbnRyeUlkcyB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwiY21zLW1lbnVzLWNoYW5nZWRcIiwgYmxhZGUuc3RvcmVJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHsgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Q29uZmlybWF0aW9uRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1saXN0LW9sJztcblxuICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5hZGRcIiwgaWNvbjogJ2ZhIGZhLXBsdXMnLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgYmxhZGUuc2VsZWN0Tm9kZSh7fSwgdHJ1ZSk7IH0sXG4gICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnY29udGVudDpjcmVhdGUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuZGVsZXRlXCIsIGljb246ICdmYSBmYS10cmFzaC1vJyxcbiAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IGJsYWRlLmRlbGV0ZUxpc3QoJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpKTsgfSxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuZ3JpZEFwaSAmJiBfLmFueSgkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ2NvbnRlbnQ6ZGVsZXRlJ1xuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIHVpLWdyaWRcbiAgICAgICAgJHNjb3BlLnNldEdyaWRPcHRpb25zID0gZnVuY3Rpb24gKGdyaWRPcHRpb25zKSB7XG4gICAgICAgICAgICB1aUdyaWRIZWxwZXIuaW5pdGlhbGl6ZSgkc2NvcGUsIGdyaWRPcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICBibGFkZS5yZWZyZXNoKCk7XG4gICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLm1lbnVMaW5rTGlzdENvbnRyb2xsZXInLCBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5tZW51cycsICd2aXJ0b0NvbW1lcmNlLnN0b3JlTW9kdWxlLnN0b3JlcycsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLmRpYWxvZ1NlcnZpY2UnLCAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLm1lbnVMaW5rTGlzdC1hc3NvY2lhdGlvblR5cGVzU2VydmljZScsICd1aUdyaWRDb25zdGFudHMnLCAncGxhdGZvcm1XZWJBcHAudWlHcmlkSGVscGVyJyxcbiBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlLCBtZW51cywgc3RvcmVzLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBkaWFsb2dTZXJ2aWNlLCBhc3NvY2lhdGlvblR5cGVzU2VydmljZSwgdWlHcmlkQ29uc3RhbnRzLCB1aUdyaWRIZWxwZXIpIHtcbiAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgICBibGFkZS51cGRhdGVQZXJtaXNzaW9uID0gYmxhZGUuaXNOZXcgPyAnY29udGVudDpjcmVhdGUnIDogJ2NvbnRlbnQ6dXBkYXRlJztcbiAgICAgJHNjb3BlLnVpR3JpZENvbnN0YW50cyA9IHVpR3JpZENvbnN0YW50cztcblxuICAgICBibGFkZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IHsgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCwgbWVudUxpbmtzOiBbeyBwcmlvcml0eTogMCB9XSB9O1xuICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgfVxuICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgbWVudXMuZ2V0TGlzdCh7IHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsIGxpc3RJZDogYmxhZGUubGlzdElkIH0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgIF8uZWFjaChkYXRhLm1lbnVMaW5rcywgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgIGlmICh4LmFzc29jaWF0ZWRPYmplY3RUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgeC5hc3NvY2lhdGVkT2JqZWN0ID0gXy5maW5kV2hlcmUoJHNjb3BlLmFzc29jaWF0ZWRPYmplY3RUeXBlcywgeyBpZDogeC5hc3NvY2lhdGVkT2JqZWN0VHlwZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgIGRhdGEubWVudUxpbmtzID0gXy5zb3J0QnkoZGF0YS5tZW51TGlua3MsICdwcmlvcml0eScpLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHkgPSBhbmd1bGFyLmNvcHkoZGF0YSk7XG4gICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7IGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTsgfSk7XG4gICAgICAgICB9XG5cbiAgICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IGJsYWRlLmlzTmV3ID8gW10gOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5zYXZlXCIsIGljb246ICdmYSBmYS1zYXZlJyxcbiAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiAkc2NvcGUuc2F2ZUNoYW5nZXMsXG4gICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogY2FuU2F2ZSxcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiBibGFkZS51cGRhdGVQZXJtaXNzaW9uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucmVzZXRcIiwgaWNvbjogJ2ZhIGZhLXVuZG8nLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KGJsYWRlLm9yaWdFbnRpdHksIGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWFuZ3VsYXIuZXF1YWxzKGJsYWRlLm9yaWdFbnRpdHksIGJsYWRlLmN1cnJlbnRFbnRpdHkpICYmIGJsYWRlLmhhc1VwZGF0ZVBlcm1pc3Npb24oKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgIF07XG5cbiAgICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcy5zcGxpY2UoYmxhZGUudG9vbGJhckNvbW1hbmRzLmxlbmd0aCwgMCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvbnRlbnQuY29tbWFuZHMuYWRkLWxpbmtcIiwgaWNvbjogJ2ZhIGZhLXBsdXMnLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5tZW51TGlua3MucHVzaCh7IHByaW9yaXR5OiAwLCBtZW51TGlua0xpc3RJZDogYmxhZGUubGlzdElkIH0pO1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5yZWNhbGN1bGF0ZVByaW9yaXR5KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJjb250ZW50LmNvbW1hbmRzLmRlbGV0ZS1saW5rc1wiLCBpY29uOiAnZmEgZmEtdHJhc2gtbycsXG4gICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlUm93cygkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmdyaWRBcGkgJiYgXy5hbnkoJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgIH0pO1xuICAgICB9XG5cbiAgICAgJHNjb3BlLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgIG1lbnVzLmNoZWNrTGlzdCh7IHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsIGlkOiBibGFkZS5jdXJyZW50RW50aXR5LmlkLCBuYW1lOiBibGFkZS5jdXJyZW50RW50aXR5Lm5hbWUsIGxhbmd1YWdlOiBibGFkZS5jdXJyZW50RW50aXR5Lmxhbmd1YWdlIH0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgaWYgKEJvb2xlYW4oZGF0YS5yZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgIG1lbnVzLnVwZGF0ZSh7IHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQgfSwgYmxhZGUuY3VycmVudEVudGl0eSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5ibGFkZUNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLm9yaWdFbnRpdHkgPSBhbmd1bGFyLmNvcHkoYmxhZGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgIGlmIChibGFkZS5wYXJlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucGFyZW50UmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwiY21zLW1lbnVzLWNoYW5nZWRcIiwgYmxhZGUuc3RvcmVJZCk7XG4gICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgICAgICBpZDogXCJlcnJvckluTmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiY29udGVudC5kaWFsb2dzLm5hbWUtbXVzdC11bmlxdWUudGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiY29udGVudC5kaWFsb2dzLm5hbWUtbXVzdC11bmlxdWUubWVzc2FnZVwiXG4gICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Tm90aWZpY2F0aW9uRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgfSxcbiAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICB9O1xuXG4gICAgIGZ1bmN0aW9uIGlzRGlydHkoKSB7XG4gICAgICAgICByZXR1cm4gIWFuZ3VsYXIuZXF1YWxzKGJsYWRlLmN1cnJlbnRFbnRpdHksIGJsYWRlLm9yaWdFbnRpdHkpICYmIGJsYWRlLmhhc1VwZGF0ZVBlcm1pc3Npb24oKTtcbiAgICAgfVxuXG4gICAgIGZ1bmN0aW9uIGNhblNhdmUoKSB7XG4gICAgICAgICBpZiAoIWJsYWRlLmN1cnJlbnRFbnRpdHkpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgdmFyIGxpc3ROYW1lSXNSaWdodCA9IGJsYWRlLmN1cnJlbnRFbnRpdHkubmFtZTtcbiAgICAgICAgIHZhciBsaW5rc0FyZVJpZ2h0ID0gXy5hbGwoYmxhZGUuY3VycmVudEVudGl0eS5tZW51TGlua3MsIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgcmV0dXJuIHgudGl0bGUgJiYgeC51cmwgJiYgKCF4LmFzc29jaWF0ZWRPYmplY3RUeXBlIHx8IHguYXNzb2NpYXRlZE9iamVjdElkKTtcbiAgICAgICAgIH0pO1xuICAgICAgICAgcmV0dXJuIGlzRGlydHkoKSAmJiBsaXN0TmFtZUlzUmlnaHQgJiYgbGlua3NBcmVSaWdodCAmJiBfLmFueShibGFkZS5jdXJyZW50RW50aXR5Lm1lbnVMaW5rcyk7XG4gICAgIH1cblxuICAgICAkc2NvcGUuaXNWYWxpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgIHJldHVybiBjYW5TYXZlKCk7XG4gICAgIH07XG5cbiAgICAgJHNjb3BlLmRlbGV0ZVJvd3MgPSBmdW5jdGlvbiAocm93cykge1xuICAgICAgICAgdmFyIGRpYWxvZyA9IHtcbiAgICAgICAgICAgICBpZDogXCJjb25maXJtRGVsZXRlXCIsXG4gICAgICAgICAgICAgdGl0bGU6IFwiY29udGVudC5kaWFsb2dzLmxpbmtzLWRlbGV0ZS50aXRsZVwiLFxuICAgICAgICAgICAgIG1lc3NhZ2U6IFwiY29udGVudC5kaWFsb2dzLmxpbmtzLWRlbGV0ZS5tZXNzYWdlXCIsXG4gICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHJvd3MsIGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5Lm1lbnVMaW5rcy5zcGxpY2UoYmxhZGUuY3VycmVudEVudGl0eS5tZW51TGlua3MuaW5kZXhPZihyb3cpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfVxuICAgICAgICAgfVxuICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Q29uZmlybWF0aW9uRGlhbG9nKGRpYWxvZyk7XG4gICAgIH07XG5cbiAgICAgYmxhZGUub25DbG9zZSA9IGZ1bmN0aW9uIChjbG9zZUNhbGxiYWNrKSB7XG4gICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dDb25maXJtYXRpb25JZk5lZWRlZChpc0RpcnR5KCkgJiYgIWJsYWRlLmlzTmV3LCBjYW5TYXZlKCksIGJsYWRlLCAkc2NvcGUuc2F2ZUNoYW5nZXMsIGNsb3NlQ2FsbGJhY2ssIFwiY29udGVudC5kaWFsb2dzLmxpbmstbGlzdC1zYXZlLnRpdGxlXCIsIFwiY29udGVudC5kaWFsb2dzLmxpbmstbGlzdC1zYXZlLm1lc3NhZ2VcIik7XG4gICAgIH07XG5cbiAgICAgYmxhZGUucmVjYWxjdWxhdGVQcmlvcml0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmxhZGUuY3VycmVudEVudGl0eS5tZW51TGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5Lm1lbnVMaW5rc1tpXS5wcmlvcml0eSA9IChibGFkZS5jdXJyZW50RW50aXR5Lm1lbnVMaW5rcy5sZW5ndGggLSAxIC0gaSkgKiAxMDtcbiAgICAgICAgIH1cbiAgICAgfTtcblxuICAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1saXN0LW9sJztcblxuICAgICAvLyB1aS1ncmlkXG4gICAgICRzY29wZS5zZXRHcmlkT3B0aW9ucyA9IGZ1bmN0aW9uIChncmlkT3B0aW9ucykge1xuICAgICAgICAgdWlHcmlkSGVscGVyLmluaXRpYWxpemUoJHNjb3BlLCBncmlkT3B0aW9ucyxcbiAgICAgICAgIGZ1bmN0aW9uIChncmlkQXBpKSB7XG4gICAgICAgICAgICAgZ3JpZEFwaS5kcmFnZ2FibGVSb3dzLm9uLnJvd0ZpbmlzaERyYWcoJHNjb3BlLCBibGFkZS5yZWNhbGN1bGF0ZVByaW9yaXR5KTtcbiAgICAgICAgIH0pO1xuICAgICB9O1xuXG4gICAgICRzY29wZS5hc3NvY2lhdGVkT2JqZWN0VHlwZXMgPSBhc3NvY2lhdGlvblR5cGVzU2VydmljZS5vYmplY3RzO1xuICAgICBibGFkZS5pbml0aWFsaXplKCk7XG5cbiAgICAgc3RvcmVzLmdldCh7IGlkOiBibGFkZS5zdG9yZUlkIH0sXG4gICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7IGJsYWRlLmxhbmd1YWdlcyA9IGRhdGEubGFuZ3VhZ2VzOyB9LFxuICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHsgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpOyB9KTtcbiB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlJylcbiAgICAuY29udHJvbGxlcigndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLmVkaXRCbG9nQ29udHJvbGxlcicsXG4gICAgICAgIFtcbiAgICAgICAgICAgICckcm9vdFNjb3BlJywgJyRzY29wZScsICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUuY29udGVudEFwaScsICdwbGF0Zm9ybVdlYkFwcC5keW5hbWljUHJvcGVydGllcy5hcGknLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLmR5bmFtaWNQcm9wZXJ0aWVzLmRpY3Rpb25hcnlJdGVtc0FwaScsICdwbGF0Zm9ybVdlYkFwcC5zZXR0aW5ncycsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgY29udGVudEFwaSwgZHluYW1pY1Byb3BlcnRpZXNBcGksIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIGRpYWxvZ1NlcnZpY2UsIGRpY3Rpb25hcnlJdGVtc0FwaSwgc2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgICAgICAgICAgICAgYmxhZGUudXBkYXRlUGVybWlzc2lvbiA9ICdjb250ZW50OnVwZGF0ZSc7XG4gICAgICAgICAgICAgICAgY29uc3QgbWRGaWxlRXh0ZW5zaW9uID0gJy5tZCc7XG5cbiAgICAgICAgICAgICAgICBibGFkZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbE1ldGFkYXRhKHt9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBcGkuZ2V0V2l0aE1ldGFkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVVybDogZ2V0QmxvZ0Jsb2JOYW1lKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICRzY29wZS5pc05hbWVDYW5CZVVzZWQgPSAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCB3aGlsZSBibGFkZS5vcmlnRW50aXR5IG5vdCBsb2FkZWQgXG4gICAgICAgICAgICAgICAgICAgIGlmICghYmxhZGUuaXNOZXcgJiYgIWJsYWRlLm9yaWdFbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChibGFkZS5vcmlnRW50aXR5ICYmIHZhbHVlID09PSBibGFkZS5vcmlnRW50aXR5Lm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhKGJsYWRlLmV4aXN0ZWRCbG9nc05hbWUgJiYgYmxhZGUuZXhpc3RlZEJsb2dzTmFtZS5pbmNsdWRlcyh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUudmFsaWRhdGVOYW1lID0gKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gL1teMC05YS16IC1dLztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFwYXR0ZXJuLnRlc3QodmFsdWUpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmaWxsTWV0YWRhdGEoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBkeW5hbWljUHJvcGVydGllc0FwaS5zZWFyY2goeyBvYmplY3RUeXBlOiAnVmlydG9Db21tZXJjZS5Db250ZW50TW9kdWxlLkNvcmUuTW9kZWwuRnJvbnRNYXR0ZXJIZWFkZXJzJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxEeW5hbWljUHJvcGVydGllcyhkYXRhLm1ldGFkYXRhLCByZXN1bHRzLnJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLm9yaWdFbnRpdHkgPSBhbmd1bGFyLmNvcHkoYmxhZGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHsgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmaWxsRHluYW1pY1Byb3BlcnRpZXMobWV0YWRhdGEsIHByb3BzKSB7XG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaChwcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LmRpc3BsYXlOYW1lcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YWRhdGFSZWNvcmQgPSBfLmZpbmRXaGVyZShtZXRhZGF0YSwgeyBuYW1lOiB4Lm5hbWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhUmVjb3JkICYmIHguaXNNdWx0aWxpbmd1YWwgJiYgIXguaXNEaWN0aW9uYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhUmVjb3JkLnZhbHVlcyA9IF8ucGx1Y2sobWV0YWRhdGFSZWNvcmQudmFsdWVzLCAndmFsdWUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnZhbHVlcyA9IG1ldGFkYXRhUmVjb3JkID8gbWV0YWRhdGFSZWNvcmQudmFsdWVzIDogW107XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5LmR5bmFtaWNQcm9wZXJ0aWVzID0gcHJvcHM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhdmVXaXRoTWV0YWRhdGEgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBjb250ZW50QXBpLnNhdmVXaXRoTWV0YWRhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBibGFkZS5jb250ZW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlclVybDogYmxhZGUuY3VycmVudEVudGl0eS5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR5bmFtaWNQcm9wZXJ0aWVzOiBibGFkZS5jdXJyZW50RW50aXR5LmR5bmFtaWNQcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGdldEJsb2dCbG9iTmFtZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLm9yaWdFbnRpdHkgPSBhbmd1bGFyLmNvcHkoYmxhZGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5ibGFkZUNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdChcImNtcy1zdGF0aXN0aWNzLWNoYW5nZWRcIiwgYmxhZGUuc3RvcmVJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgJHNjb3BlLmJsYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2F2ZUNoYW5nZXMgPSBhc3luYyBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50VXJsID0gYmxhZGUuY3VycmVudEVudGl0eS51cmw7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvbGRlck5hbWUgPSBibGFkZS5jdXJyZW50RW50aXR5Lm5hbWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJlbnRVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBcGkuY3JlYXRlRm9sZGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLCBzdG9yZUlkOiBibGFkZS5zdG9yZUlkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiBmb2xkZXJOYW1lLCBwYXJlbnRVcmw6IHBhcmVudFVybCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zYXZlV2l0aE1ldGFkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsYWRlLm9yaWdFbnRpdHkubmFtZSAhPT0gYmxhZGUuY3VycmVudEVudGl0eS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVybHNUb0RlbGV0ZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvbGRGaWxlbmFtZSA9IGJsYWRlLm9yaWdFbnRpdHkubmFtZSArIG1kRmlsZUV4dGVuc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxzVG9EZWxldGUucHVzaChibGFkZS5jdXJyZW50RW50aXR5LnBhcmVudFVybCArIGZvbGRlck5hbWUgKycvJysgb2xkRmlsZW5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybHNUb0RlbGV0ZS5wdXNoKHBhcmVudFVybCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb250ZW50QXBpLmNyZWF0ZUZvbGRlcih7IGNvbnRlbnRUeXBlOiBibGFkZS5jb250ZW50VHlwZSwgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCB9LCB7IG5hbWU6IGZvbGRlck5hbWUsIHBhcmVudFVybDogYmxhZGUuY3VycmVudEVudGl0eS5wYXJlbnRVcmwgfSkuJHByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmVXaXRoTWV0YWRhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb250ZW50QXBpLmNvcHkoeyBzcmNQYXRoOiBwYXJlbnRVcmwsIGRlc3RQYXRoOiBibGFkZS5jdXJyZW50RW50aXR5LnBhcmVudFVybCArIGZvbGRlck5hbWUgfSkuJHByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29udGVudEFwaS5kZWxldGUoeyBjb250ZW50VHlwZTogYmxhZGUuY29udGVudFR5cGUsIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsIHVybHM6IHVybHNUb0RlbGV0ZSB9KS4kcHJvbWlzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmVXaXRoTWV0YWRhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBibGFkZS5kZWxldGVCbG9nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBcGkuZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogYmxhZGUuY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxzOiBbYmxhZGUuY3VycmVudEVudGl0eS51cmxdXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJsYWRlQ2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCAkc2NvcGUuYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmICghYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuc2F2ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdmYSBmYS1zYXZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiAkc2NvcGUuc2F2ZUNoYW5nZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogY2FuU2F2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiBibGFkZS51cGRhdGVQZXJtaXNzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucmVzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtdW5kbycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGlzRGlydHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IGJsYWRlLnRvb2xiYXJDb21tYW5kcyB8fCBbXTtcbiAgICAgICAgICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJjb250ZW50LmNvbW1hbmRzLm1hbmFnZS1tZXRhZGF0YVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLWVkaXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogJ2R5bmFtaWNQcm9wZXJ0eUxpc3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RUeXBlOiAnVmlydG9Db21tZXJjZS5Db250ZW50TW9kdWxlLkNvcmUuTW9kZWwuRnJvbnRNYXR0ZXJIZWFkZXJzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50UmVmcmVzaDogZnVuY3Rpb24ocHJvcHMpIHsgZmlsbER5bmFtaWNQcm9wZXJ0aWVzKGJsYWRlLmN1cnJlbnRFbnRpdHkuZHluYW1pY1Byb3BlcnRpZXMsIHByb3BzKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3BsYXRmb3JtV2ViQXBwLmR5bmFtaWNQcm9wZXJ0eUxpc3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICckKFBsYXRmb3JtKS9TY3JpcHRzL2FwcC9keW5hbWljUHJvcGVydGllcy9ibGFkZXMvZHluYW1pY1Byb3BlcnR5LWxpc3QudHBsLmh0bWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEJsb2dCbG9iTmFtZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJsYWRlLmN1cnJlbnRFbnRpdHkubmFtZSArICcvJyArIGJsYWRlLmN1cnJlbnRFbnRpdHkubmFtZSArIG1kRmlsZUV4dGVuc2lvbjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpc0RpcnR5KCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWFuZ3VsYXIuZXF1YWxzKGJsYWRlLmN1cnJlbnRFbnRpdHksIGJsYWRlLm9yaWdFbnRpdHkpICYmIGJsYWRlLmhhc1VwZGF0ZVBlcm1pc3Npb24oKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjYW5TYXZlKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNEaXJ0eSgpICYmIGZvcm1TY29wZSAmJiBmb3JtU2NvcGUuJHZhbGlkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJsYWRlLm9uQ2xvc2UgPSBmdW5jdGlvbihjbG9zZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbklmTmVlZGVkKGlzRGlydHkoKSwgY2FuU2F2ZSgpLCBibGFkZSwgJHNjb3BlLnNhdmVDaGFuZ2VzLCBjbG9zZUNhbGxiYWNrLCBcImNvbnRlbnQuZGlhbG9ncy5ibG9nLXNhdmUudGl0bGVcIiwgXCJjb250ZW50LmRpYWxvZ3MuYmxvZy1zYXZlLm1lc3NhZ2VcIik7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHZhciBmb3JtU2NvcGU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldEZvcm0gPSBmdW5jdGlvbihmb3JtKSB7ICRzY29wZS5mb3JtU2NvcGUgPSBmb3JtU2NvcGUgPSBmb3JtOyB9O1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXREaWN0aW9uYXJ5ID0gZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwicHJvcGVydHlEaWN0aW9uYXJ5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FwaVNhdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW50aXR5OiBwcm9wZXJ0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdwbGF0Zm9ybVdlYkFwcC5wcm9wZXJ0eURpY3Rpb25hcnlDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnJChQbGF0Zm9ybSkvU2NyaXB0cy9hcHAvZHluYW1pY1Byb3BlcnRpZXMvYmxhZGVzL3Byb3BlcnR5LWRpY3Rpb25hcnkudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VzQ29uZmlybWVkRm46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3Rpb25hcnlJdGVtc0FwaS5xdWVyeSh7IGlkOiBwcm9wZXJ0eS5vYmplY3RUeXBlLCBwcm9wZXJ0eUlkOiBwcm9wZXJ0eS5pZCB9LCBnZXREaWN0aW9uYXJ5VmFsdWVzQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgZ2V0RGljdGlvbmFyeVZhbHVlc0NhbGxiYWNrO1xuICAgICAgICAgICAgICAgICRzY29wZS5nZXREaWN0aW9uYXJ5VmFsdWVzID0gZnVuY3Rpb24ocHJvcGVydHksIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldERpY3Rpb25hcnlWYWx1ZXNDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgICAgICAgICBkaWN0aW9uYXJ5SXRlbXNBcGkucXVlcnkoeyBpZDogcHJvcGVydHkub2JqZWN0VHlwZSwgcHJvcGVydHlJZDogcHJvcGVydHkuaWQgfSwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5sYW5ndWFnZXMgPSBzZXR0aW5ncy5nZXRWYWx1ZXMoeyBpZDogJ1ZpcnRvQ29tbWVyY2UuQ29yZS5HZW5lcmFsLkxhbmd1YWdlcycgfSk7XG5cbiAgICAgICAgICAgICAgICBibGFkZS5oZWFkSWNvbiA9ICdmYSBmYS1pbmJveCc7XG5cbiAgICAgICAgICAgICAgICBibGFkZS5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIF0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZScpXG4gICAgLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5wYWdlRGV0YWlsQ29udHJvbGxlcicsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAudmFsaWRhdG9ycycsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5jb250ZW50QXBpJywgJyR0aW1lb3V0JywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAuZHluYW1pY1Byb3BlcnRpZXMuYXBpJywgJ3BsYXRmb3JtV2ViQXBwLnNldHRpbmdzJywgJ0ZpbGVVcGxvYWRlcicsICdwbGF0Zm9ybVdlYkFwcC5keW5hbWljUHJvcGVydGllcy5kaWN0aW9uYXJ5SXRlbXNBcGknLCAncGxhdGZvcm1XZWJBcHAuaTE4bicsXG4gICAgICAgIGZ1bmN0aW9uICgkcm9vdFNjb3BlLFxuICAgICAgICAgICAgJHNjb3BlLFxuICAgICAgICAgICAgdmFsaWRhdG9ycyxcbiAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2UsXG4gICAgICAgICAgICBjb250ZW50QXBpLFxuICAgICAgICAgICAgJHRpbWVvdXQsXG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgZHluYW1pY1Byb3BlcnRpZXNBcGksXG4gICAgICAgICAgICBzZXR0aW5ncyxcbiAgICAgICAgICAgIEZpbGVVcGxvYWRlcixcbiAgICAgICAgICAgIGRpY3Rpb25hcnlJdGVtc0FwaSxcbiAgICAgICAgICAgIGkxOG4pIHtcbiAgICAgICAgICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRMYW5ndWFnZSA9IGkxOG4uZ2V0TGFuZ3VhZ2UoKTtcbiAgICAgICAgICAgIGJsYWRlLmZyb250TWF0dGVySGVhZGVycyA9ICdWaXJ0b0NvbW1lcmNlLkNvbnRlbnRNb2R1bGUuQ29yZS5Nb2RlbC5Gcm9udE1hdHRlckhlYWRlcnMnXG5cbiAgICAgICAgICAgIGJsYWRlLmR5bmFtaWNQcm9wZXJ0aWVzVG90YWxDb3VudCA9IDA7XG4gICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5LmR5bmFtaWNQcm9wZXJ0aWVzID0gW107XG5cbiAgICAgICAgICAgICRzY29wZS52YWxpZGF0b3JzID0gdmFsaWRhdG9ycztcbiAgICAgICAgICAgIHZhciBjb250ZW50VHlwZSA9IGJsYWRlLmNvbnRlbnRUeXBlLnN1YnN0cigwLCAxKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICBibGFkZS5jb250ZW50VHlwZS5zdWJzdHIoMSwgYmxhZGUuY29udGVudFR5cGUubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAkc2NvcGUuZmlsZVVwbG9hZGVyID0gbmV3IEZpbGVVcGxvYWRlcih7XG4gICAgICAgICAgICAgICAgdXJsOiAnYXBpL2Fzc2V0cz9mb2xkZXJVcmw9Y21zLWNvbnRlbnQvJyArIGNvbnRlbnRUeXBlICsgJy8nICsgYmxhZGUuc3RvcmVJZCArICcvYXNzZXRzJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgICAgYXV0b1VwbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICByZW1vdmVBZnRlclVwbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvbkJlZm9yZVVwbG9hZEl0ZW06IGZ1bmN0aW9uIChmaWxlSXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25TdWNjZXNzSXRlbTogZnVuY3Rpb24gKGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdmaWxlc1VwbG9hZGVkJywgeyBpdGVtczogcmVzcG9uc2UgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkVycm9ySXRlbTogZnVuY3Rpb24gKGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlSXRlbS5fZmlsZS5uYW1lICsgJyBmYWlsZWQ6ICcgKyAocmVzcG9uc2UubWVzc2FnZSA/IHJlc3BvbnNlLm1lc3NhZ2UgOiBzdGF0dXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZUFsbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYmxhZGUuZWRpdEFzTWFya2Rvd24gPSB0cnVlO1xuICAgICAgICAgICAgYmxhZGUuZWRpdEFzSHRtbCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBibGFkZS5pbml0aWFsaXplQmxhZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxNZXRhZGF0YSh7fSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEFwaS5nZXRXaXRoTWV0YWRhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlVXJsOiBibGFkZS5jdXJyZW50RW50aXR5LnJlbGF0aXZlVXJsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsTWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHsgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBmaWxsTWV0YWRhdGEoZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBibG9iTmFtZSA9IGJsYWRlLmN1cnJlbnRFbnRpdHkubmFtZSB8fCAnJztcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gYmxvYk5hbWUubGFzdEluZGV4T2YoJy4nKTtcbiAgICAgICAgICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYmxvYk5hbWUgPSBibG9iTmFtZS5zdWJzdHJpbmcoMCwgaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgaWR4ID0gYmxvYk5hbWUubGFzdEluZGV4T2YoJy4nKTsgLy8gbGFuZ3VhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5Lmxhbmd1YWdlID0gYmxvYk5hbWUuc3Vic3RyaW5nKGlkeCArIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5jb250ZW50ID0gZGF0YS5jb250ZW50O1xuICAgICAgICAgICAgICAgICRzY29wZS5tZXRhZGF0YSA9IGRhdGEubWV0YWRhdGE7XG5cbiAgICAgICAgICAgICAgICBnZXREeW5hbWljUHJvcGVydGllcygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXREeW5hbWljUHJvcGVydGllcyh0YWtlLCBza2lwKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGR5bmFtaWNQcm9wZXJ0aWVzQXBpLnNlYXJjaCh7IG9iamVjdFR5cGU6ICdWaXJ0b0NvbW1lcmNlLkNvbnRlbnRNb2R1bGUuQ29yZS5Nb2RlbC5Gcm9udE1hdHRlckhlYWRlcnMnLCB0YWtlOiB0YWtlIHx8IDIwLCBza2lwOiBza2lwIHx8IDAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxEeW5hbWljUHJvcGVydGllcygkc2NvcGUubWV0YWRhdGEsIHJlc3VsdHMucmVzdWx0cyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5keW5hbWljUHJvcGVydGllc1RvdGFsQ291bnQgPSByZXN1bHRzLnRvdGFsQ291bnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdyZXNldENvbnRlbnQnLCB7IGJvZHk6IGJsYWRlLmN1cnJlbnRFbnRpdHkuY29udGVudCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzY3JvbGxDb21wbGV0ZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLm9yaWdFbnRpdHkgPSBhbmd1bGFyLmNvcHkoYmxhZGUuY3VycmVudEVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBmaWxsRHluYW1pY1Byb3BlcnRpZXMobWV0YWRhdGEsIHByb3BzKSB7XG4gICAgICAgICAgICAgICAgXy5lYWNoKHByb3BzLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGFkYXRhUmVjb3JkID0gXy5maW5kV2hlcmUobWV0YWRhdGEsIHsgbmFtZTogeC5uYW1lIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhUmVjb3JkICYmIHguaXNNdWx0aWxpbmd1YWwgJiYgIXguaXNEaWN0aW9uYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFSZWNvcmQudmFsdWVzID0gXy5wbHVjayhtZXRhZGF0YVJlY29yZC52YWx1ZXMsICd2YWx1ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB4LnZhbHVlcyA9IG1ldGFkYXRhUmVjb3JkID8gbWV0YWRhdGFSZWNvcmQudmFsdWVzIDogW107XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHByb3BzKVxuICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5LmR5bmFtaWNQcm9wZXJ0aWVzID0gYmxhZGUuY3VycmVudEVudGl0eS5keW5hbWljUHJvcGVydGllcy5jb25jYXQocHJvcHMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuc2Nyb2xsZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5keW5hbWljUHJvcGVydGllc1RvdGFsQ291bnQgPiBibGFkZS5jdXJyZW50RW50aXR5LmR5bmFtaWNQcm9wZXJ0aWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBnZXREeW5hbWljUHJvcGVydGllcygyMCwgYmxhZGUuY3VycmVudEVudGl0eS5keW5hbWljUHJvcGVydGllcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5zYXZlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgY29udGVudEFwaS5zYXZlV2l0aE1ldGFkYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZUlkLFxuICAgICAgICAgICAgICAgICAgICBmb2xkZXJVcmw6IGJsYWRlLmZvbGRlclVybCB8fCAnJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdHksXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5ibGFkZUNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwiY21zLXN0YXRpc3RpY3MtY2hhbmdlZFwiLCBibGFkZS5zdG9yZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHsgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpOyB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGJsYWRlLmRlbGV0ZUVudHJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBcImNvbmZpcm1EZWxldGVcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiY29udGVudC5kaWFsb2dzLnBhZ2UtZGVsZXRlLnRpdGxlXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiY29udGVudC5kaWFsb2dzLnBhZ2UtZGVsZXRlLm1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEFwaS5kZWxldGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogYmxhZGUuY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybHM6IFtibGFkZS5jdXJyZW50RW50aXR5LnVybF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5ID0gYmxhZGUub3JpZ0VudGl0eTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5ibGFkZUNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3dDb25maXJtYXRpb25EaWFsb2coZGlhbG9nKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmICghYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuc2F2ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLXNhdmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogJHNjb3BlLnNhdmVDaGFuZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaXNEaXJ0eSgpICYmIGZvcm1TY29wZSAmJiBmb3JtU2NvcGUuJHZhbGlkOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnJlc2V0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtdW5kbycsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KGJsYWRlLm9yaWdFbnRpdHksIGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdyZXNldENvbnRlbnQnLCB7IGJvZHk6IGJsYWRlLmN1cnJlbnRFbnRpdHkuY29udGVudCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBpc0RpcnR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcImNvbnRlbnQuY29tbWFuZHMuZWRpdC1hcy1tYXJrZG93blwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLWNvZGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmVkaXRBc01hcmtkb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5lZGl0QXNIdG1sID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2NoYW5nZUVkaXRUeXBlJywgeyBlZGl0QXNNYXJrZG93bjogdHJ1ZSwgZWRpdEFzSHRtbDogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gIWJsYWRlLmVkaXRBc01hcmtkb3duOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcImNvbnRlbnQuY29tbWFuZHMuZWRpdC1hcy1odG1sXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtY29kZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuZWRpdEFzSHRtbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuZWRpdEFzTWFya2Rvd24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnY2hhbmdlRWRpdFR5cGUnLCB7IGVkaXRBc0h0bWw6IHRydWUsIGVkaXRBc01hcmtkb3duOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiAhYmxhZGUuZWRpdEFzSHRtbDsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJjb250ZW50LmNvbW1hbmRzLnByZXZpZXctcGFnZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLWV5ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsTGlzdEJsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJzdG9yZVVybExpc3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVVybDogYmxhZGUuY3VycmVudEVudGl0eS5yZWxhdGl2ZVVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZEljb246ICdmYS1wbHVzLXNxdWFyZS1vJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5zdG9yZVVybExpc3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5Db250ZW50KS9TY3JpcHRzL2JsYWRlcy9wYWdlcy9zdG9yZS11cmwtbGlzdC50cGwuaHRtbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUodXJsTGlzdEJsYWRlLCBibGFkZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gYmxhZGUudG9vbGJhckNvbW1hbmRzIHx8IFtdO1xuICAgICAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzLnB1c2goXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcImNvbnRlbnQuY29tbWFuZHMubWFuYWdlLW1ldGFkYXRhXCIsIGljb246ICdmYSBmYS1lZGl0JyxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnZHluYW1pY1Byb3BlcnR5TGlzdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0VHlwZTogJ1ZpcnRvQ29tbWVyY2UuQ29udGVudE1vZHVsZS5Db3JlLk1vZGVsLkZyb250TWF0dGVySGVhZGVycycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50UmVmcmVzaDogZnVuY3Rpb24gKHByb3BzKSB7IGZpbGxEeW5hbWljUHJvcGVydGllcyhibGFkZS5jdXJyZW50RW50aXR5LmR5bmFtaWNQcm9wZXJ0aWVzLCBwcm9wcyk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3BsYXRmb3JtV2ViQXBwLmR5bmFtaWNQcm9wZXJ0eUxpc3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJyQoUGxhdGZvcm0pL1NjcmlwdHMvYXBwL2R5bmFtaWNQcm9wZXJ0aWVzL2JsYWRlcy9keW5hbWljUHJvcGVydHktbGlzdC50cGwuaHRtbCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdmFyIGZvcm1TY29wZTtcbiAgICAgICAgICAgICRzY29wZS5zZXRGb3JtID0gZnVuY3Rpb24gKGZvcm0pIHsgZm9ybVNjb3BlID0gZm9ybTsgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gaXNEaXJ0eSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWFuZ3VsYXIuZXF1YWxzKGJsYWRlLmN1cnJlbnRFbnRpdHksIGJsYWRlLm9yaWdFbnRpdHkpICYmIGJsYWRlLmhhc1VwZGF0ZVBlcm1pc3Npb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2FuU2F2ZSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmxhZGUuY3VycmVudEVudGl0eSAmJiBibGFkZS5jdXJyZW50RW50aXR5Lm5hbWUgJiYgKChpc0RpcnR5KCkgJiYgIWJsYWRlLmlzTmV3KSB8fCAoYmxhZGUuY3VycmVudEVudGl0eS5jb250ZW50ICYmIGJsYWRlLmlzTmV3KSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJsYWRlLm9uQ2xvc2UgPSBmdW5jdGlvbiAoY2xvc2VDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbklmTmVlZGVkKGlzRGlydHkoKSwgY2FuU2F2ZSgpLCBibGFkZSwgJHNjb3BlLnNhdmVDaGFuZ2VzLCBjbG9zZUNhbGxiYWNrLCBcImNvbnRlbnQuZGlhbG9ncy5wYWdlLXNhdmUudGl0bGVcIiwgXCJjb250ZW50LmRpYWxvZ3MucGFnZS1zYXZlLm1lc3NhZ2VcIik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBkeW5hbWljIHByb3BlcnRpZXMgKG1ldGFkYXRhKVxuICAgICAgICAgICAgJHNjb3BlLmVkaXREaWN0aW9uYXJ5ID0gZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogXCJwcm9wZXJ0eURpY3Rpb25hcnlcIixcbiAgICAgICAgICAgICAgICAgICAgaXNBcGlTYXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW50aXR5OiBwcm9wZXJ0eSxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3BsYXRmb3JtV2ViQXBwLnByb3BlcnR5RGljdGlvbmFyeUNvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJyQoUGxhdGZvcm0pL1NjcmlwdHMvYXBwL2R5bmFtaWNQcm9wZXJ0aWVzL2JsYWRlcy9wcm9wZXJ0eS1kaWN0aW9uYXJ5LnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VzQ29uZmlybWVkRm46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpY3Rpb25hcnlJdGVtc0FwaS5xdWVyeSh7IGlkOiBwcm9wZXJ0eS5vYmplY3RUeXBlLCBwcm9wZXJ0eUlkOiBwcm9wZXJ0eS5pZCB9LCBnZXREaWN0aW9uYXJ5VmFsdWVzQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGdldERpY3Rpb25hcnlWYWx1ZXNDYWxsYmFjaztcbiAgICAgICAgICAgICRzY29wZS5nZXREaWN0aW9uYXJ5VmFsdWVzID0gZnVuY3Rpb24gKHByb3BlcnR5LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGdldERpY3Rpb25hcnlWYWx1ZXNDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgICAgIGRpY3Rpb25hcnlJdGVtc0FwaS5xdWVyeSh7IGlkOiBwcm9wZXJ0eS5vYmplY3RUeXBlLCBwcm9wZXJ0eUlkOiBwcm9wZXJ0eS5pZCB9LCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvL3NldHRpbmdzLmdldFZhbHVlcyh7IGlkOiAnVmlydG9Db21tZXJjZS5Db3JlLkdlbmVyYWwuTGFuZ3VhZ2VzJyB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgLy8gICAgJHNjb3BlLmxhbmd1YWdlcyA9IGRhdGE7XG4gICAgICAgICAgICAvL30pO1xuICAgICAgICAgICAgJHNjb3BlLmxhbmd1YWdlcyA9IHNldHRpbmdzLmdldFZhbHVlcyh7IGlkOiAnVmlydG9Db21tZXJjZS5Db3JlLkdlbmVyYWwuTGFuZ3VhZ2VzJyB9KTtcblxuICAgICAgICAgICAgYmxhZGUuaGVhZEljb24gPSAnZmEgZmEtZmlsZS1vJztcbiAgICAgICAgICAgIGJsYWRlLmluaXRpYWxpemVCbGFkZSgpO1xuICAgICAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlJylcbiAgICAuY29udHJvbGxlcigndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLnBhZ2VzTGlzdENvbnRyb2xsZXInLCBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyR0cmFuc2xhdGUnLCAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLmNvbnRlbnRBcGknLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgJ3BsYXRmb3JtV2ViQXBwLnVpR3JpZEhlbHBlcicsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZVV0aWxzJywgJ3BsYXRmb3JtV2ViQXBwLnZhbGlkYXRvcnMnLFxuICAgICAgICBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlLCAkdHJhbnNsYXRlLCBjb250ZW50QXBpLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBkaWFsb2dTZXJ2aWNlLCB1aUdyaWRIZWxwZXIsIGJsYWRlVXRpbHMsIHZhbGlkYXRvcnMpIHtcbiAgICAgICAgICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICAgICAgICAgIGJsYWRlLnVwZGF0ZVBlcm1pc3Npb24gPSAnY29udGVudDp1cGRhdGUnO1xuXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBudWxsO1xuXG4gICAgICAgICAgICBibGFkZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29udGVudEFwaS5xdWVyeShcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IGJsYWRlLnNlYXJjaEtleXdvcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb2xkZXJVcmw6IGJsYWRlLmN1cnJlbnRFbnRpdHkudXJsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnZVNldHRpbmdzLnRvdGFsSXRlbXMgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZWFjaChkYXRhLCBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguaXNJbWFnZSA9IHgubWltZVR5cGUgJiYgeC5taW1lVHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LmlzT3BlbmFibGUgPSB4Lm1pbWVUeXBlICYmICh4Lm1pbWVUeXBlLnN0YXJ0c1dpdGgoJ2FwcGxpY2F0aW9uL2onKSB8fCB4Lm1pbWVUeXBlLnN0YXJ0c1dpdGgoJ3RleHQvJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdEVudHJpZXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU2V0IG5hdmlnYXRpb24gYnJlYWRjcnVtYnNcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEJyZWFkY3J1bWJzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG5ld0ZvbGRlcigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG9vbHRpcCA9ICR0cmFuc2xhdGUuaW5zdGFudCgncGxhdGZvcm0uZGlhbG9ncy5jcmVhdGUtZm9sZGVyLnRpdGxlJyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcHJvbXB0KHRvb2x0aXAgKyBcIlxcblxcbkVudGVyIGZvbGRlciBuYW1lOlwiKTtcblxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50QXBpLmNyZWF0ZUZvbGRlcih7IGNvbnRlbnRUeXBlOiBibGFkZS5jb250ZW50VHlwZSwgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCB9LCB7IG5hbWU6IHJlc3VsdCwgcGFyZW50VXJsOiBibGFkZS5jdXJyZW50RW50aXR5LnVybCB9LCBibGFkZS5yZWZyZXNoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5yZW5hbWUgPSBmdW5jdGlvbiAobGlzdEl0ZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcHJvbXB0KFwiRW50ZXIgbmV3IG5hbWVcIiwgbGlzdEl0ZW0ubmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdG9ycy53ZWJTYWZlRmlsZU5hbWVWYWxpZGF0b3IocmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEFwaS5tb3ZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogYmxhZGUuY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRVcmw6IGxpc3RJdGVtLnVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdVcmw6IGxpc3RJdGVtLnVybC5zdWJzdHJpbmcoMCwgbGlzdEl0ZW0udXJsLmxlbmd0aCAtIGxpc3RJdGVtLm5hbWUubGVuZ3RoKSArIHJlc3VsdFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgYmxhZGUucmVmcmVzaCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHsgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSAkdHJhbnNsYXRlLmluc3RhbnQoJ2NvbnRlbnQuYmxhZGVzLmVkaXQtYXNzZXQudmFsaWRhdGlvbnMubmFtZS1pbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLmNvcHlVcmwgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5wcm9tcHQoXCJDb3B5IHRvIGNsaXBib2FyZDogQ3RybCtDLCBFbnRlclwiLCBkYXRhLnVybCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuZG93bmxvYWRVcmwgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGRhdGEudXJsLCAnX2JsYW5rJyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0Tm9kZSA9IGZ1bmN0aW9uIChsaXN0SXRlbSkge1xuICAgICAgICAgICAgICAgIGlmIChsaXN0SXRlbS50eXBlID09PSAnZm9sZGVyJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogYmxhZGUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogYmxhZGUuY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVVcmw6IGJsYWRlLnN0b3JlVXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VzOiBibGFkZS5sYW5ndWFnZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW50aXR5OiBsaXN0SXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJzOiBibGFkZS5icmVhZGNydW1icyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBibGFkZS50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiBibGFkZS5zdWJ0aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IGJsYWRlLmNvbnRyb2xsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYmxhZGUudGVtcGxhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlT3BlbkFuaW1hdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ2xvc2luZ0Rpc2FibGVkOiBibGFkZS5pc0Nsb3NpbmdEaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUucGFyZW50QmxhZGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnNlbGVjdGVkTm9kZUlkID0gbGlzdEl0ZW0udXJsO1xuICAgICAgICAgICAgICAgICAgICBvcGVuRGV0YWlsc0JsYWRlKGxpc3RJdGVtLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gb3BlbkRldGFpbHNCbGFkZShsaXN0SXRlbSwgaXNOZXcpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOZXcgfHwgbGlzdEl0ZW0uaXNPcGVuYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogJ3BhZ2VEZXRhaWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlVXJsOiBibGFkZS5zdG9yZVVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlczogYmxhZGUubGFuZ3VhZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9sZGVyVXJsOiBibGFkZS5jdXJyZW50RW50aXR5LnVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbnRpdHk6IGxpc3RJdGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXc6IGlzTmV3LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGxpc3RJdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLnBhZ2VEZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuQ29udGVudCkvU2NyaXB0cy9ibGFkZXMvcGFnZXMvcGFnZS1kZXRhaWwudHBsLmh0bWwnXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQmxvZ3MoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQobmV3QmxhZGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdjb250ZW50LmJsYWRlcy5lZGl0LXBhZ2UudGl0bGUtbmV3LXBvc3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ2NvbnRlbnQuYmxhZGVzLmVkaXQtcGFnZS5zdWJ0aXRsZS1uZXctcG9zdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQobmV3QmxhZGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdjb250ZW50LmJsYWRlcy5lZGl0LXBhZ2Uuc3VidGl0bGUtcG9zdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05ldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKG5ld0JsYWRlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnY29udGVudC5ibGFkZXMuZWRpdC1wYWdlLnRpdGxlLW5ldycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnY29udGVudC5ibGFkZXMuZWRpdC1wYWdlLnN1YnRpdGxlLW5ldydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQobmV3QmxhZGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdjb250ZW50LmJsYWRlcy5lZGl0LXBhZ2Uuc3VidGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9wZW5CbG9nRGV0YWlsc0JsYWRlKGxpc3RJdGVtLCBpc05ldykge1xuICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdibG9nRGV0YWlsJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZUlkLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW50aXR5OiBsaXN0SXRlbSxcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RlZEJsb2dzTmFtZTogJHNjb3BlLmxpc3RFbnRyaWVzLm1hcCgoYmxvZykgPT4gYmxvZy5uYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgaXNOZXc6IGlzTmV3LFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogbGlzdEl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdjb250ZW50LmJsYWRlcy5lZGl0LWJsb2cuc3VidGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLmVkaXRCbG9nQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuQ29udGVudCkvU2NyaXB0cy9ibGFkZXMvcGFnZXMvZWRpdC1ibG9nLnRwbC5odG1sJ1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQobmV3QmxhZGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnY29udGVudC5ibGFkZXMuZWRpdC1ibG9nLnRpdGxlLW5ldycsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ2NvbnRlbnQuYmxhZGVzLmVkaXQtYmxvZy5zdWJ0aXRsZS1uZXcnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBkZWxldGVMaXN0KFtkYXRhXSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVMaXN0KHNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VDaGlsZHJlbkJsYWRlcyhibGFkZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiY29uZmlybURlbGV0ZUl0ZW1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcInBsYXRmb3JtLmRpYWxvZ3MuZm9sZGVycy1kZWxldGUudGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwicGxhdGZvcm0uZGlhbG9ncy5mb2xkZXJzLWRlbGV0ZS5tZXNzYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RFbnRyeUlkcyA9IF8ucGx1Y2soc2VsZWN0aW9uLCAndXJsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBcGkuZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBibGFkZS5jb250ZW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxzOiBsaXN0RW50cnlJZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwiY21zLXN0YXRpc3RpY3MtY2hhbmdlZFwiLCBibGFkZS5zdG9yZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHsgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNCbG9ncygpICYmICFibGFkZS5jdXJyZW50RW50aXR5LnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGRpYWxvZywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnY29udGVudC5kaWFsb2dzLmJsb2ctZGVsZXRlLnRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnY29udGVudC5kaWFsb2dzLmJsb2ctZGVsZXRlLm1lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3dDb25maXJtYXRpb25EaWFsb2coZGlhbG9nKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gaXNJdGVtc0NoZWNrZWQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5ncmlkQXBpICYmIF8uYW55KCRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzUGFnZXMoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJsYWRlLmNvbnRlbnRUeXBlID09PSAncGFnZXMnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBpc0Jsb2dzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBibGFkZS5jb250ZW50VHlwZSA9PT0gJ2Jsb2dzJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZWZyZXNoXCIsIGljb246ICdmYSBmYS1yZWZyZXNoJyxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogYmxhZGUucmVmcmVzaCxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy51cGxvYWRcIiwgaWNvbjogJ2ZhIGZhLXVwbG9hZCcsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJhc3NldFVwbG9hZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBibGFkZS5jb250ZW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbnRpdHlJZDogYmxhZGUuY3VycmVudEVudGl0eS51cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdwbGF0Zm9ybS5ibGFkZXMuYXNzZXQtdXBsb2FkLnRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLmFzc2V0VXBsb2FkQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5Bc3NldHMpL1NjcmlwdHMvYmxhZGVzL2Fzc2V0LXVwbG9hZC50cGwuaHRtbCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ2NvbnRlbnQ6Y3JlYXRlJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIGlmIChpc1BhZ2VzKCkpIHtcbiAgICAgICAgICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMuc3BsaWNlKDEsIDAsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwbGF0Zm9ybS5jb21tYW5kcy5uZXctZm9sZGVyJywgaWNvbjogJ2ZhIGZhLWZvbGRlci1vJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgbmV3Rm9sZGVyKCk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ2NvbnRlbnQ6Y3JlYXRlJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmFkZFwiLCBpY29uOiAnZmEgZmEtcGx1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IG9wZW5EZXRhaWxzQmxhZGUoe30sIHRydWUpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdjb250ZW50OmNyZWF0ZSdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzQmxvZ3MoKSkge1xuICAgICAgICAgICAgICAgIGlmIChibGFkZS5jdXJyZW50RW50aXR5LnR5cGUgJiYgYmxhZGUuY3VycmVudEVudGl0eS50eXBlID09PSAnZm9sZGVyJykge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMuc3BsaWNlKDEsIDAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiY29udGVudC5jb21tYW5kcy5hZGQtcG9zdFwiLCBpY29uOiAnZmEgZmEtcGx1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IG9wZW5EZXRhaWxzQmxhZGUoe30sIHRydWUpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdjb250ZW50OmNyZWF0ZSdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzLnNwbGljZSgxLCAwLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY29udGVudC5jb21tYW5kcy5hZGQtYmxvZycsIGljb246ICdmYSBmYS1wbHVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgb3BlbkJsb2dEZXRhaWxzQmxhZGUoe30sIHRydWUpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdjb250ZW50OmNyZWF0ZSdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5kZWxldGVcIiwgaWNvbjogJ2ZhIGZhLXRyYXNoLW8nLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgZGVsZXRlTGlzdCgkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkpOyB9LFxuICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGlzSXRlbXNDaGVja2VkLFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdjb250ZW50OmRlbGV0ZSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoaXNCbG9ncygpICYmICFibGFkZS5jdXJyZW50RW50aXR5LnR5cGUpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5jb250ZXh0TWVudUl0ZW1zID0gW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAncGxhdGZvcm0uY29tbWFuZHMubWFuYWdlJywgaWNvbjogJ2ZhIGZhLWVkaXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoZGF0YSkgeyBvcGVuQmxvZ0RldGFpbHNCbGFkZShkYXRhKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHVpLWdyaWRcbiAgICAgICAgICAgICRzY29wZS5zZXRHcmlkT3B0aW9ucyA9IGZ1bmN0aW9uIChncmlkT3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHVpR3JpZEhlbHBlci5pbml0aWFsaXplKCRzY29wZSwgZ3JpZE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChncmlkQXBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJHdhdGNoKCdwYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UnLCBncmlkQXBpLnBhZ2luYXRpb24uc2Vlayk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJsYWRlVXRpbHMuaW5pdGlhbGl6ZVBhZ2luYXRpb24oJHNjb3BlLCB0cnVlKTtcblxuICAgICAgICAgICAgLy9CcmVhZGNydW1ic1xuICAgICAgICAgICAgZnVuY3Rpb24gc2V0QnJlYWRjcnVtYnMoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJsYWRlLmJyZWFkY3J1bWJzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vQ2xvbmUgYXJyYXkgKGFuZ3VsYXIuY29weSBsZWF2ZXMgdGhlIHNhbWUgcmVmZXJlbmNlKVxuICAgICAgICAgICAgICAgICAgICB2YXIgYnJlYWRjcnVtYnMgPSBibGFkZS5icmVhZGNydW1icy5zbGljZSgwKTtcblxuICAgICAgICAgICAgICAgICAgICAvL3ByZXZlbnQgZHVwbGljYXRlIGl0ZW1zXG4gICAgICAgICAgICAgICAgICAgIGlmIChibGFkZS5jdXJyZW50RW50aXR5LnVybCAmJiBfLmFsbChicmVhZGNydW1icywgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQgIT09IGJsYWRlLmN1cnJlbnRFbnRpdHkudXJsOyB9KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJyZWFkQ3J1bWIgPSBnZW5lcmF0ZUJyZWFkY3J1bWIoYmxhZGUuY3VycmVudEVudGl0eS51cmwsIGJsYWRlLmN1cnJlbnRFbnRpdHkubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1icy5wdXNoKGJyZWFkQ3J1bWIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmJyZWFkY3J1bWJzID0gYnJlYWRjcnVtYnM7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuYnJlYWRjcnVtYnMgPSBbZ2VuZXJhdGVCcmVhZGNydW1iKGJsYWRlLmN1cnJlbnRFbnRpdHkudXJsLCAnYWxsJyldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVCcmVhZGNydW1iKGlkLCBuYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICBibGFkZTogYmxhZGUsXG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRlOiBmdW5jdGlvbiAoYnJlYWRjcnVtYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKGJsYWRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuZGlzYWJsZU9wZW5BbmltYXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShibGFkZSwgYmxhZGUucGFyZW50QmxhZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBibGFkZS5oZWFkSWNvbiA9IGlzQmxvZ3MoKSA/ICdmYSBmYS1pbmJveCcgOiAnZmEgZmEtZm9sZGVyLW8nO1xuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICB9XSk7XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlJylcbiAgICAuY29udHJvbGxlcigndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLnN0b3JlVXJsTGlzdENvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJyRsb2NhbFN0b3JhZ2UnLCAncGxhdGZvcm1XZWJBcHAudmFsaWRhdG9ycycsIGZ1bmN0aW9uICgkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsICRsb2NhbFN0b3JhZ2UsIHZhbGlkYXRvcnMpIHtcbiAgICAgICAgY29uc3QgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG4gICAgICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhcyBmYS1rZXknO1xuICAgICAgICBjb25zdCBuYW1lU3RvcmVVcmxMaXN0ID0gJ3N0b3JlVXJsTGlzdC0nICsgYmxhZGUuc3RvcmVJZDtcblxuICAgICAgICBibGFkZS5yZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJGxvY2FsU3RvcmFnZVtuYW1lU3RvcmVVcmxMaXN0XSkge1xuICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdGllcyA9ICRsb2NhbFN0b3JhZ2VbbmFtZVN0b3JlVXJsTGlzdF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJsYWRlLmN1cnJlbnRFbnRpdGllcyA9IFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zZWxlY3ROb2RlID0gZnVuY3Rpb24oc3RvcmVVcmwpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3ROb2RlSWQgPSBzdG9yZVVybDtcbiAgICAgICAgICAgIG9wZW5VcmxGb3JQcmV2aWV3KHN0b3JlVXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5VcmxGb3JQcmV2aWV3KHVybCkge1xuICAgICAgICAgICAgY29uc3QgZmlsZU5hbWVBcnJheSA9IGJsYWRlLnJlbGF0aXZlVXJsLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IF8uZmlyc3QoZmlsZU5hbWVBcnJheSk7XG4gICAgICAgICAgICBsZXQgbG9jYWxlID0gJyc7XG5cbiAgICAgICAgICAgIGlmIChfLnNpemUoZmlsZU5hbWVBcnJheSkgPiAyKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxlID0gJy8nICsgZmlsZU5hbWVBcnJheVsxXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSAnLycgKyBibGFkZS5jb250ZW50VHlwZTtcblxuICAgICAgICAgICAgd2luZG93Lm9wZW4odXJsLnJlcGxhY2UoL1xcLyQvLCAnJykgKyBsb2NhbGUgKyBjb250ZW50VHlwZSArIGZpbGVOYW1lLCAnX2JsYW5rJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBlZGl0c3RvcmVVcmxzKCkge1xuICAgICAgICAgICAgY29uc3QgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IFwiZWRpdFJlZGlyZWN0VXJpc1wiLFxuICAgICAgICAgICAgICAgIHVwZGF0ZVBlcm1pc3Npb246ICdwbGF0Zm9ybTpzZWN1cml0eTp1cGRhdGUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IGJsYWRlLmN1cnJlbnRFbnRpdGllcyxcbiAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRvcnMudXJpV2l0aG91dFF1ZXJ5LFxuICAgICAgICAgICAgICAgIGhlYWRJY29uOiAnZmEtcGx1cy1zcXVhcmUtbycsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3BsYXRmb3JtV2ViQXBwLmVkaXRBcnJheUNvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnJChQbGF0Zm9ybSkvU2NyaXB0cy9jb21tb24vYmxhZGVzL2VkaXQtYXJyYXkudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlc0NvbmZpcm1lZEZuOiBmdW5jdGlvbiAodmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICRsb2NhbFN0b3JhZ2VbbmFtZVN0b3JlVXJsTGlzdF0gPSBhbmd1bGFyLmNvcHkodmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgICAgIH1cblxuICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZWZyZXNoXCIsXG4gICAgICAgICAgICAgICAgaWNvbjogXCJmYSBmYS1yZWZyZXNoXCIsXG4gICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogYmxhZGUucmVmcmVzaCxcbiAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5tYW5hZ2VcIixcbiAgICAgICAgICAgICAgICBpY29uOiBcImZhIGZhLWVkaXRcIixcbiAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBlZGl0c3RvcmVVcmxzLFxuICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcblxuICAgICAgICBibGFkZS5yZWZyZXNoKCk7XG4gICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLmFzc2V0RGV0YWlsQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLnZhbGlkYXRvcnMnLCAncGxhdGZvcm1XZWJBcHAuZGlhbG9nU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUuY29udGVudEFwaScsICckdGltZW91dCcsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJyRodHRwJyxcbiAgICBmdW5jdGlvbiAoJHNjb3BlLCB2YWxpZGF0b3JzLCBkaWFsb2dTZXJ2aWNlLCBjb250ZW50QXBpLCAkdGltZW91dCwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgJGh0dHApIHtcbiAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgICAgICBibGFkZS51cGRhdGVQZXJtaXNzaW9uID0gJ2NvbnRlbnQ6dXBkYXRlJztcbiAgICAgICAgdmFyIGNvZGVtaXJyb3JFZGl0b3I7XG5cbiAgICAgICAgJHNjb3BlLnZhbGlkYXRvcnMgPSB2YWxpZGF0b3JzO1xuICAgICAgICAkc2NvcGUuc2V0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7ICRzY29wZS5mb3JtU2NvcGUgPSBmb3JtOyB9XG5cbiAgICAgICAgYmxhZGUuaW5pdGlhbGl6ZUJsYWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZW50QXBpLmdldCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBibGFkZS5jb250ZW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCxcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVVcmw6IGJsYWRlLmN1cnJlbnRFbnRpdHkucmVsYXRpdmVVcmxcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS5jb250ZW50ID0gcmVzdWx0cy5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5vcmlnRW50aXR5ID0gYW5ndWxhci5jb3B5KGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuXG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2RlbWlycm9yRWRpdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZW1pcnJvckVkaXRvci5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZW1pcnJvckVkaXRvci5mb2N1cygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMudW5kb1wiLCBpY29uOiAnZmEgZmEtcm90YXRlLWxlZnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVtaXJyb3JFZGl0b3IudW5kbygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGlzdG9yeSA9IGNvZGVtaXJyb3JFZGl0b3IuaGlzdG9yeVNpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGlzdG9yeS51bmRvID4gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucmVkb1wiLCBpY29uOiAnZmEgZmEtcm90YXRlLXJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlbWlycm9yRWRpdG9yLnJlZG8oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhpc3RvcnkgPSBjb2RlbWlycm9yRWRpdG9yLmhpc3RvcnlTaXplKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhpc3RvcnkucmVkbyA+IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUub3JpZ0VudGl0eSA9IGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7IGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTsgfSk7XG5cbiAgICAgICAgICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnNhdmVcIiwgaWNvbjogJ2ZhIGZhLXNhdmUnLFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiAkc2NvcGUuc2F2ZUNoYW5nZXMsXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc0RpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZXNldFwiLCBpY29uOiAnZmEgZmEtdW5kbycsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogaXNEaXJ0eSxcbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgICAgICAgICAvL30sXG4gICAgICAgICAgICAgICAgICAgIC8ve1xuICAgICAgICAgICAgICAgICAgICAvLyAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmRlbGV0ZVwiLCBpY29uOiAnZmEgZmEtdHJhc2gtbycsXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGV4ZWN1dGVNZXRob2Q6IGRlbGV0ZUVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAvLyAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgcGVybWlzc2lvbjogJ2NvbnRlbnQ6ZGVsZXRlJ1xuICAgICAgICAgICAgICAgIH1dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzRGlydHkoKSB7XG4gICAgICAgICAgICByZXR1cm4gIWFuZ3VsYXIuZXF1YWxzKGJsYWRlLmN1cnJlbnRFbnRpdHksIGJsYWRlLm9yaWdFbnRpdHkpXG4gICAgICAgICAgICAgICAgJiYgKGJsYWRlLmlzTmV3IHx8IGJsYWRlLmhhc1VwZGF0ZVBlcm1pc3Npb24oKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgY29udGVudEFwaS5zYXZlTXVsdGlwYXJ0Q29udGVudCh7XG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgICAgICAgICAgICAgZm9sZGVyVXJsOiBibGFkZS5mb2xkZXJVcmxcbiAgICAgICAgICAgIH0sIGJsYWRlLmN1cnJlbnRFbnRpdHksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBibGFkZS5vcmlnRW50aXR5ID0gYW5ndWxhci5jb3B5KGJsYWRlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYmxhZGVDbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZUVudHJ5KCkge1xuICAgICAgICAgICAgdmFyIGRpYWxvZyA9IHtcbiAgICAgICAgICAgICAgICBpZDogXCJjb25maXJtRGVsZXRlXCIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiY29udGVudC5kaWFsb2dzLmFzc2V0LWRlbGV0ZS50aXRsZVwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiY29udGVudC5kaWFsb2dzLmFzc2V0LWRlbGV0ZS5tZXNzYWdlXCIsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEFwaS5kZWxldGUoeyBjb250ZW50VHlwZTogYmxhZGUuY29udGVudFR5cGUsIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsIHRoZW1lSWQ6IGJsYWRlLnRoZW1lSWQsIGFzc2V0SWRzOiBibGFkZS5jdXJyZW50RW50aXR5LnVybCB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJsYWRlQ2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5pbml0aWFsaXplKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Q29uZmlybWF0aW9uRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRFZGl0b3JNb2RlKCkge1xuICAgICAgICAgICAgLy8gbW9kZTogeyBuYW1lOiBcImh0bWxtaXhlZFwiIH0gLy8gaHRtbFxuICAgICAgICAgICAgLy8gbW9kZTogeyBuYW1lOiBcImphdmFzY3JpcHRcIiB9IC8vIGphdmFzY3JpcHRcbiAgICAgICAgICAgIC8vIG1vZGU6IHsgbmFtZTogXCJqYXZhc2NyaXB0XCIsIGpzb246IHRydWUgfSAvLyBqc29uXG4gICAgICAgICAgICAvLyBtb2RlOiBcImxpcXVpZC1odG1sXCIgLy8gbGlxdWlkIGh0bWxcbiAgICAgICAgICAgIC8vIG1vZGU6IFwibGlxdWlkLWNzc1wiIC8vIGxpcXVpZCBjc3NcbiAgICAgICAgICAgIC8vIG1vZGU6IFwibGlxdWlkLWphdmFzY3JpcHRcIiAvLyBsaXF1aWQgY3NzXG5cbiAgICAgICAgICAgIGlmICghYmxhZGUuaXNOZXcpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmxhZGUuY3VycmVudEVudGl0eS51cmwuZW5kc1dpdGgoXCIuanNvblwiKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBuYW1lOiBcImphdmFzY3JpcHRcIiwganNvbjogdHJ1ZSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChibGFkZS5jdXJyZW50RW50aXR5LnVybC5lbmRzV2l0aChcIi5qc1wiKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJqYXZhc2NyaXB0XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJsYWRlLmN1cnJlbnRFbnRpdHkudXJsLmVuZHNXaXRoKFwiLmpzLmxpcXVpZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJsaXF1aWQtamF2YXNjcmlwdFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChibGFkZS5jdXJyZW50RW50aXR5LnVybC5lbmRzV2l0aChcIi5jc3MubGlxdWlkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImxpcXVpZC1jc3NcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYmxhZGUuY3VycmVudEVudGl0eS51cmwuZW5kc1dpdGgoXCIuY3NzXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNzc1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChibGFkZS5jdXJyZW50RW50aXR5LnVybC5lbmRzV2l0aChcIi5zY3NzLmxpcXVpZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJsaXF1aWQtY3NzXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJsYWRlLmN1cnJlbnRFbnRpdHkudXJsLmVuZHNXaXRoKFwiLmxpcXVpZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJsaXF1aWQtaHRtbFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcImh0bWxtaXhlZFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2FuU2F2ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBibGFkZS5jdXJyZW50RW50aXR5ICYmIGJsYWRlLmN1cnJlbnRFbnRpdHkubmFtZSAmJiAoKGlzRGlydHkoKSAmJiAhYmxhZGUuaXNOZXcpIHx8IChibGFkZS5jdXJyZW50RW50aXR5LmNvbnRlbnQgJiYgYmxhZGUuaXNOZXcpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJsYWRlLm9uQ2xvc2UgPSBmdW5jdGlvbiAoY2xvc2VDYWxsYmFjaykge1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93Q29uZmlybWF0aW9uSWZOZWVkZWQoaXNEaXJ0eSgpLCBjYW5TYXZlKCksIGJsYWRlLCAkc2NvcGUuc2F2ZUNoYW5nZXMsIGNsb3NlQ2FsbGJhY2ssIFwiY29udGVudC5kaWFsb2dzLmFzc2V0LXNhdmUudGl0bGVcIiwgXCJjb250ZW50LmRpYWxvZ3MuYXNzZXQtc2F2ZS5tZXNzYWdlXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIENvZGVtaXJyb3IgY29uZmlndXJhdGlvblxuICAgICAgICAkc2NvcGUuZWRpdG9yT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGxpbmVXcmFwcGluZzogdHJ1ZSxcbiAgICAgICAgICAgIGxpbmVOdW1iZXJzOiB0cnVlLFxuICAgICAgICAgICAgcGFyc2VyZmlsZTogXCJsaXF1aWQuanNcIixcbiAgICAgICAgICAgIGV4dHJhS2V5czogeyBcIkN0cmwtUVwiOiBmdW5jdGlvbiAoY20pIHsgY20uZm9sZENvZGUoY20uZ2V0Q3Vyc29yKCkpOyB9IH0sXG4gICAgICAgICAgICBmb2xkR3V0dGVyOiB0cnVlLFxuICAgICAgICAgICAgZ3V0dGVyczogW1wiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiLCBcIkNvZGVNaXJyb3ItZm9sZGd1dHRlclwiXSxcbiAgICAgICAgICAgIG9uTG9hZDogZnVuY3Rpb24gKF9lZGl0b3IpIHtcbiAgICAgICAgICAgICAgICBjb2RlbWlycm9yRWRpdG9yID0gX2VkaXRvcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBtb2RlOiAnaHRtbG1peGVkJ1xuICAgICAgICAgICAgbW9kZTogZ2V0RWRpdG9yTW9kZSgpXG4gICAgICAgIH07XG5cbiAgICAgICAgYmxhZGUuaGVhZEljb24gPSAnZmEgZmEtZmlsZS1vJztcbiAgICAgICAgYmxhZGUuaW5pdGlhbGl6ZUJsYWRlKCk7XG4gICAgfV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3BsYXRmb3JtV2ViQXBwJylcbiAgICAuY29udHJvbGxlcigndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLmFzc2V0TGlzdENvbnRyb2xsZXInLCBbJyRzY29wZScsICckdHJhbnNsYXRlJywgJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5jb250ZW50QXBpJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAuZGlhbG9nU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC51aUdyaWRIZWxwZXInLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVVdGlscycsICdwbGF0Zm9ybVdlYkFwcC52YWxpZGF0b3JzJyxcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJHRyYW5zbGF0ZSwgY29udGVudEFwaSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgZGlhbG9nU2VydmljZSwgdWlHcmlkSGVscGVyLCBibGFkZVV0aWxzLCB2YWxpZGF0b3JzKSB7XG4gICAgICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XG5cbiAgICAgICAgICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb250ZW50QXBpLnF1ZXJ5KFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogYmxhZGUuY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZDogYmxhZGUuc2VhcmNoS2V5d29yZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlclVybDogYmxhZGUuY3VycmVudEVudGl0eS51cmxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MudG90YWxJdGVtcyA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKGRhdGEsIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5pc0ltYWdlID0geC5taW1lVHlwZSAmJiB4Lm1pbWVUeXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguaXNPcGVuYWJsZSA9IHgubWltZVR5cGUgJiYgKHgubWltZVR5cGUuc3RhcnRzV2l0aCgnYXBwbGljYXRpb24vaicpIHx8IHgubWltZVR5cGUuc3RhcnRzV2l0aCgndGV4dC8nKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0RW50cmllcyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9TZXQgbmF2aWdhdGlvbiBicmVhZGNydW1ic1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnJlYWRjcnVtYnMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gbmV3Rm9sZGVyKCkge1xuICAgICAgICAgICAgICAgIHZhciB0b29sdGlwID0gJHRyYW5zbGF0ZS5pbnN0YW50KCdwbGF0Zm9ybS5kaWFsb2dzLmNyZWF0ZS1mb2xkZXIudGl0bGUnKTtcblxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBwcm9tcHQodG9vbHRpcCArIFwiXFxuXFxuRW50ZXIgZm9sZGVyIG5hbWU6XCIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBcGkuY3JlYXRlRm9sZGVyKHsgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLCBzdG9yZUlkOiBibGFkZS5zdG9yZUlkIH0sIHsgbmFtZTogcmVzdWx0LCBwYXJlbnRVcmw6IGJsYWRlLmN1cnJlbnRFbnRpdHkudXJsIH0sIGJsYWRlLnJlZnJlc2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmNvcHlVcmwgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5wcm9tcHQoXCJDb3B5IHRvIGNsaXBib2FyZDogQ3RybCtDLCBFbnRlclwiLCBkYXRhLnVybCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuZG93bmxvYWRVcmwgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGRhdGEudXJsLCAnX2JsYW5rJyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUucmVuYW1lID0gZnVuY3Rpb24gKGxpc3RJdGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzRm9sZGVyID0gL1xcLyQvLnRlc3QobGlzdEl0ZW0udXJsKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcHJvbXB0KFwiRW50ZXIgbmV3IG5hbWVcIiwgbGlzdEl0ZW0ubmFtZSk7XG4gICAgICAgICAgICAgICAgLy8gaWYgcmVuYW1lIGZvbGRlciwgdGhlbiB1bHIgbmFtZSBlbmRzICcvJ1xuICAgICAgICAgICAgICAgIHZhciBzdWJzdHJOYW1lTGVuZ2h0ID0gaXNGb2xkZXIgPyBsaXN0SXRlbS5uYW1lLmxlbmd0aCArIDEgOiBsaXN0SXRlbS5uYW1lLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRvcnMud2ViU2FmZUZpbGVOYW1lVmFsaWRhdG9yKHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBcGkubW92ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVXJsOiBsaXN0SXRlbS51cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VXJsOiBsaXN0SXRlbS51cmwuc3Vic3RyaW5nKDAsIGxpc3RJdGVtLnVybC5sZW5ndGggLSBzdWJzdHJOYW1lTGVuZ2h0KSArIHJlc3VsdFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgYmxhZGUucmVmcmVzaCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHsgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSAkdHJhbnNsYXRlLmluc3RhbnQoJ2NvbnRlbnQuYmxhZGVzLmVkaXQtYXNzZXQudmFsaWRhdGlvbnMubmFtZS1pbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gaXNJdGVtc0NoZWNrZWQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5ncmlkQXBpICYmIF8uYW55KCRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzU2luZ2xlQ2hlY2tlZCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNJdGVtc0NoZWNrZWQoKSAmJiAkc2NvcGUuZ3JpZEFwaS5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRSb3dzKCkubGVuZ3RoID09PSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBkZWxldGVMaXN0KFtkYXRhXSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVMaXN0KHNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VDaGlsZHJlbkJsYWRlcyhibGFkZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiY29uZmlybURlbGV0ZUl0ZW1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcInBsYXRmb3JtLmRpYWxvZ3MuZm9sZGVycy1kZWxldGUudGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwicGxhdGZvcm0uZGlhbG9ncy5mb2xkZXJzLWRlbGV0ZS5tZXNzYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHJlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RFbnRyeUlkcyA9IF8ucGx1Y2soc2VsZWN0aW9uLCAndXJsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBcGkuZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBibGFkZS5jb250ZW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxzOiBsaXN0RW50cnlJZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2gsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHsgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Q29uZmlybWF0aW9uRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5zZWxlY3ROb2RlID0gZnVuY3Rpb24gKGxpc3RJdGVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpc3RJdGVtLnR5cGUgPT09ICdmb2xkZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdCbGFkZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBibGFkZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBibGFkZS5jb250ZW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVtZUlkOiBibGFkZS50aGVtZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVudGl0eTogbGlzdEl0ZW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1iczogYmxhZGUuYnJlYWRjcnVtYnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBibGFkZS5jb250cm9sbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGJsYWRlLnRlbXBsYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZU9wZW5BbmltYXRpb246IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0Nsb3NpbmdEaXNhYmxlZDogYmxhZGUuaXNDbG9zaW5nRGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlLnBhcmVudEJsYWRlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5zZWxlY3RlZE5vZGVJZCA9IGxpc3RJdGVtLnVybDtcbiAgICAgICAgICAgICAgICAgICAgb3BlbkRldGFpbHNCbGFkZShsaXN0SXRlbSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9wZW5EZXRhaWxzQmxhZGUobGlzdEl0ZW0sIGlzTmV3KSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmV3IHx8IGxpc3RJdGVtLmlzT3BlbmFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdhc3NldERldGFpbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogYmxhZGUuY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWVJZDogYmxhZGUudGhlbWVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbnRpdHk6IGxpc3RJdGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXc6IGlzTmV3LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFeHBhbmRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5hc3NldERldGFpbENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5Db250ZW50KS9TY3JpcHRzL2JsYWRlcy90aGVtZXMvYXNzZXQtZGV0YWlsLnRwbC5odG1sJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc05ldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQobmV3QmxhZGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2xkZXJVcmw6IGJsYWRlLmN1cnJlbnRFbnRpdHkudXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnY29udGVudC5ibGFkZXMuZWRpdC1hc3NldC50aXRsZS1uZXcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnY29udGVudC5ibGFkZXMuZWRpdC1hc3NldC5zdWJ0aXRsZS1uZXcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKG5ld0JsYWRlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9sZGVyVXJsOiBsaXN0SXRlbS51cmwuc3Vic3RyaW5nKDAsIGxpc3RJdGVtLnVybC5sZW5ndGggLSBsaXN0SXRlbS5uYW1lLmxlbmd0aCAtIDEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBsaXN0SXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnY29udGVudC5ibGFkZXMuZWRpdC1hc3NldC5zdWJ0aXRsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnJlZnJlc2hcIiwgaWNvbjogJ2ZhIGZhLXJlZnJlc2gnLFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBibGFkZS5yZWZyZXNoLFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLm5ldy1mb2xkZXJcIiwgaWNvbjogJ2ZhIGZhLWZvbGRlci1vJyxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyBuZXdGb2xkZXIoKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ2NvbnRlbnQ6Y3JlYXRlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmFkZFwiLCBpY29uOiAnZmEgZmEtcGx1cycsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5EZXRhaWxzQmxhZGUoe30sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogJ2NvbnRlbnQ6Y3JlYXRlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnVwbG9hZFwiLCBpY29uOiAnZmEgZmEtdXBsb2FkJyxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcImFzc2V0VXBsb2FkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVudGl0eUlkOiBibGFkZS5jdXJyZW50RW50aXR5LnVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ3BsYXRmb3JtLmJsYWRlcy5hc3NldC11cGxvYWQudGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUuYXNzZXRVcGxvYWRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLkFzc2V0cykvU2NyaXB0cy9ibGFkZXMvYXNzZXQtdXBsb2FkLnRwbC5odG1sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnY29udGVudDpjcmVhdGUnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvL3tcbiAgICAgICAgICAgICAgICAvLyAgICBuYW1lOiBcIlJlbmFtZVwiLCBpY29uOiAnZmEgZmEtZm9udCcsXG4gICAgICAgICAgICAgICAgLy8gICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAkc2NvcGUucmVuYW1lKCRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKVswXSk7XG4gICAgICAgICAgICAgICAgLy8gICAgfSxcbiAgICAgICAgICAgICAgICAvLyAgICBjYW5FeGVjdXRlTWV0aG9kOiBpc1NpbmdsZUNoZWNrZWQsXG4gICAgICAgICAgICAgICAgLy8gICAgcGVybWlzc2lvbjogJ2NvbnRlbnQ6dXBkYXRlJ1xuICAgICAgICAgICAgICAgIC8vfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuZGVsZXRlXCIsIGljb246ICdmYSBmYS10cmFzaC1vJyxcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyBkZWxldGVMaXN0KCRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKSk7IH0sXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGlzSXRlbXNDaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnY29udGVudDpkZWxldGUnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgLy8gdWktZ3JpZFxuICAgICAgICAgICAgJHNjb3BlLnNldEdyaWRPcHRpb25zID0gZnVuY3Rpb24gKGdyaWRPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdWlHcmlkSGVscGVyLmluaXRpYWxpemUoJHNjb3BlLCBncmlkT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGdyaWRBcGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kd2F0Y2goJ3BhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZScsIGdyaWRBcGkucGFnaW5hdGlvbi5zZWVrKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYmxhZGVVdGlscy5pbml0aWFsaXplUGFnaW5hdGlvbigkc2NvcGUsIHRydWUpO1xuXG4gICAgICAgICAgICAvL0JyZWFkY3J1bWJzXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXRCcmVhZGNydW1icygpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmxhZGUuYnJlYWRjcnVtYnMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9DbG9uZSBhcnJheSAoYW5ndWxhci5jb3B5IGxlYXZlcyB0aGUgc2FtZSByZWZlcmVuY2UpXG4gICAgICAgICAgICAgICAgICAgIHZhciBicmVhZGNydW1icyA9IGJsYWRlLmJyZWFkY3J1bWJzLnNsaWNlKDApO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vcHJldmVudCBkdXBsaWNhdGUgaXRlbXNcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsYWRlLmN1cnJlbnRFbnRpdHkudXJsICYmIF8uYWxsKGJyZWFkY3J1bWJzLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCAhPT0gYmxhZGUuY3VycmVudEVudGl0eS51cmw7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnJlYWRDcnVtYiA9IGdlbmVyYXRlQnJlYWRjcnVtYihibGFkZS5jdXJyZW50RW50aXR5LnVybCwgYmxhZGUuY3VycmVudEVudGl0eS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJzLnB1c2goYnJlYWRDcnVtYik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuYnJlYWRjcnVtYnMgPSBicmVhZGNydW1icztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5icmVhZGNydW1icyA9IFtnZW5lcmF0ZUJyZWFkY3J1bWIoYmxhZGUuY3VycmVudEVudGl0eS51cmwsICdhbGwnKV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZUJyZWFkY3J1bWIoaWQsIG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGJsYWRlOiBibGFkZSxcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGU6IGZ1bmN0aW9uIChicmVhZGNydW1iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQmxhZGUoYmxhZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5kaXNhYmxlT3BlbkFuaW1hdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKGJsYWRlLCBibGFkZS5wYXJlbnRCbGFkZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLWZvbGRlci1vJztcbiAgICAgICAgICAgIGJsYWRlLnRpdGxlID0gYmxhZGUuY3VycmVudEVudGl0eS5uYW1lO1xuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICB9XG4gICAgXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgncGxhdGZvcm1XZWJBcHAnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5hc3NldFVwbG9hZENvbnRyb2xsZXInLCBbJyRzY29wZScsICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUuY29udGVudEFwaScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ0ZpbGVVcGxvYWRlcicsIGZ1bmN0aW9uICgkc2NvcGUsIGNvbnRlbnRBcGksIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIEZpbGVVcGxvYWRlcikge1xuICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcbiAgICB2YXIgY3VycmVudEVudGl0aWVzO1xuXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSB1cGxvYWRlclxuICAgICAgICB2YXIgdXBsb2FkZXIgPSAkc2NvcGUudXBsb2FkZXIgPSBuZXcgRmlsZVVwbG9hZGVyKHtcbiAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICB1cmw6ICdhcGkvY29udGVudC8nICsgYmxhZGUuY29udGVudFR5cGUgKyAnLycgKyBibGFkZS5zdG9yZUlkICsgJz9mb2xkZXJVcmw9JyArIChibGFkZS5jdXJyZW50RW50aXR5SWQgfHwgJycpLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBhdXRvVXBsb2FkOiB0cnVlLFxuICAgICAgICAgICAgcmVtb3ZlQWZ0ZXJVcGxvYWQ6IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy91cGxvYWRlci5vbkFmdGVyQWRkaW5nQWxsID0gZnVuY3Rpb24gKGFkZGVkSXRlbXMpIHtcbiAgICAgICAgLy8gICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgLy8gICAgYmxhZGUudXBsb2FkQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIC8vICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IobnVsbCwgYmxhZGUpO1xuXG4gICAgICAgIC8vICAgIC8vIGNoZWNrIGZvciBhc3NldCBkdXBsaWNhdGVzXG4gICAgICAgIC8vICAgIGNvbnRlbnRBcGkucXVlcnkoeyBmb2xkZXJVcmw6IGJsYWRlLmN1cnJlbnRFbnRpdHlJZCB9LFxuICAgICAgICAvLyAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgLy8gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgLy8gICAgICAgICAgICBjdXJyZW50RW50aXRpZXMgPSBkYXRhO1xuXG4gICAgICAgIC8vICAgICAgICAgICAgXy5lYWNoKGFkZGVkSXRlbXMsIHByb21wdFVzZXJEZWNpc2lvbik7XG4gICAgICAgIC8vICAgICAgICAgICAgdXBsb2FkZXIudXBsb2FkQWxsKCk7XG4gICAgICAgIC8vICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgLy8gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7XG4gICAgICAgIC8vICAgICAgICB9KTtcbiAgICAgICAgLy99O1xuXG4gICAgICAgIHVwbG9hZGVyLm9uRXJyb3JJdGVtID0gZnVuY3Rpb24gKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoaXRlbS5fZmlsZS5uYW1lICsgJyBmYWlsZWQ6ICcgKyAocmVzcG9uc2UubWVzc2FnZSA/IHJlc3BvbnNlLm1lc3NhZ2UgOiBzdGF0dXMpLCBibGFkZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdXBsb2FkZXIub25TdWNjZXNzSXRlbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIGJsYWRlLnVwbG9hZENvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHJvbXB0VXNlckRlY2lzaW9uKGl0ZW0pIHtcbiAgICAgICAgaWYgKF8uYW55KGN1cnJlbnRFbnRpdGllcywgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudHlwZSA9PT0gJ2Jsb2InICYmIHgubmFtZS50b0xvd2VyQ2FzZSgpID09PSBpdGVtLmZpbGUubmFtZS50b0xvd2VyQ2FzZSgpIH0pKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gcHJvbXB0KFwiRmlsZSBcXFwiXCIgKyBpdGVtLmZpbGUubmFtZSArIFwiXFxcIiBhbHJlYWR5IGV4aXN0cyFcXG4tIENoYW5nZSBuYW1lIC8gcHJlc3MgW09LXSB0byBvdmVyd3JpdGUuXFxuLSBQcmVzcyBbQ2FuY2VsXSB0byBza2lwIHRoaXMgZmlsZS5cXG5GaWxlIG5hbWU6XCIsIGl0ZW0uZmlsZS5uYW1lKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGl0ZW0ucmVtb3ZlKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBwcm9tcHRVc2VyRGVjaXNpb24oaXRlbSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCAhPT0gaXRlbS5maWxlLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmZpbGUubmFtZSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICBwcm9tcHRVc2VyRGVjaXNpb24oaXRlbSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGl0ZW0udXJsICs9IFwiJmZvcmNlRmlsZU92ZXJ3cml0ZT10cnVlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuYWRkSW1hZ2VGcm9tVXJsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoYmxhZGUubmV3RXh0ZXJuYWxJbWFnZVVybCkge1xuICAgICAgICAgICAgYmxhZGUudXBsb2FkQ29tcGxldGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnRlbnRBcGkudXBsb2FkRnJvbVVybCh7XG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgICAgICAgICAgICAgZm9sZGVyVXJsOiBibGFkZS5jdXJyZW50RW50aXR5SWQsXG4gICAgICAgICAgICAgICAgdXJsOiBibGFkZS5uZXdFeHRlcm5hbEltYWdlVXJsXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUucGFyZW50QmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIGJsYWRlLm5ld0V4dGVybmFsSW1hZ2VVcmwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgYmxhZGUudXBsb2FkQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhIGZhLWZpbGUtbyc7XG5cbiAgICBpbml0aWFsaXplKCk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlJylcbiAgICAuY29udHJvbGxlcigndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLnRoZW1lRGV0YWlsQ29udHJvbGxlcicsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUuY29udGVudEFwaScsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UsIGNvbnRlbnRBcGkpIHtcbiAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuXG4gICAgICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAocGFyZW50UmVmcmVzaCkge1xuICAgICAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZUJsYWRlKHt9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZUJsYWRlKGJsYWRlLmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUJsYWRlKGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChibGFkZS5pc05ldykge1xuICAgICAgICAgICAgICAgIGJsYWRlLnRpdGxlID0gJ2NvbnRlbnQuYmxhZGVzLnRoZW1lLWRldGFpbC50aXRsZS1uZXcnO1xuICAgICAgICAgICAgICAgIGJsYWRlLnN1YnRpdGxlID0gJ2NvbnRlbnQuYmxhZGVzLnRoZW1lLWRldGFpbC5zdWJ0aXRsZS1uZXcnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBibGFkZS50aXRsZSA9IGRhdGEubmFtZTtcbiAgICAgICAgICAgICAgICBibGFkZS5zdWJ0aXRsZSA9ICdjb250ZW50LmJsYWRlcy50aGVtZS1kZXRhaWwuc3VidGl0bGUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eSA9IGFuZ3VsYXIuY29weShkYXRhKTtcbiAgICAgICAgICAgIGJsYWRlLm9yaWdFbnRpdHkgPSBkYXRhO1xuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpc0RpcnR5KCkge1xuICAgICAgICAgICAgcmV0dXJuICFhbmd1bGFyLmVxdWFscyhibGFkZS5jdXJyZW50RW50aXR5LCBibGFkZS5vcmlnRW50aXR5KSAmJiBibGFkZS5oYXNVcGRhdGVQZXJtaXNzaW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjYW5TYXZlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGlzRGlydHkoKSAmJiAkc2NvcGUuZm9ybVNjb3BlICYmICRzY29wZS5mb3JtU2NvcGUuJHZhbGlkO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKGJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICAgICAgaWYgKGJsYWRlLmN1cnJlbnRFbnRpdHkuZGVmYXVsdFRoZW1lKSB7IC8vIGNyZWF0ZSBmcm9tIGRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEFwaS5jb3B5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyY1BhdGg6ICdUaGVtZXMvJyArIGJsYWRlLmN1cnJlbnRFbnRpdHkuZGVmYXVsdFRoZW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdFBhdGg6ICdUaGVtZXMvJyArIGJsYWRlLnN0b3JlSWQgKyAnLycgKyBibGFkZS5jdXJyZW50RW50aXR5Lm5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSwgb25BZnRlclRoZW1lQ3JlYXRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGNyZWF0ZSBlbXB0eVxuICAgICAgICAgICAgICAgICAgICBjb250ZW50QXBpLmNyZWF0ZUZvbGRlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ3RoZW1lcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZUlkXG4gICAgICAgICAgICAgICAgICAgIH0sIGJsYWRlLmN1cnJlbnRFbnRpdHksIG9uQWZ0ZXJUaGVtZUNyZWF0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHsgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBuZXdVcmwgPSBibGFkZS5vcmlnRW50aXR5LnBhcmVudFVybC5yZXBsYWNlKCclMjAnLCAnICcpICsgJy8nICsgYmxhZGUuY3VycmVudEVudGl0eS5uYW1lICsgJy8nIDtcblxuICAgICAgICAgICAgICAgIGNvbnRlbnRBcGkubW92ZSh7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAndGhlbWVzJyxcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCxcbiAgICAgICAgICAgICAgICAgICAgb2xkVXJsOiBibGFkZS5vcmlnRW50aXR5LnVybCxcbiAgICAgICAgICAgICAgICAgICAgbmV3VXJsOiBuZXdVcmxcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5LnVybCA9IG5ld1VybDtcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuZGF0YSA9IGJsYWRlLmN1cnJlbnRFbnRpdHk7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2godHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBvbkFmdGVyVGhlbWVDcmVhdGVkKCkge1xuICAgICAgICAgICAgaWYgKGJsYWRlLmlzQWN0aXZhdGVBZnRlclNhdmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF8uZmluZFdoZXJlKGJsYWRlLnN0b3JlLmR5bmFtaWNQcm9wZXJ0aWVzLCB7IG5hbWU6ICdEZWZhdWx0VGhlbWVOYW1lJyB9KTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wLnZhbHVlcyA9IFt7IHZhbHVlOiBibGFkZS5jdXJyZW50RW50aXR5Lm5hbWUgfV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYmxhZGUuc3RvcmUuJHVwZGF0ZShyZWZyZXNoUGFyZW50QW5kQ2xvc2UsIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFyZW50QW5kQ2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlZnJlc2hQYXJlbnRBbmRDbG9zZSgpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5jdXJyZW50RW50aXR5LCBibGFkZS5vcmlnRW50aXR5KTtcbiAgICAgICAgICAgICRzY29wZS5ibGFkZUNsb3NlKCk7XG4gICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoXCJjbXMtc3RhdGlzdGljcy1jaGFuZ2VkXCIsIGJsYWRlLnN0b3JlSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNldEZvcm0gPSBmdW5jdGlvbiAoZm9ybSkgeyAkc2NvcGUuZm9ybVNjb3BlID0gZm9ybTsgfTtcblxuICAgICAgICBibGFkZS5vbkNsb3NlID0gZnVuY3Rpb24gKGNsb3NlQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbklmTmVlZGVkKGlzRGlydHkoKSwgY2FuU2F2ZSgpLCBibGFkZSwgJHNjb3BlLnNhdmVDaGFuZ2VzLCBjbG9zZUNhbGxiYWNrLCBcImNvbnRlbnQuZGlhbG9ncy50aGVtZS1zYXZlLnRpdGxlXCIsIFwiY29udGVudC5kaWFsb2dzLnRoZW1lLXNhdmUubWVzc2FnZVwiKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoIWJsYWRlLmlzTmV3KSB7XG4gICAgICAgICAgICBibGFkZS50b29sYmFyQ29tbWFuZHMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnNhdmVcIixcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLXNhdmUnLFxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiAkc2NvcGUuc2F2ZUNoYW5nZXMsXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGNhblNhdmUsXG4gICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246IGJsYWRlLnVwZGF0ZVBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5yZXNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtdW5kbycsXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShibGFkZS5vcmlnRW50aXR5LCBibGFkZS5jdXJyZW50RW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogaXNEaXJ0eSxcbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cblxuICAgICAgICBibGFkZS5yZWZyZXNoKGZhbHNlKTtcbiAgICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUudGhlbWVVcGxvYWRDb250cm9sbGVyJywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5jb250ZW50QXBpJywgJ0ZpbGVVcGxvYWRlcicsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRzY29wZSwgZGlhbG9nU2VydmljZSwgY29udGVudEFwaSwgRmlsZVVwbG9hZGVyLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuXG4gICAgLy8gY3JlYXRlIHRoZSB1cGxvYWRlclxuICAgIHZhciB1cGxvYWRlciA9ICRzY29wZS51cGxvYWRlciA9IG5ldyBGaWxlVXBsb2FkZXIoe1xuICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIHVybDogJ2FwaS9jb250ZW50L3RoZW1lcy8nICsgYmxhZGUuc3RvcmVJZCArICc/Zm9sZGVyVXJsPScsXG4gICAgICAgIHF1ZXVlTGltaXQ6IDEsXG4gICAgICAgIGF1dG9VcGxvYWQ6IGZhbHNlLFxuICAgICAgICByZW1vdmVBZnRlclVwbG9hZDogZmFsc2VcbiAgICB9KTtcblxuICAgIC8vIEFERElORyBGSUxURVJTXG4gICAgLy8gWmlwcyBvbmx5XG4gICAgdXBsb2FkZXIuZmlsdGVycy5wdXNoKHtcbiAgICAgICAgbmFtZTogJ3ppcEZpbHRlcicsXG4gICAgICAgIGZuOiBmdW5jdGlvbiAoaSAvKntGaWxlfEZpbGVMaWtlT2JqZWN0fSovLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gaS5uYW1lLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy56aXAnKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdXBsb2FkZXIub25XaGVuQWRkaW5nRmlsZUZhaWxlZCA9IGZ1bmN0aW9uIChpdGVtLCBmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGZpbHRlci5uYW1lID09PSBcInF1ZXVlTGltaXRcIikge1xuICAgICAgICAgICAgdXBsb2FkZXIuY2xlYXJRdWV1ZSgpO1xuICAgICAgICAgICAgdXBsb2FkZXIuYWRkVG9RdWV1ZShpdGVtKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB1cGxvYWRlci5vbkFmdGVyQWRkaW5nRmlsZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICRzY29wZS50aGVtZU5hbWUgPSBpdGVtLmZpbGUubmFtZS5zdWJzdHJpbmcoMCwgaXRlbS5maWxlLm5hbWUubGFzdEluZGV4T2YoJy4nKSk7XG4gICAgICAgIGlmICghIWJsYWRlLmN1cnJlbnRFbnRpdGllcyAmJiBibGFkZS5jdXJyZW50RW50aXRpZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgJiYgXy5hbnkoYmxhZGUuY3VycmVudEVudGl0aWVzLCBmdW5jdGlvbiAodGhlbWUpIHsgcmV0dXJuIHRoZW1lLm5hbWUgPT09ICRzY29wZS50aGVtZU5hbWU7IH0pKSB7XG5cbiAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IFwiY29uZmlybVVwbG9hZFRoZW1lXCIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiY29udGVudC5kaWFsb2dzLnRoZW1lLXVwbG9hZC1jb25maXJtYXRpb24udGl0bGVcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcImNvbnRlbnQuZGlhbG9ncy50aGVtZS11cGxvYWQtY29uZmlybWF0aW9uLm1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHVwbG9hZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXBsb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRlci51cGxvYWRBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkaWFsb2dTZXJ2aWNlLnNob3dDb25maXJtYXRpb25EaWFsb2coZGlhbG9nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVwbG9hZGVyLnVwbG9hZEFsbCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHVwbG9hZGVyLm9uU3VjY2Vzc0l0ZW0gPSBmdW5jdGlvbiAoZmlsZUl0ZW0sIGZpbGVzKSB7XG4gICAgICAgIGNvbnRlbnRBcGkudW5wYWNrKHtcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAndGhlbWVzJyxcbiAgICAgICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgICAgICAgICBhcmNoaXZlcGF0aDogZmlsZXNbMF0ubmFtZSxcbiAgICAgICAgICAgIGRlc3RQYXRoOiAkc2NvcGUudGhlbWVOYW1lXG4gICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAoYmxhZGUuaXNBY3RpdmF0ZUFmdGVyU2F2ZSkge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gXy5maW5kV2hlcmUoYmxhZGUuc3RvcmUuZHluYW1pY1Byb3BlcnRpZXMsIHsgbmFtZTogJ0RlZmF1bHRUaGVtZU5hbWUnIH0pO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3AudmFsdWVzID0gW3sgdmFsdWU6ICRzY29wZS50aGVtZU5hbWUgfV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYmxhZGUuc3RvcmUuJHVwZGF0ZShyZWZyZXNoUGFyZW50QW5kQ2xvc2UsIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFyZW50QW5kQ2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICB1cGxvYWRlci5jbGVhclF1ZXVlKCk7XG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCAkc2NvcGUuYmxhZGUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcmVmcmVzaFBhcmVudEFuZENsb3NlKCkge1xuICAgICAgICAkc2NvcGUuYmxhZGVDbG9zZSgpO1xuICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5yZWZyZXNoKCk7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdChcImNtcy1zdGF0aXN0aWNzLWNoYW5nZWRcIiwgYmxhZGUuc3RvcmVJZCk7XG4gICAgfVxuXG4gICAgdXBsb2FkZXIub25FcnJvckl0ZW0gPSBmdW5jdGlvbiAoaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge1xuICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKGl0ZW0uX2ZpbGUubmFtZSArICcgZmFpbGVkOiAnICsgKHJlc3BvbnNlLm1lc3NhZ2UgPyByZXNwb25zZS5tZXNzYWdlIDogc3RhdHVzKSwgYmxhZGUpO1xuICAgIH07XG5cbiAgICBibGFkZS50aXRsZSA9ICdjb250ZW50LmJsYWRlcy50aGVtZS11cGxvYWQudGl0bGUnO1xuICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLnRoZW1lc0xpc3RDb250cm9sbGVyJywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUudGhlbWVzJywgJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5jb250ZW50QXBpJywgJ3ZpcnRvQ29tbWVyY2Uuc3RvcmVNb2R1bGUuc3RvcmVzJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAuZGlhbG9nU2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC51aUdyaWRIZWxwZXInLCAncGxhdGZvcm1XZWJBcHAuZHluYW1pY1Byb3BlcnRpZXMuYXBpJyxcbiAgICBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlLCB0aGVtZXMsIGNvbnRlbnRBcGksIHN0b3JlcywgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgZGlhbG9nU2VydmljZSwgdWlHcmlkSGVscGVyLCBkeW5hbWljUHJvcGVydGllc0FwaSkge1xuICAgICAgICAkc2NvcGUudWlHcmlkQ29uc3RhbnRzID0gdWlHcmlkSGVscGVyLnVpR3JpZENvbnN0YW50cztcbiAgICAgICAgdmFyIGJsYWRlID0gJHNjb3BlLmJsYWRlO1xuICAgICAgICBibGFkZS51cGRhdGVQZXJtaXNzaW9uID0gJ2NvbnRlbnQ6dXBkYXRlJztcbiAgICAgICAgYmxhZGUuY29udGVudFR5cGUgPSAndGhlbWVzJztcbiAgICAgICAgYmxhZGUuZGVmYXVsdFRoZW1lTmFtZSA9IHVuZGVmaW5lZDtcblxuICAgICAgICBibGFkZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnRlbnRBcGkucXVlcnkoeyBjb250ZW50VHlwZTogYmxhZGUuY29udGVudFR5cGUsIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXRpZXMgPSBkYXRhO1xuXG4gICAgICAgICAgICAgICAgc3RvcmVzLmdldCh7IGlkOiBibGFkZS5zdG9yZUlkIH0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLnN0b3JlID0gZGF0YTtcblxuICAgICAgICAgICAgICAgICAgICBkeW5hbWljUHJvcGVydGllc0FwaS5zZWFyY2goe29iamVjdFR5cGU6IGJsYWRlLnN0b3JlLm9iamVjdFR5cGUsIG9iamVjdElkOiBibGFkZS5zdG9yZS5pZH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmF3UHJvcGVydGllcyA9IHJlc3BvbnNlLnJlc3VsdHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHJhd1Byb3BlcnRpZXMsIGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcC52YWx1ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkUHJvcGVydHkgPSBfLmZpbmQoYmxhZGUuc3RvcmUuZHluYW1pY1Byb3BlcnRpZXMsIGZ1bmN0aW9uIChvKSB7IHJldHVybiBvLmlkID09PSBwcm9wLmlkOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkUHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3AudmFsdWVzID0gZmlsdGVyZWRQcm9wZXJ0eS52YWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5zdG9yZS5keW5hbWljUHJvcGVydGllcyA9IHJhd1Byb3BlcnRpZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfLmZpbmRXaGVyZShibGFkZS5zdG9yZS5keW5hbWljUHJvcGVydGllcywgeyBuYW1lOiAnRGVmYXVsdFRoZW1lTmFtZScgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuZGVmYXVsdFRoZW1lTmFtZSA9IHByb3AgJiYgXy5hbnkocHJvcC52YWx1ZXMpICYmIHByb3AudmFsdWVzWzBdLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5vcGVuQmxhZGVOZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUub3BlbkRldGFpbHNCbGFkZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5vcGVuRGV0YWlsc0JsYWRlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZE5vZGVJZCA9IG5vZGUgJiYgbm9kZS5uYW1lO1xuXG4gICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6ICd0aGVtZURldGFpbCcsXG4gICAgICAgICAgICAgICAgaXNOZXc6ICFub2RlLFxuICAgICAgICAgICAgICAgIGlzQWN0aXZhdGVBZnRlclNhdmU6ICFfLmFueShibGFkZS5jdXJyZW50RW50aXRpZXMpLFxuICAgICAgICAgICAgICAgIHN0b3JlOiBibGFkZS5zdG9yZSxcbiAgICAgICAgICAgICAgICBkYXRhOiBub2RlLFxuICAgICAgICAgICAgICAgIHN0b3JlSWQ6IGJsYWRlLnN0b3JlSWQsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS50aGVtZURldGFpbENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuQ29udGVudCkvU2NyaXB0cy9ibGFkZXMvdGhlbWVzL3RoZW1lLWRldGFpbC50cGwuaHRtbCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5jbG9uZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBkYXRhLm5hbWU7XG4gICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgICAgIGlkOiBcImNvbmZpcm1cIixcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJjb250ZW50LmRpYWxvZ3MudGhlbWUtY2xvbmUudGl0bGVcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcImNvbnRlbnQuZGlhbG9ncy50aGVtZS1jbG9uZS5tZXNzYWdlXCIsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICh1c2VyRm9uZmlybWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VyRm9uZmlybWVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWVzLmNsb25lVGhlbWUoeyBzdG9yZUlkOiBibGFkZS5zdG9yZUlkLCB0aGVtZU5hbWU6IGRhdGEubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2gsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7IGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Q29uZmlybWF0aW9uRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnByZXZpZXcgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkTm9kZUlkID0gZGF0YS5uYW1lO1xuICAgICAgICAgICAgaWYgKGJsYWRlLnN0b3JlLnVybCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGJsYWRlLnN0b3JlLnVybCArICc/cHJldmlld3RoZW1lPScgKyBkYXRhLm5hbWUsICdfYmxhbmsnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBcIm5vVXJsSW5TdG9yZVwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJjb250ZW50LmRpYWxvZ3Muc2V0LXN0b3JlLXVybC50aXRsZVwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcImNvbnRlbnQuZGlhbG9ncy5zZXQtc3RvcmUtdXJsLm1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgpIHsgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Tm90aWZpY2F0aW9uRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNldEFjdGl2ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBkYXRhLm5hbWU7XG4gICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgcHJvcCA9IF8uZmluZFdoZXJlKGJsYWRlLnN0b3JlLmR5bmFtaWNQcm9wZXJ0aWVzLCB7IG5hbWU6ICdEZWZhdWx0VGhlbWVOYW1lJyB9KTtcbiAgICAgICAgICAgIHByb3AudmFsdWVzID0gW3sgdmFsdWU6IGRhdGEubmFtZSB9XTtcblxuICAgICAgICAgICAgYmxhZGUuc3RvcmUuJHVwZGF0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIGJsYWRlLnBhcmVudEJsYWRlLnJlZnJlc2goYmxhZGUuc3RvcmVJZCwgJ2RlZmF1bHRUaGVtZScsIGRhdGEubmFtZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7IGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTsgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmRlbGV0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBkYXRhLm5hbWU7XG4gICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlQ2hpbGRyZW5CbGFkZXMoYmxhZGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlhbG9nID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogXCJjb25maXJtRGVsZXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcImNvbnRlbnQuZGlhbG9ncy50aGVtZS1kZWxldGUudGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYmxhZGUuY3VycmVudEVudGl0aWVzLmxlbmd0aCA+IDEgPyBcImNvbnRlbnQuZGlhbG9ncy50aGVtZS1kZWxldGUubWVzc2FnZVwiIDogXCJjb250ZW50LmRpYWxvZ3MudGhlbWUtZGVsZXRlLm1lc3NhZ2UtbGFzdC1vbmVcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVZhbHVlczogeyBuYW1lOiBkYXRhLm5hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBcGkuZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGJsYWRlLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxzOiBbZGF0YS51cmxdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLm5hbWUgPT09IGJsYWRlLmRlZmF1bHRUaGVtZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gXy5maW5kV2hlcmUoYmxhZGUuc3RvcmUuZHluYW1pY1Byb3BlcnRpZXMsIHsgbmFtZTogJ0RlZmF1bHRUaGVtZU5hbWUnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcC52YWx1ZXMgPSBbeyB2YWx1ZTogJycgfV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnN0b3JlLiR1cGRhdGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoXCJjbXMtc3RhdGlzdGljcy1jaGFuZ2VkXCIsIGJsYWRlLnN0b3JlSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwiY21zLXN0YXRpc3RpY3MtY2hhbmdlZFwiLCBibGFkZS5zdG9yZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7IGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsIGJsYWRlKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbkRpYWxvZyhkaWFsb2cpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuYWRkXCIsIGljb246ICdmYSBmYS1wbHVzJyxcbiAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiAkc2NvcGUub3BlbkJsYWRlTmV3LFxuICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnY29udGVudDpjcmVhdGUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMudXBsb2FkXCIsIGljb246ICdmYSBmYS11cGxvYWQnLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwidGhlbWVVcGxvYWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQWN0aXZhdGVBZnRlclNhdmU6ICFfLmFueShibGFkZS5jdXJyZW50RW50aXRpZXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVudGl0aWVzOiBibGFkZS5jdXJyZW50RW50aXRpZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZTogYmxhZGUuc3RvcmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiBibGFkZS5zdG9yZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS50aGVtZVVwbG9hZENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5Db250ZW50KS9TY3JpcHRzL2JsYWRlcy90aGVtZXMvdGhlbWUtdXBsb2FkLnRwbC5odG1sJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAnY29udGVudDpjcmVhdGUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy97XG4gICAgICAgICAgICAvLyAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLmNsb25lXCIsIGljb246ICdmYSBmYS1maWxlcy1vJyxcbiAgICAgICAgICAgIC8vICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAkc2NvcGUuY2xvbmUoYmxhZGUuY2hvc2VuVGhlbWUpO1xuICAgICAgICAgICAgLy8gICAgfSxcbiAgICAgICAgICAgIC8vICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJsYWRlLmNob3NlblRoZW1lOyB9LFxuICAgICAgICAgICAgLy8gICAgcGVybWlzc2lvbjogJ2NvbnRlbnQ6Y3JlYXRlJ1xuICAgICAgICAgICAgLy99LFxuICAgICAgICAgICAgLy97XG4gICAgICAgICAgICAvLyAgICBuYW1lOiBcImNvbnRlbnQuY29tbWFuZHMuZWRpdC1jc3MtaHRtbFwiLCBpY29uOiAnZmEgZmEtY29kZScsXG4gICAgICAgICAgICAvLyAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgJHNjb3BlLm9wZW5EZXRhaWxzQmxhZGUoKTtcbiAgICAgICAgICAgIC8vICAgIH0sXG4gICAgICAgICAgICAvLyAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgcmV0dXJuICFhbmd1bGFyLmlzVW5kZWZpbmVkKGJsYWRlLmNob3NlblRoZW1lKTtcbiAgICAgICAgICAgIC8vICAgIH0sXG4gICAgICAgICAgICAvLyAgICBwZXJtaXNzaW9uOiBibGFkZS51cGRhdGVQZXJtaXNzaW9uXG4gICAgICAgICAgICAvL30sXG4gICAgICAgICAgICAvL3tcbiAgICAgICAgICAgIC8vICAgIG5hbWU6IFwiY29udGVudC5jb21tYW5kcy5wcmV2aWV3LXRoZW1lXCIsIGljb246ICdmYSBmYS1leWUnLFxuICAgICAgICAgICAgLy8gICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gICAgICAgICRzY29wZS5wcmV2aWV3KGJsYWRlLmNob3NlblRoZW1lKTtcbiAgICAgICAgICAgIC8vICAgIH0sXG4gICAgICAgICAgICAvLyAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgcmV0dXJuIGJsYWRlLmNob3NlblRoZW1lO1xuICAgICAgICAgICAgLy8gICAgfVxuICAgICAgICAgICAgLy99LFxuICAgICAgICAgICAgLy97XG4gICAgICAgICAgICAvLyAgICBuYW1lOiBcImNvbnRlbnQuY29tbWFuZHMuc2V0LWFjdGl2ZVwiLCBpY29uOiAnZmEgZmEtcGVuY2lsLXNxdWFyZS1vJyxcbiAgICAgICAgICAgIC8vICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAkc2NvcGUuc2V0QWN0aXZlKGJsYWRlLmNob3NlblRoZW1lKTtcbiAgICAgICAgICAgIC8vICAgIH0sXG4gICAgICAgICAgICAvLyAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgcmV0dXJuIGJsYWRlLmNob3NlblRoZW1lICYmIGJsYWRlLmRlZmF1bHRUaGVtZU5hbWUgIT09IGJsYWRlLmNob3NlblRoZW1lLm5hbWU7XG4gICAgICAgICAgICAvLyAgICB9LFxuICAgICAgICAgICAgLy8gICAgcGVybWlzc2lvbjogYmxhZGUudXBkYXRlUGVybWlzc2lvblxuICAgICAgICAgICAgLy99LFxuICAgICAgICAgICAgLy97XG4gICAgICAgICAgICAvLyAgICBuYW1lOiBcImNvbnRlbnQuY29tbWFuZHMuZGVsZXRlLXRoZW1lXCIsIGljb246ICdmYSBmYS10cmFzaC1vJyxcbiAgICAgICAgICAgIC8vICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAkc2NvcGUuZGVsZXRlKGJsYWRlLmNob3NlblRoZW1lKTtcbiAgICAgICAgICAgIC8vICAgIH0sXG4gICAgICAgICAgICAvLyAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgcmV0dXJuIGJsYWRlLmNob3NlblRoZW1lO1xuICAgICAgICAgICAgLy8gICAgfSxcbiAgICAgICAgICAgIC8vICAgIHBlcm1pc3Npb246ICdjb250ZW50OmRlbGV0ZSdcbiAgICAgICAgICAgIC8vfVxuICAgICAgICBdO1xuXG4gICAgICAgIGJsYWRlLnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkTm9kZUlkID0gZGF0YS5uYW1lO1xuXG4gICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XG4gICAgICAgICAgICAgICAgaWQ6ICd0aGVtZUFzc2V0TGlzdEJsYWRlJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogYmxhZGUuY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgc3RvcmVJZDogYmxhZGUuc3RvcmVJZCxcbiAgICAgICAgICAgICAgICBjdXJyZW50RW50aXR5OiBkYXRhLFxuICAgICAgICAgICAgICAgIHRoZW1lSWQ6IGRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ2NvbnRlbnQuYmxhZGVzLmFzc2V0LWxpc3Quc3VidGl0bGUnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUuYXNzZXRMaXN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5Bc3NldHMpL1NjcmlwdHMvYmxhZGVzL2Fzc2V0LWxpc3QudHBsLmh0bWwnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyB1aS1ncmlkXG4gICAgICAgICRzY29wZS5zZXRHcmlkT3B0aW9ucyA9IGZ1bmN0aW9uIChncmlkT3B0aW9ucykge1xuICAgICAgICAgICAgdWlHcmlkSGVscGVyLmluaXRpYWxpemUoJHNjb3BlLCBncmlkT3B0aW9ucyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xuICAgIH1cbl0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZScpXG4gICAgLmZhY3RvcnkoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5tZW51cycsXG4gICAgICAgIFtcbiAgICAgICAgICAgICckcmVzb3VyY2UnLCBmdW5jdGlvbigkcmVzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHJlc291cmNlKCdhcGkvY21zLzpzdG9yZUlkL21lbnUvJyxcbiAgICAgICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldDogeyB1cmw6ICdhcGkvY21zLzpzdG9yZUlkL21lbnUvJywgbWV0aG9kOiAnR0VUJywgaXNBcnJheTogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TGlzdDogeyB1cmw6ICdhcGkvY21zLzpzdG9yZUlkL21lbnUvOmxpc3RJZCcsIG1ldGhvZDogJ0dFVCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrTGlzdDogeyB1cmw6ICdhcGkvY21zLzpzdG9yZUlkL21lbnUvY2hlY2tuYW1lJywgbWV0aG9kOiAnR0VUJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiB7IHVybDogJ2FwaS9jbXMvOnN0b3JlSWQvbWVudS8nLCBtZXRob2Q6ICdQT1NUJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlOiB7IHVybDogJ2FwaS9jbXMvOnN0b3JlSWQvbWVudS8nLCBtZXRob2Q6ICdERUxFVEUnIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIF0pXG4gICAgLmZhY3RvcnkoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS50aGVtZXMnLFxuICAgICAgICBbXG4gICAgICAgICAgICAnJHJlc291cmNlJywgZnVuY3Rpb24oJHJlc291cmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRyZXNvdXJjZShudWxsLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9uZVRoZW1lOiB7IHVybDogJ2FwaS9jb250ZW50L3RoZW1lcy86c3RvcmVJZC9jbG9uZVRoZW1lJywgbWV0aG9kOiAnUE9TVCcgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSlcbiAgICAuZmFjdG9yeSgndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLmNvbnRlbnRBcGknLFxuICAgICAgICBbXG4gICAgICAgICAgICAnJHJlc291cmNlJywgJ21vbWVudCcsIGZ1bmN0aW9uKCRyZXNvdXJjZSwgbW9tZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgnYXBpL2NvbnRlbnQvOmNvbnRlbnRUeXBlLzpzdG9yZUlkJyxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U3RhdGlzdGljczogeyB1cmw6ICdhcGkvY29udGVudC86c3RvcmVJZC9zdGF0cycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB7IHVybDogJ2FwaS9jb250ZW50Lzpjb250ZW50VHlwZS86c3RvcmVJZC9zZWFyY2gnLCBpc0FycmF5OiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2luZyB0cmFuc2Zvcm1SZXNwb25zZSB0bzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxLiBhdm9pZCBhdXRvbWF0aWMgcmVzcG9uc2UgcmVzdWx0IHN0cmluZyBjb252ZXJ0aW5nIHRvIGFycmF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlOiBmdW5jdGlvbihyYXdEYXRhKSB7IHJldHVybiB7IGRhdGE6IHJhd0RhdGEgfTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvc3QgZGF0YSBhcyBtdWx0aXBhcnQgZm9ybVxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZU11bHRpcGFydENvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBmdW5jdGlvbihjdXJyZW50RW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZC5hcHBlbmQoY3VycmVudEVudGl0eS5uYW1lLCBjdXJyZW50RW50aXR5LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FycmF5OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkRnJvbVVybDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCBwYXJhbXM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ0Bjb250ZW50VHlwZScsIHN0b3JlSWQ6ICdAc3RvcmVJZCcsIGZvbGRlclVybDogJ0Bmb2xkZXJVcmwnLCB1cmw6ICdAdXJsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBcnJheTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFdpdGhNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzaW5nIHRyYW5zZm9ybVJlc3BvbnNlIHRvOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEuIGF2b2lkIGF1dG9tYXRpYyByZXNwb25zZSByZXN1bHQgc3RyaW5nIGNvbnZlcnRpbmcgdG8gYXJyYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4gcGFyc2UgbWV0YWRhdGEgYXMgbmVlZGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlOiBmdW5jdGlvbihyYXdEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXRWYWwgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gcmF3RGF0YS5zcGxpdCgnLS0tJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAyKSB7IC8vIHBhcnRzWzBdIGlzIGxlZnQgZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldFZhbC5jb250ZW50ID0gcGFydHNbMl0udHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlZE1ldGFkYXRhID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyc2VkWUFNTCA9IFlBTUwucGFyc2UocGFydHNbMV0udHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldFZhbC5tZXRhZGF0YSA9IF8ubWFwKHBhcnNlZFlBTUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfLmlzQXJyYXkodmFsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gW3ZhbF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogXy5tYXAodmFsLCBmdW5jdGlvbih2KSB7IHJldHVybiB7IHZhbHVlOiB2IH07IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRWYWwuY29udGVudCA9IHJhd0RhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldFZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9zdCBkYXRhIGFzIG11bHRpcGFydCBmb3JtXG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlV2l0aE1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogZnVuY3Rpb24oY3VycmVudEVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YWRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vbkVtcHR5UHJvcGVydGllcyA9IF8uZmlsdGVyKGN1cnJlbnRFbnRpdHkuZHluYW1pY1Byb3BlcnRpZXMsIGZ1bmN0aW9uKHgpIHsgcmV0dXJuIF8uYW55KHgudmFsdWVzLCBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHZhbC52YWx1ZSB8fCB4LnZhbHVlVHlwZSA9PSAnQm9vbGVhbic7IH0pOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKG5vbkVtcHR5UHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0FycmF5ID0geC5pc0FycmF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4LmlzTXVsdGlsaW5ndWFsICYmICF4LmlzRGljdGlvbmFyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FycmF5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vbkVtcHR5TXVsdGlsaW5ndWFscyA9IF8uZmlsdGVyKHgudmFsdWVzLCBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHZhbC52YWx1ZTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyA9IF8ubWFwKG5vbkVtcHR5TXVsdGlsaW5ndWFscywgZnVuY3Rpb24odmFsKSB7IHJldHVybiB7IGxvY2FsZTogdmFsLmxvY2FsZSwgdmFsdWU6IHZhbC52YWx1ZSB9IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyA9IF8ucGx1Y2soeC52YWx1ZXMsICd2YWx1ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeC52YWx1ZVR5cGUgPT0gJ0RhdGVUaW1lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gXy5tYXAodmFsdWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KHZhbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JtYXQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN1YnN0cmluZygwLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeC5pc0RpY3Rpb25hcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyA9IF8ubWFwKHZhbHVlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldFZhbCA9IHsgaWQ6IHZhbC5pZCwgbmFtZTogdmFsLm5hbWUgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHguaXNNdWx0aWxpbmd1YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldFZhbC5kaXNwbGF5TmFtZXMgPSBfLm1hcCh2YWwuZGlzcGxheU5hbWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGxvY2FsZTogZGlzcGxheU5hbWUubG9jYWxlLCBuYW1lOiBkaXNwbGF5TmFtZS5uYW1lIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0VmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFbeC5uYW1lXSA9IGlzQXJyYXkgPyB2YWx1ZXMgOiB2YWx1ZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFUb1NhdmUgPSAnLS0tXFxuJyArIFlBTUwuc3RyaW5naWZ5KG1ldGFkYXRhKSArICdcXG4tLS1cXG4nICsgKGN1cnJlbnRFbnRpdHkuY29udGVudCB8fCAnJykudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibG9iTmFtZSA9IGN1cnJlbnRFbnRpdHkubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2JOYW1lRXh0ZW5zaW9uID0gJy5tZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSBibG9iTmFtZS5sYXN0SW5kZXhPZignLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2JOYW1lRXh0ZW5zaW9uID0gYmxvYk5hbWUuc3Vic3RyaW5nKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9iTmFtZSA9IGJsb2JOYW1lLnN1YnN0cmluZygwLCBpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ID0gYmxvYk5hbWUubGFzdEluZGV4T2YoJy4nKTsgLy8gbGFuZ3VhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2JOYW1lID0gYmxvYk5hbWUuc3Vic3RyaW5nKDAsIGlkeCk7IC8vIGN1dCBsYW5ndWFnZSBmcm9tIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RW50aXR5Lmxhbmd1YWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9iTmFtZSArPSAnLicgKyBjdXJyZW50RW50aXR5Lmxhbmd1YWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZkID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZkLmFwcGVuZChibG9iTmFtZSArIGJsb2JOYW1lRXh0ZW5zaW9uLCBkYXRhVG9TYXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBcnJheTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVucGFjazogeyB1cmw6ICdhcGkvY29udGVudC86Y29udGVudFR5cGUvOnN0b3JlSWQvdW5wYWNrJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlRm9sZGVyOiB7IHVybDogJ2FwaS9jb250ZW50Lzpjb250ZW50VHlwZS86c3RvcmVJZC9mb2xkZXInLCBtZXRob2Q6ICdQT1NUJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29weTogeyB1cmw6ICdhcGkvY29udGVudC9jb3B5JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZTogeyB1cmw6ICdhcGkvY29udGVudC86Y29udGVudFR5cGUvOnN0b3JlSWQvbW92ZScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZTogeyB1cmw6ICdhcGkvY29udGVudC86Y29udGVudFR5cGUvOnN0b3JlSWQnLCBtZXRob2Q6ICdERUxFVEUnIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIF0pO1xuIiwi77u/YW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLmJsb2dzV2lkZ2V0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG5cdC8vdmFyIGJsYWRlID0gJHNjb3BlLndpZGdldC5ibGFkZTtcbiAgICBcbn1dKTsiLCLvu79hbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUubGlua0xpc3RzV2lkZ2V0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG5cdC8vdmFyIGJsYWRlID0gJHNjb3BlLndpZGdldC5ibGFkZTtcbiAgICBcbn1dKTsiLCLvu79hbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUubWFpbkNvbnRlbnRJdGVtV2lkZ2V0Q29udHJvbGxlcicsIFsnJHN0YXRlJywgJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzdGF0ZSwgJHNjb3BlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG59XSk7XG4iLCLvu79hbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUubWVudVdpZGdldENvbnRyb2xsZXInLCBbJyRpbmplY3RvcicsICckcm9vdFNjb3BlJywgJyRzY29wZScsICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUubWVudXMnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsIGZ1bmN0aW9uICgkaW5qZWN0b3IsICRyb290U2NvcGUsICRzY29wZSwgbWVudXMsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UpIHtcblx0dmFyIGJsYWRlID0gJHNjb3BlLndpZGdldC5ibGFkZTtcblxuXHQkc2NvcGUud2lkZ2V0LmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLm1lbmlMaW5rTGlzdHNDb3VudCA9ICcuLi4nO1xuXHRcdHJldHVybiBtZW51cy5xdWVyeSh7IHN0b3JlSWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHlJZCB9LCBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0JHNjb3BlLm1lbmlMaW5rTGlzdHNDb3VudCA9IGRhdGEubGVuZ3RoO1xuXHRcdH0sIGZ1bmN0aW9uIChlcnJvcikge1xuXHRcdCAgICAvL2JsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IoJ0Vycm9yICcgKyBlcnJvci5zdGF0dXMsICRzY29wZS5ibGFkZSk7XG5cdFx0fSk7XG5cdH1cblxuXHQkc2NvcGUub3BlbkJsYWRlID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBuZXdCbGFkZSA9IHtcblx0XHRcdGlkOiBcImxpbmtMaXN0QmxhZGVcIixcblx0XHRcdHN0b3JlSWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHlJZCxcblx0XHRcdHBhcmVudFdpZGdldDogJHNjb3BlLndpZGdldCxcblx0XHRcdHRpdGxlOiBibGFkZS50aXRsZSxcblx0XHRcdHN1YnRpdGxlOiAnY29udGVudC53aWRnZXRzLm1lbnUuYmxhZGUtc3VidGl0bGUnLFxuXHRcdFx0Y29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5saW5rTGlzdHNDb250cm9sbGVyJyxcblx0XHRcdHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuQ29udGVudCkvU2NyaXB0cy9ibGFkZXMvbWVudS9saW5rLWxpc3RzLnRwbC5odG1sJ1xuXHRcdH07XG5cdFx0YmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcblx0fTtcblxuXHQkc2NvcGUud2lkZ2V0LmluaXRpYWxpemUoKTtcbn1dKTtcblxuIiwi77u/YW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLnBhZ2VzV2lkZ2V0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG4gICAgLy92YXIgYmxhZGUgPSAkc2NvcGUud2lkZ2V0LmJsYWRlO1xuXG4gICAgLy8kc2NvcGUub3BlbkJsYWRlID0gZnVuY3Rpb24gKCkge1xuICAgIC8vXHR2YXIgbmV3QmxhZGUgPSB7XG4gICAgLy9cdFx0aWQ6IFwicGFnZXNMaXN0QmxhZGVcIixcbiAgICAvL1x0XHRzdG9yZUlkOiBibGFkZS5jdXJyZW50RW50aXR5SWQsXG4gICAgLy9cdFx0cGFyZW50V2lkZ2V0OiAkc2NvcGUud2lkZ2V0LFxuICAgIC8vXHRcdHRpdGxlOiBibGFkZS50aXRsZSxcbiAgICAvL1x0XHRzdWJ0aXRsZTogJ2NvbnRlbnQud2lkZ2V0cy5wYWRlcy5ibGFkZS1zdWJ0aXRsZScsXG4gICAgLy9cdFx0Y29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS5wYWdlc0xpc3RDb250cm9sbGVyJyxcbiAgICAvL1x0XHR0ZW1wbGF0ZTogJ01vZHVsZXMvJChWaXJ0b0NvbW1lcmNlLkNvbnRlbnQpL1NjcmlwdHMvYmxhZGVzL3BhZ2VzL3BhZ2VzLWxpc3QudHBsLmh0bWwnXG4gICAgLy9cdH07XG4gICAgLy9cdGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XG4gICAgLy99O1xuXG59XSk7Iiwi77u/YW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLnN0b3JlQ01TV2lkZ2V0Q29udHJvbGxlcicsIFsnJHN0YXRlJywgJyRzY29wZScsICd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUuY29udGVudEFwaScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzdGF0ZSwgJHNjb3BlLCBjb250ZW50QXBpLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG4gICAgdmFyIGJsYWRlID0gJHNjb3BlLndpZGdldC5ibGFkZTtcblxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG4gICAgICAgICRzY29wZS5zdGF0aXN0aWNzID0ge1xuICAgICAgICAgICAgYWN0aXZlVGhlbWVOYW1lOiAnLi4uJyxcbiAgICAgICAgICAgIHRoZW1lc0NvdW50OiAnLi4uJyxcbiAgICAgICAgICAgIHBhZ2VzQ291bnQ6ICcuLi4nLFxuICAgICAgICAgICAgYmxvZ3NDb3VudDogJy4uLicsXG4gICAgICAgICAgICBsaXN0TGlua3NDb3VudDogJy4uLidcbiAgICAgICAgfTtcbiAgICAgICAgY29udGVudEFwaS5nZXRTdGF0aXN0aWNzKHsgc3RvcmVJZDogYmxhZGUuY3VycmVudEVudGl0eUlkIH0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkc2NvcGUuc3RhdGlzdGljcywgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICRzY29wZS5vcGVuQmxhZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzdGF0ZS5nbygnd29ya3NwYWNlLmNvbnRlbnQnLCB7IHN0b3JlSWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHlJZCB9KTtcbiAgICB9O1xuXG4gICAgaW5pdGlhbGl6ZSgpO1xufV0pO1xuIiwi77u/YW5ndWxhci5tb2R1bGUoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZScpXG4uY29udHJvbGxlcigndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlLnN0b3JlV2lkZ2V0Q29udHJvbGxlcicsIFsnJHN0YXRlJywgJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzdGF0ZSwgJHNjb3BlLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlKSB7XG4gICAvLyB2YXIgYmxhZGUgPSAkc2NvcGUud2lkZ2V0LmJsYWRlO1xuXG4gICAgLy8kc2NvcGUub3BlbkJsYWRlID0gZnVuY3Rpb24gKCkge1xuICAgIC8vXHQkc3RhdGUuZ28oJ3dvcmtzcGFjZS5jb250ZW50JywgeyBzdG9yZUlkOiBibGFkZS5jdXJyZW50RW50aXR5LmlkfSk7XG4gICAgLy99O1xuXG59XSk7XG4iLCLvu79hbmd1bGFyLm1vZHVsZSgndmlydG9Db21tZXJjZS5jb250ZW50TW9kdWxlJylcbi5jb250cm9sbGVyKCd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUudGhlbWVBY3RpdmVXaWRnZXRDb250cm9sbGVyJywgWyckc3RhdGUnLCAnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoJHN0YXRlLCAkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UpIHtcbiAgICAvL3ZhciBibGFkZSA9ICRzY29wZS53aWRnZXQuYmxhZGU7XG5cbiAgICAvLyRzY29wZS5vcGVuQmxhZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy9cdCRzdGF0ZS5nbygnd29ya3NwYWNlLmNvbnRlbnQnLCB7IHN0b3JlSWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHkuaWR9KTtcbiAgICAvL307XG5cbn1dKTtcbiIsIu+7v2FuZ3VsYXIubW9kdWxlKCd2aXJ0b0NvbW1lcmNlLmNvbnRlbnRNb2R1bGUnKVxuLmNvbnRyb2xsZXIoJ3ZpcnRvQ29tbWVyY2UuY29udGVudE1vZHVsZS50aGVtZXNXaWRnZXRDb250cm9sbGVyJywgWyckc3RhdGUnLCAnJHNjb3BlJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoJHN0YXRlLCAkc2NvcGUsIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UpIHtcbiAgICAvL3ZhciBibGFkZSA9ICRzY29wZS53aWRnZXQuYmxhZGU7XG5cbiAgICAvLyRzY29wZS5vcGVuQmxhZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy9cdCRzdGF0ZS5nbygnd29ya3NwYWNlLmNvbnRlbnQnLCB7IHN0b3JlSWQ6IGJsYWRlLmN1cnJlbnRFbnRpdHkuaWR9KTtcbiAgICAvL307XG5cbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=